!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("authBulbEditor",[],e):"object"==typeof exports?exports.authBulbEditor=e():t.authBulbEditor=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=276)}([function(t,e,n){"use strict";var o=n(25),r=n(436),i=n(87),s=n(115),a=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var o=this.operator,i=r.toSubscriber(t,e,n);if(o?o.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,o){var r;r=n.subscribe(function(e){if(r)try{t(e)}catch(t){o(t),r.unsubscribe()}else t(e)},o,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?t=o.root.Rx.config.Promise:o.root.Promise&&(t=o.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var o;e.subscribe(function(t){return o=t},function(t){return n(t)},function(){return t(o)})})},t.create=function(e){return new t(e)},t}();e.Observable=a},function(t,e,n){var o,r;(function(){function n(t){function e(e,n,o,r,i,s){for(;i>=0&&i<s;i+=t){var a=r?r[i]:i;o=n(o,e[a],a,e)}return o}return function(n,o,r,i){o=C(o,i,4);var s=!A(n)&&I.keys(n),a=(s||n).length,l=t>0?0:a-1;return arguments.length<3&&(r=n[s?s[l]:l],l+=t),e(n,o,r,s,l,a)}}function i(t){return function(e,n,o){n=M(n,o);for(var r=x(e),i=t>0?0:r-1;i>=0&&i<r;i+=t)if(n(e[i],i,e))return i;return-1}}function s(t,e,n){return function(o,r,i){var s=0,a=x(o);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return i=n(o,r),o[i]===r?i:-1;if(r!==r)return i=e(f.call(o,s,a),I.isNaN),i>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(o[i]===r)return i;return-1}}function a(t,e){var n=R.length,o=t.constructor,r=I.isFunction(o)&&o.prototype||p,i="constructor";for(I.has(t,i)&&!I.contains(e,i)&&e.push(i);n--;)(i=R[n])in t&&t[i]!==r[i]&&!I.contains(e,i)&&e.push(i)}var l=this,c=l._,u=Array.prototype,p=Object.prototype,d=Function.prototype,h=u.push,f=u.slice,g=p.toString,m=p.hasOwnProperty,_=Array.isArray,b=Object.keys,y=d.bind,v=Object.create,w=function(){},I=function(t){return t instanceof I?t:this instanceof I?void(this._wrapped=t):new I(t)};void 0!==t&&t.exports&&(e=t.exports=I),e._=I,I.VERSION="1.8.3";var C=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)};case 4:return function(n,o,r,i){return t.call(e,n,o,r,i)}}return function(){return t.apply(e,arguments)}},M=function(t,e,n){return null==t?I.identity:I.isFunction(t)?C(t,e,n):I.isObject(t)?I.matcher(t):I.property(t)};I.iteratee=function(t,e){return M(t,e,1/0)};var T=function(t,e){return function(n){var o=arguments.length;if(o<2||null==n)return n;for(var r=1;r<o;r++)for(var i=arguments[r],s=t(i),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=i[c])}return n}},k=function(t){if(!I.isObject(t))return{};if(v)return v(t);w.prototype=t;var e=new w;return w.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},N=Math.pow(2,53)-1,x=S("length"),A=function(t){var e=x(t);return"number"==typeof e&&e>=0&&e<=N};I.each=I.forEach=function(t,e,n){e=C(e,n);var o,r;if(A(t))for(o=0,r=t.length;o<r;o++)e(t[o],o,t);else{var i=I.keys(t);for(o=0,r=i.length;o<r;o++)e(t[i[o]],i[o],t)}return t},I.map=I.collect=function(t,e,n){e=M(e,n);for(var o=!A(t)&&I.keys(t),r=(o||t).length,i=Array(r),s=0;s<r;s++){var a=o?o[s]:s;i[s]=e(t[a],a,t)}return i},I.reduce=I.foldl=I.inject=n(1),I.reduceRight=I.foldr=n(-1),I.find=I.detect=function(t,e,n){var o;if(void 0!==(o=A(t)?I.findIndex(t,e,n):I.findKey(t,e,n))&&-1!==o)return t[o]},I.filter=I.select=function(t,e,n){var o=[];return e=M(e,n),I.each(t,function(t,n,r){e(t,n,r)&&o.push(t)}),o},I.reject=function(t,e,n){return I.filter(t,I.negate(M(e)),n)},I.every=I.all=function(t,e,n){e=M(e,n);for(var o=!A(t)&&I.keys(t),r=(o||t).length,i=0;i<r;i++){var s=o?o[i]:i;if(!e(t[s],s,t))return!1}return!0},I.some=I.any=function(t,e,n){e=M(e,n);for(var o=!A(t)&&I.keys(t),r=(o||t).length,i=0;i<r;i++){var s=o?o[i]:i;if(e(t[s],s,t))return!0}return!1},I.contains=I.includes=I.include=function(t,e,n,o){return A(t)||(t=I.values(t)),("number"!=typeof n||o)&&(n=0),I.indexOf(t,e,n)>=0},I.invoke=function(t,e){var n=f.call(arguments,2),o=I.isFunction(e);return I.map(t,function(t){var r=o?e:t[e];return null==r?r:r.apply(t,n)})},I.pluck=function(t,e){return I.map(t,I.property(e))},I.where=function(t,e){return I.filter(t,I.matcher(e))},I.findWhere=function(t,e){return I.find(t,I.matcher(e))},I.max=function(t,e,n){var o,r,i=-1/0,s=-1/0;if(null==e&&null!=t){t=A(t)?t:I.values(t);for(var a=0,l=t.length;a<l;a++)(o=t[a])>i&&(i=o)}else e=M(e,n),I.each(t,function(t,n,o){((r=e(t,n,o))>s||r===-1/0&&i===-1/0)&&(i=t,s=r)});return i},I.min=function(t,e,n){var o,r,i=1/0,s=1/0;if(null==e&&null!=t){t=A(t)?t:I.values(t);for(var a=0,l=t.length;a<l;a++)(o=t[a])<i&&(i=o)}else e=M(e,n),I.each(t,function(t,n,o){((r=e(t,n,o))<s||r===1/0&&i===1/0)&&(i=t,s=r)});return i},I.shuffle=function(t){for(var e,n=A(t)?t:I.values(t),o=n.length,r=Array(o),i=0;i<o;i++)e=I.random(0,i),e!==i&&(r[i]=r[e]),r[e]=n[i];return r},I.sample=function(t,e,n){return null==e||n?(A(t)||(t=I.values(t)),t[I.random(t.length-1)]):I.shuffle(t).slice(0,Math.max(0,e))},I.sortBy=function(t,e,n){return e=M(e,n),I.pluck(I.map(t,function(t,n,o){return{value:t,index:n,criteria:e(t,n,o)}}).sort(function(t,e){var n=t.criteria,o=e.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(n<o||void 0===o)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,n,o){var r={};return n=M(n,o),I.each(e,function(o,i){var s=n(o,i,e);t(r,o,s)}),r}};I.groupBy=E(function(t,e,n){I.has(t,n)?t[n].push(e):t[n]=[e]}),I.indexBy=E(function(t,e,n){t[n]=e}),I.countBy=E(function(t,e,n){I.has(t,n)?t[n]++:t[n]=1}),I.toArray=function(t){return t?I.isArray(t)?f.call(t):A(t)?I.map(t,I.identity):I.values(t):[]},I.size=function(t){return null==t?0:A(t)?t.length:I.keys(t).length},I.partition=function(t,e,n){e=M(e,n);var o=[],r=[];return I.each(t,function(t,n,i){(e(t,n,i)?o:r).push(t)}),[o,r]},I.first=I.head=I.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:I.initial(t,t.length-e)},I.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},I.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:I.rest(t,Math.max(0,t.length-e))},I.rest=I.tail=I.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},I.compact=function(t){return I.filter(t,I.identity)};var O=function(t,e,n,o){for(var r=[],i=0,s=o||0,a=x(t);s<a;s++){var l=t[s];if(A(l)&&(I.isArray(l)||I.isArguments(l))){e||(l=O(l,e,n));var c=0,u=l.length;for(r.length+=u;c<u;)r[i++]=l[c++]}else n||(r[i++]=l)}return r};I.flatten=function(t,e){return O(t,e,!1)},I.without=function(t){return I.difference(t,f.call(arguments,1))},I.uniq=I.unique=function(t,e,n,o){I.isBoolean(e)||(o=n,n=e,e=!1),null!=n&&(n=M(n,o));for(var r=[],i=[],s=0,a=x(t);s<a;s++){var l=t[s],c=n?n(l,s,t):l;e?(s&&i===c||r.push(l),i=c):n?I.contains(i,c)||(i.push(c),r.push(l)):I.contains(r,l)||r.push(l)}return r},I.union=function(){return I.uniq(O(arguments,!0,!0))},I.intersection=function(t){for(var e=[],n=arguments.length,o=0,r=x(t);o<r;o++){var i=t[o];if(!I.contains(e,i)){for(var s=1;s<n&&I.contains(arguments[s],i);s++);s===n&&e.push(i)}}return e},I.difference=function(t){var e=O(arguments,!0,!0,1);return I.filter(t,function(t){return!I.contains(e,t)})},I.zip=function(){return I.unzip(arguments)},I.unzip=function(t){for(var e=t&&I.max(t,x).length||0,n=Array(e),o=0;o<e;o++)n[o]=I.pluck(t,o);return n},I.object=function(t,e){for(var n={},o=0,r=x(t);o<r;o++)e?n[t[o]]=e[o]:n[t[o][0]]=t[o][1];return n},I.findIndex=i(1),I.findLastIndex=i(-1),I.sortedIndex=function(t,e,n,o){n=M(n,o,1);for(var r=n(e),i=0,s=x(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<r?i=a+1:s=a}return i},I.indexOf=s(1,I.findIndex,I.sortedIndex),I.lastIndexOf=s(-1,I.findLastIndex),I.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var o=Math.max(Math.ceil((e-t)/n),0),r=Array(o),i=0;i<o;i++,t+=n)r[i]=t;return r};var D=function(t,e,n,o,r){if(!(o instanceof e))return t.apply(n,r);var i=k(t.prototype),s=t.apply(i,r);return I.isObject(s)?s:i};I.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,f.call(arguments,1));if(!I.isFunction(t))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),o=function(){return D(t,o,e,this,n.concat(f.call(arguments)))};return o},I.partial=function(t){var e=f.call(arguments,1),n=function(){for(var o=0,r=e.length,i=Array(r),s=0;s<r;s++)i[s]=e[s]===I?arguments[o++]:e[s];for(;o<arguments.length;)i.push(arguments[o++]);return D(t,n,this,this,i)};return n},I.bindAll=function(t){var e,n,o=arguments.length;if(o<=1)throw new Error("bindAll must be passed function names");for(e=1;e<o;e++)n=arguments[e],t[n]=I.bind(t[n],t);return t},I.memoize=function(t,e){var n=function(o){var r=n.cache,i=""+(e?e.apply(this,arguments):o);return I.has(r,i)||(r[i]=t.apply(this,arguments)),r[i]};return n.cache={},n},I.delay=function(t,e){var n=f.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},I.defer=I.partial(I.delay,I,1),I.throttle=function(t,e,n){var o,r,i,s=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:I.now(),s=null,i=t.apply(o,r),s||(o=r=null)};return function(){var c=I.now();a||!1!==n.leading||(a=c);var u=e-(c-a);return o=this,r=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=c,i=t.apply(o,r),s||(o=r=null)):s||!1===n.trailing||(s=setTimeout(l,u)),i}},I.debounce=function(t,e,n){var o,r,i,s,a,l=function(){var c=I.now()-s;c<e&&c>=0?o=setTimeout(l,e-c):(o=null,n||(a=t.apply(i,r),o||(i=r=null)))};return function(){i=this,r=arguments,s=I.now();var c=n&&!o;return o||(o=setTimeout(l,e)),c&&(a=t.apply(i,r),i=r=null),a}},I.wrap=function(t,e){return I.partial(e,t)},I.negate=function(t){return function(){return!t.apply(this,arguments)}},I.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,o=t[e].apply(this,arguments);n--;)o=t[n].call(this,o);return o}},I.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},I.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},I.once=I.partial(I.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];I.keys=function(t){if(!I.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)I.has(t,n)&&e.push(n);return L&&a(t,e),e},I.allKeys=function(t){if(!I.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&a(t,e),e},I.values=function(t){for(var e=I.keys(t),n=e.length,o=Array(n),r=0;r<n;r++)o[r]=t[e[r]];return o},I.mapObject=function(t,e,n){e=M(e,n);for(var o,r=I.keys(t),i=r.length,s={},a=0;a<i;a++)o=r[a],s[o]=e(t[o],o,t);return s},I.pairs=function(t){for(var e=I.keys(t),n=e.length,o=Array(n),r=0;r<n;r++)o[r]=[e[r],t[e[r]]];return o},I.invert=function(t){for(var e={},n=I.keys(t),o=0,r=n.length;o<r;o++)e[t[n[o]]]=n[o];return e},I.functions=I.methods=function(t){var e=[];for(var n in t)I.isFunction(t[n])&&e.push(n);return e.sort()},I.extend=T(I.allKeys),I.extendOwn=I.assign=T(I.keys),I.findKey=function(t,e,n){e=M(e,n);for(var o,r=I.keys(t),i=0,s=r.length;i<s;i++)if(o=r[i],e(t[o],o,t))return o},I.pick=function(t,e,n){var o,r,i={},s=t;if(null==s)return i;I.isFunction(e)?(r=I.allKeys(s),o=C(e,n)):(r=O(arguments,!1,!1,1),o=function(t,e,n){return e in n},s=Object(s));for(var a=0,l=r.length;a<l;a++){var c=r[a],u=s[c];o(u,c,s)&&(i[c]=u)}return i},I.omit=function(t,e,n){if(I.isFunction(e))e=I.negate(e);else{var o=I.map(O(arguments,!1,!1,1),String);e=function(t,e){return!I.contains(o,e)}}return I.pick(t,e,n)},I.defaults=T(I.allKeys,!0),I.create=function(t,e){var n=k(t);return e&&I.extendOwn(n,e),n},I.clone=function(t){return I.isObject(t)?I.isArray(t)?t.slice():I.extend({},t):t},I.tap=function(t,e){return e(t),t},I.isMatch=function(t,e){var n=I.keys(e),o=n.length;if(null==t)return!o;for(var r=Object(t),i=0;i<o;i++){var s=n[i];if(e[s]!==r[s]||!(s in r))return!1}return!0};var B=function(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof I&&(t=t._wrapped),e instanceof I&&(e=e._wrapped);var r=g.call(t);if(r!==g.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var i="[object Array]"===r;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(I.isFunction(s)&&s instanceof s&&I.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],o=o||[];for(var l=n.length;l--;)if(n[l]===t)return o[l]===e;if(n.push(t),o.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!B(t[l],e[l],n,o))return!1}else{var c,u=I.keys(t);if(l=u.length,I.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!I.has(e,c)||!B(t[c],e[c],n,o))return!1}return n.pop(),o.pop(),!0};I.isEqual=function(t,e){return B(t,e)},I.isEmpty=function(t){return null==t||(A(t)&&(I.isArray(t)||I.isString(t)||I.isArguments(t))?0===t.length:0===I.keys(t).length)},I.isElement=function(t){return!(!t||1!==t.nodeType)},I.isArray=_||function(t){return"[object Array]"===g.call(t)},I.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},I.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){I["is"+t]=function(e){return g.call(e)==="[object "+t+"]"}}),I.isArguments(arguments)||(I.isArguments=function(t){return I.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(I.isFunction=function(t){return"function"==typeof t||!1}),I.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},I.isNaN=function(t){return I.isNumber(t)&&t!==+t},I.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===g.call(t)},I.isNull=function(t){return null===t},I.isUndefined=function(t){return void 0===t},I.has=function(t,e){return null!=t&&m.call(t,e)},I.noConflict=function(){return l._=c,this},I.identity=function(t){return t},I.constant=function(t){return function(){return t}},I.noop=function(){},I.property=S,I.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},I.matcher=I.matches=function(t){return t=I.extendOwn({},t),function(e){return I.isMatch(e,t)}},I.times=function(t,e,n){var o=Array(Math.max(0,t));e=C(e,n,1);for(var r=0;r<t;r++)o[r]=e(r);return o},I.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},I.now=Date.now||function(){return(new Date).getTime()};var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=I.invert(j),z=function(t){var e=function(e){return t[e]},n="(?:"+I.keys(t).join("|")+")",o=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,o.test(t)?t.replace(r,e):t}};I.escape=z(j),I.unescape=z(P),I.result=function(t,e,n){var o=null==t?void 0:t[e];return void 0===o&&(o=n),I.isFunction(o)?o.call(t):o};var H=0;I.uniqueId=function(t){var e=++H+"";return t?t+e:e},I.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+G[t]};I.template=function(t,e,n){!e&&n&&(e=n),e=I.defaults({},e,I.templateSettings);var o=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,i="__p+='";t.replace(o,function(e,n,o,s,a){return i+=t.slice(r,a).replace(U,V),r=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?i+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var s=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var a=function(t){return s.call(this,t,I)};return a.source="function("+(e.variable||"obj")+"){\n"+i+"}",a},I.chain=function(t){var e=I(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?I(e).chain():e};I.mixin=function(t){I.each(I.functions(t),function(e){var n=I[e]=t[e];I.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),Y(this,n.apply(I,t))}})},I.mixin(I),I.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];I.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}}),I.each(["concat","join","slice"],function(t){var e=u[t];I.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),I.prototype.value=function(){return this._wrapped},I.prototype.valueOf=I.prototype.toJSON=I.prototype.value,I.prototype.toString=function(){return""+this._wrapped},o=[],void 0!==(r=function(){return I}.apply(e,o))&&(t.exports=r)}).call(this)},function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./bulbeditor-model/",e(e.s=116)}([function(t,e,n){var o,r;(function(){function n(t){function e(e,n,o,r,i,s){for(;i>=0&&i<s;i+=t){var a=r?r[i]:i;o=n(o,e[a],a,e)}return o}return function(n,o,r,i){o=C(o,i,4);var s=!A(n)&&I.keys(n),a=(s||n).length,l=t>0?0:a-1;return arguments.length<3&&(r=n[s?s[l]:l],l+=t),e(n,o,r,s,l,a)}}function i(t){return function(e,n,o){n=M(n,o);for(var r=x(e),i=t>0?0:r-1;i>=0&&i<r;i+=t)if(n(e[i],i,e))return i;return-1}}function s(t,e,n){return function(o,r,i){var s=0,a=x(o);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return i=n(o,r),o[i]===r?i:-1;if(r!==r)return i=e(f.call(o,s,a),I.isNaN),i>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(o[i]===r)return i;return-1}}function a(t,e){var n=R.length,o=t.constructor,r=I.isFunction(o)&&o.prototype||p,i="constructor";for(I.has(t,i)&&!I.contains(e,i)&&e.push(i);n--;)(i=R[n])in t&&t[i]!==r[i]&&!I.contains(e,i)&&e.push(i)}var l=this,c=l._,u=Array.prototype,p=Object.prototype,d=Function.prototype,h=u.push,f=u.slice,g=p.toString,m=p.hasOwnProperty,_=Array.isArray,b=Object.keys,y=d.bind,v=Object.create,w=function(){},I=function(t){return t instanceof I?t:this instanceof I?void(this._wrapped=t):new I(t)};void 0!==t&&t.exports&&(e=t.exports=I),e._=I,I.VERSION="1.8.3";var C=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)};case 4:return function(n,o,r,i){return t.call(e,n,o,r,i)}}return function(){return t.apply(e,arguments)}},M=function(t,e,n){return null==t?I.identity:I.isFunction(t)?C(t,e,n):I.isObject(t)?I.matcher(t):I.property(t)};I.iteratee=function(t,e){return M(t,e,1/0)};var T=function(t,e){return function(n){var o=arguments.length;if(o<2||null==n)return n;for(var r=1;r<o;r++)for(var i=arguments[r],s=t(i),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=i[c])}return n}},k=function(t){if(!I.isObject(t))return{};if(v)return v(t);w.prototype=t;var e=new w;return w.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},N=Math.pow(2,53)-1,x=S("length"),A=function(t){var e=x(t);return"number"==typeof e&&e>=0&&e<=N};I.each=I.forEach=function(t,e,n){e=C(e,n);var o,r;if(A(t))for(o=0,r=t.length;o<r;o++)e(t[o],o,t);else{var i=I.keys(t);for(o=0,r=i.length;o<r;o++)e(t[i[o]],i[o],t)}return t},I.map=I.collect=function(t,e,n){e=M(e,n);for(var o=!A(t)&&I.keys(t),r=(o||t).length,i=Array(r),s=0;s<r;s++){var a=o?o[s]:s;i[s]=e(t[a],a,t)}return i},I.reduce=I.foldl=I.inject=n(1),I.reduceRight=I.foldr=n(-1),I.find=I.detect=function(t,e,n){var o;if(void 0!==(o=A(t)?I.findIndex(t,e,n):I.findKey(t,e,n))&&-1!==o)return t[o]},I.filter=I.select=function(t,e,n){var o=[];return e=M(e,n),I.each(t,function(t,n,r){e(t,n,r)&&o.push(t)}),o},I.reject=function(t,e,n){return I.filter(t,I.negate(M(e)),n)},I.every=I.all=function(t,e,n){e=M(e,n);for(var o=!A(t)&&I.keys(t),r=(o||t).length,i=0;i<r;i++){var s=o?o[i]:i;if(!e(t[s],s,t))return!1}return!0},I.some=I.any=function(t,e,n){e=M(e,n);for(var o=!A(t)&&I.keys(t),r=(o||t).length,i=0;i<r;i++){var s=o?o[i]:i;if(e(t[s],s,t))return!0}return!1},I.contains=I.includes=I.include=function(t,e,n,o){return A(t)||(t=I.values(t)),("number"!=typeof n||o)&&(n=0),I.indexOf(t,e,n)>=0},I.invoke=function(t,e){var n=f.call(arguments,2),o=I.isFunction(e);return I.map(t,function(t){var r=o?e:t[e];return null==r?r:r.apply(t,n)})},I.pluck=function(t,e){return I.map(t,I.property(e))},I.where=function(t,e){return I.filter(t,I.matcher(e))},I.findWhere=function(t,e){return I.find(t,I.matcher(e))},I.max=function(t,e,n){var o,r,i=-1/0,s=-1/0;if(null==e&&null!=t){t=A(t)?t:I.values(t);for(var a=0,l=t.length;a<l;a++)(o=t[a])>i&&(i=o)}else e=M(e,n),I.each(t,function(t,n,o){((r=e(t,n,o))>s||r===-1/0&&i===-1/0)&&(i=t,s=r)});return i},I.min=function(t,e,n){var o,r,i=1/0,s=1/0;if(null==e&&null!=t){t=A(t)?t:I.values(t);for(var a=0,l=t.length;a<l;a++)(o=t[a])<i&&(i=o)}else e=M(e,n),I.each(t,function(t,n,o){((r=e(t,n,o))<s||r===1/0&&i===1/0)&&(i=t,s=r)});return i},I.shuffle=function(t){for(var e,n=A(t)?t:I.values(t),o=n.length,r=Array(o),i=0;i<o;i++)e=I.random(0,i),e!==i&&(r[i]=r[e]),r[e]=n[i];return r},I.sample=function(t,e,n){return null==e||n?(A(t)||(t=I.values(t)),t[I.random(t.length-1)]):I.shuffle(t).slice(0,Math.max(0,e))},I.sortBy=function(t,e,n){return e=M(e,n),I.pluck(I.map(t,function(t,n,o){return{value:t,index:n,criteria:e(t,n,o)}}).sort(function(t,e){var n=t.criteria,o=e.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(n<o||void 0===o)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,n,o){var r={};return n=M(n,o),I.each(e,function(o,i){var s=n(o,i,e);t(r,o,s)}),r}};I.groupBy=E(function(t,e,n){I.has(t,n)?t[n].push(e):t[n]=[e]}),I.indexBy=E(function(t,e,n){t[n]=e}),I.countBy=E(function(t,e,n){I.has(t,n)?t[n]++:t[n]=1}),I.toArray=function(t){return t?I.isArray(t)?f.call(t):A(t)?I.map(t,I.identity):I.values(t):[]},I.size=function(t){return null==t?0:A(t)?t.length:I.keys(t).length},I.partition=function(t,e,n){e=M(e,n);var o=[],r=[];return I.each(t,function(t,n,i){(e(t,n,i)?o:r).push(t)}),[o,r]},I.first=I.head=I.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:I.initial(t,t.length-e)},I.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},I.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:I.rest(t,Math.max(0,t.length-e))},I.rest=I.tail=I.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},I.compact=function(t){return I.filter(t,I.identity)};var O=function(t,e,n,o){for(var r=[],i=0,s=o||0,a=x(t);s<a;s++){var l=t[s];if(A(l)&&(I.isArray(l)||I.isArguments(l))){e||(l=O(l,e,n));var c=0,u=l.length;for(r.length+=u;c<u;)r[i++]=l[c++]}else n||(r[i++]=l)}return r};I.flatten=function(t,e){return O(t,e,!1)},I.without=function(t){return I.difference(t,f.call(arguments,1))},I.uniq=I.unique=function(t,e,n,o){I.isBoolean(e)||(o=n,n=e,e=!1),null!=n&&(n=M(n,o));for(var r=[],i=[],s=0,a=x(t);s<a;s++){var l=t[s],c=n?n(l,s,t):l;e?(s&&i===c||r.push(l),i=c):n?I.contains(i,c)||(i.push(c),r.push(l)):I.contains(r,l)||r.push(l)}return r},I.union=function(){return I.uniq(O(arguments,!0,!0))},I.intersection=function(t){for(var e=[],n=arguments.length,o=0,r=x(t);o<r;o++){var i=t[o];if(!I.contains(e,i)){for(var s=1;s<n&&I.contains(arguments[s],i);s++);s===n&&e.push(i)}}return e},I.difference=function(t){var e=O(arguments,!0,!0,1);return I.filter(t,function(t){return!I.contains(e,t)})},I.zip=function(){return I.unzip(arguments)},I.unzip=function(t){for(var e=t&&I.max(t,x).length||0,n=Array(e),o=0;o<e;o++)n[o]=I.pluck(t,o);return n},I.object=function(t,e){for(var n={},o=0,r=x(t);o<r;o++)e?n[t[o]]=e[o]:n[t[o][0]]=t[o][1];return n},I.findIndex=i(1),I.findLastIndex=i(-1),I.sortedIndex=function(t,e,n,o){n=M(n,o,1);for(var r=n(e),i=0,s=x(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<r?i=a+1:s=a}return i},I.indexOf=s(1,I.findIndex,I.sortedIndex),I.lastIndexOf=s(-1,I.findLastIndex),I.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var o=Math.max(Math.ceil((e-t)/n),0),r=Array(o),i=0;i<o;i++,t+=n)r[i]=t;return r};var D=function(t,e,n,o,r){if(!(o instanceof e))return t.apply(n,r);var i=k(t.prototype),s=t.apply(i,r);return I.isObject(s)?s:i};I.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,f.call(arguments,1));if(!I.isFunction(t))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),o=function(){return D(t,o,e,this,n.concat(f.call(arguments)))};return o},I.partial=function(t){var e=f.call(arguments,1),n=function(){for(var o=0,r=e.length,i=Array(r),s=0;s<r;s++)i[s]=e[s]===I?arguments[o++]:e[s];for(;o<arguments.length;)i.push(arguments[o++]);return D(t,n,this,this,i)};return n},I.bindAll=function(t){var e,n,o=arguments.length;if(o<=1)throw new Error("bindAll must be passed function names");for(e=1;e<o;e++)n=arguments[e],t[n]=I.bind(t[n],t);return t},I.memoize=function(t,e){var n=function(o){var r=n.cache,i=""+(e?e.apply(this,arguments):o);return I.has(r,i)||(r[i]=t.apply(this,arguments)),r[i]};return n.cache={},n},I.delay=function(t,e){var n=f.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},I.defer=I.partial(I.delay,I,1),I.throttle=function(t,e,n){var o,r,i,s=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:I.now(),s=null,i=t.apply(o,r),s||(o=r=null)};return function(){var c=I.now();a||!1!==n.leading||(a=c);var u=e-(c-a);return o=this,r=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=c,i=t.apply(o,r),s||(o=r=null)):s||!1===n.trailing||(s=setTimeout(l,u)),i}},I.debounce=function(t,e,n){var o,r,i,s,a,l=function(){var c=I.now()-s;c<e&&c>=0?o=setTimeout(l,e-c):(o=null,n||(a=t.apply(i,r),o||(i=r=null)))};return function(){i=this,r=arguments,s=I.now();var c=n&&!o;return o||(o=setTimeout(l,e)),c&&(a=t.apply(i,r),i=r=null),a}},I.wrap=function(t,e){return I.partial(e,t)},I.negate=function(t){return function(){return!t.apply(this,arguments)}},I.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,o=t[e].apply(this,arguments);n--;)o=t[n].call(this,o);return o}},I.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},I.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},I.once=I.partial(I.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];I.keys=function(t){if(!I.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)I.has(t,n)&&e.push(n);return L&&a(t,e),e},I.allKeys=function(t){if(!I.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&a(t,e),e},I.values=function(t){for(var e=I.keys(t),n=e.length,o=Array(n),r=0;r<n;r++)o[r]=t[e[r]];return o},I.mapObject=function(t,e,n){e=M(e,n);for(var o,r=I.keys(t),i=r.length,s={},a=0;a<i;a++)o=r[a],s[o]=e(t[o],o,t);return s},I.pairs=function(t){for(var e=I.keys(t),n=e.length,o=Array(n),r=0;r<n;r++)o[r]=[e[r],t[e[r]]];return o},I.invert=function(t){for(var e={},n=I.keys(t),o=0,r=n.length;o<r;o++)e[t[n[o]]]=n[o];return e},I.functions=I.methods=function(t){var e=[];for(var n in t)I.isFunction(t[n])&&e.push(n);return e.sort()},I.extend=T(I.allKeys),I.extendOwn=I.assign=T(I.keys),I.findKey=function(t,e,n){e=M(e,n);for(var o,r=I.keys(t),i=0,s=r.length;i<s;i++)if(o=r[i],e(t[o],o,t))return o},I.pick=function(t,e,n){var o,r,i={},s=t;if(null==s)return i;I.isFunction(e)?(r=I.allKeys(s),o=C(e,n)):(r=O(arguments,!1,!1,1),o=function(t,e,n){return e in n},s=Object(s));for(var a=0,l=r.length;a<l;a++){var c=r[a],u=s[c];o(u,c,s)&&(i[c]=u)}return i},I.omit=function(t,e,n){if(I.isFunction(e))e=I.negate(e);else{var o=I.map(O(arguments,!1,!1,1),String);e=function(t,e){return!I.contains(o,e)}}return I.pick(t,e,n)},I.defaults=T(I.allKeys,!0),I.create=function(t,e){var n=k(t);return e&&I.extendOwn(n,e),n},I.clone=function(t){return I.isObject(t)?I.isArray(t)?t.slice():I.extend({},t):t},I.tap=function(t,e){return e(t),t},I.isMatch=function(t,e){var n=I.keys(e),o=n.length;if(null==t)return!o;for(var r=Object(t),i=0;i<o;i++){var s=n[i];if(e[s]!==r[s]||!(s in r))return!1}return!0};var B=function(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof I&&(t=t._wrapped),e instanceof I&&(e=e._wrapped);var r=g.call(t);if(r!==g.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var i="[object Array]"===r;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(I.isFunction(s)&&s instanceof s&&I.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],o=o||[];for(var l=n.length;l--;)if(n[l]===t)return o[l]===e;if(n.push(t),o.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!B(t[l],e[l],n,o))return!1}else{var c,u=I.keys(t);if(l=u.length,I.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!I.has(e,c)||!B(t[c],e[c],n,o))return!1}return n.pop(),o.pop(),!0};I.isEqual=function(t,e){return B(t,e)},I.isEmpty=function(t){return null==t||(A(t)&&(I.isArray(t)||I.isString(t)||I.isArguments(t))?0===t.length:0===I.keys(t).length)},I.isElement=function(t){return!(!t||1!==t.nodeType)},I.isArray=_||function(t){return"[object Array]"===g.call(t)},I.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},I.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){I["is"+t]=function(e){return g.call(e)==="[object "+t+"]"}}),I.isArguments(arguments)||(I.isArguments=function(t){return I.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(I.isFunction=function(t){return"function"==typeof t||!1}),I.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},I.isNaN=function(t){return I.isNumber(t)&&t!==+t},I.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===g.call(t)},I.isNull=function(t){return null===t},I.isUndefined=function(t){return void 0===t},I.has=function(t,e){return null!=t&&m.call(t,e)},I.noConflict=function(){return l._=c,this},I.identity=function(t){return t},I.constant=function(t){return function(){return t}},I.noop=function(){},I.property=S,I.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},I.matcher=I.matches=function(t){return t=I.extendOwn({},t),function(e){return I.isMatch(e,t)}},I.times=function(t,e,n){var o=Array(Math.max(0,t));e=C(e,n,1);for(var r=0;r<t;r++)o[r]=e(r);return o},I.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},I.now=Date.now||function(){return(new Date).getTime()};var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=I.invert(j),z=function(t){var e=function(e){return t[e]},n="(?:"+I.keys(t).join("|")+")",o=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,o.test(t)?t.replace(r,e):t}};I.escape=z(j),I.unescape=z(P),I.result=function(t,e,n){var o=null==t?void 0:t[e];return void 0===o&&(o=n),I.isFunction(o)?o.call(t):o};var H=0;I.uniqueId=function(t){var e=++H+"";return t?t+e:e},I.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+G[t]};I.template=function(t,e,n){!e&&n&&(e=n),e=I.defaults({},e,I.templateSettings);var o=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,i="__p+='";t.replace(o,function(e,n,o,s,a){return i+=t.slice(r,a).replace(U,V),r=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?i+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var s=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var a=function(t){return s.call(this,t,I)};return a.source="function("+(e.variable||"obj")+"){\n"+i+"}",a},I.chain=function(t){var e=I(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?I(e).chain():e};I.mixin=function(t){I.each(I.functions(t),function(e){var n=I[e]=t[e];I.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),Y(this,n.apply(I,t))}})},I.mixin(I),I.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];I.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}}),I.each(["concat","join","slice"],function(t){var e=u[t];I.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),I.prototype.value=function(){return this._wrapped},I.prototype.valueOf=I.prototype.toJSON=I.prototype.value,I.prototype.toString=function(){return""+this._wrapped},o=[],void 0!==(r=function(){return I}.apply(e,o))&&(t.exports=r)}).call(this)},function(t,e,n){(function(o){var r;void 0!==(r=function(){for(var t,e=this&&this.DEBUG?this:window,n=e.DEBUG||null!=e.logLevel,o=e.console,r={},i=function(){},s="log warn error time timeEnd profile profileEnd".split(" "),a=s.length;--a>=0;)t=s[a],n&&o[t]?r[t]=o[t].bind(o):r[t]=i;return n&&e.alert?r.debugAlert=function(t){e.alert(t)}:r.debugAlert=r.error,r.DEBUG=n,r}.call(e,n,e,t))&&(t.exports=r)}).call(e,n(53))},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(){function t(){}return t.getAllBlockTypes=function(){return[t.ATTACHMENT,t.BLOCK,t.CATALOGUE,t.HANDWRITE,t.HEADING,t.HR,t.IMAGE,t.LIST_ITEM,t.PARAGRAPH,t.TABLE,t.TODO,t.QUOTE,t.UNKNOWN,t.MACRO]},t.getType=function(t){if(t)return t.getType()},t.isParagraph=function(e){return t.getType(e)===t.PARAGRAPH},t.isParagraphCluster=function(e){return this.isParagraphClusterType(t.getType(e))},t.isParagraphClusterType=function(e){return e===t.PARAGRAPH||e===t.LIST_ITEM||e===t.HEADING||e===t.CATALOGUE||e===t.TODO||e===t.QUOTE},t.isListItem=function(e){return t.getType(e)===t.LIST_ITEM},t.isAttachment=function(e){return t.getType(e)===t.ATTACHMENT},t.isHeaderFooter=function(t){return this.getType(t)===this.HEADER_FOOTER},t.isTable=function(e){return t.getType(e)===t.TABLE},t.isImage=function(e){return t.getType(e)===t.IMAGE},t.isHr=function(e){return t.getType(e)===t.HR},t.isUnknown=function(e){return this.getType(e)===t.UNKNOWN},t.isHeading=function(e){return t.getType(e)===t.HEADING},t.isCatalogue=function(e){return t.getType(e)===t.CATALOGUE},t.isTodo=function(e){return t.getType(e)===t.TODO},t.isQuote=function(e){return t.getType(e)===t.QUOTE},t.isTextBlock=function(e){return t.isParagraphCluster(e)},t.isTextOrTableBlock=function(e){return t.isTextBlock(e)||t.isTable(e)},t.isHandWrite=function(e){return t.getType(e)===t.HANDWRITE},t.isMacro=function(e){return t.getType(e)===t.MACRO},t.ATTACHMENT="attachment",t.BLOCK="block",t.CATALOGUE="catalogue",t.HANDWRITE="handwrite",t.HEADER_FOOTER="header-footer",t.HEADING="heading",t.HR="horizontal-line",t.IMAGE="image",t.LIST_ITEM="list-item",t.PARAGRAPH="paragraph",t.QUOTE="quote",t.TABLE="table",t.TODO="todo",t.UNKNOWN="unknown",t.MACRO="macro",t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(27),n(11),n(57),n(5),n(1),n(83),n(54),n(18),n(85),n(86)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t,n){return new e({keepLineBreak:!1!==n,text:t})},e.createBlank=function(t){return e.create("",t)},e.fromCollabJSON=function(t){if(!t||!t.text)return e.createBlank(!0);var o=e.create(t.text,t.keepLineBreak);return n.each(t.inlineStyles,function(t,e){n.each(t,function(t){p.isSupport(e)?o.setStyle(t.from,t.to,e,t.value):o.setUnknownStyle(t.from,t.to,e,t.value)})}),o},e.fromJSON=function(t){if(t&&t.isRichText&&t.data){var o,r=[];return n.each(t.data,function(t){var e=c.fromJSON(t);e&&r.push(e)}),o=new e({keepLineBreak:t.keepLineBreak,text:""}),o.appendRichChars(r),o}},e.fromXml=function(t){var n=$(t),o=new e({text:n.find("text").text()});return n.find("inline-styles").children().each(function(t,e){var n,r,i=e.nodeName.toLowerCase(),s=$(e),l=parseInt(s.find("from").text(),10),c=parseInt(s.find("to").text(),10),d=s.find("value");0!==d.length&&(n=d.text(),p.isSupport(i)?o.setStyle(l,c,i,n):(r=s.attr(a.COMPAT),u.isCompatible(r)&&(h.add(i),n=r+"|"+n,o.setUnknownStyle(l,c,i,n))))}),o},e.CLONE_DATA=function(t){var e,n=t.length,o=new Array(n);for(e=0;e<n;++e)o[e]=t[e].clone();return o},e.EXTRACT_UNKNOWN_VALUE=function(t){var e=t.indexOf("|");return-1===e?{value:t}:{compat:t.substring(0,e),value:t.substring(e+1)}},e.prototype.append=function(t){t&&t.getClonedData||l.warn("no richText"),this.appendRichChars(t.getClonedData())},e.prototype.appendRichChars=function(t){if(!t||0===t.length)return void l.warn("richChars is not valid",t);this.isKeepLineBreak()||(t=this._removeLineBreak(t)),this.richTextProps.data=this.richTextProps.data.concat(t)},e.prototype.clone=function(){var t=new e({keepLineBreak:this.isKeepLineBreak(),text:""});return t.appendRichChars(this.getClonedData()),t},e.prototype.getClonedData=function(){return e.CLONE_DATA(this.richTextProps.data)},e.prototype.getCommonStyle=function(t,e,n,o){var r,i,s=this.richTextProps.data,c=null;if(this.isEmpty())return p.getDefault(n);if(t<0)return void l.warn("start should not be less than 0",t);if(t>e)return void l.warn("start should not greater than end",t,e);if(e>s.length)return void l.warn("end should not geater than data.length",e,s);if(t===e)0===t&&s[0]?c=s[0].getStyle(n):s[t-1]&&(c=s[t-1].getStyle(n));else for(r=t;r<e;++r)if(s&&s[r]){if(i=s[r].getStyle(n),null===c)c=i;else if(c!==i)return o?null:a.INTERM}else l.warn("unexpected undefine in data",s);return!o||c!==a.INTERM&&c!==p.getDefault(n)?c:null},e.prototype.getCommonStyles=function(t,e,o){var r=this,i={},s=p.getAllConfig();return n.each(s,function(n,s){var a=r.getCommonStyle(t,e,s,o);null!=a&&(i[s]=a)}),i},e.prototype.getLength=function(t){var e,n=this.richTextProps.data,o=n.length;if(t)for(e=0;e<n.length;e++)$.trim(n[e].toString())||o--;return o},e.prototype.getReadOnlyData=function(){return this.richTextProps.data},e.prototype.getReadOnlyStylesList=function(t,e){var o=this.richTextProps.data,r=[],i=p.getAllConfig();return t=!1!==t,n.each(o,function(o){var s={};n.each(i,function(n,r){var i=o.getStyle(r,t,e);(t||!t&&null!=i)&&(s[r]=i)}),r.push(s)}),r},e.prototype.getStyle=function(t,e,n){var r,i,s,a=this.richTextProps.data;if(o(t>=0),o(t<=e),o(e<=a.length),void 0===t||t<0||void 0===e||t>e||e>a.length)return l.error("unexpected params:",t,e,a.length),null;for(s=new Array(e-t),r=t;r<e;++r)i=a[r].getStyle(n),s[r-t]=i;return s},e.prototype.getStyleRanges=function(t,e){if(t){if(e=!0===e,p.isSupport(t))e=!1;else if(!e)return;var o,r,i,s,a=this.richTextProps.data,l=a.length,c=[],u=!1;for(o=0;o<l;o++)r=a[o],i=e?r.getUnknownStyle(t):r.getStyle(t,!1),i?(s=n.last(c),!u&&s&&s.value===i?s.to=o+1:c.push({from:o,to:o+1,value:i}),u=!1):u=!0;return c}},e.prototype.getStylesAtIndex=function(t){var e=this.richTextProps.data,n=e.length;return t<0||t>=n?void l.warn("invlid index of the text",t,e):e[t].getStyles()},e.prototype.indexOf=function(t,e,n){var o,r,i,s,a,l=t.getReadOnlyData(),c=l.length,u=this.getReadOnlyData(),p=u.length;if(c>p)return-1;for(r=e;r<p;r++){for(o=!0,i=0;i<c;i++){if(s=u[r+i],a=l[i],!s){o=!1;break}if((!0!==n||s.char.toLowerCase()!==a.char.toLowerCase())&&s.char!==a.char){o=!1;break}}if(o)return r}return-1},e.prototype.insert=function(t,e){if(t&&t.getClonedData){var n=this.richTextProps.data,o=n.splice(e),r=t.getClonedData();!1===this.isKeepLineBreak()&&!0===t.isKeepLineBreak()&&(r=this._removeLineBreak(r)),this.richTextProps.data=n.concat(r,o)}},e.prototype.isEmpty=function(){return this.getLength(!1)<=0},e.prototype.isKeepLineBreak=function(){return this.richTextProps.keepLineBreak},e.prototype.removeLineBreak=function(){this.richTextProps.data=this._removeLineBreak(this.richTextProps.data)},e.prototype.removeStyles=function(){var t,e=this.richTextProps.data,n=e.length;for(t=0;t<n;++t)e[t].removeStyles()},e.prototype.setKeepLineBreak=function(t){(t=!!t)!==this.richTextProps.keepLineBreak&&(this.richTextProps.keepLineBreak=t,!1===this.richTextProps.keepLineBreak&&this.removeLineBreak())},e.prototype.setStyle=function(t,e,o,r){if(o&&null!=r){var i,s=this.richTextProps.data,a=n.isArray(r);for(e=Math.min(e,s.length),i=t;i<e;++i)s[i].setStyle(o,a?r[i-t]:r)}},e.prototype.setStyles=function(t,e,o){var r=this;o&&n.each(o,function(n,o){r.setStyle(t,e,o,n)})},e.prototype.setUnknownStyle=function(t,e,o,r){var i,s=this.richTextProps.data,a=n.isArray(r);for(e=Math.min(e,s.length),i=t;i<e;++i)s[i].setUnknownStyle(o,a?r[i-t]:r)},e.prototype.slice=function(t,n,o){var r=this.richTextProps.data.slice(t,n),i=new e({});return!1!==o&&(r=e.CLONE_DATA(r)),i.appendRichChars(r),i},e.prototype.toCollabJSON=function(){return this.toJSON(!0)},e.prototype.toJSON=function(t){var e;return!0===t?this._toSimplifyJSON():(e=n.map(this.richTextProps.data,function(t){return t.toJSON()}),{data:e,isRichText:!0,keepLineBreak:this.isKeepLineBreak()})},e.prototype.toString=function(){return this.richTextProps.data.join("")},e.prototype.toXml=function(t){var e,o=this,r=t.createElement("inline-styles"),i=p.getAllConfig();return n.each(i,function(e,n){var i=o.getStyleRanges(n,!1);o._handleStyleRangesForXML(t,r,n,i,!1)}),e=h.get(),n.each(e,function(e){var n=o.getStyleRanges(e,!0);o._handleStyleRangesForXML(t,r,e,n,!0)}),r},e.prototype.initialize=function(t){var e=this;this.richTextProps=n.clone(t),this.richTextProps=n.defaults(this.richTextProps||{},{keepLineBreak:!0,text:""}),this.richTextProps.data=[],this.richTextProps.text=s.clear(this.richTextProps.text),this.richTextProps.keepLineBreak||(this.richTextProps.text=this.richTextProps.text.replace(/[\r\n]/g,"")),n.each(d(this.richTextProps.text),function(t){e.richTextProps.data.push(new c(t))})},e.prototype._handleStyleRangesForXML=function(t,o,r,i,s){i&&i.length&&n.each(i,function(n){if(n&&n.value){var i,l,c,u=t.createElement(r),p=t.createElement("from"),d=t.createElement("to"),h=t.createElement("value");p.appendChild(t.createTextNode(n.from)),u.appendChild(p),d.appendChild(t.createTextNode(n.to)),u.appendChild(d),s?(i=e.EXTRACT_UNKNOWN_VALUE(n.value),c=i.compat,c&&u.setAttribute(a.COMPAT,c),l=i.value):l=n.value,h.appendChild(t.createTextNode(l)),u.appendChild(h),o.appendChild(u)}})},e.prototype._handleStyleRangesForJSON=function(t,o,r,i){r&&r.length&&n.each(r,function(n){if(n&&n.value){var r,s,a=t[o];a||(a=t[o]=[]),i?(r=e.EXTRACT_UNKNOWN_VALUE(n.value),s=r.value):s=n.value,a.push({from:n.from,to:n.to,value:s})}})},e.prototype._removeLineBreak=function(t){return t&&0!==t.length?t=n.filter(t,function(t){return!1===t.isLineBreak()}):[]},e.prototype._toSimplifyJSON=function(){var t,e,o=this,r={},i=p.getAllConfig();return n.each(i,function(t,e){var n=o.getStyleRanges(e,!1);o._handleStyleRangesForJSON(r,e,n,!1)}),t=h.get(),n.each(t,function(t){var e=o.getStyleRanges(t,!0);o._handleStyleRangesForJSON(r,t,e,!0)}),e={keepLineBreak:o.isKeepLineBreak(),text:o.toString()},n.isEmpty(r)||(e.inlineStyles=r),e},e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(6),n(15),n(11),n(1),n(26)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromXml=function(t){throw new Error("The fromXml should be implemented by subclass!")},e.parseResourceList=function(t){var e=[];return $(t).find(">resource-list>resource-mono>res-id").each(function(t,n){var o=$(n).text();(o=$.trim(o))&&e.push(o)}),e},e.prototype.isSupportedBlockStyle=function(t){return l.isSupport(t,this.type)},e.prototype.isEmptyContent=function(){return!1},e.prototype.isEmpty=function(){return!1},e.prototype.setBlockStyle=function(t,e){var o=this,r=l.getConfig(t,o.type);r&&("Enum"===r.type?r.possible[e]||(e=r.default):"Number"!==r.type||n.isNumber(e)?"Boolean"!==r.type||n.isBoolean(e)?n["is"+r.type]&&(n["is"+r.type](e)||(e=e.default)):e="true"===e:(e=null===e||""===e?NaN:Number(e),!isNaN(e)&&e||(e=r.default)),e=e||r.default,o.styles[t]=e,o.trigger("style-change",t,e))},e.prototype.setBlockStyles=function(t){var e=this;t&&n.each(t,function(t,n){e.setBlockStyle(n,t)})},e.prototype.getBlockStyles=function(){return n.clone(this.styles)},e.prototype.getBlockStyle=function(t,e){var n=this,o=l.getConfig(t,n.type);return o?!0===e?n.styles[t]:n.styles[t]||o.default:null},e.prototype.getDefaultBlockStyles=function(){return l.getDefaultsOfBlock(this.type)},e.prototype.removeBlockStyles=function(){var t=this;t.styles={},t.trigger("styles-reset")},e.prototype.removeAllStyles=function(){this.removeBlockStyles()},e.prototype.toXml=function(t){var n,o,r,i=this,s=i.getId();return null==s?void a.debugAlert("The block has NO id",i):(n=t.createElement(i.xmlNodeName),o=t.createElement(e.TAG_ID_NAME),r=t.createTextNode(s),o.appendChild(r),n.appendChild(o),n)},e.prototype.getType=function(){return this.type},e.prototype.parseIdFromXml=function(t){var n,o,i=this;n=i._getChildByTagName(t,e.TAG_ID_NAME),n&&(o=n.textContent),o||r.IS_ANDROID||(n=i._getChildByTagName(t,e.LEGACY_TAG_ID_NAME))&&(o=n.textContent),null==o?i.validForCollab=!1:i.blockId=o},e.prototype.toJSON=function(){var t=this;return{blockId:t.getId(),styles:t.getBlockStyles(),type:t.type}},e.prototype.setResourceIds=function(t){var e=this;t&&t.length&&(e.resourceIds=t)},e.prototype.getResourceIds=function(){return this.resourceIds},e.prototype.getExtraInfo=function(t){var e;return this.trigger("get-extra-info",t,function(t){e=t}),e},e.prototype.getDefaultSetFont=function(){var t;return this.trigger("get-default-set-font",function(e){t=e}),t},e.prototype.highlight=function(t,e,n){this.trigger("high-light",t,e,n)},e.prototype.getId=function(){var t=this,e=t.blockId;return null==e&&a.debugAlert("The blockId should NOT be null"),e},e.prototype.setId=function(t){var e=this;if(null==t)return void a.debugAlert("The param blockId should NOT be null");e.blockId=t},e.prototype.setLocked=function(t,e){var n=this;n.locked===t&&e&&!e.lockUpdated||(n.locked=t,n.trigger("locked-change",e))},e.prototype.isLocked=function(){return this.locked},e.prototype.getUnknownTree=function(){return this.unknownTree},e.prototype.isValidForCollab=function(){return this.validForCollab},e.prototype.resetLockState=function(){this.locked=!1},e.prototype.toCollabJSON=function(){return this.toJSON()},e.prototype.toBulbJSON=function(){return this.toCollabJSON()},e.prototype.setReadOnly=function(t){this.readOnly=!!t},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.initialize=function(t){var e=this;t=t||{},e.styles={},e.validForCollab=!0,null==e.blockId&&(null!=t.blockId||null!=t.id?e.blockId=t.blockId||t.id:e.blockId=o.newGUID()),e.unknownTree={}},e.prototype._getChildByTagName=function(t,e){if(t)for(var n=t.childNodes[0];n;){if(n.nodeName&&n.nodeName===e)return n;n=n.nextSibling}},e.TAG_ID_NAME="coId",e.LEGACY_TAG_ID_NAME="id",e}(s)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return{COMPAT:"compat",DEFAULT_BACKGROUND:"NoBackground",INTERM:"interm",INDENT_WIDTH:28,MAX_LIST_ITEM_LEVEL:9,LINE_BREAK:/Windows/.test(window.navigator.userAgent)?"\r\n":"\n",IS_MAC:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),QUOTE_PADDING:"0 10px 0 8.5px",QUOTE_BORDER_LEFT:"1.5px solid #e8e8e8",QUOTE_MARGIN:"0 5px",PLATFORM_LINE_HEIGHT:1.75,PAGE_TYPE_A4:"A4",PAGE_TYPE_B5:"B5",PAGE_TYPE_NONE:"NONE",PAGE_TYPE_TEST:"TEST",PAGE_HEIGHT_A4:1123,PAGE_HEIGHT_B5:945,PAGE_HEIGHT_NONE:Number.MAX_VALUE,PAGE_HEIGHT_TEST:100,PAGE_WIDTH_A4:792,PAGE_WIDTH_B5:663,PAGE_WIDTH_NONE:Number.MAX_VALUE,PAGE_WIDTH_TEST:792,PAGE_SPLIT_BLANK_HEIGHT:70,PAGE_SPLIT_MIDDLE_HEIGHT:10,TOLERABLE_HEIGHT_CHANGE:3,PAGE_CLASS_A4:"bulb__page-A4",PAGE_CLASS_B5:"bulb__page-B5",PAGE_CLASS_TEST:"bulb__page-TEST",WSClientStatusCode:{Connecting:0,Open:1,Closing:2,Closed:3,Ready:5,Disabled:10,Intializing:11},WSEVENTID_HOST_CLOSE:4500,MAX_MESSAGE_SIZE:5e3,MAX_UNDO_STACK_SIZE:20,MAX_CMD_DELAY_MILLIS:4e3,MAX_INIT_DELAY_MILLIS:2e3,MAX_LOCAL_CMD_COUNT_PER_SEC:20,REGULAR_CMD_SENT_MILLIS:2e3,LATENCY_TO_SHOW_SET_CONTENT_PROGRESS:2e3,CJSON_ACTION:"action",CJSON_COMMANDID:"cmdId",CJSON_COMMANDOWNER:"cmdOwner",CJSON_COLLABCOMMANDS:"collabCmds",CJSON_COLLAB_NOTE_READY:"collabNoteReady",CJSON_COLLAB_VERSION:"collabVersion",CJSON_DATA_CMD_ERROR:"dataCmdError",CJSON_ENDVERSION:"endVersion",CJSON_ERROR_TO_CLOSE:"errToClose",CJSON_FINALVERSION:"finalVersion",CJSON_INITIALIZE_COLLABSTARTED:"collabStarted",CJSON_INITIALIZE_DONE:"done",CJSON_INITIALIZE_RESULT:"initResult",CJSON_IS_HISTORY_SAVE:"isHistorySave",CJSON_IS_SERVER_CMD:"isServerCmd",CJSON_LOCKCOLOR:"lockColor",CJSON_LOCK_BLOCK_ID:"lockedBlkId",CJSON_MODIFIERS:"modifiers",CJSON_NICKNAME:"nickname",CJSON_NONDATACOMMANDS:"nondataCmds",CJSON_NOTEVERSIONUPDATE:"versionUpdate",CJSON_PORTRAIT:"portraitUrl",CJSON_READONLY:"readOnly",CJSON_SESSIONID:"sessionId",CJSON_SESSIONPROPERTY:"sessionProp",CJSON_STARTVERSION:"startVersion",NONDATACMD_BLOCKSELECTION:"nb_BlkSelection",NONDATACMD_CLINTPONG:"nb_clientPong",NONDATACMD_COLLABCLOSE:"nb_CollabClose",NONDATACMD_COLLABINFO:"nb_CollabInfo",NONDATACMD_DATACMDFAILED:"nb_dataCmdFailed",NONDATACMD_GETMODIFIERS:"nb_getModifiers",NONDATACMD_NOTESAVE:"nb_noteSave",NONDATACMD_LOCKRELEASE:"nb_lockRelease",NONDATACMD_SESSIONINITIALIZED:"nb_sessionInitialized",NONDATACMD_SEVERPING:"nb_serverPing",OPTIONS_COLLABID:"collabId",OPTIONS_NICKNAME:"nickname",OPTIONS_NOTEVERSION:"noteVersion",OPTIONS_PORTRAIT:"portraitUrl",OPTIONS_SESSIONTYPE:"sessionType",OPTIONS_SESSIONID:"sessionId",OPTIONS_USERID:"userId",OPTIONS_BUILDVERSION:"buildVersion",OPTIONS_RECONNECT:"reconn",ERRORID_FAILED_RECEIVE_COLLAB_CMD:4001,ERRORID_FAILED_SEND_LOCAL_CMD:4002,ERRORID_COLLAB_ENGINE_NULL:4003,CONNECTION_FAILED_SEND:"",CONNECTION_NO_CONNECTED:"",CONNECTION_REFUSED:"",CONNECTION_SERVER_CLOSED:"",ERROR_CODE:"",ERROR_CONFLICT_EXECUTION:"",ERROR_FAILED_SEND_LOCAL_CMD:"",ERROR_FAILED_RECEIVE_COLLAB_CMD:"",ERROR_EXCEPTION:"",ERROR_REASON:"",ERROR_UNMATCHED_VERSION:"/",INVALIDACTION_BLANK_NOTE:"",INVALIDACTION_BLOCKS_DIRTY:"",INVALIDACTION_COLLAB_NOT_READY:"",INVALIDACTION_EDIT_READ_ONLY:"",INVALIDACTION_EDIT_NOT_READY:"",INVALIDACTION_FINALVERSION_NOTREADY:"",INVALIDACTION_EMPTY_CMDJSON:"",INVALIDACTION_EMPTY_LOCALCMD:"",INVALIDACTION_INVALID_LOCALCMD:"",INVALIDACTION_FAILED_COLLABCMD:"",INVALIDACTION_FAILED_LOCALCMD:"",INVALIDACTION_INVALID_CMD_VERSION:"",INVALIDACTION_INVALID_RANGE:"",INVALIDACTION_TOO_MANY_CMD:"",INVALIDACTION_TOO_LARGE_MESSAGE:"",INVALIDACTION_UNSUPPORTED_CMD:"",INVALIDACTION_WORK_ON_LOCKED_BLOCK:"",LOADING_IMAGE_PATH:"http://note.youdao.com/editor/collab/loading.gif?47",INSERT_BLANK_CATALOGUE_TEXT:"",TAG_ID_NAME:"coId",LEGACY_TAG_ID_NAME:"id",MACRO_NAME:"name",MACRO_CONTENT:"content",MACRO_VERSION:"version"}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(){function t(){}return t.isGUID=function(t){return!!t&&/^[\w\-]+$/.test(t)},t.isInlineStateSetCommand=function(t){return null!=t.isInlineStateSet&&!0===t.isInlineStateSet()},t.newGUID=function(){var t="";return t+=(Math.floor(100*Math.random())+"00").substr(0,2),t+=(Math.floor(100*Math.random())+"00").substr(0,2),t+="-",t+=Date.now().toString()},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(12),n(8),n(78),n(1),n(5),n(55),n(4),n(2),n(17),n(3),n(26),n(18)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlank=function(t){var n=new e({});return!0===t&&l.PLATFORM_LINE_HEIGHT&&l.PLATFORM_LINE_HEIGHT!==f.getDefault("line-height",p.PARAGRAPH)&&n.setBlockStyle("line-height",l.PLATFORM_LINE_HEIGHT),n},e.fromJSON=function(t){return this.generalFromJSON(t,!1)},e.fromCollabJSON=function(t){return this.generalFromJSON(t,!0)},e.fromXml=function(t){var e=this.createBlank();return e.parseIdFromXml(t),e.setText(h.fromXml(t)),$(t).children().each(function(t,n){switch(n.nodeName){case u.TAG_ID_NAME:case u.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":o.fromXml(e,n);break;default:r.appendToTree(e.unknownTree,n)}}),e},e.generalFromJSON=function(t,e){if(!t)return void a.warn("jsonObj should not be null!");if(t.type=t.type,!p.isParagraphClusterType(t.type)||!t.text&&!t.richText)return void a.warn("invalid type or text.");var o,r=this.createBlank();return o=e?h.fromCollabJSON(t.richText):h.fromJSON(t.richText||t.text),r.setText(o),n.each(t.styles,function(t,e){r.setBlockStyle(e,t)}),t.blockId&&r.setId(t.blockId),r},e.prototype.append=function(t){this.richText.append(t)},e.prototype.countWords=function(t){var e,n=0,o=this.richText;return l.IS_MOBILE||!t?n=s(o):(e=this.getRangeText(t))&&(n=s(e)),n},e.prototype.deleteText=function(t,e){n.isObject(t)&&!n.isUndefined(t.start)&&(e=t.end,t=t.start);var o,r=this.richText,i=r.slice(0,t),s=h.createBlank();e>=0&&(o=r.slice(e)),s.append(i),s.append(o),this.setText(s)},e.prototype.getBlockBackColor=function(){var t=this.richText.getStyle(0,this.richText.getLength(),"back-color");return p.isParagraph(this)&&t.length&&n.all(t,function(e){return e===t[0]})?t[0]:""},e.prototype.getCommonInlineStyle=function(t,e){var n,o;return e?(n=e.start,o=e.end):(n=this.getStartOffset(),o=this.getEndOffset()),this.richText.getCommonStyle(n,o,t)},e.prototype.getCommonInlineStyles=function(t){var e,n,o=this.richText;return t?(e=t.start,n=t.end):(e=this.getStartOffset(),n=this.getEndOffset()),o.getCommonStyles(e,n)},e.prototype.getDefaultInlineStyles=function(){return g.getAllDefault()},e.prototype.getStartOffset=function(){return 0},e.prototype.getEndOffset=function(){return this.getLength()},e.prototype.getHighlight=function(t,e){if(t&&t.length){var o=this.richText,r=[];return n.each(t,function(t){for(var n=t.getLength(),i=o.indexOf(t,0,e.ignoreCase);-1!==i;)r[i]={end:i+n,start:i},i=o.indexOf(t,i+n,e.ignoreCase)}),r=n.compact(r),r.length?r:null}},e.prototype.getInlineStyleForEmpty=function(t,e){return(this.getInlineStylesForEmpty(e)||{})[t]},e.prototype.getInlineStylesForEmpty=function(t){var e=this.inlineStylesForEmpty;return t&&(e=e||g.getAllDefault()),e=n.clone(e),e||(e=this.getDefaultSetFont()),e},e.prototype.getLength=function(t){return this.richText.getLength(t)},e.prototype.getReadOnlyText=function(){return this.richText},e.prototype.getRangeText=function(t){if(t&&null!=t.start)return this.sliceText(t.start,t.end)},e.prototype.getStyleRanges=function(t,e){return this.richText.getStyleRanges(t,e)},e.prototype.getText=function(){return this.richText.slice(0)},e.prototype.getTextStyle=function(t,e,o){var r=this.richText;return n.isObject(e)&&null!=e.start&&(o=e.end,e=e.start),r.getStyle(e,o,t)},e.prototype.getTextStylesAtIndex=function(t){return this.richText.getStylesAtIndex(t)},e.prototype.insertText=function(t,e){return this.richText.insert(e,t),this.trigger("content-change"),!0},e.prototype.isEmpty=function(){return this.richText.isEmpty()},e.prototype.isEmptyContent=function(){return 0===this.getLength(!1)},e.prototype.removeAllStyles=function(){t.prototype.removeAllStyles.call(this),this.richText.removeStyles(),this.trigger("content-change",this)},e.prototype.setInlineStylesForEmpty=function(t){this.inlineStylesForEmpty=t},e.prototype.setText=function(t){t instanceof h||(n.isString(t)||(t=String(t)),t=new h({text:t})),this.richText=t,this.trigger("content-change",this)},e.prototype.setTextStyle=function(t,e,o,r){var i=this.richText;n.isObject(o)&&null!=o.start&&(r=o.end,o=o.start),i.setStyle(o,r,t,e),this.trigger("content-change")},e.prototype.sliceText=function(t,e,n){return this.richText.slice(t,e,n)},e.prototype.toCollabJSON=function(){var e=t.prototype.toCollabJSON.call(this);return e.richText=this.richText.toCollabJSON(),e},e.prototype.toHtml=function(t,e,n){var o,r,i,s=document.createElement("div"),a=$(s);return n=!0===n,a.attr("yne-bulb-block","paragraph").css("white-space","pre-wrap"),this.applyBlockStylesOnElement(a),t=t||0,e=null==e?this.getEndOffset():e,o=this.sliceText(t,e,!1),r=d.rich2html(o,{withDefault:n}),a.html(r),i=s.outerHTML,s=a=null,i},e.prototype.toPlain=function(t,e){var n,o;return t=t||0,n=this.sliceText(t,e,!1),o=n.toString(),o=c(o)},e.prototype.toJSON=function(e,n){e=e||0;var o=this.sliceText(e,n,!1),r=t.prototype.toJSON.call(this);return r.richText=o.toJSON(),r},e.prototype.toXml=function(e){var n,i,s=t.prototype.toXml.apply(this,[e]),a=e.createElement("text"),l=this.richText.toString(),c=e.createTextNode(l);return a.appendChild(c),s.appendChild(a),i=this.richText.toXml(e),i&&s.appendChild(i),n=e.createElement("styles"),o.toXml(this,n,e),s.appendChild(n),r.appendToXml(this.unknownTree,s),s},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=p.PARAGRAPH,null!=e.text?this.setText(e.text):this.setText("")},e.prototype.applyBlockStylesOnElement=function(t,e){var o,r=this,i=r.getBlockStyles(),s={};n.each(i,function(t,n){switch(n){case"align":s["text-align"]=t;break;case"indent":case"text-indent":e?(t=r.getBlockStyle("indent")+r.getBlockStyle("text-indent"),o="text-indent"):(t=t>0?t:0,o="indent"===n?"margin-left":"text-indent"),s[o]=t*l.INDENT_WIDTH||"";break;case"line-height":t>0&&(s["line-height"]=String(t));break;default:a.warn("unknown block style: "+n)}}),s["line-height"]||(o=f.getDefault("line-height",p.PARAGRAPH),s["line-height"]=o),o=d.getDefaultForHtml("font-size"),s["font-size"]=o,t.css(s)},e}(u)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(5),n(54),n(1)],void 0!==(r=function(t,e,n,o,r,i){"use strict";return function(){function t(){}return t.appendToTree=function(t,e){if(!t||!e)return void i.error("arguments are not valid!");var n=$(e).attr(o.COMPAT);r.isCompatible(n)&&(t.unknown||(t.unknown=[]),t.unknown.push(e.cloneNode(!0)))},t.appendToXml=function(t,e){if(!t||!e)return void i.error("arguments are not valid!");t.unknown&&t.unknown.length&&n.each(t.unknown,function(t){var n,o;t&&t.cloneNode&&(o=t.nodeName,n=$(e).find(">"+o).length>0,n?i.error("unknown node <"+o+"> has already exist!"):e.appendChild(t.cloneNode(!0)))})},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(118)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(t){t=t||{},t.enableEvent&&(this.eventInst={},n.extend(this.eventInst,o.Events)),this.options=n.extend({},t),this.initialize.apply(this,[t])}return t.extend=function(t,e){var o,r,i=this;return o=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e),r=function(){this.constructor=o},r.prototype=i.prototype,o.prototype=new r,t&&n.extend(o.prototype,t),o.__super__=i.prototype,o},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(9),n(1)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getBlockById=function(t,e){var n=e.getBlockById(t);return n||o.warn("Failed to find block",t),n},e.fromCollabJSON=function(t,n){var o=e.getBlockById(t.blockId,n);return o?new e({block:o}):null},e.prototype.isCollapsed=function(){throw new Error("isCollapsed () should be implemented by subclass")},e.prototype.getType=function(){return this.type},e.prototype.clone=function(t){throw new Error("Every subclass of BlockRange should implement the `clone` method")},e.prototype.collapse=function(t){throw new Error("Every subclass of BlockRange should implement the `collapse` method")},e.prototype.expandToStart=function(){},e.prototype.expandToEnd=function(){},e.prototype.getDataAsJSON=function(){throw new Error("toJSON() should be implemented by subclass!")},e.prototype.getDataAsHtml=function(t){throw new Error("toHtml() should be implemented by subclass!")},e.prototype.getDataAsPlain=function(){throw new Error("toPlain() should be implemented by subclass!")},e.prototype.canDrawedByNative=function(){throw new Error("canDrawedByNative() should be implemented by subclass!")},e.prototype.extendToBlockEnd=function(){o.warn('Show sub block range do! "extendToBlockEnd"')},e.prototype.extendToBlockStart=function(){o.warn('Show sub block range do! "extendToBlockStart"')},e.prototype.getBlockId=function(){return this.block?this.block.getId():null},e.prototype.toCollabJSON=function(t){return{blockId:this.block.getId(),rangeType:this.type}},e.prototype.initialize=function(t){t=t||{block:null},this.type="block",this.block=t.block},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(9)],void 0!==(r=function(t,e,n){"use strict";return function(t){function e(e){return e=e||{},e.enableEvent=!0,t.call(this,e)||this}return i(e,t),e.prototype.on=function(t,e,n){return this.eventInst.on(t,e,n)},e.prototype.off=function(t,e,n){return this.eventInst.off(t,e,n)},e.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return(o=this.eventInst).trigger.apply(o,[t].concat(e));var o},e.prototype.bind=function(t,e,n){return this.eventInst.bind(t,e,n)},e.prototype.unbind=function(t,e,n){return this.eventInst.unbind(t,e,n)},e.prototype.once=function(t,e,n){return this.eventInst.once(t,e,n)},e.prototype.listenTo=function(t,e,n){return this.eventInst.listenTo(t,e,n)},e.prototype.listenToOnce=function(t,e,n){return this.eventInst.listenToOnce(t,e,n)},e.prototype.stopListening=function(t,e,n){return this.eventInst.stopListening(t,e,n)},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(26),n(8)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(){function t(){}return t.toXml=function(t,e,i){var s=t.getBlockStyles(),a=t.getType(),l=o.getStyleNamesOfBlock(a);n.each(l,function(t){var n=s[t],r=o.getConfig(t,a,!1);if(null!=n&&n!==r.default){var l=i.createElement(t),c=i.createTextNode(n);l.appendChild(c),e.appendChild(l)}});var c=t.getUnknownTree();c&&c.styles&&r.appendToXml(c.styles,e)},t.fromXml=function(t,e){var i=t.getUnknownTree(),s=t.getType(),a=o.getStyleNamesOfBlock(s),l=[];$(e).children().each(function(e,n){var o,s=n.nodeName;t.isSupportedBlockStyle(s)?(o=$(n).text(),t.setBlockStyle(s,o),l.push(s)):(i.styles||(i.styles={}),r.appendToTree(i.styles,n))}),n.each(a,function(e){var n;-1===l.indexOf(e)&&(n=o.getConfig(e,s,!1),t.setBlockStyle(e,n.default))})},t}()}.apply(e,o))&&(t.exports=r)},function(t,e){var n={};n.CSSRule=function(){this.parentRule=null,this.parentStyleSheet=null},n.CSSRule.UNKNOWN_RULE=0,n.CSSRule.STYLE_RULE=1,n.CSSRule.CHARSET_RULE=2,n.CSSRule.IMPORT_RULE=3,n.CSSRule.MEDIA_RULE=4,n.CSSRule.FONT_FACE_RULE=5,n.CSSRule.PAGE_RULE=6,n.CSSRule.KEYFRAMES_RULE=7,n.CSSRule.KEYFRAME_RULE=8,n.CSSRule.MARGIN_RULE=9,n.CSSRule.NAMESPACE_RULE=10,n.CSSRule.COUNTER_STYLE_RULE=11,n.CSSRule.SUPPORTS_RULE=12,n.CSSRule.DOCUMENT_RULE=13,n.CSSRule.FONT_FEATURE_VALUES_RULE=14,n.CSSRule.VIEWPORT_RULE=15,n.CSSRule.REGION_STYLE_RULE=16,n.CSSRule.prototype={constructor:n.CSSRule},e.CSSRule=n.CSSRule},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(1),n(10)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return new e(t)},e.fromCollabJSON=function(t,i){var s=t.rangeType;if(s!==n.PARAGRAPH)return void o.error("wrong block range type:",s);var a=r.getBlockById(t.blockId,i);if(a){var l={block:a,end:t.endPosition,start:t.startPosition};return e.create(l)}},e.prototype.isCollapsed=function(){return this.start===this.end},e.prototype.clone=function(){return e.create({block:this.block,end:this.end,start:this.start})},e.prototype.collapse=function(t){void 0===t&&(t=!0),t?this.end=this.start:this.start=this.end},e.prototype.expandToStart=function(){this.start=this.block.getStartOffset()},e.prototype.expandToEnd=function(){this.end=this.block.getEndOffset()},e.prototype.getDataAsJSON=function(){return this.block.toJSON(this.start,this.end)},e.prototype.getDataAsHtml=function(t){return this.block.toHtml(this.start,this.end,t)},e.prototype.getDataAsPlain=function(){return this.block.toPlain(this.start,this.end)},e.prototype.getContent=function(){return this.block.sliceText(this.start,this.end)},e.prototype.canDrawedByNative=function(){return!0},e.prototype.toCollabJSON=function(){var e=t.prototype.toCollabJSON.call(this);return e.startPosition=this.start,e.endPosition=this.end,e},e.prototype.initialize=function(t){this.type=n.PARAGRAPH,this.start=t.start||0,this.end=t.end||0,this.block=t.block},e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(1),r=new RegExp(/^\/yws\/res\/|^https?:\/\/note.youdao.com\/yws\/res/),i=new RegExp(/^\/yws\/api\/group|^https?:\/\/note.youdao.com\/yws\/api\/group/),s={UNKNOWN:-1,WEB_NOTE:1,WEB_GROUP:2,PC:3,IPHONE:4,ANDROID:5,MAC:6},a=window.YNE_PLATFORM||s.UNKNOWN,l=e.keys(s),c={};return s.name=a,e.each(l,function(t){var e=t.toLowerCase(),n=a[t];s["IS_"+t]=a===n||a===e}),a.IS_UNKNOWN&&o.error("The platform is unknown!"),c.isFromWebNote=function(t){return r.test(t)},c.isFromWebGroup=function(t){return i.test(t)},e.extend(s,c),s}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){var t=function(t,e){var n,o,r;if(e.implementation&&e.implementation.createHTMLDocument)return n=e.implementation.createHTMLDocument("title"),n.body.innerHTML=t,n;if(r=e.defaultView||window,r.DOMParser){o=new r.DOMParser;try{n=o.parseFromString("","text/html")}catch(t){}if(n)return n.body.innerHTML=t,n}};return function(e,n,o,r){if(r=!0===r,e||r){n=n||document;var i,s,a,l,c=t(e,n);if(c){if(!1!==o)return c.body;for(a=c.body.childNodes,i=a.length,l=[],s=0;s<i;s++)l.push(a[s]);return l}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(0),n(79),n(80),n(3),n(18)],void 0!==(r=function(t,e,n,o,r,i,s){"use strict";return function(){function t(){}return t.getCssRule=function(e){return t.globalInlineStyleRules[e]},t.getDefaultForHtml=function(e){var n,o,r,i=t.inlineStyleDefaultForHtml[e];return null==i&&(n=t.getCssRule(e),o=s.getDefault(e),n?(r={},r[e]=o,i=n(r)):i=o,t.inlineStyleDefaultForHtml[e]=i),i},t.html2rich=function(t){return new i({text:$(t).text()})},t.rich2html=function(e,o){var i,s,a,l,c,u,p=e.getReadOnlyData(),d=p.length,h=[],f="";if(o=n.defaults(o||{},{customDefaultStyles:null,styleRules:null,withDefault:!0}),0===d)return"<br>";for(i=e.getReadOnlyStylesList(o.withDefault,o.customDefaultStyles),o.styleRules?(u=n.clone(o.styleRules),n.defaults(u,t.globalInlineStyleRules)):u=t.globalInlineStyleRules,u=r.getRules(u),s=0;s<d;++s)a=p[s],c=i[s],t.isEqualStyles(l,c)||(t.handleEndStyles(h),f!==c.href&&(t.handleEndHref(h),t.handleStartHref(h,c.href)),t.handleStartStyles(h,c,u)),h.push(n.escape(a.toString())),l=c,f=c.href;return t.handleEndStyles(h),t.handleEndHref(h),h.join("")},t.resetCssRules=function(){t.globalInlineStyleRules={},t.resetInlineStyleDefaultForHtml()},t.resetInlineStyleDefaultForHtml=function(e){e?(e+="",delete t.inlineStyleDefaultForHtml[e]):t.inlineStyleDefaultForHtml={}},t.setCssRules=function(e){n.each(e,function(e,o){n.isFunction(e)&&(t.globalInlineStyleRules[o]=e,t.resetInlineStyleDefaultForHtml(o))})},t.anchorEndTag=function(){return"</a>"},t.anchorStartTag=function(t){return t+="",'<a href="'+o.safeHref(t)+'">'},t.handleEndHref=function(e){e.push(t.anchorEndTag())},t.handleEndStyles=function(e){e.push(t.spanEndTag())},t.handleStartHref=function(e,n){n&&e.push(t.anchorStartTag(n))},t.handleStartStyles=function(e,o,r){n.isEmpty(o)||e.push(t.spanStartTag(o,r))},t.isEqualStyles=function(e,n){if(!e||!n)return!1;var o,r=t.supportedInlineStyleNames.length;for(o=0;o<r;o++)if(e[t.supportedInlineStyleNames[o]]!==n[t.supportedInlineStyleNames[o]])return!1;return!0},t.spanEndTag=function(){return"</span>"},t.spanStartTag=function(t,e){var o,r=document.createElement("span");return n.each(e,function(e,n){var o=e(t);(o||0===o)&&(r.style[n]=o)}),o=r.outerHTML,o=o.replace(/<\/span>$/i,"")},t.globalInlineStyleRules={},t.inlineStyleDefaultForHtml={},t.supportedInlineStyleNames=s.getStyleNames(),t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(84)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.getAllConfig=function(e){var o=t.getStyleNames(e),r={};return n.each(o,function(e){r[e]=t.getConfig(e)}),r},t.getAllDefault=function(e){var o=t.getStyleNames(e),r={};return n.each(o,function(e){r[e]=t.getDefault(e)}),r},t.getConfig=function(e){var r=o[e],i=t.overrideDefaults[e];return r&&i&&(r=n.clone(r),r.default=i),r},t.getDefault=function(e){var n=t.overrideDefaults[e];return null!=n?n:(n=o[e],n?n.default:void 0)},t.getStyleNames=function(t){var e=n.keys(o);return t&&t.length?n.difference(e,t):e},t.isSupport=function(t){return null!=o[t]},t.reset=function(){t.overrideDefaults={}},t.setDefault=function(e,n){var o=t.getDefault(e);null!=n&&n!==o&&(t.overrideDefaults[e]=n)},t.overrideDefaults={},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(6),n(12),n(23),n(8),n(27),n(1),n(5),n(55),n(4),n(2),n(62),n(7),n(17),n(3)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g,m,_){"use strict";return function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.createBlank=function(){return new e({})},e.fromCollabJSON=function(t){return this.generalFromJSON(t,!0)},e.fromJSON=function(t){return this.generalFromJSON(t,!1)},e.fromXml=function(t){var n,o=$(t),i=parseInt(o.attr("level"),10)||1;return n=new e({level:i}),n.setText(_.fromXml(t)),n.parseIdFromXml(t),$(t).children().each(function(t,e){switch(e.nodeName){case d.TAG_ID_NAME:case d.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":r.fromXml(n,e);break;default:a.appendToTree(n.unknownTree,e)}}),n},e.getOrCreateListById=function(t,e,n){var r,i,a=null,l=e;for(i=t.length-1;i>=0;--i)r=t[i],h.isListItem(r)&&r.getOwnerList()&&r.getOwnerList().getId()===e&&(r.getOwnerList().getType()===n?a=r.getOwnerList():l=o.newGUID());return a||(a=new s({listId:l,type:n})),a},e.generalFromJSON=function(e,n){var o=t.generalFromJSON.call(this,e,n);return o&&(e.listId&&o.setListId(e.listId),e.listType&&o.setListType(e.listType),e.level&&o.setLevel(e.level),e.index&&o.setIndex(e.index)),o},e.prototype.getIndex=function(){return this.index},e.prototype.getListId=function(){return this.ownerList?this.ownerList.getId():this.listItemProps.listId},e.prototype.getListType=function(){return this.ownerList?this.ownerList.getType():this.listItemProps.listType},e.prototype.getLevel=function(){return this.listItemProps.level},e.prototype.getOwnerList=function(){return this.ownerList},e.prototype.isOrdered=function(){return this.ownerList.isOrdered()},e.prototype.setIndex=function(t){n.isNumber(t)&&t>0&&(this.index=t,this.trigger("index-change",t))},e.prototype.setLevel=function(t){n.isNumber(t)&&(t=Math.max(t,1),t=Math.min(t,u.MAX_LIST_ITEM_LEVEL),this.listItemProps.level=t,this.ownerList&&this.ownerList.updateIndexes(),this.trigger("level-change",t))},e.prototype.setListId=function(t){this.listItemProps.listId?c.error("should not override existing listId"):this.listItemProps.listId=t},e.prototype.setListType=function(t){this.listItemProps.listType?c.error("should not override existing listType"):this.listItemProps.listType=t},e.prototype.setOwnerList=function(t){this.ownerList=t,this.ownerList&&(this.listItemProps.listId=this.ownerList.getId(),this.listItemProps.listType=this.ownerList.getType())},e.prototype.toCollabJSON=function(){return this._generalToJSON(null,null,!0)},e.prototype.toHtml=function(t,e,n){var o,r,i,s=document.createElement("li"),a=$(s);return n=!0===n,this.applyBlockStylesOnElement(a),a.css("list-style-position","inside").css("white-space","pre-wrap").css("word-break","break-word"),i=f.makeHtmlMarker(this),i&&i.listStyleType&&a.css("list-style-type",i.listStyleType),i&&i.markerStyles&&a.css(i.markerStyles),t=t||0,o=this.sliceText(t,e,!1),r=m.rich2html(o,{withDefault:n}),s.innerHTML=r,s.outerHTML},e.prototype.toJSON=function(t,e){return this._generalToJSON(t,e,!1)},e.prototype.toPlain=function(t,e){var n,o;return t=t||0,n=this.sliceText(t,e,!1),o=n.toString(),o=p(o)},e.prototype.toXml=function(e){var n,o=this.getOwnerList();return o?(n=t.prototype.toXml.apply(this,[e]),n.setAttribute("level",this.getLevel().toString()),n.setAttribute("list-id",this.listItemProps.listId),{listId:this.listItemProps.listId,listItem:n,listType:o.getType(),ownerList:o}):void c.error("The list item has no owner list!")},e.prototype.updateListType=function(){this.ownerList&&(this.listItemProps.listType=this.ownerList.getType())},e.prototype.initialize=function(e){var o=e.level||1;t.prototype.initialize.call(this,e),this.type=h.LIST_ITEM,this.listItemProps=n.clone(e),this.setLevel(o),this.setIndex(1),e.list&&(this.ownerList=e.list,this.listItemProps.listId=this.ownerList.getId(),this.listItemProps.listType=this.ownerList.getType()),!this.listItemProps.listId&&e.listId&&(this.listItemProps.listId=e.listId),!this.listItemProps.listType&&e.listType&&(this.listItemProps.listType=e.listType),e.id&&this.setId(e.id),e.text&&this.setText(e.text),this.on("attached",this._onAttached.bind(this)),this.on("detached",this._onDetached.bind(this))},e.prototype._onAttached=function(t){var n,o,r=this.getOwnerList(),i=t.getAllBlocks(),s=t.getBlockIndex(this),a=null;if(l(s>=0,"Block not attached yet.",s,this),!r&&this.getListId()&&(r=e.getOrCreateListById(i,this.getListId(),this.getListType()),this.setOwnerList(r)),0===r.getLength())r.insertAfter(this,null);else{for(n=s-1;n>=0;--n)if(o=i[n],h.isListItem(o)&&o.getOwnerList()===r){a=o;break}if(r.hasItem(this))return;r.insertAfter(this,a)}},e.prototype._onDetached=function(){this.getOwnerList().removeItem(this)},e.prototype._generalToJSON=function(e,n,o){var r;return r=o?t.prototype.toCollabJSON.call(this):t.prototype.toJSON.call(this,e,n),r.level=this.getLevel(),r.index=this.getIndex(),this.listItemProps.listId&&(r.listId=this.listItemProps.listId),this.listItemProps.listType&&(r.listType=this.listItemProps.listType),r},e}(g)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(12),n(8),n(55),n(4),n(2),n(7),n(17),n(3)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p){"use strict";return function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.createBlank=function(){return new e({})},e.fromCollabJSON=function(t){return e.generalFromJSON(t,!0)},e.fromJSON=function(t){return e.generalFromJSON(t,!1)},e.fromXml=function(t){var n=$(t),i="true"===n.find("> checked:first").text(),s=new e({checked:i});return s.setText(p.fromXml(t)),s.parseIdFromXml(t),n.children().each(function(t,e){switch(e.nodeName){case a.TAG_ID_NAME:case a.LEGACY_TAG_ID_NAME:case"checked":case"text":case"inline-styles":break;case"styles":o.fromXml(s,e);break;default:r.appendToTree(s.unknownTree,e)}}),s},e.getMarker=function(t){if(!t)return"";var n=t.getChecked()?e.CHECKED_MARKER:e.UNCHEKED_MARKER;return n+=" "},e.generalFromJSON=function(e,n){var o=t.generalFromJSON.call(this,e,n);return o&&o.setChecked(!!e.checked),o},e.prototype.countWords=function(){return this.richText.getLength()},e.prototype.getChecked=function(){return this.todoProps.checked},e.prototype.getLegacyResId=function(){return this.todoProps.legacyResId},e.prototype.isFromOldTodo=function(){return!!this.todoProps.legacyResId},e.prototype.setChecked=function(t){t!==this.todoProps.checked&&(this.todoProps.checked=t,this.trigger("checked-change",t))},e.prototype.toCollabJSON=function(){var e=t.prototype.toCollabJSON.call(this);return e.checked=this.getChecked(),e},e.prototype.toHtml=function(t,e,n){var o,r=document.createElement("div"),i=$(document.createElement("div")),s=$(document.createElement("div")),a=this.getChecked(),l=$(r);return l.attr("yne-bulb-block","todo").attr("yne-bulb-checked",a.toString()).attr("id",this.getId()).css("display","table"),i.css({border:"1px solid #bbb",display:"inline-flex",height:"1em","line-height":"1",position:"relative",width:"1em"}),a&&(i.css({"background-repeat":"no-repeat","background-position":"center","background-size":"100%","background-image":"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgdmlld0JveD0iMCAwIDUwIDUwIiBzdHlsZT0iaGVpZ2h0OiAxMDAlO3dpZHRoOiAxMDAlO3N0cm9rZS13aWR0aDogMjtzdHJva2U6IGJsYWNrO3RvcDogMDtsZWZ0OiAwO3Bvc2l0aW9uOiBhYnNvbHV0ZTsiICB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0xNC4xIDI3LjJsNy4xIDcuMiAxNi43LTE2LjgiPjwvcGF0aD4KPC9zdmc+)"}),l.css("text-decoration","line-through")),this.applyBlockStylesOnElement(l),t=t||0,e=null==e?this.getEndOffset():e,o=this.sliceText(t,e,!1),s.html(u.rich2html(o,{withDefault:n})),s.attr("yne-bulb-todo-content","").css({display:"table-cell","word-break":"break-word","padding-left":"8px",width:"100%"}),l.append(i),l.append(s),r.outerHTML},e.prototype.toJSON=function(e,n){var o=t.prototype.toJSON.call(this,e,n);return o.checked=this.getChecked(),o},e.prototype.toPlain=function(t,e){t=t||0;var n=this.sliceText(t,e,!1);return s(n.toString())},e.prototype.toXml=function(e){var n,o;return o=t.prototype.toXml.call(this,e),n=e.createElement("checked"),n.appendChild(e.createTextNode(this.getChecked().toString())),o.appendChild(n),r.appendToXml(this.unknownTree,o),o.setAttribute("compat","true"),o},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.todoProps=n.clone(e),this.type=l.TODO},e.CHECKED_MARKER="",e.UNCHEKED_MARKER="",e}(c)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(9),r=n(0),i=n(1),s=n(135),a=n(68);return e=o.extend({inheritStyleHandlers:null,uninheritStyleHandlers:null,tagHandler:null,el:null,parent:null,children:null,styles:null,parser:null,options:null,constructor:function(t,e,n,o,r){var i=this;i.el=t,i.children=[],i.parent=e,i.internalStylesParser=n,i.parent&&i.parent.children&&i.parent.children.push(i),i._computeStyles(),i.computeBulbStyles(),i.parser=o,i.options=r},computeBulbStyles:function(){},_findStyleHandler:function(t,n){var o,s=this,a=t?s.inheritStyleHandlers:s.uninheritStyleHandlers,l=a[n];return r.isFunction(l)?{action:l}:r.isObject(l)&&l.action?l:!0===l&&(o=e.styleHandlers[n])&&o.action?o.inheritable!==t?void i.error("The inheritable value of "+n+" is unvalid!"):o:void 0},_computeStyles:function(){var t=this,n=t.el,o={},r=t.tagHandler||e.tagHandlers[n.tagName.toLowerCase()];r&&r(o,n),t.styles={},t._computeInheritStyles(o),t._computeUninheritStyles(o)},_computeStyle:function(t,e){var n,o,i,s=this,a=null!=s.inheritStyleHandlers[e],l=s.parent,c=s.el;null==s.styles[e]&&(a&&!l||(n=s._findStyleHandler(a,e))&&n.action&&(n.requireValues&&n.requireValues.length&&r.each(n.requireValues,function(e){s._computeStyle(t,e)}),a?(o=(l.styles||{})[e],i=n.action(c,s.styles,o),i||!1===i||(i=t[e]),i||!1===i||(i=o)):(i=n.action(c,s.styles))||!1===i||(i=t[e]),(i||!1===i)&&(s.styles[e]=i)))},_computeInheritStyles:function(t){var e=this;e.inheritStyleHandlers&&r.each(e.inheritStyleHandlers,function(n,o){n&&e._computeStyle(t,o)})},_computeUninheritStyles:function(t){var e=this;e.uninheritStyleHandlers&&r.each(e.uninheritStyleHandlers,function(n,o){n&&e._computeStyle(t,o)})},setup:function(){},capture:function(){i.warn("Function capture should be implemented by SubClass")},finish:function(){},handleChildrenBySelf:function(){return!1},emit:function(t){var e=this;e.parent&&e.parent.capture(t)},getRoot:function(){var t=this;if(t.parent)return t.parent.getRoot()}},{tagHandlers:s,styleHandlers:a})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(0)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){var e=n.keys(t);return n.each(e,function(e){var n=t[e];"object"==typeof n&&null!==n&&o(n)}),Object.freeze(t)};return function(t,e){return t&&"object"==typeof t?(e=!1!==e,Object.freeze?e?o(t):Object.freeze(t):t):t}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(27),n(11),n(1)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromCollabJSON=function(t){return new e({listId:t.id,type:t.type})},e.fromXml=function(t){var o=$(t),r=o.attr("id"),i=o.attr("type"),s=new e({listId:r,type:i});return n.each(t.attributes,function(t){switch(t.nodeName){case"id":case"type":break;default:s.unknownAttrs.push(t.cloneNode(!0))}}),s},e.prototype.addItem=function(t){t&&(this.listItems.push(t),this.updateIndexes())},e.prototype.hasItem=function(t){return!!t&&this.listItems.indexOf(t)>-1},e.prototype.getId=function(){return this.listProps.listId},e.prototype.getItems=function(){return this.listItems},e.prototype.getLength=function(){return this.listItems.length},e.prototype.getType=function(){return this.listProps.type},e.prototype.insertAfter=function(t,e){var n=this.listItems,o=e?n.indexOf(e):-1;this.insertItem(o+1,t)},e.prototype.insertItem=function(t,e){var n=this.listItems;return o(t>0||t<=n.length),o(!(e in n)),n.splice(t,0,e),this.updateIndexes(),t},e.prototype.isOrdered=function(){return this.listProps.type===e.ORDERED},e.prototype.isUnordered=function(){return this.listProps.type===e.UNORDERED},e.prototype.removeItem=function(t){var e=this.listItems,n=e.indexOf(t);return n>=0&&(e.splice(n,1),this.updateIndexes()),n},e.prototype.setType=function(t){o(t===e.ORDERED||t===e.UNORDERED),t!==this.listProps.type&&(this.listProps.type=t,this.updateIndexes(!0),this.trigger("type-change"))},e.prototype.toCollabJSON=function(){var t={};return t.id=this.listProps.listId,t.type=this.listProps.type,t},e.prototype.updateIndexes=function(t){var e,n,o,r=this.listItems,i=r.length,s=0,a={};for(e=0;e<i;++e)n=r[e],o=n.getLevel(),o>s?a[o]=1:a[o]?a[o]++:a[o]=1,s=o,n.setIndex(a[o]),t&&n.updateListType()},e.prototype.initialize=function(t){this.listProps=n.clone(t),this.listItems=[],this.unknownAttrs=[],this.listProps.type!==e.ORDERED&&this.listProps.type!==e.UNORDERED&&(s.error("type should be ORDERED or UNORDERED",this.listProps.type),this.listProps.type=e.UNORDERED)},e.ORDERED="ordered",e.UNORDERED="unordered",e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(11),n(1)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromXml=function(t,e){o.error("fromXml() should be implemented by sub-class")},e.fromCollabJSON=function(t){return o.error("fromCollabJSON() should be implemented by sub-class"),null},e.prototype.getResId=function(){return this.resProps.resId||o.error("No resId"),this.resProps.resId},e.prototype.getType=function(){return this.resProps.type},e.prototype.isType=function(t){return this.resProps.type===t},e.prototype.toHtml=function(t){return o.error("toHtml() should be implemented by sub-class"),""},e.prototype.toJSON=function(){o.error("toJSON() should be implemented by sub-class")},e.prototype.toCollabJSON=function(){o.error("toCollabJSON() should be implemented by sub-class")},e.prototype.toPlain=function(){o.error("toPlain() should be implemented by sub-class")},e.prototype.toXml=function(t,e){o.error("toXml() should be implemented by sub-class")},e.prototype.initialize=function(t){this.resProps=t||{resId:"",type:e.TYPE_IMAGE}},e.TYPE_IMAGE="image",e.TYPE_ATTACHMENT="attachment",e.TYPE_MACRO="macro",e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o={};o.CSSStyleDeclaration=function(){this.length=0,this.parentRule=null,this._importants={}},o.CSSStyleDeclaration.prototype={constructor:o.CSSStyleDeclaration,getPropertyValue:function(t){return this[t]||""},setProperty:function(t,e,n){this[t]?Array.prototype.indexOf.call(this,t)<0&&(this[this.length]=t,this.length++):(this[this.length]=t,this.length++),this[t]=e+"",this._importants[t]=n},removeProperty:function(t){if(!(t in this))return"";var e=Array.prototype.indexOf.call(this,t);if(e<0)return"";var n=this[t];return this[t]="",Array.prototype.splice.call(this,e,1),n},getPropertyCSSValue:function(){},getPropertyPriority:function(t){return this._importants[t]||""},getPropertyShorthand:function(){},isPropertyImplicit:function(){},get cssText(){for(var t=[],e=0,n=this.length;e<n;++e){var o=this[e],r=this.getPropertyValue(o),i=this.getPropertyPriority(o);i&&(i=" !"+i),t[e]=o+": "+r+i+";"}return t.join(" ")},set cssText(t){var e,n;for(e=this.length;e--;)n=this[e],this[n]="";Array.prototype.splice.call(this,0,this.length),this._importants={};var r=o.parse("#bogus{"+t+"}").cssRules[0].style,i=r.length;for(e=0;e<i;++e)n=r[e],this.setProperty(r[e],r.getPropertyValue(n),r.getPropertyPriority(n))}},e.CSSStyleDeclaration=o.CSSStyleDeclaration,o.parse=n(69).parse},function(t,e,n){var o,r;o=[n,e,n(0),n(1),n(2),n(120)],void 0!==(r=function(t,e,n,o,r,i){"use strict";return function(){function t(){}return t.getAllStyleNames=function(){return t.ALL_KEYS||(t.ALL_KEYS=[],n.each(i,function(e){var o=n.keys(e);n.each(o,function(e){-1===t.ALL_KEYS.indexOf(e)&&t.ALL_KEYS.push(e)})})),[].concat(t.ALL_KEYS)},t.getConfig=function(t,e,n){return(this.getConfigsOfBlock(e,n)||{})[t]},t.getConfigsOfBlock=function(e,r){if(!e)return void o.error("parameter is not valid",e);var s=i[e],a={};return r=!1!==r,n.each(s,function(o,i){var s=n.clone(o);r&&t.overrideDefaults[e]&&null!=t.overrideDefaults[e][i]&&(s.default=t.overrideDefaults[e][i]),a[i]=s}),a},t.getDefault=function(t,e,n){if(!t||!e)return void o.error("parameter is not valid",t,e);var r=this.getConfigsOfBlock(e,n)||{},i=r[t];return i&&null!=i.default?i.default:void 0},t.getDefaultsOfBlock=function(t,e){var o=this.getConfigsOfBlock(t,e),r={};return n.each(o,function(t,e){r[e]=t.default}),r},t.getStyleNamesOfBlock=function(e){var o=t.getConfigsOfBlock(e);return o?n.keys(o):[]},t.isSupport=function(e,n){var o=t.getConfigsOfBlock(n)||{},r=o[e];return r&&null!=r.type},t.reset=function(){t.overrideDefaults={}},t.setDefault=function(e,i,s){e&&null!=i||o.error("parameter is not valid",e,i);var a=[];s?a.push(s):a=r.getAllBlockTypes(),n.each(a,function(n){t.overrideDefaults[n]||(t.overrideDefaults[n]={}),t.overrideDefaults[n][e]=i})},t.overrideDefaults={},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){(function(o){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";var n=this,o=n.DEBUG,r=n.console,i=function(){};return o&&r.assert&&(i=r.assert.bind(r)),i}.apply(e,r))&&(t.exports=i)}).call(e,n(53))},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(6),n(27),n(11)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromXml=function(t){var o=$(t),r=o.attr("id"),i=new e({id:r});return n.each(t.attributes,function(t){switch(t.nodeName){case"id":case"type":break;default:i.unknownAttrs.push(t.cloneNode(!0))}}),i},e.prototype.getId=function(){return this.id},e.prototype.getItems=function(){return this.items},e.prototype.getLength=function(){return this.items.length},e.prototype.insertAfter=function(t,e){var n=this.items,o=e?n.indexOf(e):-1;this.insertItem(o+1,t)},e.prototype.insertBefore=function(t,e){var n=this.items,o=e?n.indexOf(e):0;this.insertItem(o,t)},e.prototype.insertItem=function(t,e){var n=this.items;return r(t>0||t<=n.length),n.splice(t,0,e),this.updateIndexes(),t},e.prototype.isLock=function(){return!!this.state},e.prototype.removeItem=function(t){var e=this.items,n=e.indexOf(t);return n>=0&&(e.splice(n,1),this.updateIndexes()),n},e.prototype.removeSelect=function(){var t=this.items;t[0]&&t[0].blur()},e.prototype.select=function(){var t=this.items;this.isLock()||t[0]&&t[0].focus()},e.prototype.updateIndexes=function(){var t=this.items;t.forEach(function(e,n){e.removeSorting(),0===n&&e.setFirst(),n===t.length-1&&e.setLast()})},e.prototype.updateLockState=function(t){this.state=t,this.state&&this.removeSelect()},e.prototype.initialize=function(t){this.id=t.id||o.newGUID(),this.items=[],this.unknownAttrs=[]},e}(s)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(5),n(12),n(3),n(30),n(31),n(124),n(89),n(8),n(78),n(126),n(1),n(127),n(4),n(2),n(45),n(128),n(44),n(43),n(129)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g,m,_,b,y,v,w,I){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlankTable=function(t,n,o,r){var i,s,l,c=new e({}),u=[],p=[],d=[];for(o?c.setId(o):o=c.getId(),r&&(l=r/t),i=0;i<n;i++)for(d.push(b.DEFAULT_ROW_HEIGHT),u[i]=u[i]||[],s=0;s<t;s++)0===i&&p.push(l||b.DEFAULT_COL_WIDTH),u[i].push(w.create({cellId:w.makeCellId(o,i,s),content:a.createBlank()}));return c.setContentData(u,d,p),c},e.fromJSON=function(t,e){return this.generalFromJSON(t,e)},e.fromXml=function(t){var n,o,i,s,a,l=$(t),c=l.children("content:first").eq(0),u=$.trim(c.text()),d=e._resourceMapFromXml(l.children("resource-list:first").get(0)),h=new e({resourceMap:d});h.parseIdFromXml(t);try{n=JSON.parse(u)}catch(t){return void f.error(t,u)}return i=n.cells,s=e.validateRowHeights(n.heights),a=e.validateRowHeights(n.widths),o=e.tableCellsFromXml(i,s,a,{resourceMap:d,tableBlockId:h.getId()}),h.setContentData(o,s,a),l.children().each(function(t,e){switch(e.nodeName){case m.TAG_ID_NAME:case m.LEGACY_TAG_ID_NAME:case"content":case"resource-list":break;case"styles":r.fromXml(h,e);break;default:p.appendToTree(h.unknownTree,e)}}),h},e.fromBulbJSON=function(t){return this.generalFromJSON(t,!1,!0)},e.validateRowHeights=function(t){return e._validateDimensionArray(t,b.DEFAULT_ROW_HEIGHT)},e.validColWidths=function(t){return e._validateDimensionArray(t,b.DEFAULT_COL_WIDTH)},e.generalFromJSON=function(t,n,o){if(!t||!t.type||t.type!==_.TABLE)return void f.warn("jsonObj is not valid!");var r,i,s,a,l=t.data,c=t.resourceList;a=l.widths,s=l.heights,i=l.cells,r=u.cellsFromJSON({cellsJson:i,height:s.length,isUpdateCellId:n,resourceList:c,width:a.length,isCollabJson:o});var p=new e({colWidths:a,rowHeights:s,tableCells:r});return t.blockId&&p.setId(t.blockId),p},e._resourceMapFromXml=function(t){var e={};return t?($(t).children("resource-mono").each(function(t,o){var r=$(o),i=r.find("res-id").text();if(!i)return void f.error("<resource-mono/> node has no res-id",o);n.some(y,function(t,n){var s,a=r.children(n+":first").get(0);if(a&&t&&t.fromXml&&(s=t.fromXml(i,a,o)),s)return e[i]=s,!0})}),e):e},e.tableCellsFromXml=function(t,e,n,o){var r,i,s,a=n.length,l=e.length,c=[];for(r=0;r<l;r++)for(c[r]=[],i=0;i<a;i++)s=r*a+i,c[r][i]=w.fromXml({cellRawData:t[s],colIndex:i,resourceMap:o.resourceMap,rowIndex:r,tableBlockId:o.tableBlockId});return c},e._validateDimensionArray=function(t,e){return t?n.map(t,function(t){return t>0?t:e}):[e]},e.prototype.clearCellAttr=function(t,e){if(!this.isLocked()){var n=this._getCellAt(t,e);n&&(n.clearMergePointAttr(),n.clearMergedCellAttr(),this.trigger("attribute-changed"))}},e.prototype.countWords=function(){var t=this.toPlain({filter:function(t){return t&&t.getType()===l.TEXT},returnString:!1,withLineBreak:!1}),e=0;return n.each(t,function(t){n.each(t,function(t){e+=d(t)})}),e},e.prototype.createCell=function(t){t=t||{};var e,n=t.content||a.createBlank(),o=t.styles;return e=w.create({content:n}),o&&e.setBlockStyles(o),e},e.prototype.creatRowData=function(){var t,e=this.getColumnCount(),n=[];for(t=0;t<e;t++)n.push(this.createCell());return n},e.prototype.deleteCols=function(t,e){if(!this.isLocked()){var n,o,r=[];if(!this.isLocked())return e=e||1,this.tableCells.forEach(function(n){for(o=0;o<e;o++)r[o]=r[o]||[],r[o].push(n.splice(t,1)[0])}),n=this.colWidths.splice(t,e),this.trigger("col-deleted",t,e),{colsData:r,widths:n}}},e.prototype.deleteRows=function(t,e){if(!this.isLocked()){var n,o,r=[];if(!this.isLocked()){for(e=e||1,o=0;o<e;o++)r[o]=this.tableCells.splice(t,1)[0];return n=this.rowHeights.splice(t,e),this.trigger("row-deleted",t,e),{heights:n,rowsData:r}}}},e.prototype.forEach=function(t,e){var n=this;n.forEachRow(function(o){return n.forEachColumn(function(e){return t(o,e)},e)},e)},e.prototype.forEachCell=function(t,e){var n=this,o={};n.forEach(function(e,r){var i,s=n.getCell(e,r,{findMergePointIfNeeded:!0,withPosition:!0});if(s&&(i=s.row+"-"+s.col,!0!==o[i]))return o[i]=!0,t(s.cell,s.row,s.col)},e)},e.prototype.forEachColumn=function(t,e){var n,o=this.getColumnCount();for(n=0;n<o;n++)if(!1===t(e?0+o-n:0+n))return!1},e.prototype.forEachRow=function(t,e){var n,o=this.getRowCount();for(n=0;n<o;n++)if(!1===t(e?0+o-n:0+n))return!1},e.prototype.getAllResourceInfo=function(t){var e,n,o,r,i,s=this,a=[];return t=t&&t.length?t:[l.IMAGE,l.ATTACHMENT,l.MACRO],s.forEach(function(c,u){var p=s.getCell(c,u),d=s.getExtraInfo("pcResMap");if(p&&p.isImageCell()&&t.indexOf(l.IMAGE)>-1&&(e=p.getContent(),n=e.getSource(),o=e.getSource(d),n&&o&&a.push({extraSource:o,source:n})),p&&p.isAttachmentCell()&&t.indexOf(l.ATTACHMENT)>-1&&(e=p.getContent(),n=e.getSource(),o=e.getSource(d),r=e.getResource(),i=e.getResource(d),n&&o&&r&&i&&a.push({extraResource:i,extraSource:o,resource:r,source:n})),p&&p.isMacroCell()&&t.indexOf(l.MACRO)>-1){e=p.getContent();var h=e.getInfo();h&&a.push({macroInfo:h})}}),a},e.prototype.getCell=function(t,e,o){o=n.defaults(o||{},{findMergePointIfNeeded:!1,withPosition:!1});var r,i;if(!o.findMergePointIfNeeded){if(!(i=this._getCellAt(t,e)))return;return!0===o.withPosition?{cell:i,col:e,row:t}:i}return r=this._findMergePoint(t,e),o.withPosition?r:r&&r.cell?r.cell:null},e.prototype.getCells=function(){return this.tableCells},e.prototype.getCellBlockStyles=function(t){var e,o=t.row,r=t.col,i=t.names,s=this._getCellAt(o,r);return!s.isMergedCell()&&(e=s.getBlockStyles(),i&&i.length>0?n.pick(e,i):e)},e.prototype.getCellById=function(t){if(g.isElement(t)&&(t=$(t).data("cellId")),t){var e,n,o,r=this.getRowCount(),i=this.getColumnCount();for(e=0;e<r;e++)for(n=0;n<i;n++)if((o=this.getCell(e,n))&&o.getCellId()===t)return{cell:o,col:n,row:e}}},e.prototype.getCellInlineStyles=function(t){var e=t.row,n=t.col,o=this._getCellAt(e,n);return o.isTextNoEmptyCell()?o.getInlineStyles(t.names):o.getStylesForEmpty(t.names)},e.prototype.getCellSize=function(t,e){var n=this.getCell(t,e,{findMergePointIfNeeded:!0,withPosition:!0});if(n&&n.cell)return this._getCellSize(n.cell,n.row,n.col)},e.prototype.getCellSizeById=function(t){var e=this.getCellById(t);if(e&&e.cell)return this._getCellSize(e.cell,e.row,e.col)},e.prototype.getColumnCount=function(){var t=this.colWidths||[],e=t.length;return Math.max(b.MIN_COL_COUNT,e)},e.prototype.getColumnWidth=function(t){return this.colWidths[t]||b.DEFAULT_COL_WIDTH},e.prototype.getCommonBlockStyle=function(t,e){var n;return e&&e.getAsRectRange&&(e=e.getAsRectRange()),e&&e.forEachCell?(e.forEachCell(function(e){var r=e.getBlockStylesAsBulb()||{};if(null==n)n=r[t];else if(n!==r[t])return n=o.INTERM,!1},!1),n===o.INTERM?null:n):(f.warn("Unvalid parameter",e),null)},e.prototype.getCommonInlineStyle=function(t,e){var n;return e&&e.getAsRectRange&&(e=e.getAsRectRange()),e&&e.forEachCell?(e.forEachCell(function(e){var r=e.getCommonInlineStyle(t);if(null==n)n=r;else if(n!==r)return n=o.INTERM,!1},!1),n===o.INTERM?null:n):(f.warn("Unvalid parameter",e),null)},e.prototype.getContentAt=function(t,e){var n=this.getCell(t,e);if(n)return{content:n.getContent(),type:n.getType()}},e.prototype.getMergedCellAttrAt=function(t,e){var n=this._getCellAt(t,e),o={};return n?n.getMergedCellAttr():o},e.prototype.getMergePointAttrAt=function(t,e){var n=this._getCellAt(t,e),o={};return n?n.getMergePointAttr():o},e.prototype.getPosition=function(t){if(t){var e,n,o=this.getRowCount(),r=this.getColumnCount();for(e=0;e<o;e++)for(n=0;n<r;n++)if(this.getCell(e,n)===t)return{col:n,row:e}}},e.prototype.getRowCount=function(){var t=this.rowHeights||[],e=t.length;return Math.max(b.MIN_ROW_COUNT,e)},e.prototype.highlight=function(t,e,n){this.trigger("high-light",t,e,n)},e.prototype.isEmptyContent=function(){var t=!0;return this.forEachCell(function(e){if(!e.isEmpty())return t=!1,!1}),t},e.prototype.getRowHeight=function(t){return this.rowHeights[t]||b.DEFAULT_ROW_HEIGHT},e.prototype.isMergedCell=function(t,e){var n=this.getCell(t,e);return n&&n.isMergedCell&&n.isMergedCell()},e.prototype.isMergePoint=function(t,e){var n=this.getCell(t,e);return n&&n.isMergePoint&&n.isMergePoint()},e.prototype.isMergeRect=function(t){var e;return!!this.isMergePoint(t.top,t.left)&&(e=this.getMergePointAttrAt(t.top,t.left),e.width>=t.width&&e.height>=t.height)},e.prototype.insertCols=function(t,e,n){if(!this.isLocked()){var o=this,r=o.tableCells,i=t;n=n||[],e.forEach(function(t,e){r.forEach(function(e,n){e&&e.splice(i,0,t[n])}),o.colWidths.splice(i,0,n[e]||b.DEFAULT_COL_WIDTH),i+=1}),o.trigger("col-inserted",t)}},e.prototype.insertRows=function(t,e,o){if(!this.isLocked()){var r=this,i=t;o=o||[],n.forEach(e,function(t,e){r.tableCells.splice(i,0,t),r.rowHeights.splice(i,0,o[e]||b.DEFAULT_ROW_HEIGHT),i+=1}),r.trigger("row-inserted",t)}},e.prototype.setCellBlockStyles=function(t){if(!this.isLocked()){var e,o=t.row,r=t.col,i=t.styles,s=this._getCellAt(o,r);return!s.isMergedCell()&&(i&&!n.isEmpty(i)||s.clearStyles(),v.bulbStyles2TableStyles(i),s.setBlockStyles(i),e=s.getBlockStyles(),this.trigger("cell-block-style-change",o,r,i,e),!0)}},e.prototype.setCellContent=function(t,e,o){var r,i;if(!this.isLocked())return null==o?void f.warn("content is not valid",o):(r=this.getCell(t,e))?(n.isString(o)&&(o=s.create(o)),o instanceof s&&(o=a.create({richText:o})),i=r.setContent(o),i&&this.trigger("cell-content-change",r.getCellId()),i):void f.warn("no cell at row/col",t,e)},e.prototype.setCellInlineStyles=function(t){if(t&&t.styles&&!this.isLocked()){var e=t.row,n=t.col,o=t.styles,r=this._getCellAt(e,n);return r&&r.isTextNoEmptyCell()?(r.setInlineStyles(o),this.trigger("cell-inline-style-change",e,n)):r.setStylesForEmpty(o),!0}},e.prototype.setContentData=function(t,e,n){var o=this;t&&t.length&&e&&e.length&&n&&n.length&&(this.tableCells=t,this.rowHeights=e,this.colWidths=n,setTimeout(function(){o._checkAndFixTableData()}))},e.prototype.setColumnWidth=function(t,e){this.isLocked()||(this.colWidths[t]=e,this.trigger("col-width-set",t,e))},e.prototype.setMergedCellAttrAt=function(t,e,n,o){if(!this.isLocked()){var r=this._getCellAt(t,e);r&&(r.setMergedCellAttr(n,o),this.trigger("attribute-changed"))}},e.prototype.setMergePointAttrAt=function(t,e,n,o){if(!this.isLocked()){var r=this._getCellAt(t,e);r&&(r.setMergePointAttr(n,o),this.trigger("attribute-changed"))}},e.prototype.setRowHeight=function(t,e){this.isLocked()||(this.rowHeights[t]=e,this.trigger("row-height-set",t,e))},e.prototype.toHtml=function(t,e,n){var o,r=n?this.getExtraInfo("pcResMap"):null,i=c.renderTable(this,null,r),s=document.createElement("div");return $(s).attr("yne-bulb-block","table").css({overflow:"auto"}).append(i),o=s.outerHTML,o=o.replace(/style="(.*?)"/g,function(t){if(t)return t.replace(/\&quot;/g,"")})},e.prototype.toJSON=function(e,n){var o=this,r=[].concat(o.colWidths),i=[].concat(o.rowHeights),s=[],a={},l={},c={},u=t.prototype.toJSON.call(this);return o.forEach(function(t,r){var i,u=o.getCell(t,r);u&&u.isAttachmentCell()&&!e&&(i=u.getContent(),a[i.getResId()]=i.getInfo()),u&&u.isImageCell()&&!e&&(i=u.getContent(),l[i.getResId()]=i.getInfo()),u&&u.isMacroCell()&&!e&&(i=u.getContent(),c[i.getResId()]=i.getInfo()),s.push(u?u.toJSON(e,n):null)}),e&&!n?{cells:s,heights:i,widths:r}:(u.data={cells:s,heights:i,widths:r},u.resourceList={attachMap:a,imageMap:l,macroMap:c},u)},e.prototype.toPlain=function(t){var e,o=this,r=[];return t=n.defaults(t||{},{filter:function(){return!0},returnString:!0,withLineBreak:!1}),o.forEach(function(e,n){var i=r[e],s=o.getCell(e,n),a="";i||(i=r[e]=[]),t.filter(s,e,n)&&(a=s?s.toPlain(t.withLineBreak):""),i.push(a)}),t.returnString?(e=n.map(r,function(t){return t.join(" ")}),e=e.join("\n")):r},e.prototype.toXml=function(e){var o,i,s,a=this,l=t.prototype.toXml.call(this,e),c=e.createElement("resource-list"),u=e.createElement("content"),d={},h=[];return a.forEach(function(t,o){var r=a.getCell(t,o),i=r?r.toXml(e,c,d):{},s=n.keys(i);1===s.length&&"value"===s[0]&&""===i.value&&(i={}),h.push(i)}),l.appendChild(c),i={cells:h,heights:[].concat(a.rowHeights),widths:[].concat(a.colWidths)},s=JSON.stringify(i),u.appendChild(e.createTextNode(s)),l.appendChild(u),o=e.createElement("styles"),r.toXml(a,o,e),l.appendChild(o),p.appendToXml(a.unknownTree,l),l},e.prototype.toBulbJSON=function(){return this.toJSON(!1,!0)},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=_.TABLE,this.setContentData(e.tableCells,e.rowHeights,e.colWidths),this.resourceMap=e.resourceMap,delete this.options,n.bindAll(this,"_onDetached","_onAttached","_onLockedChange"),this.on("detached",this._onDetached),this.on("attached",this._onAttached),this.on("locked-change",this._onLockedChange)},e.prototype._checkAndFixTableData=function(){var t,e,n=this.toJSON();try{t=I(n.data),t.errors.length&&(window.console.warn("Table data fix errors:  \n"+t.errors.join("\n")),e=t.fixedData,this.tableCells=u.cellsFromJSON({cellsJson:e.cells,height:e.heights.length,resourceList:n.resourceList,width:e.widths.length}),this.rowHeights=e.heights,this.colWidths=e.widths,this.trigger("content-change"))}catch(t){f.error("Table data fix failed",t)}},e.prototype._getCellAt=function(t,e){var n,o=this.tableCells;return o[t]&&o[t][e]&&(n=o[t][e]),n||f.warn("Failed to get cell at row/col",t,e),n},e.prototype._findMergePoint=function(t,e){var n,o=this._getCellAt(t,e);return o&&o.isMergedCell()&&(n=o.getMergedCellAttr(),t-=n.dy,e-=n.dx,o=this._getCellAt(t,e)),o?{cell:o,col:e,row:t}:void f.warn("Failed to find merge point row/col",t,e)},e.prototype._getCellSize=function(t,e,o){if(t&&!t.isMergedCell()){var r,i,s=this,a=function(t,e){return t+e};if(t&&!t.isMergedCell())return t.isMergePoint()?(r=t.getMergePointAttr())&&r.width&&r.height&&(i={cols:[],heights:[],rows:[],widths:[]},h(function(t){var e=o+t,n=s.getColumnWidth(e);i.widths.push(n),i.cols.push(e)},!1,r.width),h(function(t){var n=e+t,o=s.getRowHeight(n);i.heights.push(o),i.rows.push(n)},!1,r.height)):i={cols:[o],heights:[s.getRowHeight(e)],rows:[e],widths:[s.getColumnWidth(o)]},i&&(i.width=n.reduce(i.widths,a,0),i.height=n.reduce(i.heights,a,0)),i}},e.prototype._onDetached=function(){},e.prototype._onAttached=function(){},e.prototype._onLockedChange=function(){},e}(m)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(5),n(17),n(3),n(11),n(1)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t&&t.richText?new e(t):void l.warn("Failed to create Lines",t)},e.createBlank=function(t){return t?e.create({richText:s.createBlank(!1)}):new e({})},e.fromCollabJSON=function(t){var o=e.createBlank();return n.map(t,function(t){o.appendRichText(s.fromCollabJSON(t))}),o},e.fromJSON=function(t){var o=e.createBlank();return n.map(t,function(t){o.appendRichText(s.fromJSON(t))}),o},e.splitRichText=function(t){if(t){if(0===t.getLength()||!t.isKeepLineBreak())return[t];var e,o=t.getReadOnlyData(),r=[],i=[],a=0;for(a=0;a<o.length;a++)e=o[a],e.isLineBreak()?(r.push(i),i=[]):i.push(e);return i.length&&r.push(i),r=n.map(r,function(t){var e=s.create("",!1);return e.appendRichChars(t),e})}},e.prototype.appendLines=function(t){t&&(this.richTextList=this.richTextList.concat(t.getAsRichTextList()))},e.prototype.appendRichText=function(t){var n=e.splitRichText(t);n&&n.length&&(this.richTextList=this.richTextList.concat(n))},e.prototype.getAsRichTextList=function(){return[].concat(this.richTextList)},e.prototype.getCommonStyles=function(t,e,n){var o=this.toRichText();return t=t||0,e=e||o.getLength(),o.getCommonStyles(t,e,n)},e.prototype.getCommonStyle=function(t){var e;return n.some(this.richTextList,function(n){if(n&&!n.isEmpty()){var r=n.getCommonStyle(0,n.getLength(),t,!0);if(null==e)null!=r&&(e=r);else if(e!==r)return e=o.INTERM,!0}}),e===o.INTERM&&(e=null),e},e.prototype.getCount=function(){return this.richTextList.length},e.prototype.getStyle=function(t){var e=[];return n.each(this.richTextList,function(n){var o=n.getStyle(0,n.getLength(),t);e.push(o)}),e},e.prototype.isEmpty=function(){var t=this.richTextList;return!t||!t.length||n.every(t,function(t){return t&&t.isEmpty()})},e.prototype.setStyle=function(t,e){var o;n.isArray(e)?(o=e,n.each(this.richTextList,function(e,n){var r=o[n];e.setStyle(0,e.getLength(),t,r)})):n.each(this.richTextList,function(n){n.setStyle(0,n.getLength(),t,e)})},e.prototype.toCollabJSON=function(){return n.map(this.richTextList,function(t){return t.toCollabJSON()})},e.prototype.toJSON=function(){return n.map(this.richTextList,function(t){return t.toJSON()})},e.prototype.toHtml=function(t){t=n.defaults(t||{},{handleLineWrapper:function(t){t.className="bulb__table-cell-line"}});var e=t.styleRules,o=n.map(this.richTextList,function(n,o){var i=r.rich2html(n,{styleRules:e}),s=document.createElement("div");return t.handleLineWrapper(s,n,o),s.innerHTML=i,s.outerHTML});return o=o.join("")},e.prototype.toPlain=function(){return n.map(this.richTextList,function(t){return t?t.toString():""})},e.prototype.toRichText=function(){var t,e=this.getCount(),n=this.richTextList,o=s.create("",!0);for(t=0;t<e;t++)o.append(n[t]),t<e-1&&o.append(s.create("\n",!0));return o},e.prototype.toString=function(){return this.toRichText().toString()},e.prototype.initialize=function(t){t=n.defaults(t||{},{richText:null}),this.richTextList=[],this.appendRichText(t.richText)},e}(a)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return{ATTACHMENT:"attachment",IMAGE:"image",TEXT:"text",MACRO:"macro"}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(61),n(65),n(1),n(16),n(24)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t&&t.source&&t.resource&&null!=t.fileLength&&t.fileName?(t.resId||s.warn("Will create resId by url!"),new e(t)):void s.warn("Failed to create AttachmentResource",t)},e.fromJSON=function(t,r){t.resId&&r&&r.attachMap||s.error("jsonObj or resourceList is wrong, ",t,r);var i=r.attachMap[t.resId];return i||s.error("resourceList is wrong"),i.resource&&(t.resId=o.parseImgSource(i.resource).resId),e.fromCollabJSON(n.extend(t,i))},e.fromCollabJSON=function(t){return t.fileLength&&t.fileName&&t.resId&&t.resource&&t.source||s.error("jsonObj is wrong, ",t),e.create({resId:t.resId,source:t.source,resource:t.resource,fileName:t.fileName,fileLength:t.fileLength})},e.fromXml=function(t,n){var o=$(n),r=o.children("source:first").text(),i=o.children("resource:first").text(),s=o.children("filename:first").text(),a=o.children("filelength:first").text();return a&&(a=parseInt(a,10)),e.create({resId:t,source:r,resource:i,fileName:s,fileLength:a,fakeLoading:!1,type:l.TYPE_ATTACHMENT})},e.prototype.getFileName=function(){return this.attachmentProps.fileName},e.prototype.getInfo=function(){return{fileLength:this.attachmentProps.fileLength,fileName:this.attachmentProps.fileName,resource:this.attachmentProps.resource,source:this.attachmentProps.source}},e.prototype.getResource=function(t){var e=this.attachmentProps.resource;return t&&t[e]&&(e=t[e]),e},e.prototype.getSource=function(t){var e=this.attachmentProps.source;return t&&t[e]&&(e=t[e]),e},e.prototype.toCollabJSON=function(){var t;return t=this.getInfo(),t.resId=this.attachmentProps.resId,t},e.prototype.toHtml=function(t){var e,n=a("",document,!0,!0),o=n.ownerDocument,r=o.createElement("div"),i=$(r),s=$(o.createElement("div"));return s.attr({"data-media-type":"attachment",filelength:this.attachmentProps.fileLength,filename:this.attachmentProps.fileName,path:this.getResource()}),i.append(s),e=r.outerHTML,r=i=s=null,e},e.prototype.toJSON=function(){return{resId:this.getResId()}},e.prototype.toPlain=function(){return""},e.prototype.toXml=function(t,e){var n=t.createElement("resource-mono"),o=t.createElement("attach"),i=this.getInfo();r.appendText(t,n,"res-id",this.getResId()),r.appendText(t,o,"source",i.source),r.appendText(t,o,"resource",i.resource),r.appendText(t,o,"filename",i.fileName),r.appendText(t,o,"filelength",i.fileLength),n.appendChild(o),e.appendChild(n)},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.attachmentProps=this.resProps,this.attachmentProps.resId=e.resId||o.parseImgSource(e.resource).resId,this.attachmentProps.type=l.TYPE_ATTACHMENT},e}(l)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(60),n(61),n(15),n(65),n(1),n(16),n(24)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t&&t.source?(t.resId&&l.warn("Will create resId by url!"),new e(t)):void l.warn("Failed to create ImageResource",t)},e.fromCollabJSON=function(t){return t.resId&&t.source||l.error("jsonObj is wrong , ",t),e.create({height:t.height,resId:t.resId,source:t.source,title:"",type:u.TYPE_IMAGE,width:t.width})},e.fromJSON=function(t,o){t.resId&&o&&o.imageMap||l.error("jsonObj is or resourceList wrong , ",t,o);var i=o.imageMap[t.resId];return i||l.error("resourceList wrong"),i.source&&(t.resId=r.parseImgSource(i.source).resId),e.fromCollabJSON(n.extend(t,i))},e.fromXml=function(t,n){var o=$(n),r=o.children("source:first").text(),i=o.children("width:first").text(),s=o.children("height:first").text();return i&&(i=parseInt(i,10)),s&&(s=parseInt(s,10)),e.create({height:s,resId:t,source:r,title:"",type:u.TYPE_IMAGE,width:i})},e.prototype.getInfo=function(){var t=this.getSize();return null===t.width&&null===t.height&&(t=null),n.extend({source:this.getSource()},t)},e.prototype.getSize=function(){return{height:this.imageProps.height||null,width:this.imageProps.width||null}},e.prototype.getSource=function(t){var e=this.imageProps.source;return t&&t[e]&&(e=t[e]),e},e.prototype.toCollabJSON=function(){var t={};return t.source=this.getSource(),t.width=this.imageProps.width||null,t.height=this.imageProps.height||null,t.resId=this.imageProps.resId,t},e.prototype.toHtml=function(t){var e,r=c("",document,!0,!0),i=r.ownerDocument,a=$(i.createElement("img"));return t=n.defaults(t||{},{resourceMap:null}),e=this.getSource(t.resourceMap)||"",s.IS_PC&&(e=o(e)),a.attr({"data-media-type":"image",height:"auto",src:e,width:"100%"}),a.get(0).outerHTML},e.prototype.toJSON=function(){return{resId:this.getResId()}},e.prototype.toPlain=function(){return""},e.prototype.toXml=function(t,e){var o=t.createElement("resource-mono"),r=t.createElement("image"),i=this.getSize();a.appendText(t,o,"res-id",this.getResId()),a.appendText(t,r,"source",this.getSource()),i&&n.each(["width","height"],function(t){var e=i[t];e&&a.appendText(r,t,e+"")}),o.appendChild(r),e.appendChild(o)},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.imageProps=this.resProps,this.imageProps.resId=e.resId||r.parseImgSource(e.source).resId,this.imageProps.type=u.TYPE_IMAGE},e}(u)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,o;!function(e){t.exports=function(){return function t(e,n,r){function i(a,l){if(!n[a]){if(!e[a]){var c="function"==typeof o&&o;if(!l&&c)return o(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var o=t("./trim"),r=t("./decapitalize");e.exports=function(t,e){return t=o(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""}),!0===e?r(t):t}},{"./decapitalize":9,"./trim":60}],2:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return t=o(t),t.charAt(0).toUpperCase()+t.slice(1)}},{"./helper/makeString":19}],3:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).split("")}},{"./helper/makeString":19}],4:[function(t,e,n){e.exports=function(t,e){return null==t?[]:(t=String(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])}},{}],5:[function(t,e,n){var o=t("./capitalize"),r=t("./camelize"),i=t("./helper/makeString");e.exports=function(t){return t=i(t),o(r(t.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":1,"./capitalize":2,"./helper/makeString":19}],6:[function(t,e,n){var o=t("./trim");e.exports=function(t){return o(t).replace(/\s+/g," ")}},{"./trim":60}],7:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){if(t=o(t),e=o(e),0===t.length||0===e.length)return 0;for(var n=0,r=0,i=e.length;-1!==(r=t.indexOf(e,r));)n++,r+=i;return n}},{"./helper/makeString":19}],8:[function(t,e,n){var o=t("./trim");e.exports=function(t){return o(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":60}],9:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return t=o(t),t.charAt(0).toLowerCase()+t.slice(1)}},{"./helper/makeString":19}],10:[function(t,e,n){function o(t){for(var e=t.match(/^[\s\\t]*/gm),n=e[0].length,o=1;o<e.length;o++)n=Math.min(e[o].length,n);return n}var r=t("./helper/makeString");e.exports=function(t,e){t=r(t);var n,i=o(t);return 0===i?t:(n="string"==typeof e?new RegExp("^"+e,"gm"):new RegExp("^[ \\t]{"+i+"}","gm"),t.replace(n,""))}},{"./helper/makeString":19}],11:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/toPositive");e.exports=function(t,e,n){return t=o(t),e=""+e,(n=void 0===n?t.length-e.length:Math.min(r(n),t.length)-e.length)>=0&&t.indexOf(e,n)===n}},{"./helper/makeString":19,"./helper/toPositive":21}],12:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/escapeChars"),i={};for(var s in r)i[r[s]]=s;i["'"]="#39",e.exports=function(t){return o(t).replace(/[&<>"']/g,function(t){return"&"+i[t]+";"})}},{"./helper/escapeChars":17,"./helper/makeString":19}],13:[function(t,e,n){e.exports=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse|join)$/)&&(t[e]=this[e]);return t}},{}],14:[function(t,e,n){"use strict";function o(t){if(!(this instanceof o))return new o(t);this._wrapped=t}function r(t,e){"function"==typeof e&&(o.prototype[t]=function(){var t=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=e.apply(null,t);return"string"==typeof n?new o(n):n})}o.VERSION="3.0.3",o.isBlank=t("./isBlank"),o.stripTags=t("./stripTags"),o.capitalize=t("./capitalize"),o.decapitalize=t("./decapitalize"),o.chop=t("./chop"),o.trim=t("./trim"),o.clean=t("./clean"),o.count=t("./count"),o.chars=t("./chars"),o.swapCase=t("./swapCase"),o.escapeHTML=t("./escapeHTML"),o.unescapeHTML=t("./unescapeHTML"),o.splice=t("./splice"),o.insert=t("./insert"),o.replaceAll=t("./replaceAll"),o.include=t("./include"),o.join=t("./join"),o.lines=t("./lines"),o.dedent=t("./dedent"),o.reverse=t("./reverse"),o.startsWith=t("./startsWith"),o.endsWith=t("./endsWith"),o.pred=t("./pred"),o.succ=t("./succ"),o.titleize=t("./titleize"),o.camelize=t("./camelize"),o.underscored=t("./underscored"),o.dasherize=t("./dasherize"),o.classify=t("./classify"),o.humanize=t("./humanize"),o.ltrim=t("./ltrim"),o.rtrim=t("./rtrim"),o.truncate=t("./truncate"),o.prune=t("./prune"),o.words=t("./words"),o.pad=t("./pad"),o.lpad=t("./lpad"),o.rpad=t("./rpad"),o.lrpad=t("./lrpad"),o.sprintf=t("./sprintf"),o.vsprintf=t("./vsprintf"),o.toNumber=t("./toNumber"),o.numberFormat=t("./numberFormat"),o.strRight=t("./strRight"),o.strRightBack=t("./strRightBack"),o.strLeft=t("./strLeft"),o.strLeftBack=t("./strLeftBack"),o.toSentence=t("./toSentence"),o.toSentenceSerial=t("./toSentenceSerial"),o.slugify=t("./slugify"),o.surround=t("./surround"),o.quote=t("./quote"),o.unquote=t("./unquote"),o.repeat=t("./repeat"),o.naturalCmp=t("./naturalCmp"),o.levenshtein=t("./levenshtein"),o.toBoolean=t("./toBoolean"),o.exports=t("./exports"),o.escapeRegExp=t("./helper/escapeRegExp"),o.strip=o.trim,o.lstrip=o.ltrim,o.rstrip=o.rtrim,o.center=o.lrpad,o.rjust=o.lpad,o.ljust=o.rpad,o.contains=o.include,o.q=o.quote,o.toBool=o.toBoolean,o.camelcase=o.camelize,o.prototype={value:function(){return this._wrapped}};for(var i in o)r(i,o[i]);r("tap",function(t,e){return e(t)});var s=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var i in s)!function(t){r(t,function(e){var n=Array.prototype.slice.call(arguments,1);return String.prototype[t].apply(e,n)})}(s[i]);e.exports=o},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./count":7,"./dasherize":8,"./decapitalize":9,"./dedent":10,"./endsWith":11,"./escapeHTML":12,"./exports":13,"./helper/escapeRegExp":18,"./humanize":22,"./include":23,"./insert":24,"./isBlank":25,"./join":26,"./levenshtein":27,"./lines":28,"./lpad":29,"./lrpad":30,"./ltrim":31,"./naturalCmp":32,"./numberFormat":33,"./pad":34,"./pred":35,"./prune":36,"./quote":37,"./repeat":38,"./replaceAll":39,"./reverse":40,"./rpad":41,"./rtrim":42,"./slugify":43,"./splice":44,"./sprintf":45,"./startsWith":46,"./strLeft":47,"./strLeftBack":48,"./strRight":49,"./strRightBack":50,"./stripTags":51,"./succ":52,"./surround":53,"./swapCase":54,"./titleize":55,"./toBoolean":56,"./toNumber":57,"./toSentence":58,"./toSentenceSerial":59,"./trim":60,"./truncate":61,"./underscored":62,"./unescapeHTML":63,"./unquote":64,"./vsprintf":65,"./words":66}],15:[function(t,e,n){var o=t("./makeString");e.exports=function(t,e){return t=o(t),0===t.length?"":t.slice(0,-1)+String.fromCharCode(t.charCodeAt(t.length-1)+e)}},{"./makeString":19}],16:[function(t,e,n){var o=t("./escapeRegExp");e.exports=function(t){return null==t?"\\s":t.source?t.source:"["+o(t)+"]"}},{"./escapeRegExp":18}],17:[function(t,e,n){var o={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};e.exports=o},{}],18:[function(t,e,n){var o=t("./makeString");e.exports=function(t){return o(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":19}],19:[function(t,e,n){e.exports=function(t){return null==t?"":""+t}},{}],20:[function(t,e,n){e.exports=function(t,e){if(e<1)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n}},{}],21:[function(t,e,n){e.exports=function(t){return t<0?0:+t||0}},{}],22:[function(t,e,n){var o=t("./capitalize"),r=t("./underscored"),i=t("./trim");e.exports=function(t){return o(i(r(t).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":2,"./trim":60,"./underscored":62}],23:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){return""===e||-1!==o(t).indexOf(e)}},{"./helper/makeString":19}],24:[function(t,e,n){var o=t("./splice");e.exports=function(t,e,n){return o(t,e,0,n)}},{"./splice":44}],25:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return/^\s*$/.test(o(t))}},{"./helper/makeString":19}],26:[function(t,e,n){var o=t("./helper/makeString"),r=[].slice;e.exports=function(){var t=r.call(arguments),e=t.shift();return t.join(o(e))}},{"./helper/makeString":19}],27:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);for(var n,r,i=[],s=0;s<=e.length;s++)for(var a=0;a<=t.length;a++)r=s&&a?t.charAt(a-1)===e.charAt(s-1)?n:Math.min(i[a],i[a-1],n)+1:s+a,n=i[a],i[a]=r;return i.pop()}},{"./helper/makeString":19}],28:[function(t,e,n){e.exports=function(t){return null==t?[]:String(t).split(/\r?\n/)}},{}],29:[function(t,e,n){var o=t("./pad");e.exports=function(t,e,n){return o(t,e,n)}},{"./pad":34}],30:[function(t,e,n){var o=t("./pad");e.exports=function(t,e,n){return o(t,e,n,"both")}},{"./pad":34}],31:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=String.prototype.trimLeft;e.exports=function(t,e){return t=o(t),!e&&i?i.call(t):(e=r(e),t.replace(new RegExp("^"+e+"+"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],32:[function(t,e,n){e.exports=function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,o=String(t).match(n),r=String(e).match(n),i=Math.min(o.length,r.length),s=0;s<i;s++){var a=o[s],l=r[s];if(a!==l){var c=+a,u=+l;return c===c&&u===u?c>u?1:-1:a<l?-1:1}}return o.length!=r.length?o.length-r.length:t<e?-1:1}},{}],33:[function(t,e,n){e.exports=function(t,e,n,o){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),o="string"==typeof o?o:",";var r=t.split("."),i=r[0],s=r[1]?(n||".")+r[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+o)+s}},{}],34:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/strRepeat");e.exports=function(t,e,n,i){t=o(t),e=~~e;var s=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",i){case"right":return s=e-t.length,t+r(n,s);case"both":return s=e-t.length,r(n,Math.ceil(s/2))+t+r(n,Math.floor(s/2));default:return s=e-t.length,r(n,s)+t}}},{"./helper/makeString":19,"./helper/strRepeat":20}],35:[function(t,e,n){var o=t("./helper/adjacent");e.exports=function(t){return o(t,-1)}},{"./helper/adjacent":15}],36:[function(t,e,n){var o=t("./helper/makeString"),r=t("./rtrim");e.exports=function(t,e,n){if(t=o(t),e=~~e,n=null!=n?String(n):"...",t.length<=e)return t;var i=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},s=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,i);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):r(s.slice(0,s.length-1)),(s+n).length>t.length?t:t.slice(0,s.length)+n}},{"./helper/makeString":19,"./rtrim":42}],37:[function(t,e,n){var o=t("./surround");e.exports=function(t,e){return o(t,e||'"')}},{"./surround":53}],38:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/strRepeat");e.exports=function(t,e,n){if(t=o(t),e=~~e,null==n)return r(t,e);for(var i=[];e>0;i[--e]=t);return i.join(n)}},{"./helper/makeString":19,"./helper/strRepeat":20}],39:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e,n,r){var i=!0===r?"gi":"g",s=new RegExp(e,i);return o(t).replace(s,n)}},{"./helper/makeString":19}],40:[function(t,e,n){var o=t("./chars");e.exports=function(t){return o(t).reverse().join("")}},{"./chars":3}],41:[function(t,e,n){var o=t("./pad");e.exports=function(t,e,n){return o(t,e,n,"right")}},{"./pad":34}],42:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=String.prototype.trimRight;e.exports=function(t,e){return t=o(t),!e&&i?i.call(t):(e=r(e),t.replace(new RegExp(e+"+$"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],43:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=t("./trim"),s=t("./dasherize");e.exports=function(t){var e="",n=new RegExp(r(e),"g");return t=o(t).toLowerCase().replace(n,function(t){return"aaaaaaaaaccceeeeeghiiiijllnnoooooooossssttuuuuuunyyczzz".charAt(e.indexOf(t))||"-"}),i(s(t.replace(/[^\w\s-]/g,"-")),"-")}},{"./dasherize":8,"./helper/defaultToWhiteSpace":16,"./helper/makeString":19,"./trim":60}],44:[function(t,e,n){var o=t("./chars");e.exports=function(t,e,n,r){var i=o(t);return i.splice(~~e,~~n,r),i.join("")}},{"./chars":3}],45:[function(t,e,n){var o=t("./helper/strRepeat"),r=Object.prototype.toString,i=function(){function t(t){return r.call(t).slice(8,-1).toLowerCase()}var e=o,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,o){var r,s,a,l,c,u,p,d=1,h=n.length,f="",g=[];for(s=0;s<h;s++)if("string"===(f=t(n[s])))g.push(n[s]);else if("array"===f){if(l=n[s],l[2])for(r=o[d],a=0;a<l[2].length;a++){if(!r.hasOwnProperty(l[2][a]))throw new Error(i('[_.sprintf] property "%s" does not exist',l[2][a]));r=r[l[2][a]]}else r=l[1]?o[l[1]]:o[d++];if(/[^s]/.test(l[8])&&"number"!=t(r))throw new Error(i("[_.sprintf] expecting number but found %s",t(r)));switch(l[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=l[7]?r.toExponential(l[7]):r.toExponential();break;case"f":r=l[7]?parseFloat(r).toFixed(l[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&l[7]?r.substring(0,l[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(l[8])&&l[3]&&r>=0?"+"+r:r,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",p=l[6]-String(r).length,c=l[6]?e(u,p):"",g.push(l[5]?r+c:c+r)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,n=[],o=[],r=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))o.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))o.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var i=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(i.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))i.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");i.push(a[1])}n[2]=i}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");o.push(n)}e=e.substring(n[0].length)}return o},n}();e.exports=i},{"./helper/strRepeat":20}],46:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/toPositive");e.exports=function(t,e,n){return t=o(t),e=""+e,n=null==n?0:Math.min(r(n),t.length),t.lastIndexOf(e,n)===n}},{"./helper/makeString":19,"./helper/toPositive":21}],47:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=e?t.indexOf(e):-1;return~n?t.slice(0,n):t}},{"./helper/makeString":19}],48:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=t.lastIndexOf(e);return~n?t.slice(0,n):t}},{"./helper/makeString":19}],49:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=e?t.indexOf(e):-1;return~n?t.slice(n+e.length,t.length):t}},{"./helper/makeString":19}],50:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=e?t.lastIndexOf(e):-1;return~n?t.slice(n+e.length,t.length):t}},{"./helper/makeString":19}],51:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":19}],52:[function(t,e,n){var o=t("./helper/adjacent");e.exports=function(t){return o(t,1)}},{"./helper/adjacent":15}],53:[function(t,e,n){e.exports=function(t,e){return[e,t,e].join("")}},{}],54:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})}},{"./helper/makeString":19}],55:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).toLowerCase().replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})}},{"./helper/makeString":19}],56:[function(t,e,n){function o(t,e){var n,o,r=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(o=e[n]){if(o.test&&o.test(t))return!0;if(o.toLowerCase()===r)return!0}}var r=t("./trim");e.exports=function(t,e,n){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=r(t),!!o(t,e||["true","1"])||!o(t,n||["false","0"])&&void 0)}},{"./trim":60}],57:[function(t,e,n){t("./trim"),e.exports=function(t,e){if(null==t)return 0;var n=Math.pow(10,isFinite(e)?e:0);return Math.round(t*n)/n}},{"./trim":60}],58:[function(t,e,n){var o=t("./rtrim");e.exports=function(t,e,n,r){e=e||", ",n=n||" and ";var i=t.slice(),s=i.pop();return t.length>2&&r&&(n=o(e)+n),i.length?i.join(e)+n+s:s}},{"./rtrim":42}],59:[function(t,e,n){var o=t("./toSentence");e.exports=function(t,e,n){return o(t,e,n,!0)}},{"./toSentence":58}],60:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=String.prototype.trim;e.exports=function(t,e){return t=o(t),!e&&i?i.call(t):(e=r(e),t.replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],61:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e,n){return t=o(t),n=n||"...",e=~~e,t.length>e?t.slice(0,e)+n:t}},{"./helper/makeString":19}],62:[function(t,e,n){var o=t("./trim");e.exports=function(t){return o(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":60}],63:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/escapeChars");e.exports=function(t){return o(t).replace(/\&([^;]+);/g,function(t,e){var n;return e in r?r[e]:(n=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=e.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):t})}},{"./helper/escapeChars":17,"./helper/makeString":19}],64:[function(t,e,n){e.exports=function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t}},{}],65:[function(t,e,n){var o=t("./sprintf");e.exports=function(t,e){return e.unshift(t),o.apply(null,e)}},{"./sprintf":45}],66:[function(t,e,n){var o=t("./isBlank"),r=t("./trim");e.exports=function(t,e){return o(t)?[]:r(t,e).split(e||/\s+/)}},{"./isBlank":25,"./trim":60}]},{},[14])(14)}()}()},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(6),n(4),n(2)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromJSON=function(){},e.fromXml=function(t){var n=new e({node:t,nodeType:"xml"});return n.parseIdFromXml(t),n},e.fromBulbJSON=function(t){var n=new e({node:t,nodeType:"json"});return t.blockId&&n.setId(t.blockId),n},e.prototype.countWords=function(){return 0},e.prototype.setBlockStyle=function(){},e.prototype.setBlockStyles=function(){},e.prototype.getBlockStyles=function(){return null},e.prototype.getBlockStyle=function(){return null},e.prototype.getDefaultBlockStyles=function(){return null},e.prototype.toJSON=function(){return null},e.prototype.toHtml=function(){return""},e.prototype.toPlain=function(){return""},e.prototype.toXml=function(t){var e,i,s=!1,a=this.unknownProps.node;return"xml"!==this.unknownProps.nodeType?null:(n.some(a.childNodes,function(t){return t.nodeName===r.TAG_ID_NAME&&(s=!0),s}),s||(e=t.createElement(r.TAG_ID_NAME),i=t.createTextNode(o.newGUID()),e.appendChild(i),a.appendChild(e)),a)},e.prototype.toBulbJSON=function(){return"json"!==this.unknownProps.nodeType?null:this.unknownProps.node},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.unknownProps=n.clone(e),this.type=s.UNKNOWN},e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){(function(e){t.exports=e.$=n(119)}).call(e,n(53))},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(1),n(16),n(4),n(12),n(2),n(8)],void 0!==(r=function(t,e,n,o,r,s,a,l,c){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromJSON=function(t){if(!(t&&t.type&&t.type===l.ATTACHMENT&&t.source&&t.resource))return void o.warn("jsonObj or jsonObj.source/resource does NOT exist!");var n=new e({fakeLoading:!!t.fakeLoading,fileLength:t.fileLength,fileName:t.fileName,resource:t.resource,source:t.source});return t.styles&&n.setStyles(t.styles),t.blockId&&n.setId(t.blockId),n},e.fromXml=function(t){var n,o,r=$(t),i=$.trim(r.find("source").text()),l=$.trim(r.find("resource").text()),u=$.trim(r.find("filename").text())||"",p=$.trim(r.find("filelength").text());return o=parseInt(p,10),isNaN(o)&&(o=0),n=new e({fakeLoading:!1,fileLength:o,fileName:u,resource:l,source:i}),n.parseIdFromXml(t),r.children().each(function(t,e){switch(e.nodeName){case s.TAG_ID_NAME:case s.LEGACY_TAG_ID_NAME:case"source":case"resource":case"filename":case"filelength":break;case"styles":a.fromXml(n,e);break;default:c.appendToTree(n.unknownTree,e)}}),n},e.prototype.countWords=function(){return 0},e.prototype.getFakeLoading=function(){return this.attachmentProps.fakeLoading},e.prototype.getFileLength=function(){return this.attachmentProps.fileLength},e.prototype.getFileName=function(){return this.attachmentProps.fileName},e.prototype.getResource=function(t){var e,n=this.attachmentProps.resource;return!0===t&&(e=this.getExtraInfo("pcResMap"))&&e[n]&&(n=e[n]),n},e.prototype.getSource=function(t){var e,n=this.attachmentProps.source;return!0===t&&(e=this.getExtraInfo("pcResMap"))&&e[n]&&(n=e[n]),n},e.prototype.getStyles=function(t){return t?this.getBlockStyle(t,!1):this.getBlockStyles()},e.prototype.setFakeLoading=function(t){this.attachmentProps.fakeLoading=t},e.prototype.setFileLength=function(t){var e=parseInt(t,10);return!isNaN(e)&&e!==this.attachmentProps.fileLength&&(this.attachmentProps.fileLength=e,this.trigger("content-change"),!0)},e.prototype.setFileName=function(t){return!(!(t=String(t||""))||t===this.attachmentProps.fileName||(this.attachmentProps.fileName=t,this.trigger("content-change"),0))},e.prototype.setResource=function(t){return!(!(t=(t||"")+"")||t===this.attachmentProps.resource||(this.attachmentProps.resource=t,this.trigger("content-change"),0))},e.prototype.setSource=function(t){return!(!(t=(t||"")+"")||t===this.attachmentProps.source||(this.attachmentProps.source=t,this.trigger("content-change"),0))},e.prototype.setStyles=function(t,e){var o=this;return n.isString(t)?this.setBlockStyle(t,e):n.isObject(t)&&n.each(t,function(t,e){o.setBlockStyle(e,t)}),!0},e.prototype.toHtml=function(){var t,e=this,o=e.getStyles(null),i=r("",document,!0,!0),s=i.ownerDocument,a=s.createElement("div"),l=$(a),c=$(s.createElement("div"));return l.attr("yne-bulb-block","attachment"),c.attr({"data-media-type":"attachment",filelength:this.attachmentProps.fileLength,filename:this.attachmentProps.fileName,path:this.getResource(!1)}),n.each(o,function(t,e){switch(e){case"align":l.css("text-align",t);break;case"float":l.css("float",t)}}),l.append(c),t=a.outerHTML,a=l=c=null,t},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.source=this.getSource(!1),e.resource=this.getResource(!1),e.fileName=this.getFileName(),e.fileLength=this.getFileLength(),e},e.prototype.toPlain=function(){return""},e.prototype.toXml=function(e){var o,r,i=this,s=i.getSource(!1),l=["Source","Resource","FileName","FileLength"];if(s)return o=t.prototype.toXml.apply(i,[e]),n.each(l,function(t){var n=e.createElement(t.toLowerCase()),r=i["get"+t](),s=e.createTextNode(r);n.appendChild(s),o.appendChild(n)}),r=e.createElement("styles"),a.toXml(i,r,e),o.appendChild(r),c.appendToXml(i.unknownTree,o),o},e.prototype.initialize=function(e){var o=this;if(null==e||null==e.source||null==e.resource||null==e.fileLength||null==e.fileName)throw new Error("props or prop(source, resource, fileName, fileLength) in props cannot be null");t.prototype.initialize.call(this,e),o.attachmentProps=n.clone(e),o.attachmentProps.fakeLoading=!!e.fakeLoading,o.type=l.ATTACHMENT},e}(s)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(6),n(12),n(8),n(1),n(2),n(7),n(17),n(3),n(28)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlank=function(){return new e({})},e.fromCollabJSON=function(t){var n=e.generalFromJSON(t,!0);return t.ownerId&&(n.oldOwnerId=t.ownerId),n},e.fromJSON=function(t){return e.generalFromJSON(t,!1)},e.fromXml=function(t){var n,i=new e({});return i.parseIdFromXml(t),i.setText(u.fromXml(t)),$(t).children().each(function(t,e){switch(e.nodeName){case l.TAG_ID_NAME:case l.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":o.fromXml(i,e);break;case"href":n=$(e).find("value").text(),i.setHref(n);break;default:r.appendToTree(i.unknownTree,e)}}),i},e.generalFromJSON=function(e,n){var o=t.generalFromJSON.call(this,e,n);return o&&e.href&&o.setHref(e.href),o},e.prototype.blur=function(){this.trigger("blur")},e.prototype.findAndSetOwnerList=function(t){var e,n=t.getPreBlock(this),o=t.getNextBlock(this),r=this.oldOwnerId;return r?a.isCatalogue(o)&&r===o.getOwnerId()?(e=o.getOwnerList(),this.setOwnerList(e),e.insertBefore(this,o)):a.isCatalogue(n)&&r===n.getOwnerId()?(e=n.getOwnerList(),this.setOwnerList(e),e.insertAfter(this,n)):(e=new p({id:r}),this.setOwnerList(e),e.insertAfter(this,null)):s.error("No oldOwnerId!")},e.prototype.focus=function(){this.trigger("focus")},e.prototype.getHref=function(){return this.href},e.prototype.getHtmlHref=function(){return n.isGUID(this.href)?"#"+this.href:this.href||"#"},e.prototype.getOwnerId=function(){return this.getOwnerList().getId()},e.prototype.getOwnerList=function(){return this.ownerList||s.warn('No ownerList! check have "setOwnerList"'),this.ownerList},e.prototype.getViewHref=function(){return n.isGUID(this.href)?null:this.href},e.prototype.isFirst=function(){return this.isFirstProp},e.prototype.isLast=function(){return this.isLastProp},e.prototype.removeSorting=function(){var t=!1;this.isFirstProp&&(t=!0,this.isFirstProp=null),this.isLastProp&&(t=!0,this.isLastProp=null),t&&this.trigger("sorting-change")},e.prototype.setOwnerList=function(t){this.ownerList=t},e.prototype.setFirst=function(){this.isFirstProp||(this.isFirstProp=!0,this.trigger("sorting-change"))},e.prototype.setHref=function(t){this.href=t||null,this.trigger("style-change","href",t)},e.prototype.setIndent=function(t){t>0&&this.setBlockStyle("indent",t)},e.prototype.setLast=function(){this.isLastProp||(this.isLastProp=!0,this.trigger("sorting-change"))},e.prototype.toCollabJSON=function(){var e=t.prototype.toCollabJSON.call(this);return e.href=this.getHref(),e.ownerId=this.getOwnerId(),e},e.prototype.toBulbJSON=function(){var t=this.toCollabJSON();return t.text&&delete t.text,t},e.prototype.toJSON=function(e,n){var o=this.sliceText(e,n,!1),r=t.prototype.toJSON.call(this);return r.text=o.toJSON(),r.href=this.getHref(),r.ownerId=this.getOwnerId(),r},e.prototype.toHtml=function(t,e,n){var o,r,i=document.createElement("div"),s=$("<a></a>"),a=$(i),l="";return n=!0===n,a.attr("yne-bulb-block","catalogue").css("white-space","pre-wrap"),this.isFirst()&&(l="first"),this.isLast()&&(l+="last"),a.attr("yne-bulb-order",l),this.applyBlockStylesOnElement(a,!0),t=t||0,e=null==e?this.getEndOffset():e,o=this.sliceText(t,e,!1),r=c.rich2html(o,{withDefault:n}),s.attr("href",this.getHtmlHref()).html(r),a.html(s[0].outerHTML),i.outerHTML},e.prototype.toXml=function(e){var n,o,r=t.prototype.toXml.apply(this,[e]);return this.getHref()&&(n=e.createElement("href"),o=e.createElement("value"),$(o).text(this.getHref()),n.appendChild(o),r.appendChild(n)),$(r).attr("catalogue-id",this.getOwnerId()),$(r).attr("compat","true"),r},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=a.CATALOGUE,this.setHref(e.href),this.setIndent(e.indent),this.options&&this.options.ownerList&&this.setOwnerList(this.options.ownerList),this.on("attached",this._onAttached.bind(this)),this.on("detached",this._onDetached.bind(this)),this.on("select",this._onSelect.bind(this)),this.on("remove-select",this._onRemoveSelect.bind(this))},e.prototype._onAttached=function(t){var e=this.getOwnerList(),n=t.getPreBlock(this),o=t.getNextBlock(this);if(!e)return this.findAndSetOwnerList(t);n&&a.isCatalogue(n)&&n.getOwnerId()===this.getOwnerId()?e.insertAfter(this,n):o&&a.isCatalogue(o)&&o.getOwnerId()===this.getOwnerId()?e.insertBefore(this,o):e.insertAfter(this,null)},e.prototype._onDetached=function(){this.getOwnerList().removeItem(this)},e.prototype._onRemoveSelect=function(){this.getOwnerList().removeSelect()},e.prototype._onSelect=function(){this.getOwnerList().select()},e}(l)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(12),n(8),n(88),n(2),n(7),n(17),n(3)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlank=function(){return new e({})},e.fromCollabJSON=function(t){return this.generalFromJSON(t,!0)},e.fromJSON=function(t){return this.generalFromJSON(t,!1)},e.fromXml=function(t){var n=new e({});return n.parseIdFromXml(t),n.setText(u.fromXml(t)),e.fromXmlHelp(n,$(t)),$(t).children().each(function(t,e){switch(e.nodeName){case l.TAG_ID_NAME:case l.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":o.fromXml(n,e);break;default:r.appendToTree(n.unknownTree,e)}}),n},e.generalFromJSON=function(e,n){var o=t.generalFromJSON.call(this,e,n);return o&&e.level&&o.setLevel(e.level),o},e.toXmlHelp=function(t,e){var n=t.getLevel();n&&$(e).attr("level",n),$(e).attr("compat","true")},e.fromXmlHelp=function(t,e){var n=parseInt($(e).attr("level"),10);t.setLevel(n)},e.prototype.getBlockStyle=function(e,n){return"heading"===e?this.level:t.prototype.getBlockStyle.call(this,e,n)},e.prototype.getDefaultBlockStyles=function(){return n.extend({},t.prototype.getDefaultBlockStyles.apply(this,[]),s.headingBlockStyles[this.level])},e.prototype.getDefaultInlineStyles=function(){return n.extend({},t.prototype.getDefaultInlineStyles.call(this),s.headingInlineStyles[this.level])},e.prototype.getInlineStylesForEmpty=function(){return n.extend({heading:this.level},this.getDefaultInlineStyles())},e.prototype.getLevel=function(){return this.level},e.prototype.setLevel=function(t){t&&(this.level=t,this.trigger("content-change",this))},e.prototype.toCollabJSON=function(){var e=t.prototype.toCollabJSON.call(this);return e.richText=this.richText.toCollabJSON(),e.level=this.getLevel(),e},e.prototype.toHtml=function(t,e,n){var o,r,i,s=document.createElement("div"),a=$(s);return n=!0===n,a.attr("yne-bulb-block","heading").attr("yne-bulb-level",this.getLevel()).attr("id",this.getId()).css("white-space","pre-wrap"),this.applyBlockStylesOnElement(a),t=t||0,e=null==e?this.getEndOffset():e,o=this.sliceText(t,e,!1),r=c.rich2html(o,{withDefault:n}),a.html(r),i=s.outerHTML,s=a=null,i},e.prototype.toJSON=function(e,n){var o=this.sliceText(e,n,!1),r=t.prototype.toJSON.call(this,e,n);return r.richText=o.toJSON(),r.level=this.getLevel(),r},e.prototype.toXml=function(n){var o=t.prototype.toXml.apply(this,[n]);return e.toXmlHelp(this,o),o},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=a.HEADING,this.setLevel(e.level)},e}(l)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(12),n(8),n(1),n(4),n(2)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromCollabJSON=function(t){var e=this.fromJSON(t);return t.blockId&&e.setId(t.blockId),e},e.fromJSON=function(t){if(!t||t.type!==l.HR)return void s.error("invalid jsonObj");var o=new e({});return n.each(t.styles,function(t,e){o.setBlockStyle(e,t)}),o},e.fromXml=function(t){var n=new e({}),i=$(t);return n.parseIdFromXml(t),i.children().each(function(t,e){switch(e.nodeName){case a.TAG_ID_NAME:case a.LEGACY_TAG_ID_NAME:break;case"styles":o.fromXml(n,e);break;default:r.appendToTree(n.unknownTree,e)}}),n},e.prototype.countWords=function(){return 0},e.prototype.toCollabJSON=function(){return this.toJSON()},e.prototype.toHtml=function(){var t=document.createElement("hr"),e=$(t),o=this.getBlockStyles();return e.attr("yne-bulb-block","hr"),n.each(o,function(t,n){e.attr("yne-style-"+n,t)}),e.css("clear","both"),t.outerHTML},e.prototype.toJSON=function(){return t.prototype.toJSON.call(this)},e.prototype.toPlain=function(){return new Array(81).join("-")},e.prototype.toXml=function(e){var n=t.prototype.toXml.apply(this,[e]),i=e.createElement("styles");return o.toXml(this,i,e),n.appendChild(i),r.appendToXml(this.unknownTree,n),n},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=l.HR},e}(a)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(12),n(3),n(8),n(60),n(15),n(1),n(16),n(61),n(4),n(2)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromJSON=function(t){if(!t||!t.type||t.type!==h.IMAGE||!t.source)return void c.warn("jsonObj or jsonObj.source does NOT exist!");var n=new e({source:t.source,title:t.title});return t.styles&&n.setStyles(t.styles),t.blockId&&n.setId(t.blockId),n},e.fromXml=function(t){var n=$(t),r=$.trim(n.find("> source:first").text()),i=$.trim(n.find("> text:first").text()),a=new e({source:r,title:i});return a.parseIdFromXml(t),n.children().each(function(t,e){switch(e.nodeName){case d.TAG_ID_NAME:case d.LEGACY_TAG_ID_NAME:case"source":case"text":break;case"styles":o.fromXml(a,e);break;default:s.appendToTree(a.unknownTree,e)}}),a},e.prototype.countWords=function(){return 0},e.prototype.getFakeLoading=function(){return this.imageProps.fakeLoading},e.prototype.getHighlight=function(t,e){var o=this,i=[];if(null!=e.images&&e.images.length>0&&n.some(e.images,function(t){return t.resID===o.getSource()&&(i.push({imageInfo:t}),!0)}),null!=t&&t.length>0){var s=r.create(this.imageProps.title);n.each(t,function(t){for(var e=t.getLength(),n=s.indexOf(t,0,!0);-1!==n;)i.push({end:n+e,start:n}),n=s.indexOf(t,n+e,!0)})}return i.length?i:null},e.prototype.getImageInfo=function(){return this.imageInfo},e.prototype.getResId=function(){return this.imageProps.resId},e.prototype.getSource=function(t){var e,n=this.imageProps.source;return!0===t&&(e=this.getExtraInfo("pcResMap"))&&e[n]&&(n=e[n]),n},e.prototype.getStyles=function(t){return t?this.getBlockStyle(t):this.getBlockStyles()},e.prototype.getTitle=function(){return this.imageProps.title},e.prototype.setFakeLoading=function(t){this.imageProps.fakeLoading=t},e.prototype.setImageInfo=function(t){t&&t.resId&&"number"==typeof t.rawWide?this.imageInfo=t:c.error("The imageInfo is not valid in image: "+this.imageProps.resId)},e.prototype.setSource=function(t){return!(!t||t===this.imageProps.source||(this.imageProps.source=t+"",this.trigger("content-change"),0))},e.prototype.setStyles=function(t,e){return n.isString(t)?this.setBlockStyle(t,e):n.isObject(t)&&this.setBlockStyles(t),!0},e.prototype.setTitle=function(t){return t!==this.imageProps.title&&(this.imageProps.title=t+"",this.trigger("content-change"),!0)},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.source=this.getSource(),e.title=this.getTitle(),e},e.prototype.toHtml=function(t,e,o){var r,i,s=u("",document,!0,!0),c=s.ownerDocument,p=this.getStyles(),d=c.createElement("div"),h=$(d),f=$(c.createElement("img")),g=$(c.createElement("div"));return h.attr("yne-bulb-block","image"),n.each(p,function(t,e){switch(e){case"align":h.css("text-align",t);break;case"width":null==t?f.css("width",""):f.css("width",t);break;case"float":h.css("float",t)}}),r=this.getSource(!0===o),i=this.getTitle(),l.IS_PC&&(r=a(r)),f.attr({alt:i,"data-media-type":"image",src:r}),g.css({"margin-top":"7px","min-height":"18px","font-size":"12px","line-height":1.29,color:"#595959","font-family":"-apple-system, BlinkMacSystemFont,\n                            'PingFang SC', Helvetica, Tahoma,\n                            Arial, 'Hiragino Sans GB', 'Microsoft YaHei',\n                            '', SimSun, '',\n                            Heiti, '', sans-serif","word-break":"break-word","white-space":"pre-wrap"}),g.text(i),h.append(f,[g]),d.outerHTML},e.prototype.toPlain=function(){return""},e.prototype.toXml=function(e){var n,r,i,a,l,c,u=this.getSource(),p=this.getTitle()||"";if(u)return n=t.prototype.toXml.apply(this,[e]),r=e.createElement("source"),i=e.createTextNode(u),r.appendChild(i),n.appendChild(r),a=e.createElement("text"),l=e.createTextNode(p),a.appendChild(l),n.appendChild(a),c=e.createElement("styles"),o.toXml(this,c,e),n.appendChild(c),s.appendToXml(this.unknownTree,n),n},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=h.IMAGE,this.imageProps={source:e.source,title:e.title},this.imageProps.fakeLoading=e.fakeLoading||!1,this.imageProps.resId=p.parseImgSource(this.imageProps.source).resId},e}(d)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(65),n(1),n(16),n(24),n(6)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t&&t.name&&t.content&&null!=t.version?(t.resId||r.warn("Will create resId by url!"),new e(t)):void r.warn("Failed to create AttachmentResource",t)},e.fromXml=function(t,n){var o=$(n),r=o.children("name:first").text(),i=o.children("version:first").text(),s=o.children("content:first").text();return e.create({name:r,content:s,version:i,type:a.TYPE_MACRO,resId:t})},e.fromJSON=function(t,o){t.resId&&o&&o.macroMap||r.error("jsonObj or resourceList is wrong, ",t,o);var i=o.macroMap[t.resId];return i||r.error("resourceList is wrong"),e.fromCollabJSON(n.extend(t,i))},e.fromCollabJSON=function(t){return t.name&&t.version&&t.content||r.error("jsonObj is wrong, ",t),e.create({content:t.content,name:t.name,version:t.version,resId:t.resId})},e.prototype.getInfo=function(){return{name:this.macroProps.name,content:this.macroProps.content,version:this.macroProps.version,resId:this.macroProps.resId}},e.prototype.getMacroContent=function(){return this.macroProps.content},e.prototype.getMacroName=function(){return this.macroProps.name},e.prototype.getMacroVersion=function(){return this.macroProps.version},e.prototype.toCollabJSON=function(){return this.getInfo()},e.prototype.toJSON=function(){return{name:this.getMacroName(),content:this.getMacroContent(),version:this.getMacroVersion(),resId:this.getResId()}},e.prototype.toPlain=function(){return""},e.prototype.toHtml=function(t){var e,n=s("",document,!0,!0),o=n.ownerDocument,r=o.createElement("div"),i=$(r),a=$(o.createElement("div"));return a.attr({"yne-bulb-block":"macro",name:this.macroProps.name,content:this.macroProps.content,version:this.macroProps.version}),i.append(a),e=r.outerHTML,r=i=a=null,e},e.prototype.toXml=function(t,e){var n=t.createElement("resource-mono"),r=t.createElement("macro"),i=this.getInfo();o.appendText(t,n,"res-id",this.getResId()),o.appendText(t,r,"name",i.name),o.appendText(t,r,"content",i.content),o.appendText(t,r,"version",i.version),n.appendChild(r),e.appendChild(n)},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.macroProps=this.resProps,this.macroProps.type=a.TYPE_MACRO,this.macroProps.resId=e.resId||l.newGUID()},e}(a)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(34),n(6),n(2),n(62),n(3),n(30),n(20),n(11),n(1),n(32),n(42),n(33),n(24),n(44),n(31),n(64)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g,m,_,b,y){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.blockToCell=function(t){var n,o=e.blockToCellContent(t);return o&&(n=e.create({content:o})),n},e.blockToCellContent=function(t){if(t){var e,r,i,p,m,_,b=s.getType(t);switch(b){case s.PARAGRAPH:case s.CATALOGUE:case s.HEADING:r=c.create({richText:t.getText()});break;case s.IMAGE:case s.HANDWRITE:r=g.create({source:t.getSource()});break;case s.ATTACHMENT:r=h.create({fileLength:t.getFileLength(),fileName:t.getFileName(),resource:t.getResource(),source:t.getSource()});break;case s.MACRO:r=f.create({name:t.getMacroName(),content:t.getMacroContent(),version:t.getMacroVersion()});break;case s.LIST_ITEM:e=t.getText(),e.getLength()&&(_={},n.each(e.getStylesAtIndex(0),function(t,e){a.isSupportedStyle(e)&&(_[e]=t)})),p=a.makePlainMarker(t,!1),p=l.create(p,!1),_&&p.setStyles(0,p.getLength(),_),p.append(l.create(" ",!1)),i=t.getLevel()||1,m=o.repeat(" ",4*(i-1)),m=l.create(m,!1),m.append(p),m.append(e),r=c.create({richText:m});break;case s.TODO:m=u.getMarker(t),m=l.create(m,!1),e=t.getText(),t.getChecked()&&e.setStyles(0,e.getLength(),{strike:!0}),m.append(e),r=c.create({richText:m});break;default:d.warn("Failed to handle block to cell",b,t)}return r}},e.create=function(t){if(!t||!t.content)return void d.warn("Failed to create TableCell",t);var n=t.content;return n instanceof c||n instanceof m?new e(t):void d.warn("Failed to create TableCell",t)},e.createByTable=function(t,n,o,r){var i=t.getId(),s=e.makeCellId(i,n,o);return e.create({cellId:s,content:r})},e.fromCollabJSON=function(t){var n={cellId:t.cellId,content:y.contentFromCollabJSON(t.content),styles:t.styles};return t.attr&&(n.mergeWidth=t.attr.width,n.mergeHeight=t.attr.height,n.mergePointDX=t.attr.dx,n.mergePointDY=t.attr.dy),e.create(n)},e.fromJSON=function(t,o,r,i){t||d.error("Bad json data!");var s={};return s.styles=n.pick(t.styles,_.getAllStyleNames()),n.extend(s,n.pick(t,e.ATTRIBUTE_NAMES),{cellId:t.cellId,content:y.contentFromJSON(t.content,i,r)||c.createBlank()}),o&&delete s.cellId,e.create(s)},e.fromXml=function(t){if(!t||!t.tableBlockId||null==t.rowIndex||null==t.colIndex)return void d.warn("Failed to create TableCell from JSON",t);var o,r=e.makeCellId(t.tableBlockId,t.rowIndex,t.colIndex),i={cellId:r},s=t.cellRawData,a=t.resourceMap,l=e._resourceFromJSON(s,a),u=e.ATTRIBUTE_NAMES,p=_.getAllStyleNames(),h=["value","resource","inlineStyles"].concat(u,p);return l?i.content=l:(o=e._linesFromJSON(s),i.content=o||c.createBlank()),s=s||{},i.unknown=n.omit(s,h.concat(n.keys(y.oldStyleNameMap))),i.styles=n.pick(s,p),n.extend(i,n.pick(s,u)),e.create(i)},e.makeCellId=function(t,e,n){return[t,"cell",e,n].join("-")},e._linesFromJSON=function(t){var n=e._richTextFromJSON(t);return n?c.create({richText:n}):c.createBlank()},e._resourceFromJSON=function(t,e){if(t&&t.resource){var n=t.resource,o=e[n];return o&&o.getResId&&o.getResId()===n?o:void 0}},e._richTextFromJSON=function(t){if(t&&t.value){var e=t.value,o=new l({text:e}),r=y.oldStyleNameMap,i=o.getLength();return n.each(r,function(e,r){var s=e,a=t[r];null!=a&&("font-size"===s&&n.isString(a)&&(a=a.replace("px","")),o.setStyle(0,i,s,a))}),t.inlineStyles&&n.each(t.inlineStyles,function(t,e){n.each(t,function(t){o.setStyle(t.from,t.to,e,t.value)})}),o}},e.prototype.clearMergedCellAttr=function(){delete this.mergePointDX,delete this.mergePointDY},e.prototype.clearMergePointAttr=function(){delete this.mergeWidth,delete this.mergeHeight},e.prototype.clearStyles=function(){this.styles={}},e.prototype.clearStylesForEmpty=function(){this.stylesForEmpty={}},e.prototype.getBlockStyles=function(){return this.styles},e.prototype.getBlockStylesAsBulb=function(){var t=n.clone(this.styles);return _.tableStyles2BulbStyles(t)},e.prototype.getCellId=function(){return this.cellId},e.prototype.getCommonInlineStyle=function(t){var e=this.getContent();return this.isTextNoEmptyCell()&&e.getCommonStyle?e.getCommonStyle(t):this.stylesForEmpty[t]},e.prototype.getCommonInlineStyles=function(){var t=this.getContent();return this.isTextNoEmptyCell()&&t.getCommonStyles?t.getCommonStyles():this.stylesForEmpty},e.prototype.getContent=function(){return this.content},e.prototype.getInlineStyles=function(t){if(this.isTextNoEmptyCell()){var e=this.getContent(),n={};return t.forEach(function(t){n[t]=e.getStyle(t)}),n}},e.prototype.getMergedCellAttr=function(){return{dx:this.mergePointDX||0,dy:this.mergePointDY||0}},e.prototype.getMergePointAttr=function(){var t=this.mergeWidth||0;return{height:this.mergeHeight||0,width:t}},e.prototype.getStylesForEmpty=function(t){var e,o=this;return t?(e={},n.each(t,function(t){e[t]=o.stylesForEmpty[t]}),e):o.stylesForEmpty},e.prototype.getType=function(){var t=b.TEXT,e=this.getContent();if(e&&e.getType)switch(e.getType()){case m.TYPE_IMAGE:t=b.IMAGE;break;case m.TYPE_ATTACHMENT:t=b.ATTACHMENT;break;case m.TYPE_MACRO:t=b.MACRO}return t},e.prototype.isAttachmentCell=function(){return this.getType()===b.ATTACHMENT},e.prototype.isMacroCell=function(){return this.getType()===b.MACRO},e.prototype.isEmpty=function(){var t=this.getType(),e=this.content;return t===b.TEXT&&(!e||e.isEmpty())},e.prototype.isImageCell=function(){return this.getType()===b.IMAGE},e.prototype.isLocked=function(){return this.locked},e.prototype.isMergedCell=function(){var t=this.getMergedCellAttr();return t.dx>=1||t.dy>=1},e.prototype.isMergePoint=function(){var t=this.getMergePointAttr();return t.width>1||t.height>1},e.prototype.isTextNoEmptyCell=function(){var t=this.getContent();return!!t&&this.getType()===e.TYPE_TEXT&&!t.isEmpty()},e.prototype.setBlockStyle=function(t,e){var o=_.getConfig(t);o&&(this.isLocked()||("Enum"===o.type?o.possible[e]||(e=o.default):"Number"!==o.type||n.isNumber(e)?"Boolean"!==o.type||n.isBoolean(e)?n["is"+o.type]&&(n["is"+o.type](e)||(e=e.default)):e="true"===e:(e=null===e||""===e?NaN:Number(e),!isNaN(e)&&e||(e=o.default)),e=e||o.default,this.styles[t]=e))},e.prototype.setBlockStyles=function(t){var e=this;if(!e.isLocked())return t?(n.each(t,function(t,n){e.setBlockStyle(n,t)}),!0):void 0},e.prototype.setInlineStyles=function(t){if(t&&this.isTextNoEmptyCell()){var e=this.getContent();n.each(t,function(t,n){e.setStyle(n,t)})}},e.prototype.setContent=function(t){var e=!1;if(!this.isLocked())return t instanceof c?(this.content=t,e=!0,this.isTextNoEmptyCell()&&this.clearStylesForEmpty()):t instanceof m&&(this.content=t,e=!0),e},e.prototype.setLocked=function(t){this.locked=!0===t},e.prototype.setMergedCellAttr=function(t,e){if(null!=t&&null!=e&&t>=0&&e>=0&&(t>0||e>0))return this.mergePointDX=t,this.mergePointDY=e,this.clearMergePointAttr(),!0},e.prototype.setMergePointAttr=function(t,e){return!(!t&&!e||(t>=1&&!e&&(d.warn("No valid mergeHeight, will set 1"),e=1),e>=1&&!t&&(d.warn("No valid mergeWidth, will set 1"),t=1),this.mergeWidth=t,this.mergeHeight=e,this.clearMergedCellAttr(),0))},e.prototype.setStylesForEmpty=function(t){n.extend(this.stylesForEmpty,t)},e.prototype.setUnknown=function(t){t&&(this.unknown=t)},e.prototype.toCollabJSON=function(){var t,e=this,o={};return e.isMergedCell()&&(o=n.extend(o,e.getMergedCellAttr())),e.isMergePoint()&&(o=n.extend(o,e.getMergePointAttr())),t={cellId:e.getCellId(),content:y.contentToCollabJSON(e.content),styles:n.extend({},e.styles)},n.isEmpty(o)||(t.attr=o),t},e.prototype.toHtml=function(){d.error("Should not call TabelCell.toHtml()")},e.prototype.toJSON=function(t,e){var o,r=this,i={},s={};return r.isMergedCell()&&(i=n.extend(i,r.getMergedCellAttr()),n.extend(s,{mergePointDX:i.dx,mergePointDY:i.dy})),r.isMergePoint()&&(i=n.extend(i,r.getMergePointAttr()),n.extend(s,{mergeHeight:i.height,mergeWidth:i.width})),r.isTextNoEmptyCell()&&(s.value=r.content.toString(),t&&(o=r.content.getCommonStyles(null,null,!0),n.extend(s,y.inlineStyle2oldCell(o)))),t?n.extend(s,y.blockStyle2oldCell(r.styles)):n.extend(s,{cellId:r.getCellId(),content:y.contentToJSON(r.content,e),styles:n.extend({},y.blockStyle2oldCell(r.styles))}),s},e.prototype.toPlain=function(t){return this.isMergedCell()?"":y.contentToPlain(this.content,t)},e.prototype.toXml=function(t,e,o){var r,i,s,a,l,c,u=this,p={};if(u.isMergedCell())return r=u.getMergedCellAttr(),{mergePointDX:r.dx,mergePointDY:r.dy,value:""};switch(u.isMergePoint()&&(r=u.getMergePointAttr(),p={mergeHeight:r.height,mergeWidth:r.width}),i=u.getType(),s=u.getContent(),n.isEmpty(u.styles)||n.extend(p,u.styles),n.isEmpty(u.unknown)||n.extend(p,u.unknown),i){case b.TEXT:a=s.toRichText(),l=a.toJSON(!0),p.value=l.text,l.inlineStyles&&(p.inlineStyles=l.inlineStyles);break;case b.IMAGE:case b.ATTACHMENT:case b.MACRO:c=s.getResId(),p.value="",p.resource=c,c&&!0===o[c]?d.warn("resource has already in <resource-list>",c,s):(s.toXml(t,e),o[c]=!0);break;default:d.error("unvalid type",i)}return p},e.prototype.initialize=function(t){t=t||{},this.styles={},this.cellId=t.cellId||r.newGUID(),this.setContent(t.content),this.setBlockStyles(t.styles),this.setMergePointAttr(t.mergeWidth,t.mergeHeight),this.setMergedCellAttr(t.mergePointDX,t.mergePointDY),this.setUnknown(t.unknown),this.stylesForEmpty={}},e.TYPE_TEXT="text",e.ATTRIBUTE_NAMES=["mergeWidth","mergeHeight","mergePointDX","mergePointDY"],e}(p)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(125)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.bulbStyles2TableStyles=function(t){return t.align&&(t.textAlign=t.align,delete t.align),t},t.getAllDefaults=function(){var e={};return n.each(t.STYLE_NAMES,function(n){e[n]=t.getDefault(n)}),e},t.getAllStyleNames=function(){return[].concat(t.STYLE_NAMES)},t.getConfig=function(e){var n;return t.isSupport(e)&&(n=o[e]),n},t.getDefault=function(e){return(t.getConfig(e)||{}).default},t.isSupport=function(e){return t.STYLE_NAMES.indexOf(e)>-1},t.tableStyles2BulbStyles=function(t){return t.textAlign&&(t.align=t.textAlign,delete t.textAlign),t},t.STYLE_NAMES=n.keys(o)||[],t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(22)],void 0!==(r=function(t,e,n){"use strict";return n({DEFAULT_ROW_HEIGHT:40,DEFAULT_COL_WIDTH:70,MIN_ROW_COUNT:1,MIN_COL_COUNT:1,MAX_ROW_COUNT:500,MAX_COL_COUNT:35,ATTACHMENT_MIN_WIDTH:285,ATTACHMENT_MIN_HEIGHT:64,DEFAULT_TABLE_WIDTH:620},!0)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(21),r=n(2),i=n(39),s=n(7),a=n(20),l=n(3),c=n(137),u=n(5),p=n(0),d=n(38),h=n(28),f=n(36),g=n(6);return e=null,o.extend({inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0,align:!0,"line-height":!0,indent:!0,"text-indent":!0},computeBulbStyles:function(){var t,n=this,o=n.el,i=o.getAttribute("yne-bulb-block");n.bulbBlock=i,i===r.PARAGRAPH?(t=o.style.marginLeft,t=parseInt(t,10),isNaN(t)||(t=Math.ceil(t/u.INDENT_WIDTH),n.styles.indent=(n.styles.indent||0)+t)):i===r.TODO&&(t=o.querySelector("[yne-bulb-todo-content]"))?o.innerHTML=t.innerHTML:("catalogue-wrap"===o.getAttribute("yne-bulb-type")||!e&&i===r.CATALOGUE)&&(e=new h({}))},setup:function(){this.block=null},capture:function(t){var e=this;t&&!0===t.isBr?e.emitBlock(!0):t&&!0===t.isText?e._appendText(t):t&&!0===t.isEmptyPara?e.emitBlock():e.captureBlock(t),e._hasChild=!0},captureBlock:function(t){this.emitBlock(),this.emit(t)},finish:function(){this.emitBlock(),this._hasChild||this.emit({isEmptyPara:!0})},_getBlock:function(){var t=this;return t.block||(t.block=t.createBlock()),t.block},createBlock:function(){var t,n=this,o=n.el;switch(this.bulbBlock){case r.HEADING:return new i({level:o.getAttribute("yne-bulb-level"),id:o.id});case r.CATALOGUE:return t=f(o).find("a").attr("href"),/#\w+$/.test(t)&&(t=t.match(/\w+$/)[0]),new d({id:g.newGUID(),href:t,ownerList:e});case r.TODO:return new a({id:g.newGUID(),checked:"true"===o.getAttribute("yne-bulb-checked")});default:return new s}},_appendText:function(t){var e=this;e.txtList=e.txtList||[],e.txtList.push(t)},emitBlock:function(t){var e,n,o,i=this,s=i.txtList;n=i._getBlock(),s&&(i.options&&i.options.holdSpaces||(s=c(s)),p.each(s,function(t){i.bulbBlock===r.CATALOGUE&&(t.styles.href=""),t.text&&(o=new l({text:t.text}),e=o.getLength(),p.each(t.styles,function(t,n){o.setStyle(0,e,n,t)}),n.append(o))})),(t||n.getLength()>0)&&(n.setBlockStyles(i.styles),i.emit(n)),i.block=null,i.txtList=null}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o={StyleSheet:n(97).StyleSheet,CSSStyleRule:n(48).CSSStyleRule};o.CSSStyleSheet=function(){o.StyleSheet.call(this),this.cssRules=[]},o.CSSStyleSheet.prototype=new o.StyleSheet,o.CSSStyleSheet.prototype.constructor=o.CSSStyleSheet,o.CSSStyleSheet.prototype.insertRule=function(t,e){if(e<0||e>this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");var n=o.parse(t).cssRules[0];return n.parentStyleSheet=this,this.cssRules.splice(e,0,n),e},o.CSSStyleSheet.prototype.deleteRule=function(t){if(t<0||t>=this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");this.cssRules.splice(t,1)},o.CSSStyleSheet.prototype.toString=function(){for(var t="",e=this.cssRules,n=0;n<e.length;n++)t+=e[n].cssText+"\n";return t},e.CSSStyleSheet=o.CSSStyleSheet,o.parse=n(69).parse},function(t,e,n){var o={CSSStyleDeclaration:n(25).CSSStyleDeclaration,CSSRule:n(13).CSSRule};o.CSSStyleRule=function(){o.CSSRule.call(this),this.selectorText="",this.style=new o.CSSStyleDeclaration,this.style.parentRule=this},o.CSSStyleRule.prototype=new o.CSSRule,o.CSSStyleRule.prototype.constructor=o.CSSStyleRule,o.CSSStyleRule.prototype.type=1,Object.defineProperty(o.CSSStyleRule.prototype,"cssText",{get:function(){return this.selectorText?this.selectorText+" {"+this.style.cssText+"}":""},set:function(t){var e=o.CSSStyleRule.parse(t);this.style=e.style,this.selectorText=e.selectorText}}),o.CSSStyleRule.parse=function(t){for(var e,n,r,i=0,s="selector",a=i,l="",c={selector:!0,value:!0},u=new o.CSSStyleRule,p="";r=t.charAt(i);i++)switch(r){case" ":case"\t":case"\r":case"\n":case"\f":if(c[s])switch(t.charAt(i-1)){case" ":case"\t":case"\r":case"\n":case"\f":break;default:l+=" "}break;case'"':if(a=i+1,!(e=t.indexOf('"',a)+1))throw'" is missing';l+=t.slice(i,e),i=e-1;break;case"'":if(a=i+1,!(e=t.indexOf("'",a)+1))throw"' is missing";l+=t.slice(i,e),i=e-1;break;case"/":if("*"===t.charAt(i+1)){if(i+=2,-1===(e=t.indexOf("*/",i)))throw new SyntaxError("Missing */");i=e+1}else l+=r;break;case"{":"selector"===s&&(u.selectorText=l.trim(),l="",s="name");break;case":":"name"===s?(n=l.trim(),l="",s="value"):l+=r;break;case"!":"value"===s&&t.indexOf("!important",i)===i?(p="important",i+="important".length):l+=r;break;case";":"value"===s?(u.style.setProperty(n,l.trim(),p),p="",l="",s="name"):l+=r;break;case"}":if("value"===s)u.style.setProperty(n,l.trim(),p),p="",l="";else{if("name"===s)break;l+=r}s="selector";break;default:l+=r}return u},e.CSSStyleRule=o.CSSStyleRule},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(21);return o.extend({inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0},inheritBlockStyles:{align:!0,"line-height":!0,indent:!0,"text-indent":!0},_computeInheritStyles:function(){var t=this;o.prototype._computeInheritStyles.apply(t,arguments),t._computeInheritBlockStyles()},_computeInheritBlockStyles:function(){var t,n=this,o=n.parent,r=n.inheritBlockStyles;o&&o.styles&&(t=o.styles,e.each(r,function(e,o){if(!0===e){var r=t[o];r&&(n.styles[o]=r)}}))},capture:function(t){this.emit(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(0),n(2),n(51),n(1),n(73),n(72),n(74),n(75),n(14),n(52),n(76),n(77)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h){"use strict";return function(){function t(){}return t.createRangeByBlock=function(t){if(!t||!t.block)return void i.warn("arguments is not valid!");var e,n=t.block,f=n.getType(),g=0,m=0;switch(null!=t.start&&null!=t.end?(g=t.start,m=t.end):(null==t.allContent&&null==t.collapseToStart||!0===t.allContent)&&null!=n.getEndOffset?(g=0,m=n.getEndOffset()):t.collapseToStart||null==n.getEndOffset?(g=0,m=0):(g=n.getEndOffset(),m=g),f){case o.QUOTE:case o.TODO:case o.PARAGRAPH:case o.LIST_ITEM:case o.CATALOGUE:case o.HEADING:e=new u({block:n,end:m,start:g});break;case o.IMAGE:e=new c({block:n});break;case o.ATTACHMENT:e=new s({block:n});break;case o.TABLE:t.allContent&&(t.type=p.TYPES.ALL,delete t.allContent),t.type||t.rect||i.warn("Bad tableRange options will select first table cell",t),e=new p({block:n,rect:t.rect,type:t.type});break;case o.HR:e=new l({block:n});break;case o.UNKNOWN:e=new d({block:n});break;case o.HEADER_FOOTER:e=new r({block:n});break;case o.HANDWRITE:e=new a({block:n});break;case o.MACRO:e=new h({block:n});break;default:i.error("block.type ["+f+"] is not valid!")}return e},t.isBlockRange=function(t){return null!=t&&null!=t.getType&&null!=t.getType()&&n.contains(o.getAllBlockTypes(),t.getType())},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(10)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.isHeaderFooterRange=function(t){return n.isHeaderFooter(t.block)},e.prototype.collapse=function(t){void 0===t&&(t=!0),t?this.end=this.start:this.start=this.end},e.prototype.isCollapsed=function(){return this.start===this.end},e.prototype.clone=function(){return new e({block:this.block,end:this.end,start:this.start})},e.prototype.getDataAsPlain=function(){return""},e.prototype.canDrawedByNative=function(){return!0},e.prototype.toCollabJSON=function(){var t=this.block.toCollabJSON();return t.rangeType=this.type,t.blockId=this.block.getId(),t},e.prototype.countWords=function(){return this.end-this.start},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.HEADER_FOOTER,this.start=e.start||0,this.end=e.end||0,this.block=e.block},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(2),n(107),n(1),n(10)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";var l={NORMAL:"1",ALL:"2",FIRST_CELL:"3",LAST_CELL:"4",BLANK:"5"};return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t&&t.block&&t.type?t.type!==l.NORMAL||e._isValidRect(t.rect)?new e(t):void s.error("Failed to create TableRange, rect is NOT valid",t):void s.error("Failed to create TableRange",t)},e.fromCollabJSON=function(t,n){var r=t.rangeType;if(r!==o.TABLE)return void s.error("wrong block type:",r);var i=a.getBlockById(t.blockId,n);return i?e.create({block:i,type:t.simpleValue2,rect:t.simpleValue1}):void 0},e._isValidRect=function(t){return t&&t.left>=0&&t.top>=0&&t.width>=1&&t.height>=1},e.prototype.getType=function(){return this.type},e.prototype.getAsRectRange=function(){var t,e=this.type,n=this.block;switch(e){case l.FIRST_CELL:case l.LAST_CELL:t=r.create({table:n,width:1,height:1,top:e===l.FIRST_CELL?0:n.getRowCount()-1,left:e===l.FIRST_CELL?0:n.getColumnCount()-1});break;case l.ALL:t=r.create({table:n,top:0,left:0,width:n.getColumnCount(),height:n.getRowCount()});break;case l.NORMAL:if(!this.rect)return void s.warn("Bad range, please check code, range:",this);t=r.create({table:n,top:this.rect.top,left:this.rect.left,width:this.rect.width,height:this.rect.height});break;case l.BLANK:return null;default:s.error("Failed to create RectRange",e)}return t},e.prototype.isCollapsed=function(){return this.type===l.BLANK},e.prototype.isFullSelected=function(){return this.type===l.ALL},e.prototype.isOnCellEdit=function(){var t;return this.block.trigger("get-block-view",this.block,function(e){t=e}),t&&t.isOnCellEdit()},e.prototype.isInBlank=function(){return this.type===l.BLANK},e.prototype.clone=function(){return e.create({block:this.block,type:this.type,rect:this.rect})},e.prototype.collapse=function(){},e.prototype.getDataAsJSON=function(t){var e=this.getAsRectRange();return e?e.getDataAsJSON(t):null},e.prototype.getDataAsHtml=function(){var t=this.getAsRectRange();return t?t.getDataAsHtml():null},e.prototype.getDataAsPlain=function(){var t=this.getAsRectRange();return t?t.getDataAsPlain():null},e.prototype.canDrawedByNative=function(){return!1},e.prototype.toCollabJSON=function(){var e=t.prototype.toCollabJSON.call(this);return e.simpleValue1=this.getAsRectRange()||null,e.simpleValue2=this.getType()||null,e},e.prototype.initialize=function(r){t.prototype.initialize.call(this,r),r=n.defaults(r||{},{type:l.FIRST_CELL,rect:null}),this.block=r.block,this.type=r.type||o.TABLE,this.type===l.NORMAL&&(e._isValidRect(r.rect)?this.rect=r.rect:this.type=l.FIRST_CELL)},e.TYPES={NORMAL:"1",ALL:"2",FIRST_CELL:"3",LAST_CELL:"4",BLANK:"5"},e}(a)}.apply(e,o))&&(t.exports=r)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var o,r;o=[n,e,n(0)],void 0!==(r=function(t,e,n){"use strict";var o;!function(t){t[t.major=1]="major",t[t.minor=0]="minor",t[t.revision=3]="revision"}(o||(o={}));var r;return function(t){t[t.GRETER=1]="GRETER",t[t.EQUAL=0]="EQUAL",t[t.LESS=-1]="LESS"}(r||(r={})),function(){function t(){}return t.getDefaultAsString=function(){return o.major+"."+o.minor+"."+o.revision},t.parse=function(e){if(e){var n=(e+"").split(".");return{major:t.getAsInt(n[0]),minor:t.getAsInt(n[1]),revision:t.getAsInt(n[2])}}},t.isLessThanDefault=function(e){if(!e)return!0;var n=t.parse(e);return t.compare(n,o)===r.LESS},t.isCompatible=function(e){if(!(e=e||"")||"true"===e)return!0;var n=t.parse(e);return t.compare(o,n)!==r.LESS},t.getAsInt=function(t){t=t||"";var e=parseInt(t+"",10);return isNaN(e)?0:e},t.compareInt=function(t,e){return t===e?r.EQUAL:t>e?r.GRETER:r.LESS},t.compare=function(e,o){var i=r.EQUAL;return n.some(["major","minor","revision"],function(n){var s=t.compareInt(e[n]||0,o[n]||0);if(s!==r.EQUAL)return i=s,!0}),i},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(t){var e=/\xA0/g;return t.replace(e," ")}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(1),n(81)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(){function t(){}return t.getAllValueByFont=function(e){var n=t.getFont(e);if(n)return t.FONT_MAP[n].join(",");o.warn("Font does not exit in Font Maps: "+e)},t.getFontMap=function(){return t.FONT_MAP},t.getFont=function(e){var o,r;if((e=(e||"").toLowerCase())&&(r=t.splitFontFamily(e)))return n.some(r,function(e){if(n.some(t.FONT_MAP,function(n,r){if(r.toLowerCase()===e||t.CONTAIN_IGNORE_CASE(n,e))return o=r,!0}),o)return!0}),o},t.getFontFirstValue=function(e){var n,o=t.getFont(e);if(n=t.FONT_MAP[o])return n[0]},t.getItems=function(){var e=[];return n.each(t.FONT_MAP,function(t,n){e.push({fullValue:t.join(","),name:n,singleValue:t[0]})}),e},t.getNames=function(){return n.keys(t.FONT_MAP)},t.splitFontFamily=function(t){var e,o=[];return(t=$.trim(t||""))?(e=t.split(","),n.each(e,function(t){t=t||"",(t=$.trim(t.replace(/["']/g,"")))&&o.push(t)}),o):[]},t.CONTAIN_IGNORE_CASE=function(t,e){return n.some(t,function(t){return(t+"").toLowerCase()===e})},t.DEFAULT_FONT=r.DEFAULT_FONT,t.FONT_MAP={"":[r.DEFAULT_FONT,"STXihei"],"":["SimSun","STSong"],"":["NSimSun"],"":["FangSong_GB2312","FangSong","STFangsong"],"":["KaiTi_GB2312","KaiTi","STKaiti"],"":["SimHei","STHeiti"],Arial:["Arial"],"Arial Black":["Arial Black"],"Times New Roman":["Times New Roman"],"Courier New":["Courier New"],Tahoma:["Tahoma"],Verdana:["Verdana"]},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(82)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.checkValid=function(t){var e,r,i=t.length;if(!n.isString(t))return!1;for(e=0;e<i;e++)if(!(9===(r=o(t,e))||10===r||13===r||r>=32&&r<=55295||r>=57344&&r<=65533)){if(!(r>=65536&&r<=1114111))return!1;e++}return!0},t.clear=function(t){var e,r,i="",s=t.length;if(!n.isString(t))return t;for(e=0;e<s;e++)r=o(t,e),9===r||10===r||13===r||r>=32&&r<=55295||r>=57344&&r<=65533?i+=t[e]:r>=65536&&r<=1114111&&(i+=t[e],e++,i+=t[e]);return i},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;!function(){function r(t,e){if(t=t||"",e=e||{},t instanceof r)return t;if(!(this instanceof r))return new r(t,e);var n=i(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=G(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=G(this._r)),this._g<1&&(this._g=G(this._g)),this._b<1&&(this._b=G(this._b)),this._ok=n.ok,this._tc_id=H++}function i(t){var e={r:0,g:0,b:0},n=1,o=!1,r=!1;return"string"==typeof t&&(t=B(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=s(t.r,t.g,t.b),o=!0,r="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=D(t.s),t.v=D(t.v),e=u(t.h,t.s,t.v),o=!0,r="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=D(t.s),t.l=D(t.l),e=l(t.h,t.s,t.l),o=!0,r="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=k(n),{ok:o,format:t.format||r,r:U(255,V(e.r,0)),g:U(255,V(e.g,0)),b:U(255,V(e.b,0)),a:n}}function s(t,e,n){return{r:255*S(t,255),g:255*S(e,255),b:255*S(n,255)}}function a(t,e,n){t=S(t,255),e=S(e,255),n=S(n,255);var o,r,i=V(t,e,n),s=U(t,e,n),a=(i+s)/2;if(i==s)o=r=0;else{var l=i-s;switch(r=a>.5?l/(2-i-s):l/(i+s),i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:r,l:a}}function l(t,e,n){function o(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+6*(e-t)*(2/3-n):t}var r,i,s;if(t=S(t,360),e=S(e,100),n=S(n,100),0===e)r=i=s=n;else{var a=.5>n?n*(1+e):n+e-n*e,l=2*n-a;r=o(l,a,t+1/3),i=o(l,a,t),s=o(l,a,t-1/3)}return{r:255*r,g:255*i,b:255*s}}function c(t,e,n){t=S(t,255),e=S(e,255),n=S(n,255);var o,r,i=V(t,e,n),s=U(t,e,n),a=i,l=i-s;if(r=0===i?0:l/i,i==s)o=0;else{switch(i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:r,v:a}}function u(t,e,n){t=6*S(t,360),e=S(e,100),n=S(n,100);var o=F.floor(t),r=t-o,i=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),l=o%6;return{r:255*[n,s,i,i,a,n][l],g:255*[a,n,n,s,i,i][l],b:255*[i,i,a,n,n,s][l]}}function p(t,e,n,o){var r=[O(G(t).toString(16)),O(G(e).toString(16)),O(G(n).toString(16))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function d(t,e,n,o){return[O(L(o)),O(G(t).toString(16)),O(G(e).toString(16)),O(G(n).toString(16))].join("")}function h(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s-=e/100,n.s=N(n.s),r(n)}function f(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s+=e/100,n.s=N(n.s),r(n)}function g(t){return r(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l+=e/100,n.l=N(n.l),r(n)}function _(t,e){e=0===e?0:e||10;var n=r(t).toRgb();return n.r=V(0,U(255,n.r-G(-e/100*255))),n.g=V(0,U(255,n.g-G(-e/100*255))),n.b=V(0,U(255,n.b-G(-e/100*255))),r(n)}function b(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l-=e/100,n.l=N(n.l),r(n)}function y(t,e){var n=r(t).toHsl(),o=(G(n.h)+e)%360;return n.h=0>o?360+o:o,r(n)}function v(t){var e=r(t).toHsl();return e.h=(e.h+180)%360,r(e)}function w(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+120)%360,s:e.s,l:e.l}),r({h:(n+240)%360,s:e.s,l:e.l})]}function I(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+90)%360,s:e.s,l:e.l}),r({h:(n+180)%360,s:e.s,l:e.l}),r({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+72)%360,s:e.s,l:e.l}),r({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var o=r(t).toHsl(),i=360/n,s=[r(t)];for(o.h=(o.h-(i*e>>1)+720)%360;--e;)o.h=(o.h+i)%360,s.push(r(o));return s}function T(t,e){e=e||6;for(var n=r(t).toHsv(),o=n.h,i=n.s,s=n.v,a=[],l=1/e;e--;)a.push(r({h:o,s:i,v:s})),s=(s+l)%1;return a}function k(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function S(t,e){A(t)&&(t="100%");var n=E(t);return t=U(e,V(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),F.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function N(t){return U(1,V(0,t))}function x(t){return parseInt(t,16)}function A(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function E(t){return"string"==typeof t&&-1!=t.indexOf("%")}function O(t){return 1==t.length?"0"+t:""+t}function D(t){return 1>=t&&(t=100*t+"%"),t}function L(t){return Math.round(255*parseFloat(t)).toString(16)}function R(t){return x(t)/255}function B(t){t=t.replace(P,"").replace(z,"").toLowerCase();var e=!1;if(W[t])t=W[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Z.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Z.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Z.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Z.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Z.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Z.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Z.hex8.exec(t))?{a:R(n[1]),r:x(n[2]),g:x(n[3]),b:x(n[4]),format:e?"name":"hex8"}:(n=Z.hex6.exec(t))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),format:e?"name":"hex"}:!!(n=Z.hex3.exec(t))&&{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),format:e?"name":"hex"}}function j(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}var P=/^\s+/,z=/\s+$/,H=0,F=Math,G=F.round,U=F.min,V=F.max,Y=F.random;r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,o,r,i,s=this.toRgb();return t=s.r/255,e=s.g/255,n=s.b/255,o=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4),r=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4),i=.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*r+.0722*i},setAlpha:function(t){return this._a=k(t),this._roundA=G(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=G(360*t.h),n=G(100*t.s),o=G(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+o+"%)":"hsva("+e+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=a(this._r,this._g,this._b),e=G(360*t.h),n=G(100*t.s),o=G(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+o+"%)":"hsla("+e+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return p(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return d(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:G(this._r),g:G(this._g),b:G(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+G(this._r)+", "+G(this._g)+", "+G(this._b)+")":"rgba("+G(this._r)+", "+G(this._g)+", "+G(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:G(100*S(this._r,255))+"%",g:G(100*S(this._g,255))+"%",b:G(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+G(100*S(this._r,255))+"%, "+G(100*S(this._g,255))+"%, "+G(100*S(this._b,255))+"%)":"rgba("+G(100*S(this._r,255))+"%, "+G(100*S(this._g,255))+"%, "+G(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(J[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,o=this._gradientType?"GradientType = 1, ":"";return t&&(n=r(t).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,o=this._a<1&&this._a>=0;return e||!o||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},r.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]="a"===o?t[o]:D(t[o]));t=n}return r(t,e)},r.equals=function(t,e){return!(!t||!e)&&r(t).toRgbString()==r(e).toRgbString()},r.random=function(){return r.fromRatio({r:Y(),g:Y(),b:Y()})},r.mix=function(t,e,n){n=0===n?0:n||50;var o,i=r(t).toRgb(),s=r(e).toRgb(),a=n/100,l=2*a-1,c=s.a-i.a;o=-1==l*c?l:(l+c)/(1+l*c),o=(o+1)/2;var u=1-o;return r({r:s.r*o+i.r*u,g:s.g*o+i.g*u,b:s.b*o+i.b*u,a:s.a*a+i.a*(1-a)})},r.readability=function(t,e){var n=r(t),o=r(e);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},r.isReadable=function(t,e,n){var o,i,s=r.readability(t,e);switch(i=!1,o=j(n),o.level+o.size){case"AAsmall":case"AAAlarge":i=s>=4.5;break;case"AAlarge":i=s>=3;break;case"AAAsmall":i=s>=7}return i},r.mostReadable=function(t,e,n){var o,i,s,a,l=null,c=0;n=n||{},i=n.includeFallbackColors,s=n.level,a=n.size;for(var u=0;u<e.length;u++)(o=r.readability(t,e[u]))>c&&(c=o,l=r(e[u]));return r.isReadable(t,l,{level:s,size:a})||!i?l:(n.includeFallbackColors=!1,r.mostReadable(t,["#fff","#000"],n))};var W=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},J=r.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(W),Z=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=r:void 0!==(o=function(){return r}.call(e,n,e,t))&&(t.exports=o)}()},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(16),n(4),n(2)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.fromXml=function(t){throw new Error("HandWrite do NOT support fromXml till now")},e.fromJSON=function(t){if(!(t&&t.type&&t.type===s.HANDWRITE&&t.source&&t.resource))throw new Error("jsonObj or jsonObj.source/resource does NOT exist!");var n=new e({resource:t.resource,source:t.source});return t.blockId&&n.setId(t.blockId),n},e.prototype.getSource=function(t){var e,n=this,o=n.handWriteProps.source;return!0===t&&(e=n.getExtraInfo("pcResMap"))&&e[o]&&(o=e[o]),o},e.prototype.getResource=function(t){var e,n=this,o=n.handWriteProps.resource;return!0===t&&(e=n.getExtraInfo("pcResMap"))&&e[o]&&(o=e[o]),o},e.prototype.setStyles=function(){},e.prototype.toHtml=function(t,e,n){var r=this,i=o("",document,!0,!0),s=i.ownerDocument,a=s.createElement("div"),l=$(a),c=$(s.createElement("img"));return l.attr("yne-bulb-block","handwrite"),c.attr({"data-media-type":"handwrite","data-res-handwrite":r.handWriteProps.resource,src:r.getSource(n)}),l.append(c),a.outerHTML},e.prototype.toJSON=function(){var e=this,n=t.prototype.toJSON.call(this);return n.source=e.getSource(!1),n.resource=e.getResource(!1),n},e.prototype.toPlain=function(){return""},e.prototype.toXml=function(){throw new Error("HandWrite do NOT support toXml till now")},e.prototype.countWords=function(){return 0},e.prototype.initialize=function(e){var o=this;if(null==e||null==e.source||null==e.resource)throw new Error("props and props.source and props.resource  cannot be null");t.prototype.initialize.apply(o,[e]),o.handWriteProps=n.clone(e),o.type=s.HANDWRITE},e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return function(t){if(!t||/^http/i.test(t))return t;var e,n=t.lastIndexOf("\\");return-1===n?t:(e=t.substring(n+1),t.substring(0,n+1)+encodeURIComponent(e))}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return{parseImgSource:function(t){var e=t.split("?")[0].replace(/^\//,"").split("/");return{resId:e[e.length-1]}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(1),n(0),n(80)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(){function t(){}return t.convertToCssStyle=function(t,e){if(t){var n=o.pick(t,this.SUPPORTED_STYLES);return e&&o.each(n,function(t,o){null!=t&&(n[o]=e.valueToView(o,t))}),r.convertToCssStyle(n)}},t.isSupportedStyle=function(e){return t.SUPPORTED_STYLES.indexOf(e)>-1},t.makeHtmlMarker=function(e){if(!e)return void n.warn("Failed to create marker",e);var o,r,i=e.getLevel(),s=e.getText();return o=e.isOrdered()?t.ORDERED_STYLE_TYPES[i%3]:t.UNORDERED_STYLE_TYPES[i%3],s.getLength()&&(r=this.convertToCssStyle(s.getStylesAtIndex(0))),{listStyleType:o,markerStyles:r}},t.makePlainMarker=function(e,o){if(!e)return n.warn("Failed to create marker",e),"";o=!1!==o;var r,i="",s=e.getLevel();if(e.isOrdered()){switch(r=e.getIndex(),s%3){case 0:i=t.toRoman(r);break;case 2:i=t.toAlphabet(r);break;default:case 1:i=r}i+="."}else switch(s%3){case 0:i="";break;case 2:i="";break;default:case 1:i=""}return o&&(i+=" "),i},t.toAlphabet=function(t){if(isNaN(t))return"";var e="a".charCodeAt(0),n="z".charCodeAt(0),o=n-e+1,r="";for(t--;t>=0;)r=String.fromCharCode(t%o+e)+r,t=Math.floor(t/o)-1;return r},t.toRoman=function(t){if(isNaN(t))return"";for(var e=[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xcc"],["","c","cc","ccc","cd","d","dc","dcc","dcc","cm"]],n="",o=0,r=0,i=1e3;r<3;r++,i/=10)o=Math.floor(t%i/(i/10)),n+=e[2-r][o];return n},t.SUPPORTED_STYLES=["font-size","font-family","color","bold","italic"],t.ORDERED_STYLE_TYPES=["lower-roman","decimal","lower-alpha"],t.UNORDERED_STYLE_TYPES=["square","disc","circle"],t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(5),n(0),n(2),n(7),n(17)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";var l;return l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlank=function(){return new e({})},e.prototype.toHtml=function(t,r,i){t=t||0,r=null==r?this.getEndOffset():r,i=!0===i;var s=document.createElement("div"),l=$(s);return l.attr("yne-bulb-block","quote").css("white-space","pre-wrap").css("padding",n.QUOTE_PADDING).css("border-left",n.QUOTE_BORDER_LEFT).css("margin",n.QUOTE_MARGIN),o.each(e.DEFAULT_STYLES,function(t,e){return l.css(e,t)}),this.applyBlockStylesOnElement(l),l.html(a.rich2html(this.sliceText(t,r,!1),{withDefault:i})),s.outerHTML},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=r.QUOTE},e}(s),l.DEFAULT_STYLES={color:"#919191","font-weight":300},l}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(30),n(1),n(32),n(33),n(42),n(24),n(31)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c){"use strict";return function(){function t(){}return t.boolean2string=function(t){return n.isBoolean(t)?String(t):t},t.blockStyle2oldCell=function(e){var o={};return n.map(e,function(e,n){o[n]=t.boolean2string(e)}),o},t.contentFromCollabJSON=function(e){return t.contentFromJSON(e,!0)},t.contentFromJSON=function(t,e,n){if(t){var l,u=t.type,p=t.data;switch(u){case c.IMAGE:l=e?s.fromCollabJSON(p):s.fromJSON(p,n);break;case c.ATTACHMENT:l=e?i.fromCollabJSON(p):i.fromJSON(p,n);break;case c.MACRO:l=e?a.fromCollabJSON(p):a.fromJSON(p,n);break;case c.TEXT:l=e?o.fromCollabJSON(p):o.fromJSON(p);break;default:r.error("do not support type",u)}return l}},t.contentToCollabJSON=function(e){return t.contentToJSON(e,!0)},t.contentToHtml=function(t,e){if(!t)return"";var n={resourceMap:e};return t instanceof o||t instanceof s||t instanceof i||t instanceof a?t.toHtml(n):(r.warn("unvalid content",t),"")},t.contentToJSON=function(t,e){e=!0===e;var n,o=c.TEXT;if(t){if(t.getType)switch(t.getType()){case l.TYPE_IMAGE:o=c.IMAGE;break;case l.TYPE_ATTACHMENT:o=c.ATTACHMENT;break;case l.TYPE_MACRO:o=c.MACRO}return n=e?t.toCollabJSON():t.toJSON(),{data:n,type:o}}},t.contentToPlain=function(t,e){if(!t)return"";var n;return t instanceof o?(n=t.toPlain(),n.join(e?"\n":"")):t instanceof s?t.toPlain():t instanceof i?t.toPlain():t instanceof a?t.toPlain():(r.warn("unvalid content",t),"")},t.inlineStyle2oldCell=function(e){var o=this.oldStyleNameMap,r={};return n.map(o,function(n,o){if(null!=e[n])return void(r[o]=t.boolean2string(e[n]))}),r},t.oldStyleNameMap={bold:"bold",italic:"italic",underline:"underline",lineThrough:"strike",fontName:"font-family",fontSize:"font-size",textColor:"color",link:"href"},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1);return{appendText:function(t,n,o,r){if(!(t&&n&&o&&r))return void e.warn("unvalid parameters");var i=t.createElement(o),s=t.createTextNode(r);i.appendChild(s),n.appendChild(i)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(){return{value:""}}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(4),n(2),n(133),n(5),n(0),n(16)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";var c=s.MACRO_NAME,u=s.MACRO_CONTENT,p=s.MACRO_VERSION;return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromXml=function(t){var n=new e({});n.blockId=r.parseIdFromXml(t);try{a.map(t.childNodes,function(t){switch(t.nodeName){case c:n.macroName=t.textContent;break;case u:n.macroContent=t.textContent;break;case p:n.macroVersion=t.textContent}})}catch(t){}return n},e.fromJSON=function(t){if(t&&t.type&&t.type===o.MACRO){var n=new e({name:t.name,version:t.version,content:t.content});return t.styles&&n.setStyles(t.styles),t.blockId&&n.setId(t.blockId),n}},e.prototype.toXml=function(e){var n=t.prototype.toXml.apply(this,[e]),o=e.createElement(c);o.appendChild(e.createTextNode(this.macroName)),n.appendChild(o);var r=e.createElement(u);r.appendChild(e.createTextNode(this.macroContent)),n.appendChild(r);var i=e.createElement(p);return i.appendChild(e.createTextNode(this.macroVersion)),n.appendChild(i),n},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.name=this.getMacroName(),e.version=this.getMacroVersion(),e.content=this.getMacroContent(),e},e.prototype.toHtml=function(){var t=l("",document,!0,!0),e=t.ownerDocument,n=e.createElement("div"),o=e.createElement("div"),r=$(n),i=$(o),s=this.getStyles(null);return r.attr("yne-bulb-block","macro"),r.attr("macro-name",this.macroName),r.attr("macro-version",this.macroVersion),r.attr("macro-content",this.macroContent),a.each(s,function(t,e){switch(e){case"align":r.css("text-align",t)}}),r.append(i),n.outerHTML},e.prototype.toPlain=function(t,e){return""},e.prototype.countWords=function(t){return 0},e.prototype.getMacroInfo=function(){return{content:this.macroContent,name:this.macroName,version:this.macroVersion}},e.prototype.getMacroContent=function(){return this.macroContent},e.prototype.getMacroName=function(){return this.macroName},e.prototype.getMacroVersion=function(){return this.macroVersion},e.prototype.setMacroContent=function(t){this.macroContent=t,this.trigger("content-change")},e.prototype.setMacroVersion=function(t){a.isString(t)&&(this.macroVersion=t,this.trigger("content-change"))},e.prototype.getStyles=function(t){return t?this.getBlockStyle(t,!1):this.getBlockStyles()},e.prototype.setStyles=function(t,e){var n=this;return a.isString(t)?this.setBlockStyle(t,e):a.isObject(t)&&a.each(t,function(t,e){n.setBlockStyle(e,t)}),!0},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=o.MACRO,this.macroName=e.name,this.macroContent=e.content,this.macroVersion=e.version},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(34),o=n(5),r=n(0),i=n(136),s=["bold","bolder","700","800","900"],a=n(56),l={"xx-small":12,"x-small":12,small:13,medium:16,large:18,"x-large":24,"xx-large":32};return{bold:{inheritable:!0,action:function(t){var n=t.style.fontWeight;return n=n&&e.trim(n).toLowerCase(),n&&"inherit"!==n?-1!==r.indexOf(s,n):null}},italic:{inheritable:!0,action:function(t){var e=t.style.fontStyle;return e?"italic"===e:null}},underline:{inheritable:!0,action:function(t,e,n){var o=t.style.textDecoration;return!!/(^|\s)underline($|\s)/i.test(o)||!(o&&!n)&&n}},strike:{inheritable:!0,action:function(t,e,n){var o=t.style.textDecoration;return!!/(^|\s)line-through($|\s)/i.test(o)||!(o&&!n)&&n}},"font-family":{inheritable:!0,action:function(t){var e=t.style.fontFamily;return 0===e.trim().indexOf("-apple-system")?a.DEFAULT_FONT:a.getFontFirstValue(e)}},"font-size":{inheritable:!0,action:function(t,n,o){var r=t.style.fontSize;if(r=e.trim(r+""),/^[\d.]+px$/.test(r)?r=parseInt(r,10):/^[\d.]+pt$/.test(r)?r=Math.floor(4*parseFloat(r,10)/3):/^[\d.]+em$/.test(r)?(r=parseFloat(r,10),r*=o||14,r=Math.floor(r)):/^[\d.]+rem$/.test(r)?(r=parseFloat(r,10),r*=10,r=Math.floor(r)):r=l[r],r&&!isNaN(r))return r}},color:{inheritable:!0,action:function(t){var e=t.style.color;return i(e,!1)}},"back-color":{inheritable:!0,action:function(t){var e=t.style.backgroundColor;return i(e,!0)}},align:{inheritable:!0,action:function(t){var n=t.style.textAlign||t.align;if((n=n&&e.trim(n).toLowerCase())&&"inherit"!==n)return n}},"line-height":{inheritable:!0,requireValues:["font-size"],action:function(t,n){var o=e.trim(t.style.lineHeight+""),r=n["font-size"]||14;if(/^[\d.]+$/.test(o)?o=parseFloat(o,10):/^[\d.]+px$/.test(o)?(o=parseFloat(o,10),o/=r):o=0,o&&!isNaN(o)&&o>1)return o}},indent:{inheritable:!0,action:function(t,e,n){var o=0;return"BLOCKQUOTE"===t.tagName&&(o=1),o+=n||0}},"text-indent":{inheritable:!0,action:function(t){var n=t.style.textIndent;if(n=e.trim(n+""),n=/^[\d.]+px$/.test(n)?parseFloat(n,10):/^[\d.]+pt$/.test(n)?4*parseFloat(n,10)/3:null)return(n=Math.floor(n/o.INDENT_WIDTH))||1}},width:{inheritable:!1,action:function(t){var n=t.style.width||t.width;if(n=e.trim(n+""),/^[\d.]+(px)?$/.test(n)&&(n=parseInt(n,10)),n&&!isNaN(n))return n}},float:{inheritable:!1,action:function(t){return t.style.float}},"white-space":{inheritable:!0,action:function(t){var e=t.style.whiteSpace;if(e&&"inherit"!==e)return e}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o={};o.parse=function(t){for(var e,n,r,i,s,a,l,c,u,p,d,h=0,f="before-selector",g="",m=0,_={selector:!0,value:!0,"value-parenthesis":!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0,"documentRule-begin":!0},b=new o.CSSStyleSheet,y=b,v="",w=/@(-(?:\w+-)+)?keyframes/g,I=function(e){var n=t.substring(0,h).split("\n"),o=n.length,r=n.pop().length+1,i=new Error(e+" (line "+o+", char "+r+")");throw i.line=o,i.char=r,i.styleSheet=b,i};d=t.charAt(h);h++)switch(d){case" ":case"\t":case"\r":case"\n":case"\f":_[f]&&(g+=d);break;case'"':e=h+1;do{(e=t.indexOf('"',e)+1)||I('Unmatched "')}while("\\"===t[e-2]);switch(g+=t.slice(h,e),h=e-1,f){case"before-value":f="value";break;case"importRule-begin":f="importRule"}break;case"'":e=h+1;do{(e=t.indexOf("'",e)+1)||I("Unmatched '")}while("\\"===t[e-2]);switch(g+=t.slice(h,e),h=e-1,f){case"before-value":f="value";break;case"importRule-begin":f="importRule"}break;case"/":"*"===t.charAt(h+1)?(h+=2,e=t.indexOf("*/",h),-1===e?I("Missing */"):h=e+1):g+=d,"importRule-begin"===f&&(g+=" ",f="importRule");break;case"@":if(t.indexOf("@-moz-document",h)===h){f="documentRule-begin",u=new o.CSSDocumentRule,u.__starts=h,h+="-moz-document".length,g="";break}if(t.indexOf("@media",h)===h){f="atBlock",s=new o.CSSMediaRule,s.__starts=h,h+="media".length,g="";break}if(t.indexOf("@host",h)===h){f="hostRule-begin",h+="host".length,p=new o.CSSHostRule,p.__starts=h,g="";break}if(t.indexOf("@import",h)===h){f="importRule-begin",h+="import".length,g+="@import";break}if(t.indexOf("@font-face",h)===h){f="fontFaceRule-begin",h+="font-face".length,l=new o.CSSFontFaceRule,l.__starts=h,g="";break}w.lastIndex=h;var C=w.exec(t);if(C&&C.index===h){f="keyframesRule-begin",c=new o.CSSKeyframesRule,c.__starts=h,c._vendorPrefix=C[1],h+=C[0].length-1,g="";break}"selector"===f&&(f="atRule"),g+=d;break;case"{":"selector"===f||"atRule"===f?(i.selectorText=g.trim(),i.style.__starts=h,g="",f="before-name"):"atBlock"===f?(s.media.mediaText=g.trim(),y=n=s,s.parentStyleSheet=b,g="",f="before-selector"):"hostRule-begin"===f?(y=n=p,p.parentStyleSheet=b,g="",f="before-selector"):"fontFaceRule-begin"===f?(n&&(l.parentRule=n),l.parentStyleSheet=b,i=l,g="",f="before-name"):"keyframesRule-begin"===f?(c.name=g.trim(),n&&(c.parentRule=n),c.parentStyleSheet=b,y=n=c,g="",f="keyframeRule-begin"):"keyframeRule-begin"===f?(i=new o.CSSKeyframeRule,i.keyText=g.trim(),i.__starts=h,g="",f="before-name"):"documentRule-begin"===f&&(u.matcher.matcherText=g.trim(),n&&(u.parentRule=n),y=n=u,u.parentStyleSheet=b,g="",f="before-selector");break;case":":"name"===f?(r=g.trim(),g="",f="before-value"):g+=d;break;case"(":if("value"===f)if("expression"===g.trim()){var M=new o.CSSValueExpression(t,h).parse();M.error?I(M.error):(g+=M.expression,h=M.idx)}else f="value-parenthesis",m=1,g+=d;else"value-parenthesis"===f?(m++,g+=d):g+=d;break;case")":"value-parenthesis"===f&&0==--m&&(f="value"),g+=d;break;case"!":"value"===f&&t.indexOf("!important",h)===h?(v="important",h+="important".length):g+=d;break;case";":switch(f){case"value":i.style.setProperty(r,g.trim(),v),v="",g="",f="before-name";break;case"atRule":g="",f="before-selector";break;case"importRule":a=new o.CSSImportRule,a.parentStyleSheet=a.styleSheet.parentStyleSheet=b,a.cssText=g+d,b.cssRules.push(a),g="",f="before-selector";break;default:g+=d}break;case"}":switch(f){case"value":i.style.setProperty(r,g.trim(),v),v="";case"before-name":case"name":i.__ends=h+1,n&&(i.parentRule=n),i.parentStyleSheet=b,y.cssRules.push(i),g="",f=y.constructor===o.CSSKeyframesRule?"keyframeRule-begin":"before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":n||I("Unexpected }"),y.__ends=h+1,b.cssRules.push(y),y=b,n=null,g="",f="before-selector"}break;default:switch(f){case"before-selector":f="selector",i=new o.CSSStyleRule,i.__starts=h;break;case"before-name":f="name";break;case"before-value":f="value";break;case"importRule-begin":f="importRule"}g+=d}return b},e.parse=o.parse,o.CSSStyleSheet=n(47).CSSStyleSheet,o.CSSStyleRule=n(48).CSSStyleRule,o.CSSImportRule=n(98).CSSImportRule,o.CSSMediaRule=n(71).CSSMediaRule,o.CSSFontFaceRule=n(140).CSSFontFaceRule,o.CSSHostRule=n(141).CSSHostRule,o.CSSStyleDeclaration=n(25).CSSStyleDeclaration,o.CSSKeyframeRule=n(99).CSSKeyframeRule,o.CSSKeyframesRule=n(100).CSSKeyframesRule,o.CSSValueExpression=n(142).CSSValueExpression,o.CSSDocumentRule=n(144).CSSDocumentRule},function(t,e){var n={};n.MediaList=function(){this.length=0},n.MediaList.prototype={constructor:n.MediaList,get mediaText(){return Array.prototype.join.call(this,", ")},set mediaText(t){for(var e=t.split(","),n=this.length=e.length,o=0;o<n;o++)this[o]=e[o].trim()},appendMedium:function(t){-1===Array.prototype.indexOf.call(this,t)&&(this[this.length]=t,this.length++)},deleteMedium:function(t){var e=Array.prototype.indexOf.call(this,t);-1!==e&&Array.prototype.splice.call(this,e,1)}},e.MediaList=n.MediaList},function(t,e,n){var o={CSSRule:n(13).CSSRule,MediaList:n(70).MediaList};o.CSSMediaRule=function(){o.CSSRule.call(this),this.media=new o.MediaList,this.cssRules=[]},o.CSSMediaRule.prototype=new o.CSSRule,o.CSSMediaRule.prototype.constructor=o.CSSMediaRule,o.CSSMediaRule.prototype.type=4,Object.defineProperty(o.CSSMediaRule.prototype,"cssText",{get:function(){for(var t=[],e=0,n=this.cssRules.length;e<n;e++)t.push(this.cssRules[e].cssText);return"@media "+this.media.mediaText+" {"+t.join("")+"}"}}),e.CSSMediaRule=o.CSSMediaRule},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(10),n(2),n(15)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromXml=function(t){throw new Error("HandWrite do NOT support fromXml till now")},e.prototype.canDrawedByNative=function(){return!1},e.prototype.clone=function(){return new e({block:this._rangeProps.block})},e.prototype.collapse=function(){},e.prototype.getDataAsJSON=function(){var t=this,e=t._rangeProps.block.toJSON();return(r.IS_WEB_NOTE||r.IS_WEB_GROUP)&&e.resource&&!/^http/i.test(e.resource)&&(e.resource=location.protocol+"//"+location.hostname+e.resource),e},e.prototype.getDataAsHtml=function(t){return this._rangeProps.block.toHtml(null,null,t)},e.prototype.getDataAsPlain=function(){return this._rangeProps.block.toPlain()},e.prototype.isCollapsed=function(){return!1},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=o.HANDWRITE,this._rangeProps={block:e.block}},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(15),n(1),n(10)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromCollabJSON=function(t,o){var i,a=t.rangeType;return a!==n.ATTACHMENT?void r.error("wrong block range type:",a):(i=s.getBlockById(t.blockId,o),i?new e({block:i}):void 0)},e.prototype.canDrawedByNative=function(){return!1},e.prototype.clone=function(){return new e({block:this.block})},e.prototype.collapse=function(t){},e.prototype.getDataAsHtml=function(t){return this.block.toHtml(null,null,t)},e.prototype.getDataAsJSON=function(){var t=this.block.toJSON();return(o.IS_WEB_NOTE||o.IS_WEB_GROUP)&&t.resource&&!/^http/i.test(t.resource)&&(t.resource=location.protocol+"//"+location.hostname+t.resource),t},e.prototype.getDataAsPlain=function(){return this.block.toPlain()},e.prototype.isCollapsed=function(){return!1},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.ATTACHMENT},e}(s)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(10)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.clone=function(){return new e({block:this.block})},e.prototype.collapse=function(){},e.prototype.isCollapsed=function(){return!1},e.prototype.getDataAsHtml=function(){return this.block.toHtml()},e.prototype.getDataAsJSON=function(){return this.block.toJSON()},e.prototype.getDataAsPlain=function(){return this.block.toPlain()},e.prototype.canDrawedByNative=function(){return!0},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.HR},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(2),n(10)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromCollabJSON=function(t,i){var s=t.rangeType;if(s!==o.IMAGE)return void n.error("wrong block range type:",s);var a=r.getBlockById(t.blockId,i);return a?new e({block:a}):void 0},e.prototype.isCollapsed=function(){return!1},e.prototype.clone=function(){return new e({block:this.block})},e.prototype.collapse=function(){},e.prototype.getDataAsJSON=function(){return this.block.toJSON()},e.prototype.getDataAsHtml=function(t){return this.block.toHtml(null,null,t)},e.prototype.getDataAsPlain=function(){return this.block.toPlain()},e.prototype.canDrawedByNative=function(){return!1},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=o.IMAGE},e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(10)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.canDrawedByNative=function(){return!1},e.prototype.clone=function(){return new e({block:this.block})},e.prototype.collapse=function(){},e.prototype.getDataAsHtml=function(){return this.block.toHtml()},e.prototype.getDataAsJSON=function(){return this.block.toJSON()},e.prototype.getDataAsPlain=function(){return this.block.toPlain()},e.prototype.isCollapsed=function(){return!1},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.UNKNOWN},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(2),n(10)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.fromCollabJSON=function(t,i){var s=t.rangeType;if(s!==o.MACRO)return void n.error("wrong block range type:",s);var a=r.getBlockById(t.blockId,i);return a?new e({block:a}):void 0},e.prototype.isCollapsed=function(){return!1},e.prototype.clone=function(){return new e({block:this.block})},e.prototype.collapse=function(){},e.prototype.getDataAsJSON=function(){return this.block.toJSON()},e.prototype.getDataAsHtml=function(t){return this.block.toHtml(null,null,t)},e.prototype.getDataAsPlain=function(){return this.block.toPlain()},e.prototype.canDrawedByNative=function(){return!1},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=o.MACRO},e}(r)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return function(t){var e,n=0;return t?(e="string"==typeof t?t:t.toString(),n=e.replace(/(\s)/g,"").length):n}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){function t(t){return t.replace(f,"&lt;").replace(g,"&gt;")}function e(t){return t.replace(m,"&quot;")}function n(t){return t.replace(_,'"')}function o(t){return t.replace(b,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function r(t){return t.replace(y,":").replace(v," ")}function i(t){for(var e="",n=0,o=t.length;n<o;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return e.trim()}function s(t){return t=n(t),t=o(t),t=r(t),t=i(t)}function a(n){return n=e(n),n=t(n)}function l(){return""}function c(t,e){function n(e){return!!o||-1!==t.indexOf(e)}"function"!=typeof e&&(e=function(){});var o=!Array.isArray(t),r=[],i=!1;return{onIgnoreTag:function(t,o,s){if(n(t)){if(s.isClosing){var a="[/removed]",l=s.position+a.length;return r.push([!1!==i?i:s.position,l]),i=!1,a}return i||(i=s.position),"[removed]"}return e(t,o,s)},remove:function(t){var e="",n=0;return r.forEach(function(o){e+=t.slice(n,o[0]),n=o[1]}),e+=t.slice(n)}}}function u(t){return t.replace(M,"")}function p(t){var e=t.split("");return e=e.filter(function(t){var e=t.charCodeAt(0);return!(127===e||e<=31&&10!==e&&13!==e)}),e.join("")}function d(t){return t=s(t),w.lastIndex=0,w.test(t)?"":t=a(t)}function h(t,e){if(e=s(e),"href"===t||"src"===t){if("#"===(e=e.trim(e)))return"#";if("http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&"mailto:"!==e.substr(0,7)&&"#"!==e[0]&&"/"!==e[0])return""}else if("background"===t){if(w.lastIndex=0,w.test(e))return""}else if("style"===t){if(I.lastIndex=0,I.test(e))return"";if(C.lastIndex=0,C.test(e)&&(w.lastIndex=0,w.test(e)))return""}return e=a(e)}var f=/</g,g=/>/g,m=/"/g,_=/&quot;/g,b=/&#([a-zA-Z0-9]*);?/gim,y=/&colon;?/gim,v=/&newline;?/gim,w=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,I=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,C=/u\s*r\s*l\s*\(.*/gi,M=/<!--[\s\S]*?-->/g,T={};return T.safeAttrValue=h,T.safeHref=d,T.escapeHtml=t,T.escapeQuote=e,T.unescapeQuote=n,T.escapeHtmlEntities=o,T.escapeDangerHtml5Entities=r,T.clearNonPrintableCharacter=i,T.friendlyAttrValue=s,T.escapeAttrValue=a,T.onIgnoreTagStripAll=l,T.StripTagBody=c,T.stripCommentTag=u,T.stripBlankChar=p,T}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(0),n(56)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.getRules=function(e){var o=e?n.clone(e):{};return n.defaults(o,t.DEFAULT_RULES),o},t.convertToCssStyle=function(e,o,r){var i={},s=t.getRules(r);return n.isArray(o)&&(s=n.pick(s,o)),n.isObject(e)&&n.each(s,function(t,n){i[n]=t(e)}),i},t.DEFAULT_RULES={"font-size":function(t){var e=t["font-size"];if(null!=e)return e+"px"},"font-family":function(t){var e=t["font-family"];return e=o.getAllValueByFont(e)||e},color:function(t){return t.color},"background-color":function(t){return t["back-color"]},"font-weight":function(t){return{true:"bold",false:"normal"}[t.bold+""]},"font-style":function(t){return{true:"italic",false:"normal"}[t.italic+""]},"text-decoration":function(t){if(!1===t.underline&&!1===t.strike)return"none";var e=[];return t.underline&&e.push("underline"),t.strike&&e.push("line-through"),e.join(" ")||""}},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(22)],void 0!==(r=function(t,e,n){"use strict";return n({DEFAULT_FONT:"Microsoft YaHei"})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(t,e){if(null!=String.prototype.codePointAt)return String.prototype.codePointAt.call(t,e);if(null===t||void 0===t)throw new TypeError("codePointAtString");t=String(t);var n,o,r=t.length,i=isNaN(e)?0:Number(e);return i<0||i>=r?void 0:(n=t.charCodeAt(i),n>=55296&&n<=56319&&r>i+1&&(o=t.charCodeAt(i+1))>=56320&&o<=57343?1024*(n-55296)+o-56320+65536:n)}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(27),n(1),n(57),n(18)],void 0!==(r=function(t,e,n,o,r,i,s){"use strict";return function(){function t(t){o(i.checkValid(t)),this.char=t,this.length=t.length,this.styles={}}return t.fromJSON=function(e){if(e&&e.char){var o=new t(e.char);return n.each(e.styles,function(t,e){o.setStyle(e,t)}),o}},t.prototype.clone=function(){var e=new t(this.char);return e.styles=n.clone(this.styles),this.unknownStyles&&(e.unknownStyles=n.clone(this.unknownStyles)),e},t.prototype.getStyle=function(t,e,o){void 0===e&&(e=!0);var i,a=e&&o&&void 0!==o[t]?o[t]:null,l=s.getConfig(t);return l?null==(i=this.styles[t])?e?null===a?l.default:a:null:(n["is"+l.type](i)||(r.warn("The value `"+i+"` of `"+t+"` is not valid type!"),i=null),e?null==i?null===a?l.default:a:i:i===l.default?null:i):null},t.prototype.getStyles=function(){var t=this,e={},o=s.getAllConfig();return n.each(o,function(n,o){e[o]=t.getStyle(o)}),e},t.prototype.getUnknownStyle=function(t){var e=this.unknownStyles;if(e)return e[t]},t.prototype.isLineBreak=function(){return"\r"===this.char||"\n"===this.char},t.prototype.removeStyles=function(){this.styles={}},t.prototype.setStyle=function(t,e){var o=this.styles,i=s.getConfig(t);if(!i)return void r.warn("The RichText does not support `"+t+"` style!");if(e&&!n["is"+i.type](e))switch(i.type){case"Number":e=Number(e),e=isNaN(e)?i.default:e;break;case"Boolean":e=e+""=="true";break;default:r.warn("The value `"+e+"` of `"+t+"` is not valid type!"),e=null}!e||(i.equalDefault?i.equalDefault(e):e===i.default)?delete o[t]:o[t]=e},t.prototype.setUnknownStyle=function(t,e){if(s.isSupport(t))return void r.warn("The RichText supports `"+t+"` style!");this.unknownStyles||(this.unknownStyles={}),this.unknownStyles[t]=e},t.prototype.toJSON=function(){var t=this,e={char:t.char},o={},r=!1,i=s.getAllConfig();return n.each(i,function(e,n){var i=t.getStyle(n,!1);i&&(o[n]=i,r=!0)}),r&&(e.styles=o),e},t.prototype.toString=function(){return this.char},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(81),n(22),n(58)],void 0!==(r=function(t,e,n,o,r){"use strict";var i={BACK_COLOR:"transparent",COLOR:"#000000"};return o({bold:{key:"b",default:!1,type:"Boolean"},italic:{key:"i",default:!1,type:"Boolean"},underline:{key:"u",default:!1,type:"Boolean"},strike:{key:"s",default:!1,type:"Boolean"},"font-family":{key:"ff",default:n.DEFAULT_FONT,type:"String"},"font-size":{key:"fs",default:14,type:"Number"},color:{key:"cl",default:i.COLOR,type:"String",equalDefault:function(t){return t===i.COLOR||r.equals(t,i.COLOR)}},"back-color":{key:"bc",default:i.BACK_COLOR,type:"String",equalDefault:function(t){return t===i.BACK_COLOR||r.equals(t,i.BACK_COLOR)}},href:{key:"href",default:"",type:"String"}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(82)],void 0!==(r=function(t,e,n){"use strict";return function(t){var e,o=[];for(e=0;e<t.length;e++)n(t,e)>65535?(o.push(t.slice(e,e+2)),e++):o.push(t[e]);return o}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(18)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.add=function(e){e&&!o.isSupport(e)&&(n.contains(t.unknownInlineStyleNames,e)||t.unknownInlineStyleNames.push(e))},t.get=function(){return t.unknownInlineStyleNames},t.reset=function(){t.unknownInlineStyleNames=[]},t.unknownInlineStyleNames=[],t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(8),n(4),n(2)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlank=function(t){return new e({content:"",isFooter:!0===t})},e.format=function(t,e){return t?(e=e||{},null!=e.pageIndex&&(t=t.replace(/:p/,e.pageIndex+1)),e.pageCount&&(t=t.replace(/:n/,e.pageCount)),t):t},e.fromXml=function(t){var o=$(t),r=o.find(">text").text(),i=o.find("styles>align").text(),s=new e({align:i,content:r,isFooter:"footer"===t.nodeName});return o.children().each(function(t,e){switch(e.nodeName){case"text":break;case"styles":$(e).children().each(function(t,o){"align"!==o.nodeName&&n.appendToTree(s.unknownStyles,e)});break;default:n.appendToTree(s.unknownTree,e)}}),s},e.parse=function(t,e){return t.replace(/\d+/,function(t){return parseInt(t,10)===e.pageIndex+1?":p":t}).replace(/\d+/,function(t){return parseInt(t,10)===e.pageCount?":n":t})},e.prototype.getAlign=function(){return this.align},e.prototype.getBlockStyle=function(t){if("align"===t)return this.getAlign()||"center"},e.prototype.getContent=function(t,n){return e.format(this.content,n)},e.prototype.getInfo=function(){return{align:this.getAlign(),content:this.getContent(),isFooter:this.isFooter}},e.prototype.setAlign=function(t){this.align=t},e.prototype.setContent=function(t){this.content=t},e.prototype.setContentAndStyle=function(t,e){null!=t&&(this.content=t),null!=e&&(this.align=e),this.trigger("change",t,e)},e.prototype.toCollabJSON=function(){return{headerFooterInfo:this.getInfo()}},e.prototype.toXml=function(t){var e,o=this.isFooter?"footer":"header",r=t.createElement(o),i=t.createElement("styles"),s=t.createElement("text"),a=t.createTextNode(this.getContent());return s.appendChild(a),r.appendChild(s),e=t.createElement("align"),e.appendChild(t.createTextNode(this.getAlign())),i.appendChild(e),n.appendToXml(this.unknownStyles,i),r.appendChild(i),n.appendToXml(this.unknownTree,r),r.setAttribute("compat","true"),r},e.prototype.toPlain=function(){return""},e.prototype.toHtml=function(){return""},e.prototype.countWords=function(){return 0},e.prototype.initialize=function(e){e=e||{isFooter:!1,content:"",align:"center"},t.prototype.initialize.call(this,e),this.type=r.HEADER_FOOTER,this.blockId=e.isFooter?"footer-fixed-id":"header-fixed-id",this.content=e.content||"",this.align=e.align||"center",this.isFooter=!0===e.isFooter,this.unknownTree={},this.unknownStyles={}},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o,r,i,s=n(0),a={};e={default:{name:"","font-size":14},a:{name:"","font-size":32,bold:!0},b:{name:"","font-size":18,color:"#595959",bold:!0},1:{name:"1","font-size":28,bold:!0},2:{name:"2","font-size":20,bold:!0},3:{name:"3","font-size":16,bold:!0},4:{name:"4","font-size":14,bold:!0}},o=[e.default,e.a,e.b,e[1],e[2],e[3],e[4]],r={};for(i in e)"default"!==i&&(a[i]=s.clone(e[i]),delete a[i].name,delete a[i].align);return{headingMap:e,headingArray:o,headingBlockStyles:r,headingInlineStyles:a}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(0),n(1),n(43)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(){function t(){}return t.cellsFromCollabJSON=function(t){return t?n.map(t,function(t){return n.map(t,function(t){return r.fromCollabJSON(t)})}):null},t.cellsFromJSON=function(t){var e,n,i,s=t.cellsJson,a=t.height,l=t.width,c=t.isUpdateCellId,u=t.resourceList,p=t.isCollabJson,d=[];if(!s)return null;for(e=0;e<a;e++)for(d[e]=[],n=0;n<l;n++)i=e*l+n,s[i]||o.error("Bag json data, no cellData json, row, col: ",s,e,n),d[e][n]=r.fromJSON(s[i],c,u,p);return d},t.cellsToCollabJSON=function(t){return t?n.map(t,function(t){return n.map(t,function(t){return t.toCollabJSON?t.toCollabJSON():t})}):null},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(66)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.checkAndFix=function(t){var e,r,i,s=t.cells,a=s.length,l=!1,c=!1,u=[];for(e=0;e<a;e++)r=s[e],n.isObject(r)?null==(i=r.value)||n.isString(i)||(c=!0,r.value=i+""):(l=!0,s[e]=o());return l&&u.push("Some cell is NOT Object type"),c&&u.push("The value of some cell is not String type"),{errors:u,fixedData:t,stopCheck:!1}},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(45),n(66)],void 0!==(r=function(t,e,n,o){"use strict";return function(t,e){t=t||1,e=e||1;var r,i=[],s=[],a=[],l=t*e;for(r=0;r<t;r++)s.push(n.DEFAULT_ROW_HEIGHT);for(r=0;r<e;r++)i.push(n.DEFAULT_COL_WIDTH);for(r=0;r<l;r++)a.push(o());return{cells:a,heights:s,widths:i}}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0);return{bubble:function(t,n,o,r){if(t&&n&&o){var i=e.isArray(t);e.each(t,function(t,e){t&&(i?e=t:!0===t&&(t=e),!0===r&&n.off(e),n.on(e,o.trigger.bind(o,t)))})}},addListeners:function(t,n,o,r){t&&n&&o&&e.each(t,function(t,e){!0===r&&n.off(e),n.on(e,o[t].bind(o))})}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(94),o=n(157),r=n(161),i=n(162);return{parseHtml:function(t){return e(t)},parsePlain:function(t,e,n,r){return o(t,e,n,r)},parseJSON:function(t,e){return r(t,e)},parseOCR:function(t){return i(t)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(134),r=n(101),i=n(156);return function(t,n){return e||(e=new o(r),e.define(".MsoListParagraph",i,o.PRIORITY.HIGH)),e.parse(t,n)}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(46),o=n(4);return e.extend({constructor:function(t){var n=this;e.call(this,t,null),n.blocks=[]},setup:function(){var t=this;e.prototype.setup.apply(t),t.blocks=[]},emit:function(t){var e=this;t&&t instanceof o&&e.blocks.push(t)},finish:function(){this.emitBlock()},getRoot:function(){return this}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(21).extend({_computeStyles:function(){var t=this,e=t.parent;e&&(t.styles=e.styles)},capture:function(t){this.emit(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e){var n={};n.StyleSheet=function(){this.parentStyleSheet=null},e.StyleSheet=n.StyleSheet},function(t,e,n){var o={CSSRule:n(13).CSSRule,CSSStyleSheet:n(47).CSSStyleSheet,MediaList:n(70).MediaList};o.CSSImportRule=function(){o.CSSRule.call(this),this.href="",this.media=new o.MediaList,this.styleSheet=new o.CSSStyleSheet},o.CSSImportRule.prototype=new o.CSSRule,o.CSSImportRule.prototype.constructor=o.CSSImportRule,o.CSSImportRule.prototype.type=3,Object.defineProperty(o.CSSImportRule.prototype,"cssText",{get:function(){var t=this.media.mediaText;return"@import url("+this.href+")"+(t?" "+t:"")+";"},set:function(t){for(var e,n,o=0,r="",i="";n=t.charAt(o);o++)switch(n){case" ":case"\t":case"\r":case"\n":case"\f":"after-import"===r?r="url":i+=n;break;case"@":r||t.indexOf("@import",o)!==o||(r="after-import",o+="import".length,i="");break;case"u":if("url"===r&&t.indexOf("url(",o)===o){if(-1===(e=t.indexOf(")",o+1)))throw o+': ")" not found';o+="url(".length;var s=t.slice(o,e);s[0]===s[s.length-1]&&('"'!==s[0]&&"'"!==s[0]||(s=s.slice(1,-1))),this.href=s,o=e,r="media"}break;case'"':if("url"===r){if(!(e=t.indexOf('"',o+1)))throw o+": '\"' not found";this.href=t.slice(o+1,e),o=e,r="media"}break;case"'":if("url"===r){if(!(e=t.indexOf("'",o+1)))throw o+': "\'" not found';this.href=t.slice(o+1,e),o=e,r="media"}break;case";":"media"===r&&i&&(this.media.mediaText=i.trim());break;default:"media"===r&&(i+=n)}}}),e.CSSImportRule=o.CSSImportRule},function(t,e,n){var o={CSSRule:n(13).CSSRule,CSSStyleDeclaration:n(25).CSSStyleDeclaration};o.CSSKeyframeRule=function(){o.CSSRule.call(this),this.keyText="",this.style=new o.CSSStyleDeclaration,this.style.parentRule=this},o.CSSKeyframeRule.prototype=new o.CSSRule,o.CSSKeyframeRule.prototype.constructor=o.CSSKeyframeRule,o.CSSKeyframeRule.prototype.type=9,Object.defineProperty(o.CSSKeyframeRule.prototype,"cssText",{get:function(){return this.keyText+" {"+this.style.cssText+"} "}}),e.CSSKeyframeRule=o.CSSKeyframeRule},function(t,e,n){var o={CSSRule:n(13).CSSRule};o.CSSKeyframesRule=function(){o.CSSRule.call(this),this.name="",this.cssRules=[]},o.CSSKeyframesRule.prototype=new o.CSSRule,o.CSSKeyframesRule.prototype.constructor=o.CSSKeyframesRule,o.CSSKeyframesRule.prototype.type=8,Object.defineProperty(o.CSSKeyframesRule.prototype,"cssText",{get:function(){for(var t=[],e=0,n=this.cssRules.length;e<n;e++)t.push("  "+this.cssRules[e].cssText);return"@"+(this._vendorPrefix||"")+"keyframes "+this.name+" { \n"+t.join("\n")+"\n}"}}),e.CSSKeyframesRule=o.CSSKeyframesRule},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(148),r=n(149),i=n(102),s={a:i.AnchorHandler,abbr:i.InlineHandler,acronym:i.InlineHandler,address:i.ParagraphHandler,applet:!1,area:!1,article:i.ParagraphHandler,aside:i.ParagraphHandler,audio:!1,b:i.InlineHandler,base:!1,basefont:!1,bdi:i.InlineHandler,bdo:i.InlineHandler,bgsound:!1,big:i.InlineHandler,blink:i.InlineHandler,blockquote:i.ParagraphHandler,body:i.ParagraphHandler,br:i.BreakHandler,button:!1,canvas:!1,center:i.ParagraphHandler,cite:i.InlineHandler,code:i.InlineHandler,command:!1,content:!1,data:!1,datalist:!1,dd:i.ParagraphHandler,del:i.InlineHandler,details:i.ParagraphHandler,dfn:i.InlineHandler,dialog:!1,dir:i.InlineHandler,div:i.ParagraphHandler,dl:i.ParagraphHandler,dt:i.ParagraphHandler,element:!1,em:i.InlineHandler,embed:!1,fieldset:i.ParagraphHandler,figcaption:i.ParagraphHandler,figure:i.ParagraphHandler,font:i.InlineHandler,footer:i.ParagraphHandler,form:i.ParagraphHandler,frame:!1,frameset:!1,h1:i.ParagraphHandler,h2:i.ParagraphHandler,h3:i.ParagraphHandler,h4:i.ParagraphHandler,h5:i.ParagraphHandler,h6:i.ParagraphHandler,header:i.ParagraphHandler,hgroup:i.ParagraphHandler,hr:i.HrHandler,html:i.ParagraphHandler,i:i.InlineHandler,iframe:!1,image:!1,img:i.ImageHandler,input:i.TodoHandler,ins:i.InlineHandler,isindex:!1,kbd:i.InlineHandler,keygen:!1,label:i.InlineHandler,legend:i.ParagraphHandler,li:i.ListItemHandler,link:!1,listing:!1,main:i.ParagraphHandler,map:!1,mark:i.InlineHandler,marquee:i.ParagraphHandler,menu:!1,menuitem:!1,meta:!1,meter:i.InlineHandler,multicol:i.ParagraphHandler,nav:i.ParagraphHandler,nobr:i.InlineHandler,noembed:!1,noframes:!1,noscript:!1,object:!1,ol:i.ListHandler,optgroup:!1,option:!1,output:i.InlineHandler,p:i.ParagraphHandler,param:!1,picture:!1,plaintext:i.ParagraphHandler,pre:i.ParagraphHandler,progress:!1,q:i.InlineHandler,rp:i.InlineHandler,rt:i.InlineHandler,rtc:i.InlineHandler,ruby:i.ParagraphHandler,s:i.InlineHandler,samp:i.InlineHandler,script:!1,section:i.ParagraphHandler,select:!1,shadow:!1,small:i.InlineHandler,source:!1,spacer:!1,span:i.InlineHandler,strike:i.InlineHandler,strong:i.InlineHandler,style:!1,sub:i.InlineHandler,summary:i.ParagraphHandler,sup:i.InlineHandler,table:i.TableHandler,template:!1,textarea:i.ParagraphHandler,time:i.InlineHandler,title:!1,track:!1,tt:i.InlineHandler,u:i.InlineHandler,ul:i.ListHandler,var:i.InlineHandler,video:!1,wbr:!1,xmp:!1},a=function(t,n){t&&t.length&&e.each(t,function(t){null==n[t]&&(n[t]=!1)})};return a(o,s),a(r,s),s}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return{AnchorHandler:n(150),BreakHandler:n(151),HrHandler:n(152),ImageHandler:n(103),InlineHandler:n(49),ListHandler:n(104),ListItemHandler:n(153),ParagraphHandler:n(46),TableHandler:n(105),TodoHandler:n(155),DocumentHandler:n(95),StyleHandlers:n(68),TagHandlers:n(105),UnknownHandler:n(96)}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(49),r=n(41),i=n(37),s=n(59),a=n(20),l=n(0);return e=o.extend({inheritStyleHandlers:!1,uninheritStyleHandlers:{width:!0,float:!0},inheritBlockStyles:{align:!0},_handleNoteLink:function(){var t,e,n,o=this,r=o.el;t=r.getAttribute("data-attr-noteid"),e=r.getAttribute("alt"),t&&e&&(n=o.parent&&o.parent.styles?l.clone(o.parent.styles):{},n.href="note://"+t,n.color="#003884",n.underline=!0,o.emit({text:e,styles:n,isText:!0}))},_handleNoteTodo:function(){var t=this,e=t.el,n=e.getAttribute("data-res-todo"),o=new a({legacyResId:n});t.emit(o)},finish:function(){var t,n,o,a,c,u=this,p=u.el,d=p.getAttribute("src"),h=function(t,e){l.each(t,function(t,n){var o=e.style[t];o&&(u.styles[n]=o)})};return e.isNoteLink(p)?void u._handleNoteLink():e.isTodo(p)?void u._handleNoteTodo():void(d&&(o=p.parentNode,o&&(a=o.getAttribute("yne-bulb-block")),e.isAttachment(p)?(n=p.getAttribute("path"),t=new i({source:d,resource:n,fileName:e.getAttachmentFileName(p),fileLength:e.getAttachmentFileLength(p)}),"attachment"===a&&h({align:"textAlign",float:"float"},o)):e.isImage(p)?("image"===a&&h({align:"textAlign",width:"width",float:"float"},o),t=new r({source:d,title:e.getImageTitle(p)}),u.styles.width&&u.styles.width>620&&(u.styles.width=620)):e.isHandWrite(p)&&(c=p.getAttribute("data-res-handwrite"),t=c?new s({source:d,resource:c}):new r({source:d})),t&&(t.setStyles(u.styles),u.emit(t))))}},{isAttachment:function(t){var e=t.getAttribute("path"),n=t.dataset.mediaType;return e&&("attachment"===n||!n)},isImage:function(t){var e=t.dataset.mediaType,n=t.getAttribute("path"),o=["image"];return!n&&(!e||o.indexOf(e)>-1)},isHandWrite:function(t){return"handwrite"===t.dataset.mediaType},isNoteLink:function(t){return"notelink"===t.dataset.mediaType},isTodo:function(t){return"todo"===t.dataset.mediaType},getAttachmentFileName:function(t){return t.getAttribute("filename")||t.getAttribute("alt")||t.getAttribute("title")||""},getImageTitle:function(t){return t.getAttribute("alt")||""},getAttachmentFileLength:function(t){return t.getAttribute("filelength")||""}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(21),r=n(23),i=n(19),s=n(0),a=n(6);return e=o.extend({list:null,level:null,type:null,_itemCounter:null,prevSimilar:null,inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0,align:!0,"line-height":!0,indent:!0,"text-indent":!0},_parseTypeFromElement:function(){return"ul"===this.el.tagName.toLowerCase()?r.UNORDERED:r.ORDERED},_getStartIndexFromElement:function(){var t=this,e=t.type,n=t.el,o=-1;return e!==r.ORDERED?o:("list"===n.getAttribute("yne-block-type")&&(o=parseInt(n.getAttribute("start"),10),isNaN(o)&&(o=-1)),o)},increaseItemCounter:function(){var t,e=this,n=e.prevSimilar;n&&n.increaseItemCounter?n.increaseItemCounter():(t=e._itemCounter||0,t+=1,e._itemCounter=t)},getItemCounter:function(){var t=this,e=t.prevSimilar;return e?e.getItemCounter():t._itemCounter||0},setup:function(){var t,e,n,o=this,i=o._findParentListHandler();o.list=null,o.level=1,i&&(o.level=i.level+1),n=o._parseTypeFromElement(),o.type=n,e=o._getStartIndexFromElement(),e>1&&(t=o._getPreviousSimilar())&&t.getItemCounter()===e-1&&(o.prevSimilar=t,o.list=t.list),o.list||(o.list=new r({type:n,listId:a.newGUID()}))},capture:function(t){var e=this,n=e.level;t instanceof i&&t.getLevel()<n&&t.setLevel(n),e.emit(t)},_findParentListHandler:function(){for(var t=this.parent;t;){if(t instanceof e)return t;t=t.parent}},_getPreviousSimilar:function(){var t,n=this,o=n.level,r=n.type,i=n.parent,a=i.children;return s.some(a,function(n){if(n instanceof e&&n.level===o&&n.type===r)return t=n,!0}),t}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(21),o=n(29),r=n(43),i=n(30),s=n(33),a=n(32),l=n(44),c=n(103),u=n(1),p=n(36),d=n(0),h=n(154),f=n(68),g=n(2),m=function(t,e){var n;if(t&&t.tagName){if((n=(t.tagName+"").toLowerCase())===e+"")return!0;if(d.contains(e,n))return!0}},_=function(t,e,n){if(!t)return n;var o=t.getAttribute(e);return o=parseInt(o||n,10),isNaN(o)&&(o=n),o},b=function(t,e,n){if(!t)return n;var o=t.style[e];return o=parseInt(o||n,10),isNaN(o)&&(o=n),o};return e.extend({DEFAULT_HEIGHT:40,DEFAULT_WIDTH:70,_styleHandlers:{bold:{tagList:["b","strong"],styleHandler:function(t){return f.bold.action(t,{},null)}},lineThrough:{tagList:["strike","s","del"],styleHandler:function(t){return f.strike.action(t,{},null)}},underline:{tagList:["u","ins"],styleHandler:function(t){return f.underline.action(t,{},null)}},italic:{tagList:["i","em","cite","var","address","dfn"],styleHandler:function(t){return f.italic.action(t,{},null)}},fontName:function(t){var e=f["font-family"].action(t,{},null);return e||("FONT"===t.tagName?(e=t.getAttribute("face"))||null:void 0)},fontSize:function(t){var e=f["font-size"].action(t,{},null);if(e)return e+"px"},textColor:function(t){var e=f.color.action(t,{},null);return e||("FONT"===t.tagName?(e=t.getAttribute("color"))||null:void 0)},backColor:function(t){return f["back-color"].action(t,{},null)},textAlign:function(t){return f.align.action(t,{},null)}},_tableStyleHandlers:{verticalAlign:function(t){var e=["THEAD","TBODY","TFOOT"];if(t)return t.style.verticalAlign||t.getAttribute("valign")||(t.tagName&&d.contains(e,t.tagName)?"middle":void 0)},textAlign:function(t){if(t)return t.style&&t.style.textAlign?t.style.textAlign:t.getAttribute("align")},textColor:function(t){return f.color.action(t,{},null)},backColor:function(t){return t.style.backgroundColor||null},bold:function(t){return t&&t.tagName&&"TH"===t.tagName?"true":f.bold.action(t,{},null)?"true":void 0},italic:function(t){if(f.italic.action(t,{},null))return"true"},underline:function(t){if(f.underline.action(t,{},null))return"true"},lineThrough:function(t){if(f.strike.action(t,{},null))return"true"},fontName:function(t){return f["font-family"].action(t,{},null)},fontSize:function(t){var e=f["font-size"].action(t,{},null);if(e)return e+"px"}},constructor:function(t,e,n,o){var r=this;r.el=t,r.parent=e,r.internalStylesParser=n,r._parser=o},handleChildrenBySelf:function(){return!0},_inheritStyles:function(t,e,n){var o=this,r={};return n=n||{},d.each(o._styleHandlers,function(o,i){var s;!1!==t[i]&&(d.isFunction(o)?s=o(e):(o.styleHandler&&(s=o.styleHandler(e)),!s&&o.tagList&&(s=m(e,o.tagList))),s&&"inherit"!==s||(s=n[i]),r[i]=s)}),r},_mergeStyles:function(t,e){var n=this,o=p.trim(t.value),r=o.length;d.each(n._styleHandlers,function(n,o){0===r?e[o]?t[o]=e[o]:t[o]=!1:t[o]&&e[o]!==t[o]&&(t[o]=!1)})},_inheritTableStyles:function(t,e){var n=this,o={},r=["TABLE","THEAD","TBODY","TFOOT","TR","TD","TH"];return d.contains(r,t.tagName+"")?(e=e||{},d.each(n._tableStyleHandlers,function(n,r){var i=n(t);null!=i&&"inherit"!==i||(i=e[r]),null!=i&&(o[r]=i)}),o):{}},_parseImage:function(t,e){var n,o,r=t.getAttribute("src");if(c.isNoteLink(t))return o=t.getAttribute("alt")||"",void(e.value+=o);r&&(c.isAttachment(t)?(n=t.getAttribute("path"),e.value=a.create({source:r,resource:n,fileLength:c.getAttachmentFileLength(t),fileName:c.getAttachmentFileName(t)})):c.isImage(t)&&(e.value=s.create({source:r})))},_shouldAddLineBreak:function(t){t=(t+"").toLowerCase();var e=["article","aside","blockquote","br","button","caption","col","colgroup","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","map","ol","output","p","pre","progress","section","textarea","tfoot","ul","video"];return d.contains(e,t)},_isLinkCell:function(t){if(!t)return!1;var e,n,o,r,i,s,a,l=t.querySelectorAll("a");if(!l||!l.length||1!==l.length)return!1;for(e=l[0],o=e,n=o.parentNode;n&&n!==t;){for(r=n.childNodes,i=r.length,s=0;s<i;s++)if((a=r[s])!==o&&!function(t){return!t||(1===t.nodeType?""===p.trim(t.textContent||""):3!==t.nodeType||""===p.trim(t.nodeValue||""))}(a))return!1;o=n,n=o.parentNode}return!0},_parseCell:function(t,e,n){var o,r,l,c,u,p=this,f={value:""},m=p.internalStylesParser,b=["font-size","font-family","font-style","font-weight","color","background-color","background","text-decoration","text-align","vertical-align","white-space","word-wrap","word-space"],y=i.createBlank(),v=!1;return u=p._parser.parse(t.innerHTML),d.any(u,g.isTextBlock.bind(g))?d.each(u,function(t){g.isTextBlock(t)?y.appendRichText(t.getText()):(g.isImage(t)||g.isAttachment(t)||g.isTable(t)||g.isHr(t))&&p._blockList.push(t)}):d.each(u,function(t){(g.isTable(t)||g.isHr(t))&&p._blockList.push(t),v?(g.isImage(t)||g.isAttachment(t))&&p._blockList.push(t):g.isImage(t)?(y=s.create({source:t.getSource(),width:t.getStyles("width"),height:t.getStyles("height")}),v=!0):g.isAttachment(t)&&(y=a.create({source:t.getSource(),resource:t.getResource(),fileLength:t.getFileLength(),fileName:t.getFileName()}),v=!0)}),o={value:y},o.value&&f.link&&(o.link=f.link),n===p.DEFAULT_HEIGHT&&(o.wrap="true"),d.each(p._styleHandlers,function(t,e){!0===f[e]?o[e]="true":f[e]&&(o[e]=f[e])}),r=_(t,"colspan",1),r>1&&(o.mergeWidth=r,o.mergeHeight=o.mergeHeight||1),r=_(t,"rowspan",1),r>1&&(o.mergeHeight=r,o.mergeWidth=o.mergeWidth||1),l=p._inheritTableStyles(t,e),d.each(l,function(t,e){null==o[e]&&t&&(o[e]=t)}),c=m.getStylesBySpecificity(t,b),d.each(c,function(e,n){var o=t.style.getPropertyValue(n);null!=o&&""!==o||t.style.setProperty(n,e)}),d.each(p._tableStyleHandlers,function(e,n){var r=e(t);null==o[n]&&null!=r&&(o[n]=r)}),h(o.backColor)&&delete o.backColor,o},_isArrayFull:function(t,e){var n;if(0===e)return!1;for(n=0;n<e;n++)if(null==t[n])return!1;return!0},_parseTbodyCells:function(t,e,n){var o,r=this,s=d.filter(e.children,r._isTableRow),a=[],l=t.widths.length,c=t.heights.length,u=0;return o=r._inheritTableStyles(e,n),d.each(s,function(e){var n=d.filter(e.children,r._isTableCell),s=r._inheritTableStyles(e,o),p=u,h=a[p];if(0!==n.length){for(;h&&r._isArrayFull(h,l);)u++,p++,h=a[p];for(h||(h=a[p]=[]),d.each(n,function(e){for(var n,o,l,u,d,f,g,m,b,y=0,v=h[y];v;)y++,v=h[y];for(n=y,u=r._parseCell(e,s,t.heights[p]),h[n]=u,o=_(e,"rowspan",1),l=_(e,"colspan",1),o>c-p&&(o=c-p,u.mergeHeight=o),d=0;d<o;d++)for(g=p+d,b=a[g],b||(b=a[g]=[]),f=0;f<l;f++)m=n+f,b[m]||(b[m]={mergePointDX:f,mergePointDY:d,value:i.createBlank(!0)})});h.length<l;)h.push({value:""});u++}}),a},_isTableCell:function(t){if(!t||!t.tagName)return!1;var e=t.tagName||"",n=["TD","TH"];return d.contains(n,e)},_isTableRow:function(t){return!(!t||!t.tagName)&&"TR"===t.tagName},_getTbodySize:function(t){var e,n,o,r,i,s,a=this,l=[],c=0,u=0,p=[];for(d.each(t,function(e){var n,o,r=u,i=l[r];if(n=d.filter(e.children,a._isTableCell),0!==n.length){for(;i&&a._isArrayFull(i,c);)r++,i=l[r];u=r,i||(i=l[r]=[],p[r]=t[r]),d.each(n,function(e,n){var s,c,u,d,h,f,g=_(e,"colspan",1),m=_(e,"rowspan",1),y=b(e,"width",0)||_(e,"width",0);for(o+=g,y=Math.max(Math.round(y/g),a.DEFAULT_WIDTH),d=n;null!=i[d];)d++;for(u=0;u<g;u++)h=d+u,i[h]=y;for(s=1;s<m;s++)for(c=r+s,f=l[c],f||(f=l[c]=[],p[c]=t[c]),u=0;u<g;u++)h=d+u,f[h]=y}),o=i.length,c<o&&(c=o)}}),e=l.length,s=[],n=0;n<c;n++){for(r=(l[0]||[])[n]||a.DEFAULT_WIDTH,o=1;o<e;o++)(i=(l[o]||[])[n])&&i>r&&(r=i);s.push(r)}return{rows:e,columns:c,columnWidthList:s,compactTrList:d.compact(p)}},_createBlankRow:function(t){for(var e=[];t>0;)e.push({value:""}),t--;return e},_parseColgroup:function(t){var e=this,n=d.filter(t.children,e._isCol);return d.map(n,function(t){return parseFloat(t.style.width)})},_isCol:function(t){return!(!t||!t.tagName)&&"COL"===t.tagName},_parseTbody:function(t,e,n){var o,r,i,s,a=this,l=d.filter(t.children,a._isTableRow),c=0,u={},p=[],h=0;for(s=a._getTbodySize(l),l=s.compactTrList,u.heights=d.map(l,function(t){if(t.style.height)return parseFloat(t.style.height);var e=d.filter(t.children,a._isTableCell),n=0;return d.some(e,function(t){if(!t.getAttribute("rowspan")){var e=b(t,"height",0)||_(t,"height",0);if(e)return n=e,!0}}),n=Math.max(n,a.DEFAULT_HEIGHT)});u.heights.length<s.rows;)u.heights.push(a.DEFAULT_HEIGHT);if(h=0,d.each(s.columnWidthList,function(t){h+=t}),h<n?(r=Math.ceil((n-h)/s.columns),p=d.map(s.columnWidthList,function(t){return t+r})):p=s.columnWidthList,u.widths=p,o=a._parseTbodyCells(u,t,e),i=o.length,(c=u.heights.length)>i)for(;i<c;)o.push(a._createBlankRow(s.columns)),i++;else if(c<i)for(;c<i;)u.heights.push(a.DEFAULT_HEIGHT),c++;return u.cells=o,u},_extendBodyInfo:function(t,e){var n,o,r,i=t.cells,s=t.heights.length;if(!(t.widths.length>=e))for(n=0;n<s;n++)for(o=i[n],r=o.length;r<e;r++)o.push({value:""})},_convertToTableCells:function(t,e){var n,o,s,a,c=t.length,p=[];for(n=0;n<c;n++)for(o=t[n],p[n]=[],s=0;s<e;s++)a=o[s],a?p[n].push(r.create({content:a.value||i.createBlank(),mergeWidth:a.mergeWidth,mergeHeight:a.mergeHeight,mergePointDX:a.mergePointDX,mergePointDY:a.mergePointDY,styles:d.pick(a,l.getAllStyleNames())})):u.error("No tdInfo  at row, col: "+n+", "+s);return p},_mergeTbody:function(t){if(t&&t.length){var e,n=this,o=0,r=[],i=[],s={};return d.each(t,function(t){var n=t.widths.length;n>o&&(o=n,e=t.widths)}),d.each(t,function(t){n._extendBodyInfo(t,o)}),d.each(t,function(t){r=r.concat(t.heights),i=i.concat(t.cells)}),i=n._convertToTableCells(i,o),s.widths=e,s.heights=r,s.cells=i,s}},_parseTable:function(t){var e,n,o=this,r=d.toArray(t.children),i=["thead","tbody","tfoot"],s={thead:[],tbody:[],tfoot:[]},a=[],l=o._blockList.length,c=o._inheritTableStyles(t,{}),u=b(t,"width",0)||_(t,"width",0);o._blockList.push(0),d.each(r,function(t){var e,r=(t.tagName||"").toLowerCase();"colgroup"===r&&(n=o._parseColgroup(t)),d.contains(i,r)&&(e=o._parseTbody(t,c,u),d.extend(e.widths,n),s[r].push(e))}),d.each(i,function(t){var e=s[t];e&&e.length&&(a=a.concat(e))}),(e=o._mergeTbody(a))&&(o._blockList[l]=e)},setup:function(){this._blockList=[]},finish:function(){var t=this;t._parseTable(t.el),d.each(t._blockList,function(e){var n;e&&e.heights&&e.cells&&e.cells.length>0?n=new o({tableCells:e.cells,rowHeights:e.heights,colWidths:e.widths}):e&&(n=e),n&&t.emit(n)})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(37),n(2),n(38),n(39),n(40),n(41),n(19),n(7),n(29),n(20),n(63),n(59),n(35),n(1),n(67)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h,f,g,m){"use strict";return function(){function t(){}return t.buildBlockFromCollabJSON=function(t){var e=null,d=t.type;switch(d){case o.PARAGRAPH:e=c.fromCollabJSON(t);break;case o.IMAGE:e=a.fromJSON(t);break;case o.ATTACHMENT:e=n.fromJSON(t);break;case o.LIST_ITEM:e=l.fromCollabJSON(t);break;case o.TABLE:e=u.fromBulbJSON(t);break;case o.HR:e=s.fromCollabJSON(t);break;case o.HEADING:e=i.fromCollabJSON(t);break;case o.CATALOGUE:e=r.fromCollabJSON(t);break;case o.TODO:e=p.fromCollabJSON(t);break;case o.MACRO:e=m.fromJSON(t);break;default:g.warn("unsupported type [ "+d+" ] in buildBlockFromCollabJSON"),e=f.fromBulbJSON(t)}return e},t.buildBlockFromJSON=function(t){var e,f=t.type;switch(f){case o.PARAGRAPH:e=c.fromJSON(t);break;case o.LIST_ITEM:e=l.fromJSON(t);break;case o.IMAGE:e=a.fromJSON(t);break;case o.ATTACHMENT:e=n.fromJSON(t);break;case o.TABLE:e=u.fromJSON(t,!0);break;case o.HR:e=s.fromJSON(t);break;case o.HEADING:e=i.fromJSON(t);break;case o.CATALOGUE:e=r.fromJSON(t);break;case o.TODO:e=p.fromJSON(t);break;case o.QUOTE:e=d.fromJSON(t);break;case o.HANDWRITE:e=h.fromJSON(t);break;case o.MACRO:e=m.fromJSON(t);break;default:throw new Error("unsupported type [ "+f+"] in buildBlockFromCollabJSON")}return e},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(29),n(108),n(9),n(1)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return!t||!t.table||null==t.left||null==t.top||!t.width||!t.height||t.left<0||t.top<0||t.width<1||t.height<1?void a.error("Failed to create RectRange",t):new e(t)},e.prototype.clone=function(){var t=this.getRect();return e.create(t)},e.prototype.equals=function(t){var e=t.getRect();return this.props.table===t.getTable()&&this.props.height===e.height&&this.props.left===e.left&&this.props.top===e.top&&this.props.width===e.width},e.prototype.forEach=function(t,e){var n=this;n.forEachRow(function(o){return n.forEachColumn(function(e){return t(o,e)},e)},e)},e.prototype.forEachCell=function(t,e){var n=this,o={};n.forEach(function(e,r){var i,s=n.props.table.getCell(e,r,{findMergePointIfNeeded:!0,withPosition:!0});if(s&&(i=s.row+"-"+s.col,!0!==o[i]))return o[i]=!0,t(s.cell,s.row,s.col)},e)},e.prototype.forEachRow=function(t,e){var n,o=this;for(n=0;n<o.props.height;n++)if(!1===t(e?o.props.top+o.props.height-n:o.props.top+n))return!1},e.prototype.forEachColumn=function(t,e){var n,o=this;for(n=0;n<o.props.width;n++)if(!1===t(e?o.props.left+o.props.width-n:o.props.left+n))return!1},e.prototype.getDataAsHtml=function(){return this._getAsNewTable().toHtml()},e.prototype.getDataAsJSON=function(t){return this._getAsNewTable().toJSON(t)},e.prototype.getDataAsPlain=function(){return this._getAsNewTable().toPlain({returnString:!0})},e.prototype.getFirstCell=function(){return this.props.table.getCell(this.props.top,this.props.left,{findMergePointIfNeeded:!0,withPosition:!0})},e.prototype.getFirstCellRect=function(){return{col:this.props.left,row:this.props.top}},e.prototype.getLastCell=function(){return this.props.table.getCell(this.props.top+this.props.height-1,this.props.left+this.props.width-1,{findMergePointIfNeeded:!0,withPosition:!0})},e.prototype.getRect=function(){var t={};return t.height=this.props.height,t.left=this.props.left,t.top=this.props.top,t.width=this.props.width,t},e.prototype.getTable=function(){return this.props.table},e.prototype.isMerge=function(){},e.prototype.isOnlyCell=function(){var t,e,n=this;return!(!(t=n.props.table.getCell(n.props.top,n.props.left))||!(t.isAttachmentCell()||t.isImageCell()||t.isMacroCell()))&&(t.isMergePoint()?(e=t.getMergePointAttr(),e.width===n.props.width&&e.height===n.props.height):1===n.props.width&&1===n.props.height)},e.prototype.onlyOneCell=function(){return 1===this.props.width&&1===this.props.height},e.prototype.overlaps=function(){},e.prototype.onlyMergePointAndCell=function(){var t,e,n=this;return t=n.props.table.getCell(n.props.top,n.props.left),!!t.isMergePoint()&&(e=t.getMergePointAttr(),n.props.width===e.width&&n.props.height===e.height)},e.prototype.toJSON=function(){return this.getRect()},e.prototype.toString=function(){var t,e=this,o={};return o.height=e.props.height,o.left=e.props.left,o.top=e.props.top,o.width=e.props.width,t=n.map(o,function(t,e){return e+":"+t}),"RectRange("+t.join(",")+")"},e.prototype.initialize=function(t){var e=this;t=t||{},e.props=e.props||{},e.props.table=t.table,e._setRect(t),e._checkBoundary(),e._fixMerge()},e.prototype._checkBoundary=function(){var t=this.props.table,e=t.getColumnCount(),n=t.getRowCount();this.props.left<0?this.props.left=0:this.props.left>=e&&(this.props.left=e-1),this.props.top<0?this.props.top=0:this.props.top>=n&&(this.props.top=n-1),this.props.width<1&&(this.props.width=1),this.props.left+this.props.width>e&&(this.props.width=e-this.props.left),this.props.height<1&&(this.props.height=1),this.props.top+this.props.height>n&&(this.props.height=n-this.props.top)},e.prototype._fixMerge=function(){this._walkToFixMergeCells({})},e.prototype._getAsNewTable=function(){var t,e,n,r,i=this.props.table,s=[],a=[],l=[],c=this.props.top;for(c=0;c<this.props.height;c++)for(r=[],s.push(r),e=this.props.top+c,a.push(i.getRowHeight(e)),t=0;t<this.props.width;t++)n=this.props.left+t,0===c&&l.push(i.getColumnWidth(n)),r.push(i.getCell(e,n));return new o({colWidths:l,rowHeights:a,tableCells:s})},e.prototype._markAsWalked=function(t,e){var n,o,r;for(n=0;n<t.width;n++)for(o=0;o<t.height;o++)r=this._makeMarkKey(t.top+o,t.left+n),e[r]=!0},e.prototype._makeMarkKey=function(t,e){return t+","+e},e.prototype._setRect=function(t){this.props=this.props||{},this.props.height=t.height,this.props.left=t.left,this.props.top=t.top,this.props.width=t.width},e.prototype._shouldExtend=function(t,e,n){var o,i,s,l,c=this.props.table;return(!n||!n[this._makeMarkKey(t,e)])&&((s=c.getCell(t,e,{findMergePointIfNeeded:!0,withPosition:!0}))&&s.cell?(l=s.cell,l.isMergePoint()?(i=l.getMergePointAttr(),o={height:i.height,left:s.col,top:s.row,width:i.width}):o={height:1,left:e,top:t,width:1},this._markAsWalked(o,n),!r.contains(this.props,o)&&r.union(this.props,o)):(a.warn("no table cell at row/col",t,e),!1))},e.prototype._walkToFixMergeCells=function(t){var e=this,n=function(n){var o,r,i=n?e.props.top:e.props.top+e.props.height-1;for(r=0;r<e.props.width;r++)if(o=e._shouldExtend(i,e.props.left+r,t))return o},o=function(n){var o,r,i=n?e.props.left:e.props.left+e.props.width-1;for(r=1;r<e.props.height;r++)if(o=e._shouldExtend(e.props.top+r,i,t))return o},r=n(!0)||n(!1)||o(!0)||o(!1);r&&(e._setRect(r),e._walkToFixMergeCells(t))},e}(s)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return{contains:function(t,e){if(!t||!e)return!1;var n=t.left+t.width,o=t.top+t.height,r=e.left+e.width,i=e.top+e.height;return t.left<=e.left&&t.top<=e.top&&n>=r&&o>=i},union:function(t,e){if(t&&e){var n=Math.min(t.left,e.left),o=Math.min(t.top,e.top);return t={left:n,top:o,width:Math.max(t.left+t.width,e.left+e.width)-n,height:Math.max(t.top+t.height,e.top+e.height)-o}}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(14)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.QUOTE},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(14)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.HEADING},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(14)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.HEADING},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(14)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.LIST_ITEM},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(7),n(51),n(14),n(15),n(9),n(1),n(5),n(2),n(114)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t&&t.startRange&&t.endRange?new e(t):void c.warn("options is unvalid!")},e.createForHeaderFooter=function(t){return new e({blockRanges:[new r({block:t})]})},e.createMock=function(){var t={},n=new o({}),r=new s({block:n,end:0,start:0});return t.startRange=r,t.endRange=t.startRange,new e(t)},e.fromCollabJSON=function(t,n){var o=null;if(t){var r=t.startBlockRange,i=t.endBlockRange,s={};s.startRange=n.buildBlockRangeFromJSON(r),t.isInSingleBlock?s.endRange=s.startRange:s.endRange=n.buildBlockRangeFromJSON(i),s.startRange&&s.endRange&&(o=e.create(s))}return o},e.isNoteRange=function(t){var n=!1;return t&&t.type===e.TYPE&&t.getStartBlockRange()&&t.getEndBlockRange()&&(n=!0),n},e.isValidType=function(t){return t===e.DATA_TYPES.JSON||t===e.DATA_TYPES.HTML||t===e.DATA_TYPES.PLAIN},e._getMethodName=function(t){var n="";switch(t){case e.DATA_TYPES.JSON:n="JSON";break;case e.DATA_TYPES.HTML:n="Html";break;case e.DATA_TYPES.PLAIN:n="Plain"}return n},e.getBlockRangeMethodName=function(t){var n=e._getMethodName(t);if(n)return"getDataAs"+n},e.prototype.canDrawedByNative=function(){var t;return!this.isInSingleBlock()||(t=this.getStartBlockRange(),t.canDrawedByNative())},e.prototype.clone=function(t){var n,o;return!1===t?(n=this.startRange,o=this.endRange):(n=this.startRange.clone(),o=this.isInSingleBlock()?n:this.endRange.clone()),e.create({startRange:n,endRange:o})},e.prototype.collapse=function(t){var e=!1===t?this.getEndBlockRange():this.getStartBlockRange();e&&e.collapse?(e.collapse(t),this.startRange=e,this.endRange=e):c.warn("There is no blockRange or blockRange has no `collapse` method")},e.prototype.createWalker=function(t,e){return d.create(this,t,e)},e.prototype.getStartBlockRange=function(){return this.startRange},e.prototype.getEndBlockRange=function(){return this.endRange},e.prototype.getDataAsHtml=function(t){var e=this.startRange;return this._isSingleNotFullSelectedLI()?e.block.toHtml(e.start,e.end):t.toHtml(this)},e.prototype.getDataAsJSON=function(t,n){var o=this._getDataWithType(t,e.DATA_TYPES.JSON,n);return o=o||[],JSON.stringify(o)},e.prototype.getDataAsPlain=function(t,n){var o=this._getDataWithType(t,e.DATA_TYPES.PLAIN,n),r="";return o&&o.length&&(r=o.join(u.LINE_BREAK)),r},e.prototype.getDataWithType=function(t,e,n){return this._getDataWithType(t,e,n)},e.prototype.getType=function(){return this.type},e.prototype.isCollapsed=function(){return!(!this.startRange||!this.isInSingleBlock())&&this.startRange.isCollapsed()},e.prototype.isInSingleBlock=function(){return this.startRange===this.endRange},e.prototype.isInMultiBlock=function(){return!this.isInSingleBlock()},e.prototype.isMatchBlockTypes=function(t,e){if(!t)return c.warn("The param note does not exist!"),!1;var n,o,r,i=this.startRange.block,s=this.endRange.block,a=t.getBlockIndex(i),l=t.getBlockIndex(s);if(-1===a||-1===l)return c.warn("startIndex or endIndex is -1!"),!1;for(n=t.getAllBlocks(),o=a;o<=l;o++)if(r=p.getType(n[o]),-1===e.indexOf(r))return!1;return!0},e.prototype.isSingleTableSelected=function(){var t=this.startRange;return!(!this.isInSingleBlock()||!p.isTable(t.block))},e.prototype.setBlockRanges=function(t){this.startRange=n.first(t),this.endRange=n.last(t),this._checkValid()},e.prototype.toCollabJSON=function(t){var e={};return e.startBlockRange=this.startRange.toCollabJSON(t),this.isInSingleBlock()?e.isInSingleBlock=!0:(e.isInSingleBlock=!1,e.endBlockRange=this.endRange.toCollabJSON(t)),e},e.prototype.initialize=function(t){t=t||{},delete this.options,this.type="note",t.startRange||t.endRange||!t.blockRanges?this.setBlockRanges([t.startRange,t.endRange]):this.setBlockRanges(t.blockRanges)},e.prototype._checkValid=function(){var t=this.startRange,e=this.endRange;if(!t||!e)throw new Error("starRange or endRange is not valid!");if(!t.block||!e.block)throw new Error("starRange.block or endRange.block is not valid!");if(t.block===e.block&&t!==e)throw new Error("startRange and endRange should be the same object when startRange.block === endRange.block")},e.prototype._getDataWithType=function(t,n,o){if(!t||!t.getBlockAt)return void c.warn("note is unvalid!");if(!e.isValidType(n))return void c.warn("type is unvalid!");o=o||function(){return!0};var r,i,s,l,u=[],d=this.startRange,h=e.getBlockRangeMethodName(n);if(e.DATA_TYPES.PLAIN===n&&this._isSingleNotFullSelectedLI())return r=d.block.toPlain(d.start,d.end),u.push(r),u;if(!(l=this.createWalker(t,function(t){return o(t.block)})))return[];for(s=l.next();s;)r=s[h](),null!=r?Array.isArray(r)?u=u.concat(r):(i=s.block,(a.IS_WEB_NOTE||a.IS_WEB_GROUP)&&p.isAttachment(i)&&r.resource&&!/^http/i.test(r.resource)&&(r.resource=location.protocol+"//"+location.hostname+r.resource),u.push(r)):c.warn("data is null!"),s=l.next();return u},e.prototype._isSingleNotFullSelectedLI=function(){var t=this.startRange,e=!1;return this.isInSingleBlock()&&p.isListItem(t.block)&&(0!==t.start||t.end!==t.block.getLength())&&(e=!0),e},e.TYPE="note",e.DATA_TYPES={JSON:1,HTML:2,PLAIN:3},e}(l)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(9),n(1),n(50)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t,n,o){return n&&t?new e({filter:o,note:n,noteRange:t}):void r.error("Failed to create NoteRangeWalker, unvalid parameters",t,n,o)},e.prototype.current=function(){return this.walkerProps.blockRanges[this.walkerProps.blockRangeIndex]},e.prototype.first=function(){return this.walkerProps.blockRangeIndex=0,this._getAtIndex(this.walkerProps.blockRangeIndex)},e.prototype.last=function(){if(this._getAtIndex(this.walkerProps.endIndex),this.walkerProps.blockRangeIndex=this.walkerProps.blockRanges.length-1,-1!==this.walkerProps.blockRangeIndex)return this.walkerProps.blockRanges[this.walkerProps.blockRangeIndex]},e.prototype.next=function(){return this.walkerProps.blockRangeIndex++,this._getAtIndex(this.walkerProps.blockRangeIndex)},e.prototype.previous=function(){return this.walkerProps.blockRangeIndex--,this._getAtIndex(this.walkerProps.blockRangeIndex)},e.prototype.reset=function(){this.walkerProps.blockRangeIndex=-1},e.prototype.initialize=function(t){var e,o;t=n.defaults(t||{},{filter:function(){return!0},note:null,noteRange:null}),this.walkerProps=t,e=this.walkerProps.note=t.note,o=this.walkerProps.noteRange=t.noteRange,this.walkerProps.filter=t.filter,this.walkerProps.startRange=o.getStartBlockRange(),this.walkerProps.endRange=o.getEndBlockRange(),this.walkerProps.startIndex=e.getBlockIndex(this.walkerProps.startRange.block),this.walkerProps.endIndex=e.getBlockIndex(this.walkerProps.endRange.block),this.walkerProps.blockIndex=this.walkerProps.startIndex-1,this.walkerProps.blockRanges=[],this.walkerProps.blockRangeIndex=-1},e.prototype._getAtIndex=function(t){var e,n,o,r;if(o=this.walkerProps.blockRanges[t])return o.clone(!0);if(!this._hasWalked()){for(r=this.walkerProps.blockIndex+1;r<=this.walkerProps.endIndex&&(this.walkerProps.blockIndex=r,this.walkerProps.startIndex!==this.walkerProps.endIndex?r===this.walkerProps.startIndex?(e=this.walkerProps.startRange.clone(!0),e.extendToBlockEnd()):r===this.walkerProps.endIndex?(e=this.walkerProps.endRange.clone(!0),e.extendToBlockStart()):(n=this.walkerProps.note.getBlockAt(r),e=s.createRangeByBlock({allContent:!0,block:n})):e=this.walkerProps.startRange.clone(!0),!(!0===this.walkerProps.filter(e)&&(this.walkerProps.blockRanges.push(e),o=this.walkerProps.blockRanges[t])));r++);return o}},e.prototype._hasWalked=function(){return this.walkerProps.blockIndex>=this.walkerProps.endIndex},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(2),n(14)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.type=n.TODO},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};o=[n,e,n(117),n(164),n(169),n(172)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return i({},n,o,r,s)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(121),n(37),n(4),n(2),n(38),n(28),n(59),n(87),n(39),n(40),n(41),n(23),n(19),n(122),n(7),n(63),n(83),n(3),n(29),n(20),n(35),n(67),n(32),n(33),n(42),n(30),n(24),n(43),n(31),n(45),n(44),n(64),n(89),n(90),n(91),n(106),n(56),n(62),n(17),n(26),n(18),n(84)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h,f,g,m,_,b,y,v,w,I,C,M,T,k,S,N,x,A,E,O,D,L,R,B,j,P,z,H,F,G,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTypes=n,e.Attachment=o,e.Block=r,e.BlockTypes=i,e.Catalogue=s,e.Catalogues=a,e.HandWrite=l,e.HeaderFooter=c,e.Heading=u,e.Hr=p,e.Image=d,e.List=h,e.ListItem=f,e.Note=g,e.Paragraph=m,e.Quote=_,e.RichChar=b,e.RichText=y,e.Table=v,e.Todo=w,e.Unknown=I,e.Macro=C,e.AttachmentResource=M,e.ImageResource=T,e.MacroResource=k,e.Lines=S,e.Resource=N,e.TableCell=x,e.TableCellType=A,e.ConstantConfig=E,e.SupportedTableBlockStyles=O,e.TableCellUtil=D,e.TableUtil=L,e.CellValue=R,e.CreateBlankTable=B,e.BlockUtils=j,e.FontMaps=P,e.ListItemMarker=z,e.Rich2HtmlConvertor=H,e.SupportedBlockStyles=F,e.SupportedInlineStyles=G,e.XmlInlineStyleConfig=U}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;!function(i,s){o=[n(0),n(36),e],void 0!==(r=function(t,e,n){i.Backbone=s(i,n,t,e)}.apply(e,o))&&(t.exports=r)}(this,function(t,e,n,o){var r=t.Backbone,i=[],s=i.slice;e.VERSION="1.1.2",e.$=o,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){return c(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,o){if(!c(this,"once",t,[e,o])||!e)return this;var r=this,i=n.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,o)},off:function(t,e,o){var r,i,s,a,l,u,p,d;if(!this._events||!c(this,"off",t,[e,o]))return this;if(!t&&!e&&!o)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),l=0,u=a.length;l<u;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=r=[],e||o)for(p=0,d=s.length;p<d;p++)i=s[p],(e&&e!==i.callback&&e!==i.callback._callback||o&&o!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],o=this._events.all;return n&&u(n,e),o&&u(o,arguments),this},stopListening:function(t,e,o){var r=this._listeningTo;if(!r)return this;var i=!e&&!o;o||"object"!=typeof e||(o=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(e,o,this),(i||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(t,e,n,o){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(o));return!1}if(l.test(n)){for(var i=n.split(l),s=0,a=i.length;s<a;s++)t[e].apply(t,[i[s]].concat(o));return!1}return!0},u=function(t,e){var n,o=-1,r=t.length,i=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++o<r;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i);return;case 2:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i,s);return;case 3:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i,s,a);return;default:for(;++o<r;)(n=t[o]).callback.apply(n.ctx,e);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(t,e){a[e]=function(e,o,r){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=n.uniqueId("l"))]=e,r||"object"!=typeof o||(r=this),e[t](o,r,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var d=e.Model=function(t,e){var o=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(o=this.parse(o,e)||{}),o=n.defaults({},o,n.result(this,"defaults")),this.set(o,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,o){var r,i,s,a,l,c,u,p;if(null==t)return this;if("object"==typeof t?(i=t,o=e):(i={})[t]=e,o||(o={}),!this._validate(i,o))return!1;s=o.unset,l=o.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),p=this.attributes,u=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],n.isEqual(p[r],e)||a.push(r),n.isEqual(u[r],e)?delete this.changed[r]:this.changed[r]=e,s?delete p[r]:p[r]=e;if(!l){a.length&&(this._pending=o);for(var d=0,h=a.length;d<h;d++)this.trigger("change:"+a[d],this,p[a[d]],o)}if(c)return this;if(!l)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger("change",this,o);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var o in this.attributes)e[o]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,o=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)n.isEqual(r[i],e=t[i])||((o||(o={}))[i]=e);return o},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,o=t.success;return t.success=function(n){if(!e.set(e.parse(n,t),t))return!1;o&&o(e,n,t),e.trigger("sync",e,n,t)},j(this,t),this.sync("read",this,t)},save:function(t,e,o){var r,i,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,o=e):(r={})[t]=e,o=n.extend({validate:!0},o),r&&!o.wait){if(!this.set(r,o))return!1}else if(!this._validate(r,o))return!1;r&&o.wait&&(this.attributes=n.extend({},a,r)),void 0===o.parse&&(o.parse=!0);var l=this,c=o.success;return o.success=function(t){l.attributes=a;var e=l.parse(t,o);if(o.wait&&(e=n.extend(r||{},e)),n.isObject(e)&&!l.set(e,o))return!1;c&&c(l,t,o),l.trigger("sync",l,t,o)},j(this,o),i=this.isNew()?"create":o.patch?"patch":"update","patch"===i&&(o.attrs=r),s=this.sync(i,this,o),r&&o.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,o=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&r(),o&&o(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;j(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||B();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var o=this.validationError=this.validate(t,e)||null;return!o||(this.trigger("invalid",this,o,n.extend(e,{validationError:o})),!1)}});var h=["keys","values","pairs","invert","pick","omit"];n.each(h,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,m))},remove:function(t,e){var o=!n.isArray(t);t=o?[t]:n.clone(t),e||(e={});var r,i,s,a;for(r=0,i=t.length;r<i;r++)(a=t[r]=this.get(t[r]))&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return o?t[0]:t},set:function(t,e){e=n.defaults({},e,g),e.parse&&(t=this.parse(t,e));var o=!n.isArray(t);t=o?t?[t]:[]:n.clone(t);var r,i,s,a,l,c,u,p=e.at,h=this.model,f=this.comparator&&null==p&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null,_=[],b=[],y={},v=e.add,w=e.merge,I=e.remove,C=!(f||!v||!I)&&[];for(r=0,i=t.length;r<i;r++){if(l=t[r]||{},s=l instanceof d?a=l:l[h.prototype.idAttribute||"id"],c=this.get(s))I&&(y[c.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),f&&!u&&c.hasChanged(m)&&(u=!0)),t[r]=c;else if(v){if(!(a=t[r]=this._prepareModel(l,e)))continue;_.push(a),this._addReference(a,e)}a=c||a,!C||!a.isNew()&&y[a.id]||C.push(a),y[a.id]=!0}if(I){for(r=0,i=this.length;r<i;++r)y[(a=this.models[r]).cid]||b.push(a);b.length&&this.remove(b,e)}if(_.length||C&&C.length)if(f&&(u=!0),this.length+=_.length,null!=p)for(r=0,i=_.length;r<i;r++)this.models.splice(p+r,0,_[r]);else{C&&(this.models.length=0);var M=C||_;for(r=0,i=M.length;r<i;r++)this.models.push(M[r])}if(u&&this.sort({silent:!0}),!e.silent){for(r=0,i=_.length;r<i;r++)(a=_[r]).trigger("add",a,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return o?t[0]:t},reset:function(t,e){e||(e={});for(var o=0,r=this.models.length;o<r;o++)this._removeReference(this.models[o],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,o=this;return t.success=function(n){var r=t.reset?"reset":"set";o[r](n,t),e&&e(o,n,t),o.trigger("sync",o,n,t)},j(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var o=this,r=e.success;return e.success=function(t,n){e.wait&&o.add(t,e),r&&r(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?n.clone(e):{},e.collection=this;var o=new this.model(t,e);return o.validationError?(this.trigger("invalid",this,o.validationError,e),!1):o},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,o){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,o),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(_,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(t){f.prototype[t]=function(e,o){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,o)}});var y=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},v=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var o=t[e];if(n.isFunction(o)||(o=this[t[e]]),o){var r=e.match(v),i=r[1],s=r[2];o=n.bind(o,this),i+=".delegateEvents"+this.cid,""===s?this.$el.on(i,o):this.$el.on(i,s,o)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className"));var o=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(o,!1)}}}),e.sync=function(t,o,r){var i=C[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:i,dataType:"json"};if(r.url||(s.url=n.result(o,"url")||B()),null!=r.data||!o||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||o.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){s.type="POST",r.emulateJSON&&(s.data._method=i);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&I&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(n.extend(s,r));return o.trigger("request",o,l,r),l};var I=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,S=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,a,{initialize:function(){},route:function(t,o,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(o)&&(r=o,o=""),r||(r=this[o]);var i=this;return e.history.route(t,function(n){var s=i._extractParameters(t,n);i.execute(r,s),i.trigger.apply(i,["route:"+o].concat(s)),i.trigger("route",o,s),e.history.trigger("route",i,o,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(N,"\\$&").replace(T,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var o=t.exec(e).slice(1);return n.map(o,function(t,e){return e===o.length-1?t||null:t?decodeURIComponent(t):null})}});var x=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,O=/msie [\w.]+/,D=/\/$/,L=/#.*$/;x.started=!1,n.extend(x.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(A,"")},start:function(t){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var o=this.getFragment(),r=document.documentMode,i=O.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);if(this.root=("/"+this.root+"/").replace(E,"/"),i&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(o)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=o;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),x.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!x.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(L,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var o=t.href.replace(/(javascript:|#).*$/,"");t.replace(o+"#"+e)}else t.hash="#"+e}}),e.history=new x;var R=function(t,e){var o,r=this;o=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(o,r,e);var i=function(){this.constructor=o};return i.prototype=r.prototype,o.prototype=new i,t&&n.extend(o.prototype,t),o.__super__=r.prototype,o};d.extend=f.extend=M.extend=y.extend=x.extend=R;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(t,e){var n=e.error;e.error=function(o){n&&n(t,o,e),t.trigger("error",t,o,e)}};return e})},function(t,e,n){var o,r;/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){function s(t){var e=!!t&&"length"in t&&t.length,n=lt.type(t);return"function"!==n&&!lt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t,e,n){if(lt.isFunction(e))return lt.grep(t,function(t,o){return!!e.call(t,o,t)!==n});if(e.nodeType)return lt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(bt.test(e))return lt.filter(e,t,n);e=lt.filter(e,t)}return lt.grep(t,function(t){return ot.call(e,t)>-1!==n})}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var e={};return lt.each(t.match(Ct)||[],function(t,n){e[n]=!0}),e}function u(){q.removeEventListener("DOMContentLoaded",u),n.removeEventListener("load",u),lt.ready()}function p(){this.expando=lt.expando+p.uid++}function d(t,e,n){var o;if(void 0===n&&1===t.nodeType)if(o="data-"+e.replace(At,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(o))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:xt.test(n)?lt.parseJSON(n):n)}catch(t){}Nt.set(t,e,n)}else n=void 0;return n}function h(t,e,n,o){var r,i=1,s=20,a=o?function(){return o.cur()}:function(){return lt.css(t,e,"")},l=a(),c=n&&n[3]||(lt.cssNumber[e]?"":"px"),u=(lt.cssNumber[e]||"px"!==c&&+l)&&Ot.exec(lt.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{i=i||".5",u/=i,lt.style(t,e,u+c)}while(i!==(i=a()/l)&&1!==i&&--s)}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],o&&(o.unit=c,o.start=u,o.end=r)),r}function f(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&lt.nodeName(t,e)?lt.merge([t],n):n}function g(t,e){for(var n=0,o=t.length;n<o;n++)St.set(t[n],"globalEval",!e||St.get(e[n],"globalEval"))}function m(t,e,n,o,r){for(var i,s,a,l,c,u,p=e.createDocumentFragment(),d=[],h=0,m=t.length;h<m;h++)if((i=t[h])||0===i)if("object"===lt.type(i))lt.merge(d,i.nodeType?[i]:i);else if(zt.test(i)){for(s=s||p.appendChild(e.createElement("div")),a=(Bt.exec(i)||["",""])[1].toLowerCase(),l=Pt[a]||Pt._default,s.innerHTML=l[1]+lt.htmlPrefilter(i)+l[2],u=l[0];u--;)s=s.lastChild;lt.merge(d,s.childNodes),s=p.firstChild,s.textContent=""}else d.push(e.createTextNode(i));for(p.textContent="",h=0;i=d[h++];)if(o&&lt.inArray(i,o)>-1)r&&r.push(i);else if(c=lt.contains(i.ownerDocument,i),s=f(p.appendChild(i),"script"),c&&g(s),n)for(u=0;i=s[u++];)jt.test(i.type||"")&&n.push(i);return p}function _(){return!0}function b(){return!1}function y(){try{return q.activeElement}catch(t){}}function v(t,e,n,o,r,i){var s,a;if("object"==typeof e){"string"!=typeof n&&(o=o||n,n=void 0);for(a in e)v(t,a,n,o,e[a],i);return t}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=b;else if(!r)return t;return 1===i&&(s=r,r=function(t){return lt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=lt.guid++)),t.each(function(){lt.event.add(this,e,r,o,n)})}function w(t,e){return lt.nodeName(t,"table")&&lt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function I(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function C(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function M(t,e){var n,o,r,i,s,a,l,c;if(1===e.nodeType){if(St.hasData(t)&&(i=St.access(t),s=St.set(e,i),c=i.events)){delete s.handle,s.events={};for(r in c)for(n=0,o=c[r].length;n<o;n++)lt.event.add(e,r,c[r][n])}Nt.hasData(t)&&(a=Nt.access(t),l=lt.extend({},a),Nt.set(e,l))}}function T(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Rt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function k(t,e,n,o){e=et.apply([],e);var r,i,s,a,l,c,u=0,p=t.length,d=p-1,h=e[0],g=lt.isFunction(h);if(g||p>1&&"string"==typeof h&&!at.checkClone&&Yt.test(h))return t.each(function(r){var i=t.eq(r);g&&(e[0]=h.call(this,r,i.html())),k(i,e,n,o)});if(p&&(r=m(e,t[0].ownerDocument,!1,t,o),i=r.firstChild,1===r.childNodes.length&&(r=i),i||o)){for(s=lt.map(f(r,"script"),I),a=s.length;u<p;u++)l=r,u!==d&&(l=lt.clone(l,!0,!0),a&&lt.merge(s,f(l,"script"))),n.call(t[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,lt.map(s,C),u=0;u<a;u++)l=s[u],jt.test(l.type||"")&&!St.access(l,"globalEval")&&lt.contains(c,l)&&(l.src?lt._evalUrl&&lt._evalUrl(l.src):lt.globalEval(l.textContent.replace(Jt,"")))}return t}function S(t,e,n){for(var o,r=e?lt.filter(e,t):t,i=0;null!=(o=r[i]);i++)n||1!==o.nodeType||lt.cleanData(f(o)),o.parentNode&&(n&&lt.contains(o.ownerDocument,o)&&g(f(o,"script")),o.parentNode.removeChild(o));return t}function N(t,e){var n=lt(e.createElement(t)).appendTo(e.body),o=lt.css(n[0],"display");return n.detach(),o}function x(t){var e=q,n=Qt[t];return n||(n=N(t,e),"none"!==n&&n||(Zt=(Zt||lt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Zt[0].contentDocument,e.write(),e.close(),n=N(t,e),Zt.detach()),Qt[t]=n),n}function A(t,e,n){var o,r,i,s,a=t.style;return n=n||Kt(t),s=n?n.getPropertyValue(e)||n[e]:void 0,""!==s&&void 0!==s||lt.contains(t.ownerDocument,t)||(s=lt.style(t,e)),n&&!at.pixelMarginRight()&&Xt.test(s)&&$t.test(e)&&(o=a.width,r=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=o,a.minWidth=r,a.maxWidth=i),void 0!==s?s+"":s}function E(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function O(t){if(t in ie)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=re.length;n--;)if((t=re[n]+e)in ie)return t}function D(t,e,n){var o=Ot.exec(e);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):e}function L(t,e,n,o,r){for(var i=n===(o?"border":"content")?4:"width"===e?1:0,s=0;i<4;i+=2)"margin"===n&&(s+=lt.css(t,n+Dt[i],!0,r)),o?("content"===n&&(s-=lt.css(t,"padding"+Dt[i],!0,r)),"margin"!==n&&(s-=lt.css(t,"border"+Dt[i]+"Width",!0,r))):(s+=lt.css(t,"padding"+Dt[i],!0,r),"padding"!==n&&(s+=lt.css(t,"border"+Dt[i]+"Width",!0,r)));return s}function R(t,e,n){var o=!0,r="width"===e?t.offsetWidth:t.offsetHeight,i=Kt(t),s="border-box"===lt.css(t,"boxSizing",!1,i);if(r<=0||null==r){if(r=A(t,e,i),(r<0||null==r)&&(r=t.style[e]),Xt.test(r))return r;o=s&&(at.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+L(t,e,n||(s?"border":"content"),o,i)+"px"}function B(t,e){for(var n,o,r,i=[],s=0,a=t.length;s<a;s++)o=t[s],o.style&&(i[s]=St.get(o,"olddisplay"),n=o.style.display,e?(i[s]||"none"!==n||(o.style.display=""),""===o.style.display&&Lt(o)&&(i[s]=St.access(o,"olddisplay",x(o.nodeName)))):(r=Lt(o),"none"===n&&r||St.set(o,"olddisplay",r?n:lt.css(o,"display"))));for(s=0;s<a;s++)o=t[s],o.style&&(e&&"none"!==o.style.display&&""!==o.style.display||(o.style.display=e?i[s]||"":"none"));return t}function j(t,e,n,o,r){return new j.prototype.init(t,e,n,o,r)}function P(){return n.setTimeout(function(){se=void 0}),se=lt.now()}function z(t,e){var n,o=0,r={height:t};for(e=e?1:0;o<4;o+=2-e)n=Dt[o],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function H(t,e,n){for(var o,r=(U.tweeners[e]||[]).concat(U.tweeners["*"]),i=0,s=r.length;i<s;i++)if(o=r[i].call(n,e,t))return o}function F(t,e,n){var o,r,i,s,a,l,c,u=this,p={},d=t.style,h=t.nodeType&&Lt(t),f=St.get(t,"fxshow");n.queue||(a=lt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,lt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=lt.css(t,"display"),"inline"===("none"===c?St.get(t,"olddisplay")||x(t.nodeName):c)&&"none"===lt.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(o in e)if(r=e[o],le.exec(r)){if(delete e[o],i=i||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!f||void 0===f[o])continue;h=!0}p[o]=f&&f[o]||lt.style(t,o)}else c=void 0;if(lt.isEmptyObject(p))"inline"===("none"===c?x(t.nodeName):c)&&(d.display=c);else{f?"hidden"in f&&(h=f.hidden):f=St.access(t,"fxshow",{}),i&&(f.hidden=!h),h?lt(t).show():u.done(function(){lt(t).hide()}),u.done(function(){var e;St.remove(t,"fxshow");for(e in p)lt.style(t,e,p[e])});for(o in p)s=H(h?f[o]:0,o,u),o in f||(f[o]=s.start,h&&(s.end=s.start,s.start="width"===o||"height"===o?1:0))}}function G(t,e){var n,o,r,i,s;for(n in t)if(o=lt.camelCase(n),r=e[o],i=t[n],lt.isArray(i)&&(r=i[1],i=t[n]=i[0]),n!==o&&(t[o]=i,delete t[n]),(s=lt.cssHooks[o])&&"expand"in s){i=s.expand(i),delete t[o];for(n in i)n in t||(t[n]=i[n],e[n]=r)}else e[o]=r}function U(t,e,n){var o,r,i=0,s=U.prefilters.length,a=lt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=se||P(),n=Math.max(0,c.startTime+c.duration-e),o=n/c.duration||0,i=1-o,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(i);return a.notifyWith(t,[c,i,n]),i<1&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:lt.extend({},e),opts:lt.extend(!0,{specialEasing:{},easing:lt.easing._default},n),originalProperties:e,originalOptions:n,startTime:se||P(),duration:n.duration,tweens:[],createTween:function(e,n){var o=lt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(o),o},stop:function(e){var n=0,o=e?c.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(G(u,c.opts.specialEasing);i<s;i++)if(o=U.prefilters[i].call(c,t,u,c.opts))return lt.isFunction(o.stop)&&(lt._queueHooks(c.elem,c.opts.queue).stop=lt.proxy(o.stop,o)),o;return lt.map(u,H,c),lt.isFunction(c.opts.start)&&c.opts.start.call(t,c),lt.fx.timer(lt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function V(t){return t.getAttribute&&t.getAttribute("class")||""}function Y(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var o,r=0,i=e.toLowerCase().match(Ct)||[];if(lt.isFunction(n))for(;o=i[r++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(n)):(t[o]=t[o]||[]).push(n)}}function W(t,e,n,o){function r(a){var l;return i[a]=!0,lt.each(t[a]||[],function(t,a){var c=a(e,n,o);return"string"!=typeof c||s||i[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var i={},s=t===Ne;return r(e.dataTypes[0])||!i["*"]&&r("*")}function J(t,e){var n,o,r=lt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:o||(o={}))[n]=e[n]);return o&&lt.extend(!0,t,o),t}function Z(t,e,n){for(var o,r,i,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in n)i=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){i=r;break}s||(s=r)}i=i||s}if(i)return i!==l[0]&&l.unshift(i),n[i]}function Q(t,e,n,o){var r,i,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(i=u.shift();i;)if(t.responseFields[i]&&(n[t.responseFields[i]]=e),!l&&o&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(r in c)if(a=r.split(" "),a[1]===i&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(i=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+i}}}return{state:"success",data:e}}function $(t,e,n,o){var r;if(lt.isArray(e))lt.each(e,function(e,r){n||Oe.test(t)?o(t,r):$(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,o)});else if(n||"object"!==lt.type(e))o(t,e);else for(r in e)$(t+"["+r+"]",e[r],n,o)}function X(t){return lt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var K=[],q=n.document,tt=K.slice,et=K.concat,nt=K.push,ot=K.indexOf,rt={},it=rt.toString,st=rt.hasOwnProperty,at={},lt=function(t,e){return new lt.fn.init(t,e)},ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ut=/^-ms-/,pt=/-([\da-z])/gi,dt=function(t,e){return e.toUpperCase()};lt.fn=lt.prototype={jquery:"2.2.4",constructor:lt,selector:"",length:0,toArray:function(){return tt.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:tt.call(this)},pushStack:function(t){var e=lt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return lt.each(this,t)},map:function(t){return this.pushStack(lt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:nt,sort:K.sort,splice:K.splice},lt.extend=lt.fn.extend=function(){var t,e,n,o,r,i,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||lt.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],o=t[e],s!==o&&(c&&o&&(lt.isPlainObject(o)||(r=lt.isArray(o)))?(r?(r=!1,i=n&&lt.isArray(n)?n:[]):i=n&&lt.isPlainObject(n)?n:{},s[e]=lt.extend(c,i,o)):void 0!==o&&(s[e]=o));return s},lt.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===lt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!lt.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==lt.type(t)||t.nodeType||lt.isWindow(t))return!1;if(t.constructor&&!st.call(t,"constructor")&&!st.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||st.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?rt[it.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=lt.trim(t))&&(1===t.indexOf("use strict")?(e=q.createElement("script"),e.text=t,q.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ut,"ms-").replace(pt,dt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,o=0;if(s(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ct,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?lt.merge(n,"string"==typeof t?[t]:t):nt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ot.call(e,t,n)},merge:function(t,e){for(var n=+e.length,o=0,r=t.length;o<n;o++)t[r++]=e[o];return t.length=r,t},grep:function(t,e,n){for(var o=[],r=0,i=t.length,s=!n;r<i;r++)!e(t[r],r)!==s&&o.push(t[r]);return o},map:function(t,e,n){var o,r,i=0,a=[];if(s(t))for(o=t.length;i<o;i++)null!=(r=e(t[i],i,n))&&a.push(r);else for(i in t)null!=(r=e(t[i],i,n))&&a.push(r);return et.apply([],a)},guid:1,proxy:function(t,e){var n,o,r;if("string"==typeof e&&(n=t[e],e=t,t=n),lt.isFunction(t))return o=tt.call(arguments,2),r=function(){return t.apply(e||this,o.concat(tt.call(arguments)))},r.guid=t.guid=t.guid||lt.guid++,r},now:Date.now,support:at}),"function"==typeof Symbol&&(lt.fn[Symbol.iterator]=K[Symbol.iterator]),lt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){rt["[object "+e+"]"]=e.toLowerCase()});var ht=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){function e(t,e,n,o){var r,i,s,a,c,p,d,h,f=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!o&&((e?e.ownerDocument||e:P)!==A&&x(e),e=e||A,O)){if(11!==g&&(p=gt.exec(t)))if(r=p[1]){if(9===g){if(!(s=e.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(f&&(s=f.getElementById(r))&&B(e,s)&&s.id===r)return n.push(s),n}else{if(p[2])return $.apply(n,e.getElementsByTagName(t)),n;if((r=p[3])&&y.getElementsByClassName&&e.getElementsByClassName)return $.apply(n,e.getElementsByClassName(r)),n}if(y.qsa&&!U[t+" "]&&(!D||!D.test(t))){if(1!==g)f=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(_t,"\\$&"):e.setAttribute("id",a=j),d=C(t),i=d.length,c=ut.test(a)?"#"+a:"[id='"+a+"']";i--;)d[i]=c+" "+u(d[i]);h=d.join(","),f=mt.test(t)&&l(e.parentNode)||e}if(h)try{return $.apply(n,f.querySelectorAll(h)),n}catch(t){}finally{a===j&&e.removeAttribute("id")}}}return T(t.replace(it,"$1"),e,n,o)}function n(){function t(n,o){return e.push(n+" ")>v.cacheLength&&delete t[e.shift()],t[n+" "]=o}var e=[];return t}function o(t){return t[j]=!0,t}function r(t){var e=A.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function i(t,e){for(var n=t.split("|"),o=n.length;o--;)v.attrHandle[n[o]]=e}function s(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return o(function(e){return e=+e,o(function(n,o){for(var r,i=t([],n.length,e),s=i.length;s--;)n[r=i[s]]&&(n[r]=!(o[r]=n[r]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function u(t){for(var e=0,n=t.length,o="";e<n;e++)o+=t[e].value;return o}function p(t,e,n){var o=e.dir,r=n&&"parentNode"===o,i=H++;return e.first?function(e,n,i){for(;e=e[o];)if(1===e.nodeType||r)return t(e,n,i)}:function(e,n,s){var a,l,c,u=[z,i];if(s){for(;e=e[o];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[o];)if(1===e.nodeType||r){if(c=e[j]||(e[j]={}),l=c[e.uniqueID]||(c[e.uniqueID]={}),(a=l[o])&&a[0]===z&&a[1]===i)return u[2]=a[2];if(l[o]=u,u[2]=t(e,n,s))return!0}}}function d(t){return t.length>1?function(e,n,o){for(var r=t.length;r--;)if(!t[r](e,n,o))return!1;return!0}:t[0]}function h(t,n,o){for(var r=0,i=n.length;r<i;r++)e(t,n[r],o);return o}function f(t,e,n,o,r){for(var i,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(i=t[a])&&(n&&!n(i,o,r)||(s.push(i),c&&e.push(a)));return s}function g(t,e,n,r,i,s){return r&&!r[j]&&(r=g(r)),i&&!i[j]&&(i=g(i,s)),o(function(o,s,a,l){var c,u,p,d=[],g=[],m=s.length,_=o||h(e||"*",a.nodeType?[a]:a,[]),b=!t||!o&&e?_:f(_,d,t,a,l),y=n?i||(o?t:m||r)?[]:s:b;if(n&&n(b,y,a,l),r)for(c=f(y,g),r(c,[],a,l),u=c.length;u--;)(p=c[u])&&(y[g[u]]=!(b[g[u]]=p));if(o){if(i||t){if(i){for(c=[],u=y.length;u--;)(p=y[u])&&c.push(b[u]=p);i(null,y=[],c,l)}for(u=y.length;u--;)(p=y[u])&&(c=i?K(o,p):d[u])>-1&&(o[c]=!(s[c]=p))}}else y=f(y===s?y.splice(m,y.length):y),i?i(null,s,y,l):$.apply(s,y)})}function m(t){for(var e,n,o,r=t.length,i=v.relative[t[0].type],s=i||v.relative[" "],a=i?1:0,l=p(function(t){return t===e},s,!0),c=p(function(t){return K(e,t)>-1},s,!0),h=[function(t,n,o){var r=!i&&(o||n!==k)||((e=n).nodeType?l(t,n,o):c(t,n,o));return e=null,r}];a<r;a++)if(n=v.relative[t[a].type])h=[p(d(h),n)];else{if(n=v.filter[t[a].type].apply(null,t[a].matches),n[j]){for(o=++a;o<r&&!v.relative[t[o].type];o++);return g(a>1&&d(h),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(it,"$1"),n,a<o&&m(t.slice(a,o)),o<r&&m(t=t.slice(o)),o<r&&u(t))}h.push(n)}return d(h)}function _(t,n){var r=n.length>0,i=t.length>0,s=function(o,s,a,l,c){var u,p,d,h=0,g="0",m=o&&[],_=[],b=k,y=o||i&&v.find.TAG("*",c),w=z+=null==b?1:Math.random()||.1,I=y.length;for(c&&(k=s===A||s||c);g!==I&&null!=(u=y[g]);g++){if(i&&u){for(p=0,s||u.ownerDocument===A||(x(u),a=!O);d=t[p++];)if(d(u,s||A,a)){l.push(u);break}c&&(z=w)}r&&((u=!d&&u)&&h--,o&&m.push(u))}if(h+=g,r&&g!==h){for(p=0;d=n[p++];)d(m,_,s,a);if(o){if(h>0)for(;g--;)m[g]||_[g]||(_[g]=Z.call(l));_=f(_)}$.apply(l,_),c&&!o&&_.length>0&&h+n.length>1&&e.uniqueSort(l)}return c&&(z=w,k=b),m};return r?o(s):s}var b,y,v,w,I,C,M,T,k,S,N,x,A,E,O,D,L,R,B,j="sizzle"+1*new Date,P=t.document,z=0,H=0,F=n(),G=n(),U=n(),V=function(t,e){return t===e&&(N=!0),0},Y=1<<31,W={}.hasOwnProperty,J=[],Z=J.pop,Q=J.push,$=J.push,X=J.slice,K=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",ot=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",rt=new RegExp(tt+"+","g"),it=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(ot),ut=new RegExp("^"+et+"$"),pt={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ht=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,_t=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,n){var o="0x"+e-65536;return o!==o||n?e:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)},vt=function(){x()};try{$.apply(J=X.call(P.childNodes),P.childNodes),J[P.childNodes.length].nodeType}catch(t){$={apply:J.length?function(t,e){Q.apply(t,X.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}y=e.support={},I=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},x=e.setDocument=function(t){var e,n,o=t?t.ownerDocument||t:P;return o!==A&&9===o.nodeType&&o.documentElement?(A=o,E=A.documentElement,O=!I(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",vt,!1):n.attachEvent&&n.attachEvent("onunload",vt)),y.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),y.getElementsByTagName=r(function(t){return t.appendChild(A.createComment("")),!t.getElementsByTagName("*").length}),y.getElementsByClassName=ft.test(A.getElementsByClassName),y.getById=r(function(t){return E.appendChild(t).id=j,!A.getElementsByName||!A.getElementsByName(j).length}),y.getById?(v.find.ID=function(t,e){if(void 0!==e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}},v.filter.ID=function(t){var e=t.replace(bt,yt);return function(t){return t.getAttribute("id")===e}}):(delete v.find.ID,v.filter.ID=function(t){var e=t.replace(bt,yt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),v.find.TAG=y.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):y.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,o=[],r=0,i=e.getElementsByTagName(t);if("*"===t){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},v.find.CLASS=y.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&O)return e.getElementsByClassName(t)},L=[],D=[],(y.qsa=ft.test(A.querySelectorAll))&&(r(function(t){E.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+tt+"*(?:value|"+q+")"),t.querySelectorAll("[id~="+j+"-]").length||D.push("~="),t.querySelectorAll(":checked").length||D.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||D.push(".#.+[+~]")}),r(function(t){var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(y.matchesSelector=ft.test(R=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r(function(t){y.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),L.push("!=",ot)}),D=D.length&&new RegExp(D.join("|")),L=L.length&&new RegExp(L.join("|")),e=ft.test(E.compareDocumentPosition),B=e||ft.test(E.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!y.sortDetached&&e.compareDocumentPosition(t)===n?t===A||t.ownerDocument===P&&B(P,t)?-1:e===A||e.ownerDocument===P&&B(P,e)?1:S?K(S,t)-K(S,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,o=0,r=t.parentNode,i=e.parentNode,a=[t],l=[e];if(!r||!i)return t===A?-1:e===A?1:r?-1:i?1:S?K(S,t)-K(S,e):0;if(r===i)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[o]===l[o];)o++;return o?s(a[o],l[o]):a[o]===P?-1:l[o]===P?1:0},A):A},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==A&&x(t),n=n.replace(lt,"='$1']"),y.matchesSelector&&O&&!U[n+" "]&&(!L||!L.test(n))&&(!D||!D.test(n)))try{var o=R.call(t,n);if(o||y.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(t){}return e(n,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&x(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&x(t);var n=v.attrHandle[e.toLowerCase()],o=n&&W.call(v.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==o?o:y.attributes||!O?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],o=0,r=0;if(N=!y.detectDuplicates,S=!y.sortStable&&t.slice(0),t.sort(V),N){for(;e=t[r++];)e===t[r]&&(o=n.push(r));for(;o--;)t.splice(n[o],1)}return S=null,t},w=e.getText=function(t){var e,n="",o=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=w(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[o++];)n+=w(e);return n},v=e.selectors={cacheLength:50,createPseudo:o,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=F[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&F(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,o){return function(r){var i=e.attr(r,t);return null==i?"!="===n:!n||(i+="","="===n?i===o:"!="===n?i!==o:"^="===n?o&&0===i.indexOf(o):"*="===n?o&&i.indexOf(o)>-1:"$="===n?o&&i.slice(-o.length)===o:"~="===n?(" "+i.replace(rt," ")+" ").indexOf(o)>-1:"|="===n&&(i===o||i.slice(0,o.length+1)===o+"-"))}},CHILD:function(t,e,n,o,r){var i="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===o&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,p,d,h,f,g=i!==s?"nextSibling":"previousSibling",m=e.parentNode,_=a&&e.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(m){if(i){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&b){for(d=m,p=d[j]||(d[j]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),c=u[t]||[],h=c[0]===z&&c[1],y=h&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(y=h=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[z,h,y];break}}else if(b&&(d=e,p=d[j]||(d[j]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),c=u[t]||[],h=c[0]===z&&c[1],y=h),!1===y)for(;(d=++h&&d&&d[g]||(y=h=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++y||(b&&(p=d[j]||(d[j]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),u[t]=[z,y]),d!==e)););return(y-=r)===o||y%o==0&&y/o>=0}}},PSEUDO:function(t,n){var r,i=v.pseudos[t]||v.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[j]?i(n):i.length>1?(r=[t,t,"",n],v.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,e){for(var o,r=i(t,n),s=r.length;s--;)o=K(t,r[s]),t[o]=!(e[o]=r[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:o(function(t){var e=[],n=[],r=M(t.replace(it,"$1"));return r[j]?o(function(t,e,n,o){for(var i,s=r(t,null,o,[]),a=t.length;a--;)(i=s[a])&&(t[a]=!(e[a]=i))}):function(t,o,i){return e[0]=t,r(e,null,i,n),e[0]=null,!n.pop()}}),has:o(function(t){return function(n){return e(t,n).length>0}}),contains:o(function(t){return t=t.replace(bt,yt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:o(function(t){return ut.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,yt).toLowerCase(),function(e){var n;do{if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===E},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!v.pseudos.empty(t)},header:function(t){return ht.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,n){return[n<0?n+e:n]}),even:a(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:a(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:a(function(t,e,n){for(var o=n<0?n+e:n;--o>=0;)t.push(o);return t}),gt:a(function(t,e,n){for(var o=n<0?n+e:n;++o<e;)t.push(o);return t})}},v.pseudos.nth=v.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})v.pseudos[b]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(b);return c.prototype=v.filters=v.pseudos,v.setFilters=new c,C=e.tokenize=function(t,n){var o,r,i,s,a,l,c,u=G[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=v.preFilter;a;){o&&!(r=st.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),o=!1,(r=at.exec(a))&&(o=r.shift(),i.push({value:o,type:r[0].replace(it," ")}),a=a.slice(o.length));for(s in v.filter)!(r=pt[s].exec(a))||c[s]&&!(r=c[s](r))||(o=r.shift(),i.push({value:o,type:s,matches:r}),a=a.slice(o.length));if(!o)break}return n?a.length:a?e.error(t):G(t,l).slice(0)},M=e.compile=function(t,e){var n,o=[],r=[],i=U[t+" "];if(!i){for(e||(e=C(t)),n=e.length;n--;)i=m(e[n]),i[j]?o.push(i):r.push(i);i=U(t,_(r,o)),i.selector=t}return i},T=e.select=function(t,e,n,o){var r,i,s,a,c,p="function"==typeof t&&t,d=!o&&C(t=p.selector||t);if(n=n||[],1===d.length){if(i=d[0]=d[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&y.getById&&9===e.nodeType&&O&&v.relative[i[1].type]){if(!(e=(v.find.ID(s.matches[0].replace(bt,yt),e)||[])[0]))return n;p&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(r=pt.needsContext.test(t)?0:i.length;r--&&(s=i[r],!v.relative[a=s.type]);)if((c=v.find[a])&&(o=c(s.matches[0].replace(bt,yt),mt.test(i[0].type)&&l(e.parentNode)||e))){if(i.splice(r,1),!(t=o.length&&u(i)))return $.apply(n,o),n;break}}return(p||M(t,d))(o,e,!O,n,!e||mt.test(t)&&l(e.parentNode)||e),n},y.sortStable=j.split("").sort(V).join("")===j,y.detectDuplicates=!!N,x(),y.sortDetached=r(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||i("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),y.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||i("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||i(q,function(t,e,n){var o;if(!n)return!0===t[e]?e.toLowerCase():(o=t.getAttributeNode(e))&&o.specified?o.value:null}),e}(n);lt.find=ht,lt.expr=ht.selectors,lt.expr[":"]=lt.expr.pseudos,lt.uniqueSort=lt.unique=ht.uniqueSort,lt.text=ht.getText,lt.isXMLDoc=ht.isXML,lt.contains=ht.contains;var ft=function(t,e,n){for(var o=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&lt(t).is(n))break;o.push(t)}return o},gt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},mt=lt.expr.match.needsContext,_t=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,bt=/^.[^:#\[\.,]*$/;lt.filter=function(t,e,n){var o=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?lt.find.matchesSelector(o,t)?[o]:[]:lt.find.matches(t,lt.grep(e,function(t){return 1===t.nodeType}))},lt.fn.extend({find:function(t){var e,n=this.length,o=[],r=this;if("string"!=typeof t)return this.pushStack(lt(t).filter(function(){for(e=0;e<n;e++)if(lt.contains(r[e],this))return!0}));for(e=0;e<n;e++)lt.find(t,r[e],o);return o=this.pushStack(n>1?lt.unique(o):o),o.selector=this.selector?this.selector+" "+t:t,o},filter:function(t){return this.pushStack(a(this,t||[],!1))},not:function(t){return this.pushStack(a(this,t||[],!0))},is:function(t){return!!a(this,"string"==typeof t&&mt.test(t)?lt(t):t||[],!1).length}});var yt,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(lt.fn.init=function(t,e,n){var o,r;if(!t)return this;if(n=n||yt,"string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:vt.exec(t))||!o[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof lt?e[0]:e,lt.merge(this,lt.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:q,!0)),_t.test(o[1])&&lt.isPlainObject(e))for(o in e)lt.isFunction(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return r=q.getElementById(o[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):lt.isFunction(t)?void 0!==n.ready?n.ready(t):t(lt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),lt.makeArray(t,this))}).prototype=lt.fn,yt=lt(q);var wt=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};lt.fn.extend({has:function(t){var e=lt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(lt.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,o=0,r=this.length,i=[],s=mt.test(t)||"string"!=typeof t?lt(t,e||this.context):0;o<r;o++)for(n=this[o];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&lt.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(i.length>1?lt.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?ot.call(lt(t),this[0]):ot.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(lt.uniqueSort(lt.merge(this.get(),lt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),lt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ft(t,"parentNode")},parentsUntil:function(t,e,n){return ft(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return ft(t,"nextSibling")},prevAll:function(t){return ft(t,"previousSibling")},nextUntil:function(t,e,n){return ft(t,"nextSibling",n)},prevUntil:function(t,e,n){return ft(t,"previousSibling",n)},siblings:function(t){return gt((t.parentNode||{}).firstChild,t)},children:function(t){return gt(t.firstChild)},contents:function(t){return t.contentDocument||lt.merge([],t.childNodes)}},function(t,e){lt.fn[t]=function(n,o){var r=lt.map(this,e,n);return"Until"!==t.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=lt.filter(o,r)),this.length>1&&(It[t]||lt.uniqueSort(r),wt.test(t)&&r.reverse()),this.pushStack(r)}});var Ct=/\S+/g;lt.Callbacks=function(t){t="string"==typeof t?c(t):lt.extend({},t);var e,n,o,r,i=[],s=[],a=-1,l=function(){for(r=t.once,o=e=!0;s.length;a=-1)for(n=s.shift();++a<i.length;)!1===i[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=i.length,n=!1);t.memory||(n=!1),e=!1,r&&(i=n?[]:"")},u={add:function(){return i&&(n&&!e&&(a=i.length-1,s.push(n)),function e(n){lt.each(n,function(n,o){lt.isFunction(o)?t.unique&&u.has(o)||i.push(o):o&&o.length&&"string"!==lt.type(o)&&e(o)})}(arguments),n&&!e&&l()),this},remove:function(){return lt.each(arguments,function(t,e){for(var n;(n=lt.inArray(e,i,n))>-1;)i.splice(n,1),n<=a&&a--}),this},has:function(t){return t?lt.inArray(t,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return r=s=[],i=n="",this},disabled:function(){return!i},lock:function(){return r=s=[],n||(i=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},lt.extend({Deferred:function(t){var e=[["resolve","done",lt.Callbacks("once memory"),"resolved"],["reject","fail",lt.Callbacks("once memory"),"rejected"],["notify","progress",lt.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return lt.Deferred(function(n){lt.each(e,function(e,i){var s=lt.isFunction(t[e])&&t[e];r[i[1]](function(){var t=s&&s.apply(this,arguments);t&&lt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===o?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?lt.extend(t,o):o}},r={};return o.pipe=o.then,lt.each(e,function(t,i){var s=i[2],a=i[3];o[i[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[i[0]]=function(){return r[i[0]+"With"](this===r?o:this,arguments),this},r[i[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,o,r=0,i=tt.call(arguments),s=i.length,a=1!==s||t&&lt.isFunction(t.promise)?s:0,l=1===a?t:lt.Deferred(),c=function(t,n,o){return function(r){n[t]=this,o[t]=arguments.length>1?tt.call(arguments):r,o===e?l.notifyWith(n,o):--a||l.resolveWith(n,o)}};if(s>1)for(e=new Array(s),n=new Array(s),o=new Array(s);r<s;r++)i[r]&&lt.isFunction(i[r].promise)?i[r].promise().progress(c(r,n,e)).done(c(r,o,i)).fail(l.reject):--a;return a||l.resolveWith(o,i),l.promise()}});var Mt;lt.fn.ready=function(t){return lt.ready.promise().done(t),this},lt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?lt.readyWait++:lt.ready(!0)},ready:function(t){(!0===t?--lt.readyWait:lt.isReady)||(lt.isReady=!0,!0!==t&&--lt.readyWait>0||(Mt.resolveWith(q,[lt]),lt.fn.triggerHandler&&(lt(q).triggerHandler("ready"),lt(q).off("ready"))))}}),lt.ready.promise=function(t){return Mt||(Mt=lt.Deferred(),"complete"===q.readyState||"loading"!==q.readyState&&!q.documentElement.doScroll?n.setTimeout(lt.ready):(q.addEventListener("DOMContentLoaded",u),n.addEventListener("load",u))),Mt.promise(t)},lt.ready.promise();var Tt=function(t,e,n,o,r,i,s){var a=0,l=t.length,c=null==n;if("object"===lt.type(n)){r=!0;for(a in n)Tt(t,e,a,n[a],!0,i,s)}else if(void 0!==o&&(r=!0,lt.isFunction(o)||(s=!0),c&&(s?(e.call(t,o),e=null):(c=e,e=function(t,e,n){return c.call(lt(t),n)})),e))for(;a<l;a++)e(t[a],n,s?o:o.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):i},kt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};p.uid=1,p.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!kt(t))return{};var e=t[this.expando];return e||(e={},kt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var o,r=this.cache(t);if("string"==typeof e)r[e]=n;else for(o in e)r[o]=e[o];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var o;return void 0===e||e&&"string"==typeof e&&void 0===n?(o=this.get(t,e),void 0!==o?o:this.get(t,lt.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,o,r,i=t[this.expando];if(void 0!==i){if(void 0===e)this.register(t);else{lt.isArray(e)?o=e.concat(e.map(lt.camelCase)):(r=lt.camelCase(e),e in i?o=[e,r]:(o=r,o=o in i?[o]:o.match(Ct)||[])),n=o.length;for(;n--;)delete i[o[n]]}(void 0===e||lt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!lt.isEmptyObject(e)}};var St=new p,Nt=new p,xt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,At=/[A-Z]/g;lt.extend({hasData:function(t){return Nt.hasData(t)||St.hasData(t)},data:function(t,e,n){return Nt.access(t,e,n)},removeData:function(t,e){Nt.remove(t,e)},_data:function(t,e,n){return St.access(t,e,n)},_removeData:function(t,e){St.remove(t,e)}}),lt.fn.extend({data:function(t,e){var n,o,r,i=this[0],s=i&&i.attributes;if(void 0===t){if(this.length&&(r=Nt.get(i),1===i.nodeType&&!St.get(i,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(o=s[n].name,0===o.indexOf("data-")&&(o=lt.camelCase(o.slice(5)),d(i,o,r[o])));St.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Nt.set(this,t)}):Tt(this,function(e){var n,o;if(i&&void 0===e){if(void 0!==(n=Nt.get(i,t)||Nt.get(i,t.replace(At,"-$&").toLowerCase())))return n;if(o=lt.camelCase(t),void 0!==(n=Nt.get(i,o)))return n;if(void 0!==(n=d(i,o,void 0)))return n}else o=lt.camelCase(t),this.each(function(){var n=Nt.get(this,o);Nt.set(this,o,e),t.indexOf("-")>-1&&void 0!==n&&Nt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Nt.remove(this,t)})}}),lt.extend({queue:function(t,e,n){var o;if(t)return e=(e||"fx")+"queue",o=St.get(t,e),n&&(!o||lt.isArray(n)?o=St.access(t,e,lt.makeArray(n)):o.push(n)),o||[]},dequeue:function(t,e){e=e||"fx";var n=lt.queue(t,e),o=n.length,r=n.shift(),i=lt._queueHooks(t,e),s=function(){lt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===e&&n.unshift("inprogress"),delete i.stop,r.call(t,s,i)),!o&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return St.get(t,n)||St.access(t,n,{empty:lt.Callbacks("once memory").add(function(){St.remove(t,[e+"queue",n])})})}}),lt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?lt.queue(this[0],t):void 0===e?this:this.each(function(){var n=lt.queue(this,t,e);lt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&lt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){lt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,o=1,r=lt.Deferred(),i=this,s=this.length,a=function(){--o||r.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=St.get(i[s],t+"queueHooks"))&&n.empty&&(o++,n.empty.add(a));return a(),r.promise(e)}});var Et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ot=new RegExp("^(?:([+-])=|)("+Et+")([a-z%]*)$","i"),Dt=["Top","Right","Bottom","Left"],Lt=function(t,e){return t=e||t,"none"===lt.css(t,"display")||!lt.contains(t.ownerDocument,t)},Rt=/^(?:checkbox|radio)$/i,Bt=/<([\w:-]+)/,jt=/^$|\/(?:java|ecma)script/i,Pt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pt.optgroup=Pt.option,Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td;var zt=/<|&#?\w+;/;!function(){var t=q.createDocumentFragment(),e=t.appendChild(q.createElement("div")),n=q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),at.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",at.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ht=/^key/,Ft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Gt=/^([^.]*)(?:\.(.+)|)/;lt.event={global:{},add:function(t,e,n,o,r){var i,s,a,l,c,u,p,d,h,f,g,m=St.get(t);if(m)for(n.handler&&(i=n,n=i.handler,r=i.selector),n.guid||(n.guid=lt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==lt&&lt.event.triggered!==e.type?lt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Ct)||[""],c=e.length;c--;)a=Gt.exec(e[c])||[],h=g=a[1],f=(a[2]||"").split(".").sort(),h&&(p=lt.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,p=lt.event.special[h]||{},u=lt.extend({type:h,origType:g,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&lt.expr.match.needsContext.test(r),namespace:f.join(".")},i),(d=l[h])||(d=l[h]=[],d.delegateCount=0,p.setup&&!1!==p.setup.call(t,o,f,s)||t.addEventListener&&t.addEventListener(h,s)),p.add&&(p.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),lt.event.global[h]=!0)},remove:function(t,e,n,o,r){var i,s,a,l,c,u,p,d,h,f,g,m=St.hasData(t)&&St.get(t);if(m&&(l=m.events)){for(e=(e||"").match(Ct)||[""],c=e.length;c--;)if(a=Gt.exec(e[c])||[],h=g=a[1],f=(a[2]||"").split(".").sort(),h){for(p=lt.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,d=l[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=d.length;i--;)u=d[i],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||o&&o!==u.selector&&("**"!==o||!u.selector)||(d.splice(i,1),u.selector&&d.delegateCount--,p.remove&&p.remove.call(t,u));s&&!d.length&&(p.teardown&&!1!==p.teardown.call(t,f,m.handle)||lt.removeEvent(t,h,m.handle),delete l[h])}else for(h in l)lt.event.remove(t,h+e[c],n,o,!0);lt.isEmptyObject(l)&&St.remove(t,"handle events")}},dispatch:function(t){t=lt.event.fix(t);var e,n,o,r,i,s=[],a=tt.call(arguments),l=(St.get(this,"events")||{})[t.type]||[],c=lt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=lt.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(i.namespace)||(t.handleObj=i,t.data=i.data,void 0!==(o=((lt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(t.result=o)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,o,r,i,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],n=0;n<a;n++)i=e[n],r=i.selector+" ",void 0===o[r]&&(o[r]=i.needsContext?lt(r,this).index(l)>-1:lt.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,o,r,i=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||q,o=n.documentElement,r=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),t.which||void 0===i||(t.which=1&i?1:2&i?3:4&i?2:0),t}},fix:function(t){if(t[lt.expando])return t;var e,n,o,r=t.type,i=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ft.test(r)?this.mouseHooks:Ht.test(r)?this.keyHooks:{}),o=s.props?this.props.concat(s.props):this.props,t=new lt.Event(i),e=o.length;e--;)n=o[e],t[n]=i[n];return t.target||(t.target=q),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,i):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==y()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===y()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&lt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return lt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},lt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},lt.Event=function(t,e){if(!(this instanceof lt.Event))return new lt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?_:b):this.type=t,e&&lt.extend(this,e),this.timeStamp=t&&t.timeStamp||lt.now(),this[lt.expando]=!0},lt.Event.prototype={constructor:lt.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=_,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=_,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=_,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},lt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){lt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,o=this,r=t.relatedTarget,i=t.handleObj;return r&&(r===o||lt.contains(o,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),lt.fn.extend({on:function(t,e,n,o){return v(this,t,e,n,o)},one:function(t,e,n,o){return v(this,t,e,n,o,1)},off:function(t,e,n){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,lt(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=b),this.each(function(){lt.event.remove(this,t,n,e)})}});var Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Vt=/<script|<style|<link/i,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^true\/(.*)/,Jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;lt.extend({htmlPrefilter:function(t){return t.replace(Ut,"<$1></$2>")},clone:function(t,e,n){var o,r,i,s,a=t.cloneNode(!0),l=lt.contains(t.ownerDocument,t);if(!(at.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||lt.isXMLDoc(t)))for(s=f(a),i=f(t),o=0,r=i.length;o<r;o++)T(i[o],s[o]);if(e)if(n)for(i=i||f(t),s=s||f(a),o=0,r=i.length;o<r;o++)M(i[o],s[o]);else M(t,a);return s=f(a,"script"),s.length>0&&g(s,!l&&f(t,"script")),a},cleanData:function(t){for(var e,n,o,r=lt.event.special,i=0;void 0!==(n=t[i]);i++)if(kt(n)){if(e=n[St.expando]){if(e.events)for(o in e.events)r[o]?lt.event.remove(n,o):lt.removeEvent(n,o,e.handle);n[St.expando]=void 0}n[Nt.expando]&&(n[Nt.expando]=void 0)}}}),lt.fn.extend({domManip:k,detach:function(t){return S(this,t,!0)},remove:function(t){return S(this,t)},text:function(t){return Tt(this,function(t){return void 0===t?lt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return k(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,t).appendChild(t)})},prepend:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(lt.cleanData(f(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return lt.clone(this,t,e)})},html:function(t){return Tt(this,function(t){var e=this[0]||{},n=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Vt.test(t)&&!Pt[(Bt.exec(t)||["",""])[1].toLowerCase()]){t=lt.htmlPrefilter(t);try{for(;n<o;n++)e=this[n]||{},1===e.nodeType&&(lt.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return k(this,arguments,function(e){var n=this.parentNode;lt.inArray(this,t)<0&&(lt.cleanData(f(this)),n&&n.replaceChild(e,this))},t)}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){lt.fn[t]=function(t){for(var n,o=[],r=lt(t),i=r.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),lt(r[s])[e](n),nt.apply(o,n.get());return this.pushStack(o)}});var Zt,Qt={HTML:"block",BODY:"block"},$t=/^margin/,Xt=new RegExp("^("+Et+")(?!px)[a-z%]+$","i"),Kt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},qt=function(t,e,n,o){var r,i,s={};for(i in e)s[i]=t.style[i],t.style[i]=e[i];r=n.apply(t,o||[]);for(i in e)t.style[i]=s[i];return r},te=q.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",te.appendChild(s);var t=n.getComputedStyle(a);e="1%"!==t.top,i="2px"===t.marginLeft,o="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,te.removeChild(s)}var e,o,r,i,s=q.createElement("div"),a=q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",at.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),lt.extend(at,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==o&&t(),o},pixelMarginRight:function(){return null==o&&t(),r},reliableMarginLeft:function(){return null==o&&t(),i},reliableMarginRight:function(){var t,e=a.appendChild(q.createElement("div"));return e.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",a.style.width="1px",te.appendChild(s),t=!parseFloat(n.getComputedStyle(e).marginRight),te.removeChild(s),a.removeChild(e),t}}))}();var ee=/^(none|table(?!-c[ea]).+)/,ne={position:"absolute",visibility:"hidden",display:"block"},oe={letterSpacing:"0",fontWeight:"400"},re=["Webkit","O","Moz","ms"],ie=q.createElement("div").style;lt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=A(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,i,s,a=lt.camelCase(e),l=t.style;if(e=lt.cssProps[a]||(lt.cssProps[a]=O(a)||a),s=lt.cssHooks[e]||lt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,o))?r:l[e];i=typeof n,"string"===i&&(r=Ot.exec(n))&&r[1]&&(n=h(t,e,r),i="number"),null!=n&&n===n&&("number"===i&&(n+=r&&r[3]||(lt.cssNumber[a]?"":"px")),at.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,o))||(l[e]=n))}},css:function(t,e,n,o){var r,i,s,a=lt.camelCase(e);return e=lt.cssProps[a]||(lt.cssProps[a]=O(a)||a),s=lt.cssHooks[e]||lt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=A(t,e,o)),"normal"===r&&e in oe&&(r=oe[e]),""===n||n?(i=parseFloat(r),!0===n||isFinite(i)?i||0:r):r}}),lt.each(["height","width"],function(t,e){lt.cssHooks[e]={get:function(t,n,o){if(n)return ee.test(lt.css(t,"display"))&&0===t.offsetWidth?qt(t,ne,function(){return R(t,e,o)}):R(t,e,o)},set:function(t,n,o){var r,i=o&&Kt(t),s=o&&L(t,e,o,"border-box"===lt.css(t,"boxSizing",!1,i),i);return s&&(r=Ot.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=lt.css(t,e)),D(t,n,s)}}}),lt.cssHooks.marginLeft=E(at.reliableMarginLeft,function(t,e){if(e)return(parseFloat(A(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),lt.cssHooks.marginRight=E(at.reliableMarginRight,function(t,e){if(e)return qt(t,{display:"inline-block"},A,[t,"marginRight"])}),lt.each({margin:"",padding:"",border:"Width"},function(t,e){lt.cssHooks[t+e]={expand:function(n){for(var o=0,r={},i="string"==typeof n?n.split(" "):[n];o<4;o++)r[t+Dt[o]+e]=i[o]||i[o-2]||i[0];return r}},$t.test(t)||(lt.cssHooks[t+e].set=D)}),lt.fn.extend({css:function(t,e){return Tt(this,function(t,e,n){var o,r,i={},s=0;if(lt.isArray(e)){for(o=Kt(t),r=e.length;s<r;s++)i[e[s]]=lt.css(t,e[s],!1,o);return i}return void 0!==n?lt.style(t,e,n):lt.css(t,e)},t,e,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Lt(this)?lt(this).show():lt(this).hide()})}}),lt.Tween=j,j.prototype={constructor:j,init:function(t,e,n,o,r,i){this.elem=t,this.prop=n,this.easing=r||lt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=i||(lt.cssNumber[n]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,n=j.propHooks[this.prop];return this.options.duration?this.pos=e=lt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=lt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){lt.fx.step[t.prop]?lt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[lt.cssProps[t.prop]]&&!lt.cssHooks[t.prop]?t.elem[t.prop]=t.now:lt.style(t.elem,t.prop,t.now+t.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},lt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},lt.fx=j.prototype.init,lt.fx.step={};var se,ae,le=/^(?:toggle|show|hide)$/,ce=/queueHooks$/;lt.Animation=lt.extend(U,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return h(n.elem,t,Ot.exec(e),n),n}]},tweener:function(t,e){lt.isFunction(t)?(e=t,t=["*"]):t=t.match(Ct);for(var n,o=0,r=t.length;o<r;o++)n=t[o],U.tweeners[n]=U.tweeners[n]||[],U.tweeners[n].unshift(e)},prefilters:[F],prefilter:function(t,e){e?U.prefilters.unshift(t):U.prefilters.push(t)}}),lt.speed=function(t,e,n){var o=t&&"object"==typeof t?lt.extend({},t):{complete:n||!n&&e||lt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!lt.isFunction(e)&&e};return o.duration=lt.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in lt.fx.speeds?lt.fx.speeds[o.duration]:lt.fx.speeds._default,null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){lt.isFunction(o.old)&&o.old.call(this),o.queue&&lt.dequeue(this,o.queue)},o},lt.fn.extend({fadeTo:function(t,e,n,o){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:e},t,n,o)},animate:function(t,e,n,o){var r=lt.isEmptyObject(t),i=lt.speed(e,n,o),s=function(){var e=U(this,lt.extend({},t),i);(r||St.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(t,e,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",i=lt.timers,s=St.get(this);if(r)s[r]&&s[r].stop&&o(s[r]);else for(r in s)s[r]&&s[r].stop&&ce.test(r)&&o(s[r]);for(r=i.length;r--;)i[r].elem!==this||null!=t&&i[r].queue!==t||(i[r].anim.stop(n),e=!1,i.splice(r,1));!e&&n||lt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=St.get(this),o=n[t+"queue"],r=n[t+"queueHooks"],i=lt.timers,s=o?o.length:0;for(n.finish=!0,lt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<s;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete n.finish})}}),lt.each(["toggle","show","hide"],function(t,e){var n=lt.fn[e];lt.fn[e]=function(t,o,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(z(e,!0),t,o,r)}}),lt.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){lt.fn[t]=function(t,n,o){return this.animate(e,t,n,o)}}),lt.timers=[],lt.fx.tick=function(){var t,e=0,n=lt.timers;for(se=lt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||lt.fx.stop(),se=void 0},lt.fx.timer=function(t){lt.timers.push(t),t()?lt.fx.start():lt.timers.pop()},lt.fx.interval=13,lt.fx.start=function(){ae||(ae=n.setInterval(lt.fx.tick,lt.fx.interval))},lt.fx.stop=function(){n.clearInterval(ae),ae=null},lt.fx.speeds={slow:600,fast:200,_default:400},lt.fn.delay=function(t,e){return t=lt.fx?lt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,o){var r=n.setTimeout(e,t);o.stop=function(){n.clearTimeout(r)}})},function(){var t=q.createElement("input"),e=q.createElement("select"),n=e.appendChild(q.createElement("option"));t.type="checkbox",at.checkOn=""!==t.value,at.optSelected=n.selected,e.disabled=!0,at.optDisabled=!n.disabled,t=q.createElement("input"),t.value="t",t.type="radio",at.radioValue="t"===t.value}();var ue,pe=lt.expr.attrHandle;lt.fn.extend({attr:function(t,e){return Tt(this,lt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){lt.removeAttr(this,t)})}}),lt.extend({attr:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?lt.prop(t,e,n):(1===i&&lt.isXMLDoc(t)||(e=e.toLowerCase(),r=lt.attrHooks[e]||(lt.expr.match.bool.test(e)?ue:void 0)),void 0!==n?null===n?void lt.removeAttr(t,e):r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(o=r.get(t,e))?o:(o=lt.find.attr(t,e),null==o?void 0:o))},attrHooks:{type:{set:function(t,e){if(!at.radioValue&&"radio"===e&&lt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,o,r=0,i=e&&e.match(Ct);if(i&&1===t.nodeType)for(;n=i[r++];)o=lt.propFix[n]||n,lt.expr.match.bool.test(n)&&(t[o]=!1),t.removeAttribute(n)}}),ue={set:function(t,e,n){return!1===e?lt.removeAttr(t,n):t.setAttribute(n,n),n}},lt.each(lt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=pe[e]||lt.find.attr;pe[e]=function(t,e,o){var r,i;return o||(i=pe[e],pe[e]=r,r=null!=n(t,e,o)?e.toLowerCase():null,pe[e]=i),r}});var de=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;lt.fn.extend({prop:function(t,e){return Tt(this,lt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[lt.propFix[t]||t]})}}),lt.extend({prop:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&lt.isXMLDoc(t)||(e=lt.propFix[e]||e,r=lt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:t[e]=n:r&&"get"in r&&null!==(o=r.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=lt.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),at.optSelected||(lt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),lt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){lt.propFix[this.toLowerCase()]=this});var fe=/[\t\r\n\f]/g;lt.fn.extend({addClass:function(t){var e,n,o,r,i,s,a,l=0;if(lt.isFunction(t))return this.each(function(e){lt(this).addClass(t.call(this,e,V(this)))});if("string"==typeof t&&t)for(e=t.match(Ct)||[];n=this[l++];)if(r=V(n),o=1===n.nodeType&&(" "+r+" ").replace(fe," ")){for(s=0;i=e[s++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");a=lt.trim(o),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,o,r,i,s,a,l=0;if(lt.isFunction(t))return this.each(function(e){lt(this).removeClass(t.call(this,e,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Ct)||[];n=this[l++];)if(r=V(n),o=1===n.nodeType&&(" "+r+" ").replace(fe," ")){for(s=0;i=e[s++];)for(;o.indexOf(" "+i+" ")>-1;)o=o.replace(" "+i+" "," ");a=lt.trim(o),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):lt.isFunction(t)?this.each(function(n){lt(this).toggleClass(t.call(this,n,V(this),e),e)}):this.each(function(){var e,o,r,i;if("string"===n)for(o=0,r=lt(this),i=t.match(Ct)||[];e=i[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=V(this),e&&St.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":St.get(this,"__className__")||""))})},hasClass:function(t){var e,n,o=0;for(e=" "+t+" ";n=this[o++];)if(1===n.nodeType&&(" "+V(n)+" ").replace(fe," ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g,me=/[\x20\t\r\n\f]+/g;lt.fn.extend({val:function(t){var e,n,o,r=this[0];return arguments.length?(o=lt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=o?t.call(this,n,lt(this).val()):t,null==r?r="":"number"==typeof r?r+="":lt.isArray(r)&&(r=lt.map(r,function(t){return null==t?"":t+""})),(e=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=lt.valHooks[r.type]||lt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ge,""):null==n?"":n):void 0}}),lt.extend({valHooks:{option:{get:function(t){var e=lt.find.attr(t,"value");return null!=e?e:lt.trim(lt.text(t)).replace(me," ")}},select:{get:function(t){for(var e,n,o=t.options,r=t.selectedIndex,i="select-one"===t.type||r<0,s=i?null:[],a=i?r+1:o.length,l=r<0?a:i?r:0;l<a;l++)if(n=o[l],(n.selected||l===r)&&(at.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!lt.nodeName(n.parentNode,"optgroup"))){if(e=lt(n).val(),i)return e;s.push(e)}return s},set:function(t,e){for(var n,o,r=t.options,i=lt.makeArray(e),s=r.length;s--;)o=r[s],(o.selected=lt.inArray(lt.valHooks.option.get(o),i)>-1)&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),lt.each(["radio","checkbox"],function(){lt.valHooks[this]={set:function(t,e){if(lt.isArray(e))return t.checked=lt.inArray(lt(t).val(),e)>-1}},at.checkOn||(lt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var _e=/^(?:focusinfocus|focusoutblur)$/;lt.extend(lt.event,{trigger:function(t,e,o,r){var i,s,a,l,c,u,p,d=[o||q],h=st.call(t,"type")?t.type:t,f=st.call(t,"namespace")?t.namespace.split("."):[];if(s=a=o=o||q,3!==o.nodeType&&8!==o.nodeType&&!_e.test(h+lt.event.triggered)&&(h.indexOf(".")>-1&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[lt.expando]?t:new lt.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:lt.makeArray(e,[t]),p=lt.event.special[h]||{},r||!p.trigger||!1!==p.trigger.apply(o,e))){if(!r&&!p.noBubble&&!lt.isWindow(o)){for(l=p.delegateType||h,_e.test(l+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(o.ownerDocument||q)&&d.push(a.defaultView||a.parentWindow||n)}for(i=0;(s=d[i++])&&!t.isPropagationStopped();)t.type=i>1?l:p.bindType||h,u=(St.get(s,"events")||{})[t.type]&&St.get(s,"handle"),u&&u.apply(s,e),(u=c&&s[c])&&u.apply&&kt(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=h,r||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(d.pop(),e)||!kt(o)||c&&lt.isFunction(o[h])&&!lt.isWindow(o)&&(a=o[c],a&&(o[c]=null),lt.event.triggered=h,o[h](),lt.event.triggered=void 0,a&&(o[c]=a)),t.result}},simulate:function(t,e,n){var o=lt.extend(new lt.Event,n,{type:t,isSimulated:!0});lt.event.trigger(o,null,e)}}),lt.fn.extend({trigger:function(t,e){return this.each(function(){lt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return lt.event.trigger(t,e,n,!0)}}),lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){lt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),lt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),at.focusin="onfocusin"in n,at.focusin||lt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){lt.event.simulate(e,t.target,lt.event.fix(t))};lt.event.special[e]={setup:function(){var o=this.ownerDocument||this,r=St.access(o,e);r||o.addEventListener(t,n,!0),St.access(o,e,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this,r=St.access(o,e)-1;r?St.access(o,e,r):(o.removeEventListener(t,n,!0),St.remove(o,e))}}});var be=n.location,ye=lt.now(),ve=/\?/;lt.parseJSON=function(t){return JSON.parse(t+"")},lt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||lt.error("Invalid XML: "+t),e};var we=/#.*$/,Ie=/([?&])_=[^&]*/,Ce=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Te=/^(?:GET|HEAD)$/,ke=/^\/\//,Se={},Ne={},xe="*/".concat("*"),Ae=q.createElement("a");Ae.href=be.href,lt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:Me.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":lt.parseJSON,"text xml":lt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?J(J(t,lt.ajaxSettings),e):J(lt.ajaxSettings,t)},ajaxPrefilter:Y(Se),ajaxTransport:Y(Ne),ajax:function(t,e){function o(t,e,o,a){var c,p,b,y,w,C=e;2!==v&&(v=2,l&&n.clearTimeout(l),r=void 0,s=a||"",I.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(y=Z(d,I,o)),y=Q(d,y,I,c),c?(d.ifModified&&(w=I.getResponseHeader("Last-Modified"),w&&(lt.lastModified[i]=w),(w=I.getResponseHeader("etag"))&&(lt.etag[i]=w)),204===t||"HEAD"===d.type?C="nocontent":304===t?C="notmodified":(C=y.state,p=y.data,b=y.error,c=!b)):(b=C,!t&&C||(C="error",t<0&&(t=0))),I.status=t,I.statusText=(e||C)+"",c?g.resolveWith(h,[p,C,I]):g.rejectWith(h,[I,C,b]),I.statusCode(_),_=void 0,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[I,d,c?p:b]),m.fireWith(h,[I,C]),u&&(f.trigger("ajaxComplete",[I,d]),--lt.active||lt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,s,a,l,c,u,p,d=lt.ajaxSetup({},e),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?lt(h):lt.event,g=lt.Deferred(),m=lt.Callbacks("once memory"),_=d.statusCode||{},b={},y={},v=0,w="canceled",I={readyState:0,getResponseHeader:function(t){var e;if(2===v){if(!a)for(a={};e=Ce.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return v||(t=y[n]=y[n]||t,b[t]=e),this},overrideMimeType:function(t){return v||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(v<2)for(e in t)_[e]=[_[e],t[e]];else I.always(t[I.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),o(0,e),this}};if(g.promise(I).complete=m.add,I.success=I.done,I.error=I.fail,d.url=((t||d.url||be.href)+"").replace(we,"").replace(ke,be.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=lt.trim(d.dataType||"*").toLowerCase().match(Ct)||[""],null==d.crossDomain){c=q.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Ae.protocol+"//"+Ae.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=lt.param(d.data,d.traditional)),W(Se,d,e,I),2===v)return I;u=lt.event&&d.global,u&&0==lt.active++&&lt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Te.test(d.type),i=d.url,d.hasContent||(d.data&&(i=d.url+=(ve.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ie.test(i)?i.replace(Ie,"$1_="+ye++):i+(ve.test(i)?"&":"?")+"_="+ye++)),d.ifModified&&(lt.lastModified[i]&&I.setRequestHeader("If-Modified-Since",lt.lastModified[i]),lt.etag[i]&&I.setRequestHeader("If-None-Match",lt.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&I.setRequestHeader("Content-Type",d.contentType),I.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+xe+"; q=0.01":""):d.accepts["*"]);for(p in d.headers)I.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,I,d)||2===v))return I.abort();w="abort";for(p in{success:1,error:1,complete:1})I[p](d[p]);if(r=W(Ne,d,e,I)){if(I.readyState=1,u&&f.trigger("ajaxSend",[I,d]),2===v)return I;d.async&&d.timeout>0&&(l=n.setTimeout(function(){I.abort("timeout")},d.timeout));try{v=1,r.send(b,o)}catch(t){if(!(v<2))throw t;o(-1,t)}}else o(-1,"No Transport");return I},getJSON:function(t,e,n){return lt.get(t,e,n,"json")},getScript:function(t,e){return lt.get(t,void 0,e,"script")}}),lt.each(["get","post"],function(t,e){lt[e]=function(t,n,o,r){return lt.isFunction(n)&&(r=r||o,o=n,n=void 0),lt.ajax(lt.extend({url:t,type:e,dataType:r,data:n,success:o},lt.isPlainObject(t)&&t))}}),lt._evalUrl=function(t){return lt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},lt.fn.extend({wrapAll:function(t){var e;return lt.isFunction(t)?this.each(function(e){lt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=lt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return lt.isFunction(t)?this.each(function(e){lt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=lt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=lt.isFunction(t);return this.each(function(n){lt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){lt.nodeName(this,"body")||lt(this).replaceWith(this.childNodes)}).end()}}),lt.expr.filters.hidden=function(t){return!lt.expr.filters.visible(t)},lt.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ee=/%20/g,Oe=/\[\]$/,De=/\r?\n/g,Le=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;lt.param=function(t,e){var n,o=[],r=function(t,e){e=lt.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=lt.ajaxSettings&&lt.ajaxSettings.traditional),lt.isArray(t)||t.jquery&&!lt.isPlainObject(t))lt.each(t,function(){r(this.name,this.value)});else for(n in t)$(n,t[n],e,r);return o.join("&").replace(Ee,"+")},lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=lt.prop(this,"elements");return t?lt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!lt(this).is(":disabled")&&Re.test(this.nodeName)&&!Le.test(t)&&(this.checked||!Rt.test(t))}).map(function(t,e){var n=lt(this).val();return null==n?null:lt.isArray(n)?lt.map(n,function(t){return{name:e.name,value:t.replace(De,"\r\n")}}):{name:e.name,value:n.replace(De,"\r\n")}}).get()}}),lt.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Be={0:200,1223:204},je=lt.ajaxSettings.xhr();at.cors=!!je&&"withCredentials"in je,at.ajax=je=!!je,lt.ajaxTransport(function(t){var e,o;if(at.cors||je&&!t.crossDomain)return{send:function(r,i){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=o=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(Be[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),o=a.onerror=e("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){e&&o()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),lt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return lt.globalEval(t),t}}}),lt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),lt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(o,r){e=lt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Pe=[],ze=/(=)\?(?=&|$)|\?\?/;lt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||lt.expando+"_"+ye++;return this[t]=!0,t}}),lt.ajaxPrefilter("json jsonp",function(t,e,o){var r,i,s,a=!1!==t.jsonp&&(ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=lt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ze,"$1"+r):!1!==t.jsonp&&(t.url+=(ve.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||lt.error(r+" was not called"),s[0]},t.dataTypes[0]="json",i=n[r],n[r]=function(){s=arguments},o.always(function(){void 0===i?lt(n).removeProp(r):n[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,Pe.push(r)),s&&lt.isFunction(i)&&i(s[0]),s=i=void 0}),"script"}),lt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||q;var o=_t.exec(t),r=!n&&[];return o?[e.createElement(o[1])]:(o=m([t],e,r),r&&r.length&&lt(r).remove(),lt.merge([],o.childNodes))};var He=lt.fn.load;lt.fn.load=function(t,e,n){if("string"!=typeof t&&He)return He.apply(this,arguments);var o,r,i,s=this,a=t.indexOf(" ");return a>-1&&(o=lt.trim(t.slice(a)),t=t.slice(0,a)),lt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&lt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){i=arguments,s.html(o?lt("<div>").append(lt.parseHTML(t)).find(o):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,i||[t.responseText,e,t])})}),this},lt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){lt.fn[e]=function(t){return this.on(e,t)}}),lt.expr.filters.animated=function(t){return lt.grep(lt.timers,function(e){return t===e.elem}).length},lt.offset={setOffset:function(t,e,n){var o,r,i,s,a,l,c,u=lt.css(t,"position"),p=lt(t),d={};"static"===u&&(t.style.position="relative"),a=p.offset(),i=lt.css(t,"top"),l=lt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(i+l).indexOf("auto")>-1,c?(o=p.position(),s=o.top,r=o.left):(s=parseFloat(i)||0,r=parseFloat(l)||0),lt.isFunction(e)&&(e=e.call(t,n,lt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):p.css(d)}},lt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){lt.offset.setOffset(this,t,e)});var e,n,o=this[0],r={top:0,left:0},i=o&&o.ownerDocument;return i?(e=i.documentElement,lt.contains(e,o)?(r=o.getBoundingClientRect(),n=X(i),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],o={top:0,left:0};return"fixed"===lt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),lt.nodeName(t[0],"html")||(o=t.offset()),o.top+=lt.css(t[0],"borderTopWidth",!0),o.left+=lt.css(t[0],"borderLeftWidth",!0)),{top:e.top-o.top-lt.css(n,"marginTop",!0),left:e.left-o.left-lt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===lt.css(t,"position");)t=t.offsetParent;return t||te})}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;lt.fn[t]=function(o){return Tt(this,function(t,o,r){var i=X(t);if(void 0===r)return i?i[e]:t[o];i?i.scrollTo(n?i.pageXOffset:r,n?r:i.pageYOffset):t[o]=r},t,o,arguments.length)}}),lt.each(["top","left"],function(t,e){lt.cssHooks[e]=E(at.pixelPosition,function(t,n){if(n)return n=A(t,e),Xt.test(n)?lt(t).position()[e]+"px":n})}),lt.each({Height:"height",Width:"width"},function(t,e){lt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,o){lt.fn[o]=function(o,r){var i=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===r?"margin":"border");return Tt(this,function(e,n,o){var r;return lt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?lt.css(e,n,s):lt.style(e,n,o,s)},e,i?o:void 0,i,null)}})}),lt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,o){return this.on(e,t,n,o)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),lt.fn.andSelf=lt.fn.addBack,o=[],void 0!==(r=function(){return lt}.apply(e,o))&&(t.exports=r);var Fe=n.jQuery,Ge=n.$;return lt.noConflict=function(t){return n.$===lt&&(n.$=Ge),t&&n.jQuery===lt&&(n.jQuery=Fe),lt},i||(n.jQuery=n.$=lt),lt})},function(t,e,n){var o,r;o=[n,e,n(0),n(2),n(22),n(1)],void 0!==(r=function(t,e,n,o,r,i){"use strict";var s={align:{type:"Enum",possible:{left:!0,right:!0,center:!0,justify:!0},default:"left"},"line-height":{type:"Number",default:1.75},indent:{type:"Number",default:0},"text-indent":{type:"Number",default:0},width:{type:"Number",default:null},float:{type:"Enum",possible:{none:!0,left:!0,right:!0},default:"none"},height:{type:"Number",default:1},color:{type:"String",default:"#999999"}},a={},l={},c={};return a[o.HR]={width:{type:"Number",default:100}},l[o.PARAGRAPH]=["align","indent","text-indent","line-height"],l[o.LIST_ITEM]=["align","indent","text-indent","line-height"],l[o.HEADING]=["align","indent","text-indent","line-height"],l[o.CATALOGUE]=["align","indent","text-indent","line-height"],l[o.TODO]=["align","indent","text-indent","line-height"],l[o.IMAGE]=["align","width","float","height"],l[o.ATTACHMENT]=["align","float"],l[o.HR]=["align","width","height","color"],l[o.MACRO]=["align"],n.each(o.getAllBlockTypes(),function(t){l[t]||i.warn("no block style config for block["+t+"]")}),n.each(o.getAllBlockTypes(),function(t){var e={},o=l[t]||[],r=a[t];n.each(o,function(t){r&&r[t]?e[t]=r[t]:s[t]?e[t]=s[t]:i.error("no config for style named ["+t+"]")}),c[t]=e}),r(c)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(34),n(6),n(92),n(11),n(1),n(93),n(5),n(57),n(163),n(54),n(4),n(123),n(2),n(28),n(87),n(23),n(19),n(7),n(3),n(18),n(35),n(50),n(31)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g,m,_,b,y,v,w,I,C,M,T,k){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createBlank=function(t,n){var o=w.createBlank(t);return n||(n=new e({})),n.append(o),n},e.fromHtml=function(t,n,o,r){void 0===r&&(r={});var i=c.parseHtml(t),s=r.isAsync||!1,a=r.progressCallBack||function(){};return n=n||new e({}),this._parseBlocksInBatch(i,0,n,o,a,s)?n:null},e.fromBulbJSON=function(t,n,o,r){if(void 0===r&&(r={}),!t||!t.blocks)return null;var i=c.parseJSON(t.blocks,!0),s=r.isAsync||!1,a=r.progressCallBack||function(){};return n=n||new e({}),this._parseBlocksInBatch(i,0,n,o,a,s)?n:null},e.fromOCR=function(t,o){var r=c.parseOCR(t),i=0;return o=o||new e({}),n.each(r,function(t){t&&(o.append(t),i++)}),i?o:null},e.fromXml=function(t,o,r,i){var s,a,l,c,d,f,g={},m={};return o||(o=new e({})),i=n.defaults(i||{},{isAsync:!1,progressCallBack:function(){}}),f=i.progressCallBack,n.isString(t)?(t=p.clear(t),s=$.parseXML(t)):s=t,f({percent:.1}),a=$(s).find("note:first"),l=a.attr("schema-version"),l&&o.setSchemaVersion(l),c=parseInt(a.attr("file-version"),10),isNaN(c)&&(c=0),o.setFileVersion(c),a&&a.get(0)?(a.find("head").children().each(function(t,e){var n;switch(e.nodeName){case"list":n=y.fromXml(e),g[$(e).attr("id")]=n;break;case"catalogue-wrap":n=_.fromXml(e),m[$(e).attr("id")]=n;break;case"header":n=b.fromXml(e),o.setHeaderFooter(n,!1,!0);break;case"footer":n=b.fromXml(e),o.setHeaderFooter(n,!0,!0);break;default:n=$(e).attr(u.COMPAT),h.isCompatible(n)&&(n=e.cloneNode(!0),o.headUnknownNodeList.push(n))}}),f({percent:.15}),d=a.find("body").children(),e._parseXMLBodyInBatch(d,0,o,g,m,r,f,i.isAsync),o):(o.isBlank()&&o.append(w.createBlank()),f({percent:1}),o.updateContentParseTimer(null),o)},e.unescape=function(t){var e=document.createElement("span");return e.innerHTML=t,e.textContent},e._parseBlocksInBatch=function(t,o,r,i,s,a){var l,c,u,p=Date.now(),d=!1,h=r.getExtraInfo("pcTodoMap");if(null==t&&0===t.length)return s({percent:1}),r.updateContentParseTimer(null),!1;for(;o<t.length;)if(l=t[o],m.isImage(l)&&i&&i.length>0&&n.each(i,function(t){if(t.resId===l.getResId())return void l.setImageInfo(t)}),m.isTodo(l)&&l.isFromOldTodo()&&(u=l.getLegacyResId(),u&&h&&h[u]?(l.setText(e.unescape(JSON.parse(h[u]).content)),l.setChecked(JSON.parse(JSON.parse(h[u]).checked))):l=null),l&&(r.append(l),d=!0),o++,o>=t.length?(s({percent:1}),r.updateContentParseTimer(null)):s({percent:.15+o/t.length*.85}),a&&Date.now()-p>100){c=setTimeout(e._parseBlocksInBatch.bind(null,t,o,r,i,s,a),10),r.updateContentParseTimer(c);break}return d},e._parseXMLBodyInBatch=function(t,o,i,s,a,l,c,p){var d,_,b,y,v,w,I,C,T=Date.now();if(null==t||0===t.length)return c({percent:1}),void i.updateContentParseTimer(null);for(;o<t.length;){if(d=t[o],_=d.nodeName,b=g[_],y=$(d).attr(u.COMPAT),(!b&&h.isCompatible(y)||b&&y&&!h.isCompatible(y))&&(b=M),b&&b.fromXml){if(!(v=b.fromXml(d)))throw i.updateContentParseTimer(null),new Error("Failed to parse block from xml node!");for(w=f.parseResourceList(d),v.setResourceIds(w),m.isListItem(v)&&v.setOwnerList(s[$(d).attr("list-id")]),m.isImage(v)&&l&&l.length>0&&n.each(l,function(t){if(t.resId===v.getResId())return void v.setImageInfo(t)}),m.isCatalogue(v)&&v.setOwnerList(a[$(d).attr("catalogue-id")]),i.append(v),v.isValidForCollab()||i.setValidForCollab(!1),C=v.getId();i.originalBlockIds.indexOf(C)>-1;)C=r.newGUID();C!==v.getId()&&(i.setValidForCollab(!1),v.setId(C)),i.originalBlockIds.push(C)}if(++o>=t.length)c({percent:1}),i.updateContentParseTimer(null);else if(c({percent:.15+o/t.length*.85}),p&&Date.now()-T>100){I=setTimeout(e._parseXMLBodyInBatch.bind(null,t,o,i,s,a,l,c,p),10),i.updateContentParseTimer(I);break}}},e.prototype.append=function(t){this.insert(this.blocks.length,t)},e.prototype.clearHighlight=function(){this.trigger("clear-high-light")},e.prototype.countWords=function(t,e){var n,o,r=function(t){return!m.isHr(t)};return t&&(n=!0,o=this._parseWordCountInfo(t.getDataAsPlain(this,r))),(!t||!o.all&&e)&&(n=!1,o=this._parseWordCountInfo(this.toPlain(r))),{count:o.all,detail:o,isSelected:n}},e.prototype.findAttachmentByResource=function(t,e){return n.filter(this.blocks,function(n){return m.isAttachment(n)&&n.getResource(e)===t})},e.prototype.getAllBlocks=function(){return this.blocks},e.prototype.getAllResouceIds=function(){var t=[];return n.each(this.blocks,function(e){var n=e.getResourceIds();n&&n.length&&(t=t.concat(n))}),t=n.uniq(t)},e.prototype.getAllResourceInfo=function(t,e){var o,r,i,s,a=[],l=[];return t=t||this.blocks,e=e||[m.IMAGE,m.ATTACHMENT,m.HANDWRITE,m.MACRO],e.indexOf(m.IMAGE)>-1&&l.push(k.IMAGE),e.indexOf(m.ATTACHMENT)>-1&&l.push(k.ATTACHMENT),e.indexOf(m.MACRO)>-1&&l.push(k.MACRO),n.each(this.blocks,function(t){if(m.isAttachment(t)&&e.indexOf(m.ATTACHMENT)>-1||m.isHandWrite(t)&&e.indexOf(m.HANDWRITE)>-1)o=t.getSource(!1),r=t.getSource(!0),i=t.getResource(!1),s=t.getResource(!0),o&&r&&i&&s&&a.push({extraResource:s,extraSource:r,resource:i,source:o});else if(m.isImage(t)&&e.indexOf(m.IMAGE)>-1)o=t.getSource(!1),r=t.getSource(!0),o&&r&&a.push({blockId:t.getId(),extraSource:r,source:o});else if(m.isMacro(t)&&e.indexOf(m.MACRO)>-1){var n=t.getMacroInfo();n&&a.push({macroInfo:n})}else m.isTable(t)&&(a=a.concat(t.getAllResourceInfo(l)))}),a},e.prototype.getAttachmentByResource=function(t,e){return n.filter(this.blocks,function(n){return m.isAttachment(n)&&n.getResource(e)===t})},e.prototype.getBlockAt=function(t){return this.blocks[t]},e.prototype.getBlockById=function(t){return this.header&&t===this.header.getId()?this.header:this.footer&&t===this.footer.getId()?this.footer:n.find(this.blocks,function(e){return t===e.getId()})},e.prototype.getBlockIndex=function(t){return n.indexOf(this.blocks,t)},e.prototype.getBlockIndexById=function(t){var e,n=-1;return e=this.getBlockById(t),e&&(n=this.getBlockIndex(e)),n},e.prototype.getCommonInlineStyle=function(t,e){var o=this;if(t&&e){var r,i=t.getStartBlockRange(),s=t.getEndBlockRange(),a=i.block,l=s.block,c=null,p=[],d=!0;return this.isNonEmptyParaTable(a)&&(p.push(a.getCommonInlineStyle(e,i)),d=!1),a!==l&&(r=this.getInterBlocks(a,l),n.each(r,function(t){o.isNonEmptyParaTable(t)&&(p.push(t.getCommonInlineStyle(e)),d=!1)}),this.isNonEmptyParaTable(l)&&(p.push(l.getCommonInlineStyle(e,s)),d=!1)),d?(m.isTextBlock(a)&&(c=a.getInlineStyleForEmpty(e,!0)),c||C.getDefault(e)):(n.some(p,function(t){if(null===c)c=t;else if(null!=t&&c!==t)return c=u.INTERM,!0}),c)}},e.prototype.getExtraInfo=function(t){return t?(this.extraInfo||{})[t]:this.extraInfo},e.prototype.getHeaderFooter=function(t){return t?this.footer:this.header},e.prototype.getFileVersion=function(){return this.fileVersion},e.prototype.getImageBySource=function(t,e){return n.filter(this.blocks,function(n){return m.isImage(n)&&n.getSource(e)===t})},e.prototype.getInterBlocks=function(t,e,n){var o=this.blocks,r=this.getBlockIndex(t),i=this.getBlockIndex(e);return n?o.slice(r,i+1):o.slice(r+1,i)},e.prototype.getLastBlock=function(){return n.last(this.blocks)},e.prototype.getNextBlock=function(t){var e=this.getBlockIndex(t);if(e>=0)return this.getBlockAt(e+1)},e.prototype.getNoteId=function(){return this.noteId},e.prototype.getPreBlock=function(t){var e=this.getBlockIndex(t);if(e>0)return this.getBlockAt(e-1)},e.prototype.getRangeBlockStyle=function(t,e){if(t&&e){var o=t.getStartBlockRange(),r=t.getEndBlockRange(),i=o.block,s=r.block,a=this.getInterBlocks(i,s,!0),c=null;return t.isSingleTableSelected()?a[0]?a[0].getCommonBlockStyle(e,o):void l.warn("No table block find, need update noteRange"):(n.each(a,function(t){var n=t.getBlockStyle(e);c=null===c?n:c===n?c:u.INTERM}),c)}},e.prototype.getSchemaVersion=function(){return this.schemaVersion||h.getDefaultAsString()},e.prototype.hasHandWriteBlock=function(){var t=!1;return n.some(this.blocks,function(e){return m.isHandWrite(e)&&(t=!0),t}),t},e.prototype.highlight=function(t,e){var o,r,i=[];e=n.defaults(e||{},{ignoreCase:!1}),t&&t.length&&(o=[],n.each(t,function(t){if(t&&!/\s/.test(t)){var e=new I({text:t});o.push(e)}}),o=o.length?o:null),r=this.blocks.slice(),this.header&&r.unshift(this.header),this.footer&&r.push(this.footer),n.each(r,function(t){(null!=o||null!=e.images&&e.images.length>0&&(m.isImage(t)||m.isTable(t)))&&t.highlight(o,e,function(t){i.push(t)})}),this.trigger("high-light",i),n.isFunction(e.callback)&&e.callback(i.length)},e.prototype.insert=function(t,e){if(!e)throw new Error("cannot insert null block");this.blocks.splice(t,0,e),this._bindEventsForBlock(e),e.trigger("attached",this),this.trigger("insert-block",t,e)},e.prototype.isBlank=function(){return!this.blocks||0===this.blocks.length},e.prototype.isEmptyContent=function(){var t,e=this.blocks;return!!(e&&1===e.length&&(t=e[0])&&t.isEmptyContent)&&t.isEmptyContent()},e.prototype.isParsingData=function(){return null!=this.contentParseTimer},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.isSameNote=function(t){return t===this.noteId},e.prototype.isSameList=function(t,e){var n,o,r,i,s,a,c,u,p,d;if(!t)return l.error("isSameList:noteRange should not be null"),!1;for(n=t.getStartBlockRange(),o=t.getEndBlockRange(),r=n.block,i=o.block,s=this.getInterBlocks(r,i,!0),d=s.length,a=0;a<d;a++)if((c=s[a])instanceof w){if(!(c instanceof v))return!1;if(u=c.getOwnerList(),u.getType()!==e)return!1;if(p){if(p!==c.getOwnerList())return!1}else p=u}return!!p},e.prototype.isValidForCollab=function(){return this.validForCollab},e.prototype.lastBlockIsEasyInput=function(){var t=this.getLastBlock();return m.isTextBlock(t)},e.prototype.lockBlock=function(t,e){this._setBlockLocked(t,!0,e)},e.prototype.nextHighlight=function(){this.trigger("next-high-light")},e.prototype.preHighlight=function(){this.trigger("pre-high-light")},e.prototype.remove=function(t,e){var n=this.blocks.splice(t,1)[0];n&&(n.trigger("detached",this),this._unbindEventsForBlock(n),this.trigger("remove-block",t,e))},e.prototype.removeBlock=function(t){this.remove(this.getBlockIndex(t))},e.prototype.removeBlockById=function(t,e){this.remove(this.getBlockIndexById(t),e)},e.prototype.replace=function(t,e){var n=this.blocks.splice(t,1,e)[0];return n?(n.trigger("detached",this),this._unbindEventsForBlock(n)):l.warn("oldBlock should not be null"),e&&(this._bindEventsForBlock(e),e.trigger("attached",this)),this.trigger("replace-block",t,e,n),n},e.prototype.reset=function(){this.destroy(),this.noteId=r.newGUID(),this.headUnknownNodeList=[],this.blocks=[],this.originalBlockIds=[],null!=this.contentParseTimer&&(clearTimeout(this.contentParseTimer),this.contentParseTimer=null),this.header=null,this.footer=null},e.prototype.setExtraInfo=function(t){this.extraInfo=t,this._triggerExtraInfoChange()},e.prototype.setExtraInfoWithKey=function(t,e,n,o){var r=this.extraInfo,i=r[t];r||(r={},o=!0),i||(r[t]=i={}),i[e]=n,!0===o?this.setExtraInfo(r):this.extraInfo=r},e.prototype.setFileVersion=function(t){this.fileVersion=t},e.prototype.setHeaderFooter=function(t,e,n){e?this.footer=t:this.header=t,n&&this.trigger("header-footer-changed",e)},e.prototype.setReadOnly=function(t){(t=!!t)!==this.readOnly&&(this.readOnly=t,this.trigger("read-only-change",t),n.each(this.blocks,function(e){e.setReadOnly(t)}))},e.prototype.setSchemaVersion=function(t){if(h.isLessThanDefault(t))return void l.warn("schema version is older than current, need upgrade!");this.schemaVersion=t||h.getDefaultAsString()},e.prototype.setValidForCollab=function(t){this.validForCollab=t},e.prototype.toHtml=function(t,e){var n,o,r,i,s,a,l,c,u,p,d,h,f,g,_,b=this.blocks,y=b.length,v=[],w=[];for(e=!0===e,t?(a=t.getStartBlockRange(),l=t.getEndBlockRange(),c=a.block,u=l.block,p=this.getBlockIndex(c),d=this.getBlockIndex(u),_=t.isInSingleBlock()):(p=0,d=y-1),o=p;o<=d;o++)g=null,h=o===p,f=o===d,n=b[o],h&&a?(g=a,_||(g=g.clone(),g.expandToEnd())):f&&l&&(g=l,_||(g=g.clone(),g.expandToStart())),m.isListItem(n)||m.isCatalogue(n)?(s=n.getOwnerList(),i&&i!==s&&w.length&&(r=this._toHtmlWithSameOwnerList(w,e),v.push(r),w=[]),w.push({block:n,range:g||null}),i=s):(i=null,w.length&&(r=this._toHtmlWithSameOwnerList(w,e),v.push(r),w=[]),r=g?g.getDataAsHtml(e):n.toHtml(null,null,e),v.push(r));return w.length&&(r=this._toHtmlWithSameOwnerList(w,e),v.push(r)),v.join("")},e.prototype.toBulbJSON=function(){return{version:"0.1.6",blocks:n.map(this.blocks,function(t){return t.toBulbJSON()})}},e.prototype.toPlain=function(t){var e=t?n.filter(this.blocks,t):this.blocks;return n.map(e,function(t){return t.toPlain()}).join("\n")},e.prototype.toXml=function(){var t,e,r,i,s,a,c,u=document.implementation,p=u.createDocument("http://note.youdao.com","note",null),d=p.createElement("head"),h=p.createElement("body"),f={},g=this.getSchemaVersion(),m=this.getFileVersion(),_=p.documentElement,b=[];return _.appendChild(d),_.appendChild(h),g&&_.setAttribute("schema-version",g),_.setAttribute("file-version",m.toString()),n.each(this.blocks,function(t){var e,o,r,i,s,a;t&&t.toXml&&(e=t.toXml(p)),e?e.listItem?(o=e,h.appendChild(o.listItem),i=o.listId,f[i]||(f[i]=!0,r=p.createElement("list"),s=o.ownerList.unknownAttrs,n.each(s,function(t){var e=t.cloneNode(!0);r.setAttributeNode(e)}),r.setAttribute("id",i),r.setAttribute("type",o.listType),d.appendChild(r))):("catalogue"===e.tagName&&(a=e.getAttribute("catalogue-id"),-1===b.indexOf(a)&&b.push(a)),h.appendChild(e)):l.warn("block.toXml() failed!")}),n.each(this.headUnknownNodeList,function(t){if(t&&t.cloneNode){var e=t.cloneNode(!0);d.appendChild(e)}}),c=d.querySelectorAll("catalogue-wrap"),n.each(c,function(t){d.removeChild(t)}),n.each(b,function(t){t&&(a=p.createElement("catalogue-wrap"),a.setAttribute("id",t),a.setAttribute("compat","true"),d.appendChild(a))}),e=this.getHeaderFooter(!1),r=this.getHeaderFooter(!0),e&&(t=e.toXml(p))&&d.appendChild(t),r&&(t=r.toXml(p))&&d.appendChild(t),i=new XMLSerializer,s=i.serializeToString(p),o.startsWith(s,"<?xml")||(s='<?xml version="1.0"?>\n'+s),s},e.prototype.unlockBlock=function(t){this._setBlockLocked(t,!1)},e.prototype.updateContentParseTimer=function(t){this.contentParseTimer!==t&&(clearTimeout(this.contentParseTimer),this.contentParseTimer=t),null==t&&this.trigger("content-parse-done")},e.prototype.buildBlockRangeFromJSON=function(t){var e,n;return t&&t.blockId?(e=t.blockId,(n=this.getBlockById(e))?T.createRangeByBlock({block:n,end:t.endPosition,rect:t.simpleValue1,start:t.startPosition,type:t.simpleValue2}):void 0):void l.error("The blockRangeJSON.blockId is not valid!")},e.prototype.initialize=function(){this.extraInfo={},this.noteId=r.newGUID(),this.blocks=[],this.originalBlockIds=[],this.headUnknownNodeList=[],this.schemaVersion=h.getDefaultAsString(),this.fileVersion=0},e.prototype.destroy=function(){var t=this;n.each(t.blocks,function(e){t._unbindEventsForBlock(e)}),t.blocks=null,t.readOnly=!1,t.validForCollab=!0},e.prototype.isNonEmptyParaTable=function(t){return t instanceof w&&!t.isEmpty()||m.isTable(t)&&!t.isEmptyContent()},e.prototype._bindEventsForBlock=function(t){var e;t&&(this._unbindEventsForBlock(t),e=this._listenerEventsForBlock(),s.addListeners(e,t,this),e=this._bubbleEventsForBlock(t),s.bubble(e,t,this))},e.prototype._bubbleEventsForBlock=function(t){var e={};return m.isTable(t)&&(e=n.extend(e,{"color-picker-show":!0,"get-block-view":!0,"yne-user-action-collection":!0})),e},e.prototype._listenerEventsForBlock=function(){return{"get-default-set-font":"_onGetDefaultSetFont","get-extra-info":"_onGetExtraInfo"}},e.prototype._onGetDefaultSetFont=function(t){this.trigger("get-default-set-font",function(e){t(e)})},e.prototype._onGetExtraInfo=function(t,e){e(this.getExtraInfo(t))},e.prototype._parseCataloguesToHtml=function(t){var e,n,o,r=document.createElement("div"),i="";for(o=0;o<t.length;o++)e=t[o],n=e.block,i+=n.toHtml();return r.setAttribute("yne-bulb-type","catalogue-wrap"),r.innerHTML=i,r.outerHTML},e.prototype._parseWordCountInfo=function(t){var e=/[A-z0-9~!@#$%^&*()_+{}|:"<>?`\-=[\]\\;',.\/]+/g,n=/[\u4e00-\u9fa5\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g,o=/\s+/g,r=t.match(e),i=t.match(n),s=t.replace(e,"").replace(o,""),a=s.length,l=i?i.length:0,c=r?r.length:0,u=a-l;return{all:l+c+u,chinese:l,nonChinese:c+u}},e.prototype._parseListItemsToTree=function(t){var e,n,o,r,i,s,a,l,c,u=new d(0),p=t.length;for(i=u,e=0;e<p;e++){if(n=t[e],o=n.block,r=n.range||{},l=o.getLevel(),a=new d(l,o,r.start,r.end),(c=l-i.getLevel())>1)for(;l-i.getLevel()>1;)s=new d(i.getLevel()+1),i.addChildNodes([s]),i=s;else if(c<1)for(;l-i.getLevel()<1;)i=i.getParentNode();i.addChildNodes([a]),i=a}return u},e.prototype._setBlockLocked=function(t,e,o){var r,i=this;r=n.isArray(t)?t:[t],n.each(r,function(t){var r;(r=n.isString(t)?i.getBlockById(t):t)&&r.setLocked(e,o)})},e.prototype._toHtmlWithSameOwnerList=function(t,e){var o,r,i=n.first(t).block;return m.isListItem(i)?(o=this._parseListItemsToTree(t))&&(r=o.toHtml(!0===e)):m.isCatalogue(i)&&(r=this._parseCataloguesToHtml(t)),r||""},e.prototype._triggerExtraInfoChange=function(){n.each(this.blocks,function(t){t.trigger("extra-info-change")})},e.prototype._unbindEventsForBlock=function(t){if(t){var e=function(e){e&&n.each(e,function(e,n){t.off(n)})};e(this._listenerEventsForBlock()),e(this._bubbleEventsForBlock(t))}},e}(a)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(37),n(38),n(39),n(40),n(41),n(19),n(7),n(63),n(29),n(20),n(35),n(67)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h,f){"use strict";var g={attach:o,catalogue:r,heading:i,"horizontal-line":s,image:a,"list-item":l,para:c,quote:u,table:p,todo:d,unknown:h,macro:f};return n.each(g,function(t,e){t.prototype.xmlNodeName=e}),g}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(1),n(64)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(){function t(){}return t.renderTable=function(e,n,o){var r,i,s,a,l,c=e.getRowCount(),u=e.getColumnCount();for(n=n||t._createTableEl(),r=n.querySelector("tbody"),t.table=e,a=0;a<c;a++){for(i=document.createElement("tr"),l=0;l<u;l++)s=e.getCell(a,l),s.isMergedCell()||i.appendChild(t._renderCell(a,l,null,{resourceMap:o}));i.style.height=e.getRowHeight(a)+"px",r.appendChild(i)}return t._renderColumns(n.querySelector("colgroup")),t.table=null,$(n).css({"border-collapse":"collapse","table-layout":"fixed","white-space":"nowrap",width:0}),n},t._createTableEl=function(){var t=document,e=t.createElement("table");return e.innerHTML="<colgroup></colgroup><tbody></tbody>",e},t._handleMergePointIfNeeded=function(t,e){if(e.isMergePoint()){var n=e.getMergePointAttr();n.width>0&&t.setAttribute("colspan",n.width),n.height>0&&t.setAttribute("rowspan",n.height)}},t._renderCell=function(e,o,i,s){i=i||document.createElement("td"),$(i).css({"font-size":14,color:"#393939",border:"1px solid #a7a7a7",overflow:"hidden","vertical-align":"middle","word-wrap":"break-word","background-color":"rgba(255, 255, 255, 0.3)"}),s=n.defaults(s||{},{withCellId:!0,resourceMap:null});var a,l=t.table.getCell(e,o),c=l.getContent();return s.withCellId&&i.setAttribute("data-cell-id",l.getCellId()),t._handleMergePointIfNeeded(i,l),t._setCellStyles(i,l.getBlockStyles(),!0),a=r.contentToHtml(c,s.resourceMap),i.innerHTML=a,i},t._renderColumns=function(e){var n=t.table;if(!e)return void o.warn("parameter is not valid",e);e.innerHTML="",n.forEachColumn(function(t){var o=n.getColumnWidth(t),r=document.createElement("col");r.style.width=o+"px",e.appendChild(r)})},t._setCellStyles=function(t,e,n){n=!1!==n;var o;o=e.textAlign,t.style.textAlign="center"===o||"right"===o||"left"===o?o:"",o=e.verticalAlign,t.style.verticalAlign="top"===o||"middle"===o||"bottom"===o?o:"",n||"true"===e.wrap?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="nowrap",o=e.backColor,t.style.backgroundColor=o&&"inherit"!==o&&"transparent"!==o?o:""},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(22)],void 0!==(r=function(t,e,n){"use strict";return n({textAlign:{type:"Enum",possible:{left:!0,right:!0,center:!0,justify:!0},default:"left"},verticalAlign:{type:"Enum",possible:{top:!0,middle:!0,bottom:!0},default:"left"},wrap:{type:"Boolean",default:!1},backColor:{type:"String",default:{BACK_COLOR:"transparent"}.BACK_COLOR}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return function(t,e,n,o){var r,i,s;for(r=0;r<n;r++)if(s=e?n-r-1:r,null==o){if(!1===t(s))return}else for(i=0;i<o;i++)if(!1===t(s,e?o-i-1:i))return}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0);return{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,getType:function(t){if(t&&t.nodeType)return t.nodeType},isNode:function(t){var n=this,o=n.getType(t);return e.isNumber(o)&&o>=n.ELEMENT_NODE&&o<=n.NOTATION_NODE},isElement:function(t){return this.getType(t)===this.ELEMENT_NODE},isAttribute:function(t){return this.getType(t)===this.ATTRIBUTE_NODE},isText:function(t){return this.getType(t)===this.TEXT_NODE},isCDataSection:function(t){return this.getType(t)===this.CDATA_SECTION_NODE},isEntityReference:function(t){return this.getType(t)===this.ENTITY_REFERENCE_NODE},isEntity:function(t){return this.getType(t)===this.ENTITY_NODE},isProcessingInstruction:function(t){return this.getType(t)===this.PROCESSING_INSTRUCTION_NODE},isComment:function(t){return this.getType(t)===this.COMMENT_NODE},isDocument:function(t){return this.getType(t)===this.DOCUMENT_NODE},isDocumentType:function(t){return this.getType(t)===this.DOCUMENT_TYPE_NODE},isDocumentFragment:function(t){return this.getType(t)===this.DOCUMENT_TYPE_NODE},isNotation:function(t){return this.getType(t)===this.NOTATION_NODE}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(32),n(33),n(42)],void 0!==(r=function(t,e,n,o,r){"use strict";return{attach:n,image:o,macro:r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(90),n(130),n(131),n(132)],void 0!==(r=function(t,e,n,o,r,i,s){"use strict";var a=[o,r,i,s];return function(t){t=t||{};var e,o,r,i=JSON.parse(JSON.stringify(t)),s=a.length,l=i,c=[],u=function(t){c.push(o.name+".js: "+t)};for(e=0;e<s;e++){if(o=a[e],r=o.checkAndFix(l),n.each(r.errors,u),!0===r.stopCheck)return{errors:c,fixedData:r.fixedData};l=r.fixedData}return{errors:c,fixedData:l}}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.checkAndFix=function(e){var o=e.cells,r=e.heights,i=e.widths,s=t.IS_VALID(o,r.length,i.length),a=[];return!0!==s&&(a.push(s),n.each(o,function(t){delete t.mergeWidth,delete t.mergeHeight,delete t.mergePointDX,delete t.mergePointDY})),{errors:a,fixedData:e,stopCheck:!1}},t.IS_VALID=function(t,e,o){var r={},i="";return n.some(t,function(e,s){if(!r[s+""]){var a,l,c,u,p,d,h,f,g,m,_,b;if(e.mergeWidth||e.mergeHeight){if(e.mergeWidth&&!n.isNumber(e.mergeWidth))return i="The mergeWidth is not Number type",!0;if(e.mergeHeight&&!n.isNumber(e.mergeHeight))return i="The mergeHeight is not Number type",!0;if(null!=e.mergePointDX||null!=e.mergePointDY)return i="The cell data is not valid, index: "+s,!0;for(a=e.mergeWidth||1,l=e.mergeHeight||1,c=Math.floor(s/o),u=s%o,g=0;g<l;g++)for(p=c+g,f=0;f<a;f++)if(g>0||f>0){if(d=u+f,h=p*o+d,m=t[h],m.mergeWidth||m.mergeHeight)return i="The merged cell should not have `mergeWidth` or `mergeHeight`, merge point cell index: "+s+", merged cell index: "+h,!0;if(m.value)return i="The `value` of merged cell should be empty string,merge point cell index: "+s+", index: "+h,!0;if(_=m.mergePointDX||0,b=m.mergePointDY||0,_!==f||b!==g)return i="The `mergePointDX` or `mergePointDY` of mergedCell is not valid, merge point cell index: "+s+",  merged cell index: "+h,!0;r[h+""]=!0}}r[s+""]=!0}}),i||!0},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.checkAndFix=function(t){var e=t.cells,o=!1,r=[];return n.each(e,function(t){t.mergeWidth&&!t.mergeHeight?(t.mergeHeight=1,o=!0):t.mergeHeight&&!t.mergeWidth&&(t.mergeWidth=1,o=!0)}),o&&r.push("Some cell has no default value for mergeHeight or mergeWidth"),{errors:r,fixedData:t,stopCheck:!1}},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(0),n(45),n(66),n(91)],void 0!==(r=function(t,e,n,o,r,i){"use strict";return function(){function t(){}return t.checkAndFix=function(t){if(!t.cells||!n.isArray(t.cells))return{errors:["The `cells` property is not Array type!"],fixedData:i(),stopCheck:!0};var e,s,a=t.cells,l=t.widths,c=t.heights,u=!0,p=!0,d=[];for(l&&n.isArray(l)||(u=!1,d.push("The `widths` property is not Array type!")),c&&n.isArray(c)||(p=!1,d.push("The `heights` property is not Array type!")),u||p?u?p||(c=[],0===l.length&&(l.length=5),c.length=Math.ceil(a.length/l.length)):(l=[],0===c.length&&(c.length=5),l.length=Math.ceil(a.length/c.length)):(l=[],l.length=5,c=[],c.length=Math.ceil(a.length/l.length)),e=l.length*c.length,s=!1;e<a.length;)c.push(o.DEFAULT_ROW_HEIGHT),e=l.length*c.length,s=!0;for(s&&d.push("The widths.length * heights.length is less than cells.length"),e=l.length*c.length,s=!1;e>a.length;)a.push(r()),s=!0;return s&&d.push("The widths.length * heights.length is greater than cells.length"),s=!1,l=n.map(l,function(t){return t&&n.isNumber(t)?t:(s=!0,o.DEFAULT_COL_WIDTH)}),s&&d.push("The `widths` has unvalid value"),s=!1,c=n.map(c,function(t){return t&&n.isNumber(t)?t:(s=!0,o.DEFAULT_ROW_HEIGHT)}),s&&d.push("The `heights` has unvalid value"),{errors:d,fixedData:{cells:a,heights:c,widths:l},stopCheck:!1}},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(5),n(15)],void 0!==(r=function(t,e,n,o){"use strict";function r(t,e){if(t)for(var n=t.childNodes[0];n;){if(n.nodeName&&n.nodeName===e)return n;n=n.nextSibling}}function i(t){var e,n;return e=r(t,s),e&&(n=e.textContent),n||o.IS_ANDROID||(e=r(t,a))&&(n=e.textContent),n}Object.defineProperty(e,"__esModule",{value:!0});var s=n.TAG_ID_NAME,a=n.LEGACY_TAG_ID_NAME;e.getChildByTagName=r,e.parseIdFromXml=i}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(0),r=n(9),i=n(95),s=n(96),a=n(16),l=n(138);return e=r.extend({_mapper:{},_blackTagList:{},constructor:function(t){var e=this;e._mapper={},e._blackTagList={},o.each(t,function(t,n){!1===t?e._blackTagList[n]=!0:t&&o.isObject(t)&&e.define(n,t)})},parse:function(t,e){var n,r,s,c=this,u=new l,p=/<html[\S\s]*<\/html>/i;return t=t.replace(/<!--[\w\W]*?-->/i,""),p.test(t)&&(t=t.match(p)[0]),n=a(t,document,!0),n?r=new i(n):(n=document.createElement("div"),n.innerHTML=t,r=new i(n)),s=n.getElementsByTagName("style"),s&&o.each(s,function(t){u.parse(t.innerText)}),r.internalStylesParser=u,c._parseRecursively(r,c,e),r.blocks},_shouldBreak:function(t){return!t||!t.style||"none"===t.style.display||"hidden"===t.style.visibility},_parseRecursively:function(t,e,n){var r,i,a,l,c,u=this,p=t.el;if(!0!==u._shouldBreak(p)){if(t.setup(),!0!==t.handleChildrenBySelf())for(r=p.firstChild;r;)1===r.nodeType?(c=r.tagName.toLowerCase(),u._blackTagList[c]||(a=u._findHandlers(r),a=o.isFunction(a)?a:s,l=new a(r,t,t.internalStylesParser,e,n),u._parseRecursively(l,e,n))):3===r.nodeType&&(i=r.textContent)&&t.capture({text:i,styles:t.styles,isText:!0}),r=r.nextSibling;t.finish()}},define:function(t,n,o){this._mapper[t]={Class:n,priority:o||e.PRIORITY.DEFAULT}},_findHandlers:function(t){var e=[],n=function(t,e){if(t)return t.matches?t.matches(e):t.webkitMatchesSelector?t.webkitMatchesSelector(e):void 0};if(o.each(this._mapper,function(o,r){n(t,r)&&e.push(o)}),0!==e.length)return e.sort(function(t,e){return e.priority-t.priority}),e[0].Class}},{PRIORITY:{HIGH:1,DEFAULT:0,LOW:-1}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(1),r={h1:32,h2:24,h3:18,h4:16,h5:13,h6:12},i={1:12,2:13,3:16,4:18,5:24,6:32,7:48},s={b:function(t){t.bold=!0},i:function(t){t.italic=!0},u:function(t){t.underline=!0},strike:function(t){t.strike=!0},code:function(t){t["font-family"]="monospace"},mark:function(t){t["back-color"]="#ffff00",t.color="#000000"},font:function(t,e){var n,o=e.getAttribute("color"),r=e.getAttribute("face"),s=e.getAttribute("size");o&&(t.color=o),r&&(t["font-family"]=r),s&&(n=i[s])&&(t["font-size"]=n)},pre:function(t){t["white-space"]="pre"},a:function(t,e){e&&e.href&&(t.color="#003884",t.underline=!0)}},a=function(t,n){var r=s[t];if(!r)return void o.error("The tag handler for `"+t+"` does not exist!");e.each(n,function(t){s[t]||(s[t]=r)})};return e.each(r,function(t,e){s[e]=function(e){e.bold=!0,e["font-size"]=t}}),a("b",["strong"]),a("i",["em","cite","var","address","dfn"]),a("strike",["s","del"]),a("u",["ins"]),a("code",["tt","kbd","samp","pre","xmp","plaintext","listing"]),s}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(58),o=n(34),r={};return function(t,n){var i,s;if((t=o(t).trim().toLowerCase().value())&&"inherit"!==t){if(n&&"transparent"===t)return t;if(i=r[t])return"null"===i?void 0:i;if(s=e(t),s.isValid())return 0===s.getAlpha()?void(r[t]="null"):(i=s.toHexString(),r[t]=i,i);r[t]="null"}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(34),r=["normal","nowrap","pre-line"],i=function(t,e){return e&&"normal"!==e&&"nowrap"!==e?"pre-line"===e?t.replace(/[ \t]+/g," "):t:t.replace(/[ \t\r\n]+/g," ")},s=function(t,e){return e&&"normal"!==e&&"nowrap"!==e?"pre-line"===e?t.replace(/^[ \t]+/g,""):t:t.replace(/^[ \t\r\n]+/g,"")},a=function(t,e){return e&&"normal"!==e&&"nowrap"!==e?"pre-line"===e?t.replace(/[ \t]+$/g,""):t:t.replace(/[ \t\r\n]+$/g,"")},l=function(t){var n=t.styles["white-space"];return!n||e.contains(r,n)};return function(t){var n,r,c,u,p,d;for(e.each(t,function(t){t.text=i(t.text,t.styles["white-space"])}),c=t.length,n=0;n<c&&(u=t[n],u.text=s(u.text,u.styles["white-space"]),!u.text);n++);for(n=0,r=1;r<c;r++)p=t[n],d=t[r],l(p)&&l(d)&&(o.endsWith(p.text," ")&&o.startsWith(d.text," ")&&(d.text=d.text.slice(1)),""===d.text)||(n=r);for(n=c-1;n>=0&&(u=t[n],u.text=a(u.text,u.styles["white-space"]),!u.text);n--);return t}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(9),r=n(139),i=n(147),s=n(36),a=n(1);return o.extend({_internalStyles:{},constructor:function(){this._internalStyles={}},parse:function(t){var n,o,i,s=this,l={},c={};if(!0===a.DEBUG)n=r.parse(t);else try{n=r.parse(t)}catch(t){return{}}return n.cssRules?(e.each(n.cssRules,function(t){t.selectorText&&t.style&&(c={},o=t.style,e.each(o,function(t){c[t]=o[t]}),-1!==t.selectorText.indexOf(",")?(i=t.selectorText.split(","),e.each(i,function(t){t=t.trim(),l[t]={selectorText:t,style:c}})):(t.selectorText=t.selectorText.trim(),l[t.selectorText]={selectorText:t.selectorText,style:c}))}),s._internalStyles=e.extend(s._internalStyles,l),l):{}},getInternalStyles:function(){return this._internalStyles},getStylesBySpecificity:function(t,n){var o=this,r={},i=o._internalStyles,a=[],l=0;return i?(e.each(i,function(e){try{s(t).is(e.selectorText)&&a.push(e)}catch(t){}}),a.sort(function(t,e){return-1*o._specificityCompare(t.selectorText,e.selectorText)}),e.some(a,function(t){if(t.style&&e.some(t.style,function(t,o){if(l===n.length)return!0;o in r||-1===e.indexOf(n,o)||(r[o]=t,l++)}),l===n.length)return!0}),r):{}},_specificityCompare:function(t,e){return i.compare(t,e)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){e.CSSStyleDeclaration=n(25).CSSStyleDeclaration,e.CSSRule=n(13).CSSRule,e.CSSStyleRule=n(48).CSSStyleRule,e.CSSImportRule=n(98).CSSImportRule,e.MediaList=n(70).MediaList,e.CSSMediaRule=n(71).CSSMediaRule,e.StyleSheet=n(97).StyleSheet,e.CSSStyleSheet=n(47).CSSStyleSheet,e.parse=n(69).parse,e.clone=n(146).clone},function(t,e,n){var o={CSSStyleDeclaration:n(25).CSSStyleDeclaration,CSSRule:n(13).CSSRule};o.CSSFontFaceRule=function(){o.CSSRule.call(this),this.style=new o.CSSStyleDeclaration,this.style.parentRule=this},o.CSSFontFaceRule.prototype=new o.CSSRule,o.CSSFontFaceRule.prototype.constructor=o.CSSFontFaceRule,o.CSSFontFaceRule.prototype.type=5,Object.defineProperty(o.CSSFontFaceRule.prototype,"cssText",{get:function(){return"@font-face {"+this.style.cssText+"}"}}),e.CSSFontFaceRule=o.CSSFontFaceRule},function(t,e,n){var o={CSSRule:n(13).CSSRule};o.CSSHostRule=function(){o.CSSRule.call(this),this.cssRules=[]},o.CSSHostRule.prototype=new o.CSSRule,o.CSSHostRule.prototype.constructor=o.CSSHostRule,o.CSSHostRule.prototype.type=1001,Object.defineProperty(o.CSSHostRule.prototype,"cssText",{get:function(){for(var t=[],e=0,n=this.cssRules.length;e<n;e++)t.push(this.cssRules[e].cssText);return"@host {"+t.join("")+"}"}}),e.CSSHostRule=o.CSSHostRule},function(t,e,n){var o={CSSValue:n(143).CSSValue};o.CSSValueExpression=function(t,e){this._token=t,this._idx=e},o.CSSValueExpression.prototype=new o.CSSValue,o.CSSValueExpression.prototype.constructor=o.CSSValueExpression,o.CSSValueExpression.prototype.parse=function(){for(var t,e=this._token,n=this._idx,o="",r="",i="",s=[];;++n){if(""===(o=e.charAt(n))){i="css expression error: unfinished expression!";break}switch(o){case"(":s.push(o),r+=o;break;case")":s.pop(o),r+=o;break;case"/":(t=this._parseJSComment(e,n))?t.error?i="css expression error: unfinished comment in expression!":n=t.idx:(t=this._parseJSRexExp(e,n))?(n=t.idx,r+=t.text):r+=o;break;case"'":case'"':t=this._parseJSString(e,n,o),t?(n=t.idx,r+=t.text):r+=o;break;default:r+=o}if(i)break;if(0===s.length)break}return i?{error:i}:{idx:n,expression:r}},o.CSSValueExpression.prototype._parseJSComment=function(t,e){var n,o=t.charAt(e+1);if("/"===o||"*"===o){var r,i,s=e;return"/"===o?i="\n":"*"===o&&(i="*/"),-1!==(r=t.indexOf(i,s+1+1))?(r=r+i.length-1,n=t.substring(e,r+1),{idx:r,text:n}):{error:"css expression error: unfinished comment in expression!"}}return!1},o.CSSValueExpression.prototype._parseJSString=function(t,e,n){var o,r=this._findMatchedIdx(t,e,n);return-1!==r&&(o=t.substring(e,r+n.length),{idx:r,text:o})},o.CSSValueExpression.prototype._parseJSRexExp=function(t,e){var n=t.substring(0,e).replace(/\s+$/,"");return!![/^$/,/\($/,/\[$/,/\!$/,/\+$/,/\-$/,/\*$/,/\/\s+/,/\%$/,/\=$/,/\>$/,/<$/,/\&$/,/\|$/,/\^$/,/\~$/,/\?$/,/\,$/,/delete$/,/in$/,/instanceof$/,/new$/,/typeof$/,/void$/].some(function(t){return t.test(n)})&&this._parseJSString(t,e,"/")},o.CSSValueExpression.prototype._findMatchedIdx=function(t,e,n){for(var o,r=e;;){if(-1===(o=t.indexOf(n,r+1))){o=-1;break}var i=t.substring(e+1,o),s=i.match(/\\+$/);if(!s||s[0]%2==0)break;r=o}return t.indexOf("\n",e+1)<o&&(o=-1),o},e.CSSValueExpression=o.CSSValueExpression},function(t,e){var n={};n.CSSValue=function(){},n.CSSValue.prototype={constructor:n.CSSValue,set cssText(t){var e=this._getConstructorName();throw new Error('DOMException: property "cssText" of "'+e+'" is readonly and can not be replaced with "'+t+'"!')},get cssText(){var t=this._getConstructorName();throw new Error('getter "cssText" of "'+t+'" is not implemented!')},_getConstructorName:function(){return this.constructor.toString().match(/function\s([^\(]+)/)[1]}},e.CSSValue=n.CSSValue},function(t,e,n){var o={CSSRule:n(13).CSSRule,MatcherList:n(145).MatcherList};o.CSSDocumentRule=function(){o.CSSRule.call(this),this.matcher=new o.MatcherList,this.cssRules=[]},o.CSSDocumentRule.prototype=new o.CSSRule,o.CSSDocumentRule.prototype.constructor=o.CSSDocumentRule,o.CSSDocumentRule.prototype.type=10,Object.defineProperty(o.CSSDocumentRule.prototype,"cssText",{get:function(){for(var t=[],e=0,n=this.cssRules.length;e<n;e++)t.push(this.cssRules[e].cssText);return"@-moz-document "+this.matcher.matcherText+" {"+t.join("")+"}"}}),e.CSSDocumentRule=o.CSSDocumentRule},function(t,e){var n={};n.MatcherList=function(){this.length=0},n.MatcherList.prototype={constructor:n.MatcherList,get matcherText(){return Array.prototype.join.call(this,", ")},set matcherText(t){for(var e=t.split(","),n=this.length=e.length,o=0;o<n;o++)this[o]=e[o].trim()},appendMatcher:function(t){-1===Array.prototype.indexOf.call(this,t)&&(this[this.length]=t,this.length++)},deleteMatcher:function(t){var e=Array.prototype.indexOf.call(this,t);-1!==e&&Array.prototype.splice.call(this,e,1)}},e.MatcherList=n.MatcherList},function(t,e,n){var o={CSSStyleSheet:n(47).CSSStyleSheet,CSSStyleRule:n(48).CSSStyleRule,CSSMediaRule:n(71).CSSMediaRule,CSSStyleDeclaration:n(25).CSSStyleDeclaration,CSSKeyframeRule:n(99).CSSKeyframeRule,CSSKeyframesRule:n(100).CSSKeyframesRule};o.clone=function t(e){var n=new o.CSSStyleSheet,r=e.cssRules;if(!r)return n;for(var i={1:o.CSSStyleRule,4:o.CSSMediaRule,8:o.CSSKeyframesRule,9:o.CSSKeyframeRule},s=0,a=r.length;s<a;s++){var l=r[s],c=n.cssRules[s]=new i[l.type],u=l.style;if(u){for(var p=c.style=new o.CSSStyleDeclaration,d=0,h=u.length;d<h;d++){var f=p[d]=u[d];p[f]=u[f],p._importants[f]=u.getPropertyPriority(f)}p.length=u.length}l.hasOwnProperty("keyText")&&(c.keyText=l.keyText),l.hasOwnProperty("selectorText")&&(c.selectorText=l.selectorText),l.hasOwnProperty("mediaText")&&(c.mediaText=l.mediaText),l.hasOwnProperty("cssRules")&&(c.cssRules=t(l).cssRules)}return n},e.clone=o.clone},function(t,e,n){var o=function(){var t,e,n;return t=function(t){var n,o,r,i,s=[];for(n=t.split(","),r=0,i=n.length;r<i;r+=1)o=n[r],o.length>0&&s.push(e(o));return s},e=function(t){var e,n=t,o={a:0,b:0,c:0},r=[],i=/(\[[^\]]+\])/g,s=/(#[^\s\+>~\.\[:]+)/g,a=/(\.[^\s\+>~\.\[:]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,u=/(:[^\s\+>~\.\[:]+)/g,p=/([^\s\+>~\.\[:]+)/g;return e=function(e,i){var s,a,l,c,u,p;if(e.test(n))for(s=n.match(e),a=0,l=s.length;a<l;a+=1)o[i]+=1,c=s[a],u=n.indexOf(c),p=c.length,r.push({selector:t.substr(u,p),type:i,index:u,length:p}),n=n.replace(c,Array(p+1).join(" "))},function(){var t=function(t){var e,o,r,i;if(t.test(n))for(e=n.match(t),o=0,r=e.length;o<r;o+=1)i=e[o],n=n.replace(i,Array(i.length+1).join("A"))},e=/\\[0-9A-Fa-f]{6}\s?/g,o=/\\[0-9A-Fa-f]{1,5}\s/g,r=/\\./g;t(e),t(o),t(r)}(),function(){var t=/:not\(([^\)]*)\)/g;t.test(n)&&(n=n.replace(t,"     $1 "))}(),function(){var t,e,o,r,i=/{[^]*/gm;if(i.test(n))for(t=n.match(i),e=0,o=t.length;e<o;e+=1)r=t[e],n=n.replace(r,Array(r.length+1).join(" "))}(),e(i,"b"),e(s,"a"),e(a,"b"),e(l,"c"),e(c,"b"),e(u,"b"),n=n.replace(/[\*\s\+>~]/g," "),n=n.replace(/[#\.]/g," "),e(p,"c"),r.sort(function(t,e){return t.index-e.index}),{selector:t,specificity:"0,"+o.a.toString()+","+o.b.toString()+","+o.c.toString(),specificityArray:[0,o.a,o.b,o.c],parts:r}},n=function(t,n){var o,r,i;if("string"==typeof t){if(-1!==t.indexOf(","))throw"Invalid CSS selector";o=e(t).specificityArray}else{if(!Array.isArray(t))throw"Invalid CSS selector or specificity array";if(4!==t.filter(function(t){return"number"==typeof t}).length)throw"Invalid specificity array";o=t}if("string"==typeof n){if(-1!==n.indexOf(","))throw"Invalid CSS selector";r=e(n).specificityArray}else{if(!Array.isArray(n))throw"Invalid CSS selector or specificity array";if(4!==n.filter(function(t){return"number"==typeof t}).length)throw"Invalid specificity array";r=n}for(i=0;i<4;i+=1){if(o[i]<r[i])return-1;if(o[i]>r[i])return 1}return 0},{calculate:t,compare:n}}();e.calculate=o.calculate,e.compare=o.compare},function(t,e,n){var o;void 0!==(o=function(){return["maction","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msubsup","msup","mtable","mtd","mtext","mtr","munder","munderover","semantics"]}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(21);return e.extend({inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0},constructor:function(t,n,o){e.call(this,t,n,o)},capture:function(t){var e=this,n=e.el.getAttribute("href");if(!n||"#"===n||0===n.indexOf("javascript"))return void e.emit(t);t&&!0===t.isText?(t.styles.href=t.styles.href||n,e.emit(t)):e.emit(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(49).extend({inheritStyleHandlers:!1,inheritBlockStyles:{"line-height":!0,indent:!0,"text-indent":!0},finish:function(){var t=this;t.emit({isBr:!0,styles:t.styles})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(21),o=n(40),r=n(0),i=n(26),s=n(2);return e.extend({computeBulbStyles:function(){var t,e=this,n=e.el;"hr"===n.getAttribute("yne-bulb-block")&&(t=i.getStyleNamesOfBlock(s.HR),r.each(t,function(t){var o=n.getAttribute("yne-style-"+t);o&&(e.styles[t]=o)}))},finish:function(){var t=this,e=new o;t.styles&&e.setBlockStyles(t.styles),t.emit(e)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(46),o=n(19),r=n(104);return e.extend({setup:function(){var t=this;t.ownerListHandler=t._findOwnerListHandler()},captureBlock:function(t){var e=this,n=null;e.emitBlock(),!e._listed&&t.getType&&"paragraph"===t.getType()?(n=e.createBlock(),n.append(t.getText()),e.emit(n)):e.emit(t)},emit:function(t){var n=this;t instanceof o&&(n._listed=!0),e.prototype.emit.call(n,t)},createBlock:function(){var t,n,r=this,i=r.ownerListHandler;return!r._listed&&i&&i.list?(i.increaseItemCounter(),n=i.list,t=new o({list:n}),n&&n.addItem&&n.addItem(t),t):e.prototype.createBlock.call(r)},_findOwnerListHandler:function(){for(var t=this.parent;t;){if(t instanceof r)return t;t=t.parent}}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(58);return function(t){return!!t&&e.equals(t,"white")}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0),o=n(20);return n(49).extend({finish:function(){var t,n,r=this.el;"todo"===r.getAttribute("data-media-type")&&(t=r.getAttribute("data-attr-content"),n=r.getAttribute("data-attr-checked"),e.isUndefined(t)&&e.isUndefined(n)||this.emit(new o({text:t||"",checked:"true"===n})))}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){function e(t,e){var n=t.match(/(@[\w_\-:\s]+)\n\s*\{(.|\n)*?\}/gm);null!==n&&n.forEach(function(t){var n=/@([\w_\-:\s]+)/.exec(t)[1].trim(),o=t.substring(t.indexOf("{")+1,t.indexOf("}")).trim(),r={};o.split(";").forEach(function(t){var e;-1!==t.indexOf(":")&&(e=t.split(":"),r[e[0].trim()]=e[1].trim())}),e[n]||(e[n]={}),s.extend(e[n],r)})}var o=n(46),r=n(23),i=n(19),s=n(0),a=n(6);return o.extend({setup:function(){var t,e,n,i,s,l,c,u=this.getRoot();o.prototype.setup.call(this),(t=this.el.getAttribute("style"))&&(e=/mso-list:(l\d+) (level\d+)/.exec(t))&&(s=e[1],l=e[2],n=this._getStyles(),(i=n["list "+s+":"+l])&&(c=u["mso-"+s],c||(c=u["mso-"+s]=new r({type:"bullet"===i["mso-level-number-format"]?r.UNORDERED:r.ORDERED,listId:a.newGUID()})),this.list=c,this.level=Number(l.replace("level","")),this.el.querySelector('[style="mso-list:Ignore"]').remove()))},createBlock:function(){if(!this.list)return o.prototype.createBlock.call(this);var t=this,e=t.list,n=new i({list:e,level:t.level});return e&&e.addItem&&e.addItem(n),n},_getStyles:function(){var t,n=this.getRoot(),o=this.el.ownerDocument,r={};return n.msoStyles?n.msoStyles:(t=o.querySelectorAll("style"),s.each(t,function(t){1===t.childNodes.length&&3===t.firstChild.nodeType&&e(t.firstChild.textContent,r)}),n.msoStyles=r,r)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(0),r=n(158);return function(t,n,i,s){var a,l=[];return t?(a=t.split(/\r\n?|\n/))&&a.length?(o.each(a,function(t){var e=r(t,o.clone(n),o.clone(i),s);e&&l.push(e)}),l):void e.warn("lines do not exist or lines.length is 0!"):void e.warn("no text when paste plain text!")}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(159),o=n(7),r=n(160),i=n(0);return function(t,n,s,a){if(null!=t){var l,c,u=new o;return a||(l=r.matchEnd(t))&&0===l.result.index&&i.extend(n||(n={}),{href:l.fullURI,underline:!0,color:"#003884"}),c=e(t,n),u.setText(c),s&&i.each(s,function(t,e){u.setBlockStyle(e,t)}),u}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(3);return function(t,n){var o;return t+="",t=t.replace(/[\r\n]/g,""),o=new e({text:t}),n&&o.setStyles(0,o.getLength(),n),o}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return{test:function(t){var e=/(https?:\/\/|www\.|ssh:\/\/|ftp:\/\/)[a-z0-9&_+\-\?\/\.=\#,:,@]+$/i,n=/[a-z0-9_+\-\.]+@[a-z0-9_+\-\.]+$/i;return t=String(t),e.test(t)||n.test(t)||!1},matchEnd:function(t){var e,n,o=/(https?:\/\/|www\.|ssh:\/\/|ftp:\/\/)[a-z0-9&_+\-\?\/\.=\#,:@%\(\)~]+$/i,r=/[a-z0-9_+\-\.]+@[a-z0-9_+\-\.]+$/i;return t=String(t),(e=o.exec(t))?(n=e[0],{mail:!1,fullURI:0===n.toLowerCase().indexOf("www.")?"http://"+n:n,result:e}):(e=r.exec(t),e?(n=e[0],{mail:!0,fullURI:"mailto:"+n,result:e}):void 0)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(0),r=n(23),i=n(28),s=n(2),a=n(106),l=n(6);return function(t,n){var c,u,p,d=[],h={},f={},g={},m=n?a.buildBlockFromCollabJSON:a.buildBlockFromJSON;if(o.isString(t))try{c=window.JSON.parse(t)}catch(n){e.error("parse json string error: ",t)}else o.isArray(t)&&(c=t);if(c&&c.length)return o.each(c,function(t){var e;(e=m(t))&&(t.listId&&t.listType&&s.isListItem(e)&&(u=t.listId,p=h[u],p||(p=new r({type:t.listType,listId:t.listId}),h[u]=p),e.setOwnerList(p)),t.ownerId&&s.isCatalogue(e)&&(u=t.ownerId,g[u]||(g[u]=l.newGUID(),f[g[u]]=new i({id:g[u]})),p=f[g[u]],e.setOwnerList(p)),d.push(e))}),d}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(0),r=n(3),i=n(7),s={create:function(){var t={};return t.data={},t.push=function(e,n){n||(n=1),t.data[e]?t.data[e]+=n:t.data[e]=n},t.count=function(){return Object.keys(t.data).length},t.mergeKeys=function(e){var n,r,i,a,l,c=s.create(),u=t.data;return o.each(t.orderedKeys(),function(t){i&&t-i<e?(a=u[i],l=u[t],r=a+l,n=(i*a+t*l)/r,c.push(n,r),i=null):(i&&c.push(i,u[i]),i=t)}),i&&c.push(i,u[i]),c.count()!==t.count()?c.mergeKeys(e):c},t.mostFrequencyKey=function(){var e,n=0;return o.each(t.data,function(t,o){t>=n&&(n=t,e=parseInt(o))}),e},t.orderedKeys=function(){var e;return e=Object.keys(t.data),e.sort(function(t,e){return t-e})},t}},a=function(t){var e={},n=t.split(",");return e.left=parseInt(n[0]),e.top=parseInt(n[1]),e.width=parseInt(n[2]),e.height=parseInt(n[3]),e.right=e.left+e.width,e.bottom=e.top+e.height,e},l=function(t,e){var n=(e.box.bottom-t.box.top)/t.box.height,o=(e.box.bottom-t.box.top)/e.box.height;return Math.max(n,o)>.8},c=function(t){return/^[a-z][a-z\d.,\/#!$%\^&\*;:{}=\-_`~()]*$/i.test(t)},u=function(t){var e=[/Epdf/,/For Evaluation Purposes Only/],n=!1;return e.forEach(function(e){e.test(t)&&(n=!0)}),n},p=function(t,e){t.box.top=t.box.top<e.box.top?t.box.top:e.box.top,t.box.bottom=t.box.bottom>e.box.bottom?t.box.bottom:e.box.bottom,t.box.left=t.box.left<e.box.left?t.box.left:e.box.left,t.box.right=t.box.right>e.box.right?t.box.right:e.box.right,t.box.height=t.box.bottom-t.box.top,t.box.width=t.box.right-t.box.left,t.words=e.words.concat(t.words),t.text=e.text+"  "+t.text},d=function(t){var e,n,r=t.json,i=[];for(r.box=a(r.boundingBox),o.each(r.lines,function(t){var n,s="";t.box=a(t.boundingBox),o.each(t.words,function(t){t.box=a(t.boundingBox),c(t.text)&&(s+=" "),s+=t.text}),t.text=s,u(t.text)?(n=r.lines.indexOf(t),i.push(n)):(e&&l(t,e)&&(p(t,e),n=r.lines.indexOf(e),i.push(n)),e=t)}),n=i.length-1;n>=0;n-=1)r.lines.splice(i[n],1)},h=function(t){var e,n=t.json,r=s.create(),i=s.create(),a=s.create(),l=s.create(),c=s.create(),u={};o.each(n.lines,function(t){r.push(t.box.left),i.push(t.box.right),e&&a.push(t.box.bottom-e.box.bottom),e=t,o.each(t.words,function(t){c.push(t.box.height),l.push(t.box.width)})}),u.baseLineHeight=a.mostFrequencyKey(),u.baseWordWidth=l.mostFrequencyKey(),u.baseFontHeight=c.mostFrequencyKey(),u.regionLeft=r.mergeKeys(u.baseFontHeight).mostFrequencyKey(),u.regionRight=i.mergeKeys(u.baseFontHeight).mostFrequencyKey(),t.stat=u},f=function(t){var e,n,o,r,i,s,a=t.json,l=[],c=t.stat.regionLeft,u=t.stat.regionRight,p=t.stat.baseWordWidth,d=t.stat.baseLineHeight,h=!1,f=!1,g="";for(e={startLineIndex:0},i=0;i<a.lines.length;i+=1){if(r=a.lines[i],h=f,c+1.5*p<r.box.left&&i!==e.startLineIndex&&(h=!0),o&&r.box.bottom-o.box.bottom>1.5*d&&(h=!0),h){for(e.endLineIndex=i-1,e.text=g.trim(),l.push(e),n=Math.floor((r.box.bottom-o.box.bottom)/d-1),s=0;s<n;s+=1)l.push({text:""});e={startLineIndex:i},g=r.text}else g+=r.text;o=r,f=u-1.5*p>r.box.right}e.endLineIndex=i,e.text=g,l.push(e),t.paragraphs=l},g=function(t){var e=t.json,n=t.stat,r=t.paragraphs;o.each(r,function(t){var o,r=e.lines[t.startLineIndex];r&&(o=r.words[0])&&Math.ceil((o.box.left-n.regionLeft)/n.baseWordWidth)/2>=1&&(t.text="\t"+t.text)})},m=function(t){var e,n,o,s=new i;return o=t.fontSize,e=t.text,e=e.replace(/[\r\n]/g,""),n=new r({text:e}),n.setStyle(0,n.getLength(),"font-size",o),s.setText(n),s},_=function(t){var e={};return e.json=t,d(e),h(e),f(e),g(e),e};return function(t){var n,r,s=[];if(o.isString(t))try{n=window.JSON.parse(t)}catch(n){e.error("parse json string error: ",t)}return o.isArray(t)&&(n=t),n&&o.each(n,function(t){o.each(t.regions,function(t){var e=_(t);o.each(e.paragraphs,function(t){r=m(t),s.push(r)})}),s.push(new i)}),s}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(0),n(11),n(1)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(t){function e(e,o,i,s,a){var l=t.call(this,{})||this;return l.listItemNodeProps={},r.DEBUG&&(l.listItemNodeProps.debugId=n.uniqueId()),l.listItemNodeProps.level=e||0,l.listItemNodeProps.block=o,l.listItemNodeProps.start=i,l.listItemNodeProps.end=s,l.addChildNodes(a),l}return i(e,t),e.prototype.addChildNodes=function(t){var e=this;t&&(n.isArray(t)||(t=[t]),n.each(t,function(t){t.parentNode=e,e.childNodes||(e.childNodes=[]),e.childNodes.push(t)}))},e.prototype.childrenCount=function(){return this.childNodes?this.childNodes.length:0},e.prototype.getChildStartIndex=function(){var t=this.childNodes||[],e=t[0];return e?e.getStartIndex():1},e.prototype.getLevel=function(){return this.listItemNodeProps.level},e.prototype.getParentNode=function(){return this.parentNode},e.prototype.getStartIndex=function(){return this.listItemNodeProps.block?this.listItemNodeProps.block.getIndex():1},e.prototype.hasChildren=function(){return this.childrenCount()>0},e.prototype.isChildOrdered=function(){var t=this.childNodes||[],e=t[0];return!!e&&e.isOrdered()},e.prototype.isOrdered=function(){return this.listItemNodeProps.block?this.listItemNodeProps.block.isOrdered():!!this.parentNode&&this.parentNode.isOrdered()},e.prototype.toHtml=function(t){var e,o,r,i,s,a,l=this.listItemNodeProps.block,c=[];return t=!0===t,this.hasChildren()?(s=l?l.toHtml(this.listItemNodeProps.start,this.listItemNodeProps.end,t):"",c.push(s),e=this.isChildOrdered()?"ol":"ul",r="<"+e+' yne-block-type="list"',o=this.getChildStartIndex(),o>1&&(r+=' start="'+o+'"'),r+=">",c.push(r),a=this.childNodes,n.each(a,function(e){var n=e.toHtml(t);c.push(n)}),i="</"+e+">",c.push(i)):(s=l?l.toHtml(this.listItemNodeProps.start,this.listItemNodeProps.end,t):"<li></li>",c.push(s)),c.join("")},e.prototype.initialize=function(){},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(73),n(10),n(110),n(72),n(51),n(111),n(74),n(75),n(112),n(113),n(14),n(109),n(52),n(115),n(76),n(165),n(107),n(77),n(166),n(50),n(114),n(167),n(168)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h,f,g,m,_,b,y,v,w,I,C,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttachmentRange=n,e.BlockRange=o,e.CatalogueRange=r,e.HandWriteRange=i,e.HeaderFooterRange=s,e.HeadingRange=a,e.HrRange=l,e.ImageRange=c,e.ListItemRange=u,e.NoteRange=p,e.ParagraphRange=d,e.QuoteRange=h,e.TableRange=f,e.TodoRange=g,e.UnknownRange=m,e.LinesRange=_,e.RectRange=b,e.MacroRange=y,e.BlockRangeMap=v,e.BlockRangeUtil=w,e.NoteRangeWalker=I,e.RangeUtil=C,e.SelectionChangeEvent=M}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(9),n(1)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.create=function(t){return t?t.startLine>=0&&t.endLine>=0&&t.startChar>=0&&t.endChar>=0?new e(t):void o.error("Failed to create LinesRange",t):void o.error("Failed to create LinesRange, no options")},e.prototype.collapse=function(t){t?(this.endLine=this.startLine,this.endChar=this.startChar):(this.startLine=this.endLine,this.startChar=this.endChar)},e.prototype.isCollapsed=function(){return this.startLine===this.endLine&&this.startChar===this.endChar},e.prototype.initialize=function(t){t=t||{},this.startLine=t.startLine||0,this.endLine=t.endLine||0,this.startChar=t.startChar||0,this.endChar=t.endChar||0},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(2),n(73),n(110),n(72),n(51),n(111),n(74),n(75),n(112),n(14),n(109),n(52),n(115),n(77),n(76)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h,f,g,m){"use strict";var _={};return _[n.ATTACHMENT]=o,_[n.CATALOGUE]=r,_[n.HEADING]=a,_[n.HR]=l,_[n.IMAGE]=c,_[n.LIST_ITEM]=u,_[n.PARAGRAPH]=p,_[n.TABLE]=h,_[n.TODO]=f,_[n.QUOTE]=d,_[n.HANDWRITE]=i,_[n.HEADER_FOOTER]=s,_[n.MACRO]=g,_[n.UNKNOWN]=m,_}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(2),n(113),n(52),n(50)],void 0!==(r=function(t,e,n,o,r,i){"use strict";return function(){function t(){}return t.buildNoteRangeFromJSON=function(t,e){return o.fromCollabJSON(t,e)},t.buildNoteRangeFromNonTextBlock=function(t){var e,s={};return s.block=t,n.isTable(t)&&(s.type=r.TYPES.ALL),e=i.createRangeByBlock(s),o.create({endRange:e,startRange:e})},t.buildNoteRangeFromParagraph=function(t,e,n){var r=i.createRangeByBlock({block:t,start:e,end:n});return o.create({endRange:r,startRange:r})},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(9)],void 0!==(r=function(t,e,n){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.createCommandTypeEvent=function(t){return new e({data:t,type:e.EVENT_TYPES.COMMAND})},e.createUserTypeEvent=function(t){return new e({data:t,type:e.EVENT_TYPES.USER})},e.prototype.getType=function(){return this.type},e.prototype.getData=function(){return this.data},e.prototype.isCommandType=function(){return this.type===e.EVENT_TYPES.COMMAND},e.prototype.isUserType=function(){return this.type===e.EVENT_TYPES.USER},e.prototype.initialize=function(t){this.type=t.type,this.data=t.data,delete this.options},e.EVENT_TYPES={COMMAND:1,USER:2},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(170),n(6),n(5),n(92),n(60),n(22),n(88),n(171),n(15),n(108),n(85),n(86),n(79)],void 0!==(r=function(t,e,n,o,r,i,s,a,l,c,u,p,d,h,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttachmentParse=n,e.CollabUtils=o,e.Constants=r,e.Events=i,e.FormatLocalSource=s,e.Freeze=a,e.HeadingMaps=l,e.HttpsConvert=c,e.Platform=u,e.Rect=p,e.ToCharArrayByCodePoint=d,e.UnknownInlineStyles=h,e.XssFilter=f}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(0);return{getFileType:function(t){if(e.isUndefined(t))return null;var n=t.toLowerCase().split(".");return{table:"table",pdf:"pdf",txt:"txt",text:"txt",mht:"html",doc:"word",docx:"word",excel:"excel",xls:"excel",xlsx:"excel",csv:"excel",ppt:"ppt",pps:"ppt",pptx:"ppt",ppsx:"ppt",flash:"flash",swf:"flash",flv:"flash",compress:"compress",zip:"compress",rar:"compress","7z":"compress",audio:"audio",mp3:"music",aac:"music",ogg:"music",wav:"music",flac:"music",m4a:"music",ape:"music",wma:"music",video:"video",rm:"video",rmvb:"video",avi:"video",mkv:"video",mpg:"video",mpeg:"video",wmv:"video",ts:"video",m4v:"video",mp4:"video",image:"image",jpg:"image",jpeg:"image",gif:"image",png:"image",bmp:"image",md:"md",scan:"scan",html:"html",htm:"html"}[n[n.length-1]]||"other"},getSizeString:function(t){var e=["B","KB","MB","GB","TB"],n=0,o=parseInt(t);if(o=o||0,isNaN(o))return"";if(o<=0)return"";for(;o>=1024&&n<3;)n++,o/=1024;return String(Math.floor(100*o)/100)+e[n]},splitFileFullName:function(t){if(e.isUndefined(t))return null;var n,o,r=t.lastIndexOf(".");return r<0?(n=t,o=""):0===r?(n="",o=t):(n=t.substring(0,r-1),o=t.substring(r-1)),{fileName:n,fileType:o}},getFileIconByName:function(t){var e="bulb__svg--type_other_large",n=this.getFileType(t);return n&&(e="bulb__svg--type_"+n+"_large"),e}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){var t=/^http[s]{0,1}:\/\/note.youdao.com/,e=!1;return{setUseConvert:function(t){e=!!t},isInnerResoures:function(e){return t.test(e)},getURL:function(n){return e&&this.isInnerResoures(n)?n.replace(t,"//note.youdao.com"):n}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(93),n(101),n(94),n(102)],void 0!==(r=function(t,e,n,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=n,e.TagConfig=o,e.Convert=r,e.HandlerMap=i}.apply(e,o))&&(t.exports=r)}])})},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(){function t(){}return t.isCollabCommand=function(t){var e=!1;return null!=t&&null!=t.collabProperties&&(e=t.collabProperties.isCollabCmd),e},t.isGUID=function(t){return!!t&&/^[\w\-]+$/.test(t)},t.isInlineStateSetCommand=function(t){return null!=t.isInlineStateSet&&!0===t.isInlineStateSet()},t.newGUID=function(){var t="";return t+=(Math.floor(100*Math.random())+"00").substr(0,2),t+=(Math.floor(100*Math.random())+"00").substr(0,2),t+="-",t+=Date.now().toString()},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){(function(o){var r;void 0!==(r=function(){for(var t,e=this&&this.DEBUG?this:window,n=e.DEBUG||null!=e.logLevel,o=e.console,r={},i=function(){},s="log warn error time timeEnd profile profileEnd".split(" "),a=s.length;--a>=0;)t=s[a],n&&o[t]?r[t]=o[t].bind(o):r[t]=i;return n&&e.alert?r.debugAlert=function(t){e.alert(t)}:r.debugAlert=r.error,r.DEBUG=n,r}.call(e,n,e,t))&&(t.exports=r)}).call(e,n(43))},function(t,e,n){var o,r;o=[n,e,n(4),n(1)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.add=function(t){var e=t.prototype.name,o=this._map;return e?o[e]?void n.error("Command class ["+e+"] exists!"):void(o[e]=t):void n.error("The Command class has no name!",t)},t.get=function(t){var e=this._map,o=e[t];return o||n.error("Command class ["+t+"] does not exist!"),o},t.getAllNames=function(){return o.keys(this._map)},t._map={},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";function o(t){return t instanceof c||"syncErrorThrowable"in t&&t[l.rxSubscriber]}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(85),s=n(19),a=n(164),l=n(86),c=function(t){function e(e,n,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!e){this.destination=a.empty;break}if("object"==typeof e){if(o(e)){var i=e[l.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new u(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new u(this,e,n,r)}}return r(e,t),e.prototype[l.rxSubscriber]=function(){return this},e.create=function(t,n,o){var r=new e(t,n,o);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=n,this},e}(s.Subscription);e.Subscriber=c;var u=function(t){function e(e,n,o,r){t.call(this),this._parentSubscriber=e;var s,l=this;i.isFunction(n)?s=n:n&&(s=n.next,o=n.error,r=n.complete,n!==a.empty&&(l=Object.create(n),i.isFunction(l.unsubscribe)&&this.add(l.unsubscribe.bind(l)),l.unsubscribe=this.unsubscribe.bind(this))),this._context=l,this._next=s,this._error=o,this._complete=r}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(28),o=n(4),r=n(1),i={_keyHandlerMap:{},_parseKey:function(t){return t+="",t=t.replace(/[\s\uFEFF\xA0]/g,""),t=t.toLowerCase()},_makeMapKey:function(t,e){return(t=t||"main")+"-"+e},getHandler:function(t,e){return this._keyHandlerMap[this._makeMapKey(t,e)]},register:function(t){if(!(t&&t.name&&t.key&&t.action))return void o.warn("The param is not valid!",t);var e,n,i,s=this._keyHandlerMap;return n=r.defaults({},t,{scope:"main",read:!1,preventDefault:!0}),n.key=e=this._parseKey(t.key),e?(i=this._makeMapKey(n.scope,n.name),s[i]||r.some(s,function(t){return t.key===e&&t.scope===n.scope})?void o.error("The key handler is conflict with other",n):void(s[i]=n)):void o.warn("The key is not valid!",t)},exec:function(t,e,n,r){var i=this._makeMapKey(t,e),s=this._keyHandlerMap[i];return s?n.isReadOnly&&n.isReadOnly()&&!s.read?void(r&&r.preventDefault&&s.preventDefault&&r.preventDefault()):(s.preventDefault&&r&&r.preventDefault&&r.preventDefault(),void s.action.apply(s,[n,r,e])):void o.warn("No key handler for scope/name: ",t,e)},matchKey:function(t,e){if(e){var n,i=this._keyHandlerMap;return n=r.find(i,function(n){return n.key===e&&n.scope===t}),n?n.name:void o.warn("Can not find the key handler with key: "+e)}},getAllHandlerNamesOfScope:function(t){var e=[];return r.each(this._keyHandlerMap,function(n){n.scope===t&&e.push(n.name)}),e}};return e.extend({initialize:function(t){var e=this;t=r.defaults(t||{},{scope:"main"}),e._scope=t.scope,e._customMap={},delete e.options},getKey:function(t){var e=this;return(e._customMap[t]||i.getHandler(e._scope,t)||{}).key},bind:function(t){var e=this,n=e.getKey(t);n&&e.trigger("bind-key",n)},unbind:function(t){var e=this,n=e.getKey(t);n&&e.trigger("unbind-key",n)},updateKey:function(t,e){if(t&&e){var n=this;i.getHandler(n._scope,t)&&(n.unbind(t),n._customMap[t]={key:e},n.bind(t))}},hasHandler:function(t){var e=this;return!!i.getHandler(e._scope,t)},execWithKey:function(t,e,n){var s,a=this;if(r.some(a._customMap,function(e,n){if(e.key===t)return s=n,!0}),s||(s=i.matchKey(a._scope,t)),!s)return void o.warn("no handler for scope/key ",a._scope,t);i.exec(a._scope,s,e,n)},execWithName:function(t,e,n){i.exec(this._scope,t,e,n)},getAvailableHandlerNames:function(){return i.getAllHandlerNamesOfScope(this._scope)}},{register:function(t){i.register(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){(function(e){t.exports=e.$=n(281)}).call(e,n(43))},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(6),i=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(r.Subscriber);e.OuterSubscriber=i},function(t,e,n){"use strict";function o(t,e,n,o){var d=new u.InnerSubscriber(t,n,o);if(d.closed)return null;if(e instanceof l.Observable)return e._isScalar?(d.next(e.value),d.complete(),null):(d.syncErrorThrowable=!0,e.subscribe(d));if(i.isArrayLike(e)){for(var h=0,f=e.length;h<f&&!d.closed;h++)d.next(e[h]);d.closed||d.complete()}else{if(s.isPromise(e))return e.then(function(t){d.closed||(d.next(t),d.complete())},function(t){return d.error(t)}).then(null,function(t){r.root.setTimeout(function(){throw t})}),d;if(e&&"function"==typeof e[c.iterator])for(var g=e[c.iterator]();;){var m=g.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(e&&"function"==typeof e[p.observable]){var _=e[p.observable]();if("function"==typeof _.subscribe)return _.subscribe(new u.InnerSubscriber(t,n,o));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=a.isObject(e)?"an invalid object":"'"+e+"'",y="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(y))}}return null}var r=n(25),i=n(166),s=n(167),a=n(162),l=n(0),c=n(67),u=n(445),p=n(87);e.subscribeToResult=o},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return{COMPAT:"compat",DEFAULT_BACKGROUND:"NoBackground",INTERM:"interm",INDENT_WIDTH:28,MAX_LIST_ITEM_LEVEL:9,LINE_BREAK:/Windows/.test(window.navigator.userAgent)?"\r\n":"\n",IS_MAC:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),QUOTE_PADDING:"0 10px 0 8.5px",QUOTE_BORDER_LEFT:"1.5px solid #e8e8e8",QUOTE_MARGIN:"0 5px",PLATFORM_LINE_HEIGHT:1.75,PAGE_TYPE_A4:"A4",PAGE_TYPE_B5:"B5",PAGE_TYPE_NONE:"NONE",PAGE_TYPE_TEST:"TEST",PAGE_HEIGHT_A4:1123,PAGE_HEIGHT_B5:945,PAGE_HEIGHT_NONE:Number.MAX_VALUE,PAGE_HEIGHT_TEST:100,PAGE_WIDTH_A4:792,PAGE_WIDTH_B5:663,PAGE_WIDTH_NONE:Number.MAX_VALUE,PAGE_WIDTH_TEST:792,PAGE_SPLIT_BLANK_HEIGHT:70,PAGE_SPLIT_MIDDLE_HEIGHT:10,TOLERABLE_HEIGHT_CHANGE:3,PAGE_CLASS_A4:"bulb__page-A4",PAGE_CLASS_B5:"bulb__page-B5",PAGE_CLASS_TEST:"bulb__page-TEST",WSClientStatusCode:{Connecting:0,Open:1,Closing:2,Closed:3,Ready:5,Disabled:10,Intializing:11},WSEVENTID_HOST_CLOSE:4500,MAX_MESSAGE_SIZE:5e3,MAX_UNDO_STACK_SIZE:20,MAX_CMD_DELAY_MILLIS:4e3,MAX_INIT_DELAY_MILLIS:2e3,MAX_LOCAL_CMD_COUNT_PER_SEC:20,REGULAR_CMD_SENT_MILLIS:2e3,LATENCY_TO_SHOW_SET_CONTENT_PROGRESS:2e3,CJSON_ACTION:"action",CJSON_COMMANDID:"cmdId",CJSON_COMMANDOWNER:"cmdOwner",CJSON_COLLABCOMMANDS:"collabCmds",CJSON_COLLAB_NOTE_READY:"collabNoteReady",CJSON_COLLAB_VERSION:"collabVersion",CJSON_DATA_CMD_ERROR:"dataCmdError",CJSON_ENDVERSION:"endVersion",CJSON_ERROR_TO_CLOSE:"errToClose",CJSON_FINALVERSION:"finalVersion",CJSON_INITIALIZE_COLLABSTARTED:"collabStarted",CJSON_INITIALIZE_DONE:"done",CJSON_INITIALIZE_RESULT:"initResult",CJSON_IS_HISTORY_SAVE:"isHistorySave",CJSON_IS_SERVER_CMD:"isServerCmd",CJSON_LOCKCOLOR:"lockColor",CJSON_LOCK_BLOCK_ID:"lockedBlkId",CJSON_MODIFIERS:"modifiers",CJSON_NICKNAME:"nickname",CJSON_NONDATACOMMANDS:"nondataCmds",CJSON_NOTEVERSIONUPDATE:"versionUpdate",CJSON_PORTRAIT:"portraitUrl",CJSON_READONLY:"readOnly",CJSON_SESSIONID:"sessionId",CJSON_SESSIONPROPERTY:"sessionProp",CJSON_STARTVERSION:"startVersion",NONDATACMD_BLOCKSELECTION:"nb_BlkSelection",NONDATACMD_CLINTPONG:"nb_clientPong",NONDATACMD_COLLABCLOSE:"nb_CollabClose",NONDATACMD_COLLABINFO:"nb_CollabInfo",NONDATACMD_DATACMDFAILED:"nb_dataCmdFailed",NONDATACMD_GETMODIFIERS:"nb_getModifiers",NONDATACMD_NOTESAVE:"nb_noteSave",NONDATACMD_LOCKRELEASE:"nb_lockRelease",NONDATACMD_SESSIONINITIALIZED:"nb_sessionInitialized",NONDATACMD_SEVERPING:"nb_serverPing",OPTIONS_COLLABID:"collabId",OPTIONS_NICKNAME:"nickname",OPTIONS_NOTEVERSION:"noteVersion",OPTIONS_PORTRAIT:"portraitUrl",OPTIONS_SESSIONTYPE:"sessionType",OPTIONS_SESSIONID:"sessionId",OPTIONS_USERID:"userId",OPTIONS_BUILDVERSION:"buildVersion",OPTIONS_RECONNECT:"reconn",ERRORID_FAILED_RECEIVE_COLLAB_CMD:4001,ERRORID_FAILED_SEND_LOCAL_CMD:4002,ERRORID_COLLAB_ENGINE_NULL:4003,CONNECTION_FAILED_SEND:"",CONNECTION_NO_CONNECTED:"",CONNECTION_REFUSED:"",CONNECTION_SERVER_CLOSED:"",ERROR_CODE:"",ERROR_CONFLICT_EXECUTION:"",ERROR_FAILED_SEND_LOCAL_CMD:"",ERROR_FAILED_RECEIVE_COLLAB_CMD:"",ERROR_EXCEPTION:"",ERROR_REASON:"",ERROR_UNMATCHED_VERSION:"/",INVALIDACTION_BLANK_NOTE:"",INVALIDACTION_BLOCKS_DIRTY:"",INVALIDACTION_COLLAB_NOT_READY:"",INVALIDACTION_EDIT_READ_ONLY:"",INVALIDACTION_EDIT_NOT_READY:"",INVALIDACTION_FINALVERSION_NOTREADY:"",INVALIDACTION_EMPTY_CMDJSON:"",INVALIDACTION_EMPTY_LOCALCMD:"",INVALIDACTION_INVALID_LOCALCMD:"",INVALIDACTION_FAILED_COLLABCMD:"",INVALIDACTION_FAILED_LOCALCMD:"",INVALIDACTION_INVALID_CMD_VERSION:"",INVALIDACTION_INVALID_RANGE:"",INVALIDACTION_TOO_MANY_CMD:"",INVALIDACTION_TOO_LARGE_MESSAGE:"",INVALIDACTION_UNSUPPORTED_CMD:"",INVALIDACTION_WORK_ON_LOCKED_BLOCK:"",LOADING_IMAGE_PATH:"http://note.youdao.com/editor/collab/loading.gif?47",INSERT_BLANK_CATALOGUE_TEXT:""}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(153),i=n(3),s=n(4),a=n(2),l=a.NoteRange,c=a.RangeUtil,u=a.BlockTypes;return e=r.extend({name:"UnknownCompositeCommand",_args:null,_cmds:null,_affectedBlockIds:null,_note:null,isSimple:!1,startingRange:null,endingRange:null,effected:!1,isLocalExecutedCmd:null,finalNoteVersion:null,originalNoteVersion:null,skipBlockLocking:!1,isOriginalCmd:!1,sendingToCollabServerMillis:null,isReadyToApply:null,initialize:function(){var t,n=this;n._args=n.options.args||{},n._args.collabProperties=n._args.collabProperties||{},t=n._args.collabProperties,n._cmds=[],n._affectedBlockIds=[],e.__super__.initialize.apply(n),!0===t.isCollabEnabled&&(t.isCollabCmd&&(n.finalNoteVersion=t.finalNoteVersion),n._initializeAffectedBlocks(),n.rangeIsRequired=!0,n.isReadyToApply=!0,n._args.isOriginalCmd&&(n.isOriginalCmd=!0))},finilize:function(){},_applyCommandToComposite:function(t,e){var n,o=this,r=o._cmds;r||(r=o._cmds=[]),n=t.apply(),t.isSimple?o.effected=!1!==n:(o.effected=o.effected||t.effected,o._affectedBlockIds||s.error("_affectedBlockIds cannot be null. please check the cmd("+o.name+") initialize has invoked its parent method")),e?o.setEndingRange(e):!t.isSimple&&t.getEndingRange()&&o.setEndingRange(t.getEndingRange()),r.push(t)},apply:function(){throw"Method not implemented."},doReapply:function(t){var e,n,o=this,r=o._cmds;if(i.isCollabCommand(t))return o._reapplyCollabCmd(t);if(!r||!r.length)return s.warn("doReapply(): the composite command `"+o.name+"`no _cmds"),!0;for(e=r.length,n=0;n<e;++n)r[n].doReapply(t);return!0},doUnapply:function(t){var e,n=this,o=n._cmds;if(i.isCollabCommand(t))return n._unapplyCollabCmd(t);if(!o||!o.length)return s.warn("doUnapply(): the composite command `"+n.name+"`no _cmds"),!0;for(e=o.length-1;e>=0;--e)o[e].doUnapply(t);return!0},setStartingRange:function(t){var e=this;if(!l.isNoteRange(t))return void s.warn("noteRange is not a NoteRange",t);e.startingRange=t,e.options.args.range=e.startingRange},setEndingRange:function(t){var e=this,n=[];if(!l.isNoteRange(t))return void s.warn("noteRange is not a NoteRange",t);e.endingRange=t,n=e._getAffectedBlockIdsFromRange(e.options.note,e.endingRange),e.pushAffectedBlockIds(n)},getStartingRange:function(){return this.startingRange},getEndingRange:function(){return this.endingRange},canBeMerged:function(t){var e=this,n=["comp.KeyTextInput"];return!!o.contains(n,e.name)&&(!e.isCollabUndo&&!e.isCollabRedo&&t.name===e.name&&t.getCmdId()!==e.getCmdId()&&t.isLocalExecutedCmd===e.isLocalExecutedCmd)},executeAtomicCommand:function(t,e){this._applyCommandToComposite(t,e)},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON,r=n.collabProperties.coreEditor;e.__super__.fromCollabJSON.apply(t),o&&(o.startNoteRange&&(n.range=c.buildNoteRangeFromJSON(o.startNoteRange,r),n.range?t.setStartingRange(n.range):s.warn("Failed to re-build the startNoteRange",o.startNoteRange)),o.endNoteRange&&(n.endRange=c.buildNoteRangeFromJSON(o.endNoteRange,r),n.endRange&&t.setEndingRange(n.endRange)),o.cmdNoteVersion&&(t.originalNoteVersion=o.cmdNoteVersion),t.skipBlockLocking=o.skipBlockLocking)},getAffectedBlockIds:function(){return o.clone(this._affectedBlockIds)},getCmdFinalNoteVersion:function(){return this.finalNoteVersion},getCmdOriginalNoteVersion:function(){return this.originalNoteVersion},getCollabProps:function(){return this._args.collabProperties},getLockedBlockIds:function(){var t=this,e=[],n=t.endingRange;return t.isCollabUndo?n=t.startingRange:t.skipBlockLocking&&(n=null),l.isNoteRange(n)?e.push(n.getEndBlockRange().getBlockId()):n&&s.error("locked targetRange should be a NOTE range",n),e},getIgnoreUndoRedo:function(){return this._args.ignoreUndoRedo},isSingleBlockAffected:function(){var t=this,e=!0;return t._args.range?l.isNoteRange(t._args.range)&&t._args.range.isInMultiBlock()&&(e=!1):e=!1,e},isValidStartNoteRange:function(){return!0},mergeLocalCmd:function(){},pushAffectedBlockIds:function(t){var e=this;t&&(e._affectedBlockIds=o.union(e._affectedBlockIds,t))},resetAffectedBlockIds:function(t){var e=this;e._affectedBlockIds=[],e.pushAffectedBlockIds(t)},setCmdFinalNoteVersion:function(t){this.finalNoteVersion=t},setCmdOriginalNoteVersion:function(t){this.originalNoteVersion=t},setIgnoreUndoRedo:function(t){this._args.ignoreUndoRedo=t},toCollabJSON:function(){var t,n=this,r=e.__super__.toCollabJSON.apply(n),a=[],c=n.getStartingRange(),u=!1;if(n.isOriginalCmd)if(l.isNoteRange(c))r.startNoteRange=c.toCollabJSON();else if(n.rangeIsRequired)return s.error("startingRange should be noteRange",c),null;if(n.isCollabUndo&&(r.isCollabUndo=n.isCollabUndo),n.isCollabRedo&&(r.isCollabRedo=n.isCollabRedo),n.originalNoteVersion&&(r.cmdNoteVersion=n.originalNoteVersion),n.isCollabUndo||n.isCollabRedo){if(n.cmdId=i.newGUID(),r.cmdId=n.cmdId,n.isOriginalCmd)if(l.isNoteRange(n.endingRange))r.endNoteRange=n.endingRange.toCollabJSON();else if(n.rangeIsRequired)return s.error("endingRange should be a noteRange:",n.endingRange),null;o.each(n._cmds,function(e){u||(e.rangeIsRequired=!1,n.isCollabUndo?(e.setCollabRedo(!1),e.setCollabUndo(!0)):(e.setCollabRedo(!0),e.setCollabUndo(!1)),t=e.toCollabJSON(),t?a.push(t):(u=!0,s.error("Failed to get cmdJSON",e)))}),r.affectedBlockIds=n._affectedBlockIds.join(",")}return u?null:(a.length>0&&(r.innerCmds=a),n.isLocalExecutedCmd&&(r.isLocalExecutedCmd=!0),r.skipBlockLocking=n.skipBlockLocking,r)},_getAffectedBlockIdsFromRange:function(t,e){var n=[],r=[];if(t&&e){switch(e.getType()){case l.TYPE:n=t.getInterBlocks(e.getStartBlockRange().block,e.getEndBlockRange().block,!0);break;case u.PARAGRAPH:e.block&&n.push(e.block);break;default:s.error("pending supported range type:"+e.getType())}n&&n.length>0&&o.each(n,function(t){r.push(t.getId())})}return r},_initializeAffectedBlocks:function(){var t=this,e=[],n=t.options.note,o=t._args.range;o&&(e=t._getAffectedBlockIdsFromRange(n,o),t.pushAffectedBlockIds(e))},_reapplyCollabCmd:function(t){var e=t.collabProperties.cmdJSON;if(e&&e.innerCmds){var n,o=e.innerCmds,r=o.length;for(n=0;n<r;++n){var i=t.collabProperties.coreEditor.buildInnerCommandFromJSON(o[n],t);i&&(i.doReapply(i._args),i.isSimple&&(t.collabProperties.redoUndoEffected=!0))}}},_unapplyCollabCmd:function(t){var e=t.collabProperties.cmdJSON;if(e&&e.innerCmds){var n,o=e.innerCmds,r=o.length;for(n=r-1;n>=0;--n){var i=t.collabProperties.coreEditor.buildInnerCommandFromJSON(o[n],t);i&&(i.doUnapply(i._args),i.isSimple&&(t.collabProperties.redoUndoEffected=!0))}}}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(1),n(4)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.setTemplate=function(t,e,o){var r=t+"/"+e;this.JST_MAP[r]=n.template(this.trimTempalte(o))},t.getTemplate=function(t,e){var n=t+"/"+e,r=this.JST_MAP[n];if(!r){if(o.DEBUG)throw new Error("JST has no template: "+n);o.error("JST has no template: "+n)}return r},t.render=function(t,e,n){var r=this.getTemplate(t,e);if(r)return r(n);o.error("no tempalte: "+t+"/"+e+".jst","template/jst.js")},t.load=function(t,e){var n=this;t.keys().forEach(function(o){var r=o.match(/([^\/]*)\.jst$/)[1];n.setTemplate(e,r,t(o))})},t.trimTempalte=function(t){if(t=t||""){var e,n,o=t.split(/[\r\n]/),r=o.length;for(e=0;e<r;e++)n=o[e]||"",n=n.trim(),o[e]=n;return o.join("")}},t.JST_MAP={},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";var o=n(72),r=n(73);e.async=new r.AsyncScheduler(o.AsyncAction)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(29),n(4),n(11)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkStatus=function(t,o){this.resetStatus(),!1===this.queryAction(t,o)&&(this.isDisabled=this.isHidden=!0),this.isHidden||this.type===e.TYPE.SUBMENU&&(n.invoke(this.items,"checkStatus",t,o),this.isDisabled=0===this.items.filter(function(t){return!t.isHidden&&!t.isDisabled}).length)},e.prototype.onSelected=function(){if(this.keyHandlerName)return void this.editor.getController().execKeyHandler(this.keyHandlerName);this.selectAction()},e.prototype.queryAction=function(t,e){r.error("The queryAction() of "+this.name+" should be implemented by options!")},e.prototype.reset=function(){this.resetStatus()},e.prototype.select=function(){this.onSelected()},e.prototype.selectAction=function(){r.error("The selectAction() of "+this.name+" should be implemented by options!")},e.prototype.simplify=function(){var t={index:this.index,type:this.type,isDisabled:this.isDisabled,isHidden:this.isHidden,isDefault:this.isDefault,label:this.label,key:this._getKey()};return this.items&&this.items.length&&(t.items=n.map(this.items,function(t){if(t&&t.simplify)return t.simplify()})),t},e.prototype.initialize=function(t){t=t||{},this.name=t.name,this.label=t.label,this.type=t.type||e.TYPE.ITEM,this.isDefault=!!t.isDefault,this.isDisabled=!!t.isDisabled,this.isHidden=!!t.isHidden,this.key=t.key||"",this.keyHandlerName=t.keyHandlerName||"",this.items=t.items,null!=t.queryAction&&(this.queryAction=t.queryAction),null!=t.selectAction&&(this.selectAction=t.selectAction)},e.prototype.resetStatus=function(){this.isDefault=!1,this.isDisabled=!1,this.isHidden=!1},e.prototype._getKey=function(){var t=this.key||"",o={meta:"",ctrl:"",alt:"",shift:""},i=this.editor.getController().keyHandlerManager;return this.keyHandlerName&&i&&(t=i.getKey(this.keyHandlerName)),t?(t=t.replace(/[\s\uFEFF\xA0]/g,""))?(t=t.toLowerCase(),t=t.replace(/mod/,e.MOD),s.IS_MAC?(n.each(o,function(e,n){t=t.replace(n,e)}),t=t.replace(/\+([a-z])/g,function(t,e){return" "+e.toUpperCase()})):t=t.replace(/\+([a-z])/g,function(t,e){return"+"+e.toUpperCase()}),t=t.replace(/^([a-z])/g,function(t,e){return e.toUpperCase()})):"":(r.warn("no key for ContextMenuItem: "+this.name),"")},e.TYPE={ITEM:0,SUBMENU:1,SPLIT:2},e.MOD=s.IS_MAC?"meta":"ctrl",e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(111),o=n(154),r=n(1),i=n(4),s=n(44),a=n(26),l=n(24),c=n(51),u=n(112),p=n(155),d=n(156),h=n(83),f=n(113),g=n(11),m=n(2),_=m.Paragraph,b=m.ListItem,y=m.Heading,v=m.Catalogue,w=m.Todo,I=m.Quote,C=m.Macro,M=m.RichText,T=m.RangeUtil,k=m.BlockRangeUtil,S=m.BlockTypes,N=m.SupportedInlineStyles,x=m.NoteRange,A=m.TableRange;return{createNewListItem:function(t,e,n){var o=new b({id:e,level:t.getLevel(),list:t.getOwnerList(),text:n});return o.setBlockStyles(t.getBlockStyles()),o},createNewParagraph:function(t,e,n,o){var r=new _({blockId:e,text:o?new M({text:n.toString()}):n});return!t||S.isHeading(t)||S.isCatalogue(t)||r.setBlockStyles(t.getBlockStyles()),r},createMacro:function(t,e,n,o){return new C({blockId:t,name:e,content:n,version:o})},createNewTodo:function(t,e){var n=new w(e);return t&&n.setBlockStyles(t.getBlockStyles()),n},createNewQuote:function(t,e){var n=new I(e);return t&&n.setBlockStyles(t.getBlockStyles()),n},createNewHeading:function(t,e,n,r,i){var s,a;return n.getLength&&!i&&(a=n.getLength(),S.isHeading(t)&&"b"===t.getLevel()&&(n=this._clearHeadingInlineStyle("color",t,n)),n.setStyles(0,a,o.headingInlineStyles[r])),s=new y({id:e,text:n,level:r}),s.setBlockStyles(t.getBlockStyles()),o.headingBlockStyles[r]&&!i&&s.setBlockStyles(o.headingBlockStyles[r]),s},_clearHeadingInlineStyle:function(t,e,n){var r,i=e.getLevel(),s=o.headingInlineStyles[i],a=s[t];for(r=0;r<n.getLength();r++)a===n.getStylesAtIndex(r)[t]&&delete n.richTextProps.data[r].styles[t];return n},createNewCatalogue:function(t,e){var n=new v(e);return!e.ownerList&&S.isCatalogue(t)&&(e.ownerList=t.getOwnerList()),n=new v(e),t&&n.setBlockStyles(t.getBlockStyles()),n},isForCatalogueBlock:function(t){return S.isHeading(t)&&t.getLevel()<4&&!t.isEmpty()&&t.getText().toString().trim()},deleteSelectedContent:function(t,e,n){var o,r,l,c,u;if(!x.isNoteRange(n))return void i.error("deleteSelectedContent: selectedNoteRange should be a NoteRange",n);o=n.getStartBlockRange(),l=n.getEndBlockRange(),r=o.block,c=l.block,S.isTextBlock(r)&&t.executeAtomicCommand(new s({block:r,start:o.start,end:o.end})),n.isInMultiBlock()&&(u=e.getInterBlocks(r,c),u&&u.length>0&&t.executeAtomicCommand(new a({note:e,blocks:u})),S.isTextBlock(c)&&t.executeAtomicCommand(new s({block:c,start:l.start,end:l.end})))},getBackwardBlockRange:function(t,e){var n=t.getPreBlock(e);if(n)return k.createRangeByBlock({block:n,allContent:!1,collapseToStart:!1})},getForwardBlockRange:function(t,e){var n=t.getNextBlock(e);if(n)return k.createRangeByBlock({block:n,allContent:!1,collapseToStart:!0})},insertTabChar:function(t,e,n,o){var r;r=new M({text:"\t"}),r.setStyles(0,r.getLength(),o),t.executeAtomicCommand(new c({block:e,start:n,text:r}))},isInSameList:function(t){var e,n=!1;return S.isListItem(t[0])?n=r.every(t,function(t,n){if(S.isListItem(t)){if(0===n)return e=t.getOwnerList(),!0;if(t.getOwnerList()===e)return!0}return!1}):n},recogLink:function(t,n,o,r){var i,s,a={color:"#003884",underline:!0};i=n.getText().toString().slice(o,r);for(var l=r-1;l>=o;l--)if(n.getTextStyle("href",l,l+1)[0]){o=l;break}i=i.slice(o,r),(s=e.matchEnd(i))&&s.result&&(a.href=s.fullURI,t.executeAtomicCommand(new u({blocks:[n],styleNameValues:a,start:o+s.result.index,end:r})))},replaceBlockWithListItem:function(t,e,n,o,r,i){var s,c=this,u=o.getId();return t.executeAtomicCommand(new a({note:e,blocks:[o]})),s=c.createNewListItem(n,u,r),t.executeAtomicCommand(new l({note:e,newBlks:[s],preBlk:i})),s},replaceBlockWithParagraph:function(t,e,n,o,r){var i,s=this,c=n.getId(),u=e.getPreBlock(n);return i=s.createNewParagraph(n,c,o,r),i.setInlineStylesForEmpty(r),t.executeAtomicCommand(new a({note:e,blocks:[n]})),t.executeAtomicCommand(new l({note:e,newBlks:[i],preBlk:u})),i},replaceBlockWithHeading:function(t,e,n,o,r){var i,s=this,c=n.getId(),u=e.getPreBlock(n);return i=s.createNewHeading(n,c,o,r),t.executeAtomicCommand(new a({note:e,blocks:[n]})),t.executeAtomicCommand(new l({note:e,newBlks:[i],preBlk:u})),i},deleteHref:function(t,e,n,o){var r={href:"",color:"#393939",underline:!1};t.executeAtomicCommand(new u({blocks:[e],styleNameValues:r,start:n,end:o}))},resetAllStyles:function(t,e,n){this.setStylesOnNoteRange(t,e,n)},setNonTextBlockAsEndingRange:function(t,e){var n=T.buildNoteRangeFromNonTextBlock(e);t.setEndingRange(n)},setBlockStyleByPreBlock:function(t,e){var n,o;t&&t.setInlineStylesForEmpty&&t.isEmpty()&&e&&e.getText&&!S.isHeading(e)&&(e.isEmptyContent()?o=e.getInlineStylesForEmpty():(n=e.getText(),o=n.getStylesAtIndex(n.getLength()-1),o=r.clone(o)),t.setInlineStylesForEmpty(o))},setStylesOnNoteRange:function(t,e,n,o,i){var s,a=this,l=n.getStartBlockRange(),c=l.block,p=n.getEndBlockRange(),d=p.block,h=[],f=[],g=[],m=[];return void 0===o&&void 0===i&&(s=!0,i=N.getAllDefault(["href"])),o=o||{},i=i||{},a._isFullSelected(l)?f.push(c):(s&&(o=c.getDefaultBlockStyles()),a._setBlocksBlockStyles(t,[c],o)),n.isInMultiBlock()&&(h=e.getInterBlocks(c,d),f=r.union(f,h),a._isFullSelected(p)?f.push(d):(s&&(o=d.getDefaultBlockStyles()),a._setBlocksBlockStyles(t,[d],o))),r.each(f,function(e){s&&(o=e.getDefaultBlockStyles()),a._setBlocksBlockStyles(t,[e],o),S.isTextBlock(e)&&g.push(e),S.isTable(e)&&m.push(e)}),r.isEmpty(i)||(S.isTextBlock(c)&&!a._isFullSelected(l)&&t.executeAtomicCommand(new u({blocks:[c],styleNameValues:s&&S.isHeading(c)?c.getDefaultInlineStyles():i,start:l.start,end:l.end})),n.isInMultiBlock()&&S.isTextBlock(d)&&!a._isFullSelected(p)&&t.executeAtomicCommand(new u({blocks:[d],styleNameValues:s&&S.isHeading(d)?d.getDefaultInlineStyles():i,start:p.start,end:p.end})),f.length>0&&(g=a._filterHeadingBlock(t,g,i,s),t.executeAtomicCommand(new u({blocks:g,styleNameValues:i,fullText:!0})))),this._filterTableBlocks({isStyleReset:s,startBlockRange:l,endBlockRange:p,noteRange:n,fullSelectedTableBlocks:m,inlineStyles:i,blockStyles:o,targetCmd:t})},_filterHeadingBlock:function(t,e,n,o){if(!o)return e;var r=e.filter(function(t){if(!S.isHeading(t))return t}),i=e.filter(function(t){if(S.isHeading(t))return t});return i.length>0&&i.forEach(function(e){t.executeAtomicCommand(new u({blocks:[e],styleNameValues:e.getDefaultInlineStyles(),fullText:!0}))}),r},_filterTableBlocks:function(t){var e=this,n=t.startBlockRange,o=t.endBlockRange,i=t.noteRange,s=t.fullSelectedTableBlocks,a=t.inlineStyles,l=t.blockStyles,c=t.targetCmd,u=n.block,p=o.block;n.isOnCellEdit&&n.isOnCellEdit()||e._adaptTableStylesInlineToBlock(a,l,t.isStyleReset),r.isEmpty(a)||(S.isTable(u)&&e._setTableCellInlineStyles({table:u,range:n,styles:a,cmd:c}),i.isInMultiBlock()&&S.isTable(p)&&e._setTableCellInlineStyles({table:p,range:o,styles:a,cmd:c}),s.forEach(function(t){e._setTableCellInlineStyles({table:t,styles:a,isAll:!0,cmd:c})})),r.isEmpty(l)||(S.isTable(u)&&e._setTableCellBlockStyles({table:u,range:n,styles:l,cmd:c}),i.isInMultiBlock()&&S.isTable(p)&&e._setTableCellBlockStyles({table:p,range:o,styles:l,cmd:c}),s.forEach(function(t){e._setTableCellBlockStyles({table:t,isAll:!0,styles:l,cmd:c})}))},_adaptTableStylesInlineToBlock:function(t,e,n){!r.isEmpty(t)&&t["back-color"]&&(e.backColor=t["back-color"],n||delete t["back-color"])},_setTableCellInlineStyles:function(t){var e,n,o=t.isAll,r=t.range,i=t.cmd,s=o?A.TYPES.ALL:A.TYPES.NORMAL;r?e=r.getAsRectRange():s===A.TYPES.ALL&&(r=A.create({block:t.table,type:A.TYPES.ALL}),e=r.getAsRectRange()),n=e?e.getRect():null,i.executeAtomicCommand(new d({table:t.table,styles:t.styles,type:s,rect:n}))},_setTableCellBlockStyles:function(t){var e=t.isAll,n=t.range?t.range:A.create({block:t.table,type:A.TYPES.ALL}),o=t.cmd,r=n.getAsRectRange(),i=e?A.ALL:A.NORMAL,s=n&&r?r.getRect():null;o.executeAtomicCommand(new h({table:t.table,styles:t.styles,type:i,rect:s}))},setTextBlockAsEndingRange:function(t,e,n,o){var r=T.buildNoteRangeFromParagraph(e,n,o);t.setEndingRange(r)},updateBlocksIndentLevel:function(t,e,n){var o,i,s={},a={};r.each(e,function(t){o=t.getBlockStyle("indent"),!r.isNumber(o)||0===o&&n<0||(i=parseInt(t.getBlockStyle("text-indent"),10)||0,o=o<0?0:o+n,o=Math.min(o,g.MAX_LIST_ITEM_LEVEL-i),s[o]||(s[o]=[]),s[o].push(t))}),r.each(s,function(e,n){a.indent=n,t.executeAtomicCommand(new p({blocks:e,styleNameValues:a}))})},updateBlockTextIndentLevel:function(t,e,n){var o,r,i;o=e.getBlockStyle("text-indent"),i=parseInt(e.getBlockStyle("indent"),10)||0,o||(o=0),r=o+n,(r=Math.min(r,g.MAX_LIST_ITEM_LEVEL-i))>=0&&t.executeAtomicCommand(new p({blocks:[e],styleNameValues:{"text-indent":r}}))},_isFullSelected:function(t){var e=t.block;return S.isTextBlock(e)?0===t.start&&t.end===e.getLength()||void 0:!S.isTable(e)||t.isFullSelected()},_setBlocksBlockStyles:function(t,e,n){r.isEmpty(n)||t.executeAtomicCommand(new p({blocks:e,styleNameValues:n}))},fixMergeCellBeforeRowColChange:function(t){t.isCol?this._fixMergeCellColChange(t):this._fixMergeCellRowChange(t)},_fixMergeCellRowChange:function(t){var e,n,o,r,s=this,a=t.table,l=t.isCol,c=t.insertData,u=t.isDelete,p=t.index,d=a.getCells();if(d[p])for(n=0;n<d[p].length;n++)if((e=a.getCell(p,n))&&(e.isMergePoint()&&u&&(r=s._fixMergePointCellWhenDel({cell:e,row:p,col:n,table:a,isCol:l,cmd:t.cmd})),e.isMergedCell())){if(o=s._findMergePointCell({cell:e,row:p,col:n,table:a}),o.row===p)continue;if(r=s._fixMergePointWithMergeCell({pointCellInfo:o,table:a,isCol:l,isDelete:u,insertData:c,cmd:t.cmd,cellInfo:{row:p,col:n}}),r.col<n)return void i.error("New index should more then i");n=r.col}},_fixMergeCellColChange:function(t){var e,n,o,r,s=this,a=t.table,l=t.isCol,c=t.insertData,u=t.isDelete,p=t.index,d=a.getCells();for(n=0;n<d.length;n++)if((e=a.getCell(n,p))&&(e.isMergePoint()&&u&&(r=s._fixMergePointCellWhenDel({cell:e,row:n,col:p,table:a,isCol:l,cmd:t.cmd}),n=r.row),e.isMergedCell())){if(o=s._findMergePointCell({cell:e,row:n,col:p,table:a}),o.col===p)continue;if(r=s._fixMergePointWithMergeCell({pointCellInfo:o,table:a,isCol:l,isDelete:u,insertData:c,cmd:t.cmd,cellInfo:{row:n,col:p}}),r.row<n)return void i.error("New index should more then i");n=r.row}},_findMergePointCell:function(t){var e=t.row,n=t.col,o=t.table;return o.getCell(e,n,{findMergePointIfNeeded:!0,withPosition:!0})},_fixMergePointWithMergeCell:function(t){var e,n,o,r,i=t.table,s=t.pointCellInfo,a=t.cellInfo,l=t.isDelete,c=t.isCol,u=t.cmd,p=t.insertData,d=s.cell,h=s.row,g=s.col,m=d.getMergePointAttr(),_=a.row,b=a.col,y=0,v=0;for(l?c?y=-1:v=-1:c?y=1:v=1,u.executeAtomicCommand(new f({table:i,type:f.TYPES.POINT,value:{width:m.width+y,height:m.height+v,fireChange:!1},rect:{row:h,col:g}})),e=_;e<h+m.height;e++)for(n=b;n<g+m.width;n++)o=i.getCell(e,n),r=o.getMergedCellAttr(),n===b&&!l&&c&&p[e]&&p[e].setMergedCellAttr(r.dx,r.dy),e!==_||l||c||!p[n]||p[n].setMergedCellAttr(r.dx,r.dy),u.executeAtomicCommand(new f({table:i,type:f.TYPES.CELL,value:{dx:r.dx+y,dy:r.dy+v,fireChange:!1},rect:{row:e,col:n}}));return{row:h+m.height-1,col:g+m.width-1}},_fixMergePointCellWhenDel:function(t){var e,n,o,r,i=t.cell,s=t.row,a=t.col,l=t.table,c=t.isCol,u=t.cmd,p=i.getMergePointAttr(),d=0,h=0;for(c?h=1:d=1,e=s+d;e<s+p.height;e++)for(n=a+h;n<a+p.width;n++)(o=l.getCell(e,n))&&(e!==s+d||n!==a+h?(r=o.getMergedCellAttr(),u.executeAtomicCommand(new f({table:l,type:f.TYPES.CELL,value:{dx:r.dx-h,dy:r.dy-d},rect:{row:e,col:n}}))):u.executeAtomicCommand(new f({table:l,type:f.TYPES.POINT,value:{width:p.width-h,height:p.height-d},rect:{row:e,col:n}})));return{row:s+p.height-1,col:a+p.width-1}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(1),n(4)],void 0!==(r=function(t,e,n,o){"use strict";var r=new RegExp(/^\/yws\/res\/|^https?:\/\/note.youdao.com\/yws\/res/),i=new RegExp(/^\/yws\/api\/group|^https?:\/\/note.youdao.com\/yws\/api\/group/),s={name:"",UNKNOWN:-1,WEB_NOTE:1,WEB_GROUP:2,PC:3,IPHONE:4,ANDROID:5,MAC:6},a=window.YNE_PLATFORM||s.UNKNOWN,l=n.keys(s),c={isFromWebNote:function(t){return r.test(t)},isFromWebGroup:function(t){return i.test(t)}};return s.name=a,n.each(l,function(t){var e=t.toLowerCase(),n=a[t];s["IS_"+t]=a===n||a===e}),a.IS_UNKNOWN&&o.error("The platform is unknown!"),n.extend(s,c),s}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(153);return e=o.extend({name:"UnknownSimpleCommand",isSimple:!0,initialize:function(){e.__super__.initialize.apply(this)},apply:function(){throw"Method not implemented."},doReapply:function(t){return this.apply(t)},doUnapply:function(){throw new Error("Method not implemented.")},isCollabCommand:function(){var t=this,e=t.options.args;return null!=e&&null!=e.collabProperties&&!0===e.collabProperties.isCollabCmd}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";function o(t){return t.reduce(function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)},[])}var r=n(37),i=n(162),s=n(85),a=n(23),l=n(22),c=n(163),u=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,u=n._parent,p=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,g=p?p.length:0;u;)u.remove(this),u=++f<g&&p[f]||null;if(s.isFunction(d)){var m=a.tryCatch(d).call(this);m===l.errorObject&&(e=!0,t=t||(l.errorObject.e instanceof c.UnsubscriptionError?o(l.errorObject.e.errors):[l.errorObject.e]))}if(r.isArray(h))for(f=-1,g=h.length;++f<g;){var _=h[f];if(i.isObject(_)){var m=a.tryCatch(_.unsubscribe).call(_);if(m===l.errorObject){e=!0,t=t||[];var b=l.errorObject.e;b instanceof c.UnsubscriptionError?t=t.concat(o(b.errors)):t.push(b)}}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var o=n;n=new t,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this,n=e._parent,o=e._parents;n&&n!==t?o?-1===o.indexOf(t)&&o.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();e.Subscription=u},function(t,e,n){var o,r;!function(i,s){o=[n(279),n(8),e],void 0!==(r=function(t,e,n){i.Backbone=s(i,n,t,e)}.apply(e,o))&&(t.exports=r)}(this,function(t,e,n,o){var r=t.Backbone,i=[],s=i.slice;e.VERSION="1.1.2",e.$=o,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){return c(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,o){if(!c(this,"once",t,[e,o])||!e)return this;var r=this,i=n.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,o)},off:function(t,e,o){var r,i,s,a,l,u,p,d;if(!this._events||!c(this,"off",t,[e,o]))return this;if(!t&&!e&&!o)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),l=0,u=a.length;l<u;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=r=[],e||o)for(p=0,d=s.length;p<d;p++)i=s[p],(e&&e!==i.callback&&e!==i.callback._callback||o&&o!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],o=this._events.all;return n&&u(n,e),o&&u(o,arguments),this},stopListening:function(t,e,o){var r=this._listeningTo;if(!r)return this;var i=!e&&!o;o||"object"!=typeof e||(o=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(e,o,this),(i||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,c=function(t,e,n,o){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(o));return!1}if(l.test(n)){for(var i=n.split(l),s=0,a=i.length;s<a;s++)t[e].apply(t,[i[s]].concat(o));return!1}return!0},u=function(t,e){var n,o=-1,r=t.length,i=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++o<r;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i);return;case 2:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i,s);return;case 3:for(;++o<r;)(n=t[o]).callback.call(n.ctx,i,s,a);return;default:for(;++o<r;)(n=t[o]).callback.apply(n.ctx,e);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(t,e){a[e]=function(e,o,r){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=n.uniqueId("l"))]=e,r||"object"!=typeof o||(r=this),e[t](o,r,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var d=e.Model=function(t,e){var o=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(o=this.parse(o,e)||{}),o=n.defaults({},o,n.result(this,"defaults")),this.set(o,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,o){var r,i,s,a,l,c,u,p;if(null==t)return this;if("object"==typeof t?(i=t,o=e):(i={})[t]=e,o||(o={}),!this._validate(i,o))return!1;s=o.unset,l=o.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),p=this.attributes,u=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],n.isEqual(p[r],e)||a.push(r),n.isEqual(u[r],e)?delete this.changed[r]:this.changed[r]=e,s?delete p[r]:p[r]=e;if(!l){a.length&&(this._pending=o);for(var d=0,h=a.length;d<h;d++)this.trigger("change:"+a[d],this,p[a[d]],o)}if(c)return this;if(!l)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger("change",this,o);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var o in this.attributes)e[o]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,o=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)n.isEqual(r[i],e=t[i])||((o||(o={}))[i]=e);return o},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,o=t.success;return t.success=function(n){if(!e.set(e.parse(n,t),t))return!1;o&&o(e,n,t),e.trigger("sync",e,n,t)},j(this,t),this.sync("read",this,t)},save:function(t,e,o){var r,i,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,o=e):(r={})[t]=e,o=n.extend({validate:!0},o),r&&!o.wait){if(!this.set(r,o))return!1}else if(!this._validate(r,o))return!1;r&&o.wait&&(this.attributes=n.extend({},a,r)),void 0===o.parse&&(o.parse=!0);var l=this,c=o.success;return o.success=function(t){l.attributes=a;var e=l.parse(t,o);if(o.wait&&(e=n.extend(r||{},e)),n.isObject(e)&&!l.set(e,o))return!1;c&&c(l,t,o),l.trigger("sync",l,t,o)},j(this,o),i=this.isNew()?"create":o.patch?"patch":"update","patch"===i&&(o.attrs=r),s=this.sync(i,this,o),r&&o.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,o=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&r(),o&&o(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;j(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||B();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var o=this.validationError=this.validate(t,e)||null;return!o||(this.trigger("invalid",this,o,n.extend(e,{validationError:o})),!1)}});var h=["keys","values","pairs","invert","pick","omit"];n.each(h,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,m))},remove:function(t,e){var o=!n.isArray(t);t=o?[t]:n.clone(t),e||(e={});var r,i,s,a;for(r=0,i=t.length;r<i;r++)(a=t[r]=this.get(t[r]))&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return o?t[0]:t},set:function(t,e){e=n.defaults({},e,g),e.parse&&(t=this.parse(t,e));var o=!n.isArray(t);t=o?t?[t]:[]:n.clone(t);var r,i,s,a,l,c,u,p=e.at,h=this.model,f=this.comparator&&null==p&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null,_=[],b=[],y={},v=e.add,w=e.merge,I=e.remove,C=!(f||!v||!I)&&[];for(r=0,i=t.length;r<i;r++){if(l=t[r]||{},s=l instanceof d?a=l:l[h.prototype.idAttribute||"id"],c=this.get(s))I&&(y[c.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),f&&!u&&c.hasChanged(m)&&(u=!0)),t[r]=c;else if(v){if(!(a=t[r]=this._prepareModel(l,e)))continue;_.push(a),this._addReference(a,e)}a=c||a,!C||!a.isNew()&&y[a.id]||C.push(a),y[a.id]=!0}if(I){for(r=0,i=this.length;r<i;++r)y[(a=this.models[r]).cid]||b.push(a);b.length&&this.remove(b,e)}if(_.length||C&&C.length)if(f&&(u=!0),this.length+=_.length,null!=p)for(r=0,i=_.length;r<i;r++)this.models.splice(p+r,0,_[r]);else{C&&(this.models.length=0);var M=C||_;for(r=0,i=M.length;r<i;r++)this.models.push(M[r])}if(u&&this.sort({silent:!0}),!e.silent){for(r=0,i=_.length;r<i;r++)(a=_[r]).trigger("add",a,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return o?t[0]:t},reset:function(t,e){e||(e={});for(var o=0,r=this.models.length;o<r;o++)this._removeReference(this.models[o],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,o=this;return t.success=function(n){var r=t.reset?"reset":"set";o[r](n,t),e&&e(o,n,t),o.trigger("sync",o,n,t)},j(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var o=this,r=e.success;return e.success=function(t,n){e.wait&&o.add(t,e),r&&r(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?n.clone(e):{},e.collection=this;var o=new this.model(t,e);return o.validationError?(this.trigger("invalid",this,o.validationError,e),!1):o},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,o){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,o),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(_,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(t){f.prototype[t]=function(e,o){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,o)}});var y=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},v=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var o=t[e];if(n.isFunction(o)||(o=this[t[e]]),o){var r=e.match(v),i=r[1],s=r[2];o=n.bind(o,this),i+=".delegateEvents"+this.cid,""===s?this.$el.on(i,o):this.$el.on(i,s,o)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className"));var o=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(o,!1)}}}),e.sync=function(t,o,r){var i=C[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:i,dataType:"json"};if(r.url||(s.url=n.result(o,"url")||B()),null!=r.data||!o||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||o.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){s.type="POST",r.emulateJSON&&(s.data._method=i);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&I&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(n.extend(s,r));return o.trigger("request",o,l,r),l};var I=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,S=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,a,{initialize:function(){},route:function(t,o,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(o)&&(r=o,o=""),r||(r=this[o]);var i=this;return e.history.route(t,function(n){var s=i._extractParameters(t,n);i.execute(r,s),i.trigger.apply(i,["route:"+o].concat(s)),i.trigger("route",o,s),e.history.trigger("route",i,o,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(N,"\\$&").replace(T,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var o=t.exec(e).slice(1);return n.map(o,function(t,e){return e===o.length-1?t||null:t?decodeURIComponent(t):null})}});var x=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,O=/msie [\w.]+/,D=/\/$/,L=/#.*$/;x.started=!1,n.extend(x.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(A,"")},start:function(t){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var o=this.getFragment(),r=document.documentMode,i=O.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);if(this.root=("/"+this.root+"/").replace(E,"/"),i&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(o)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=o;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),x.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!x.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(L,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var o=t.href.replace(/(javascript:|#).*$/,"");t.replace(o+"#"+e)}else t.hash="#"+e}}),e.history=new x;var R=function(t,e){var o,r=this;o=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(o,r,e);var i=function(){this.constructor=o};return i.prototype=r.prototype,o.prototype=new i,t&&n.extend(o.prototype,t),o.__super__=r.prototype,o};d.extend=f.extend=M.extend=y.extend=x.extend=R;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(t,e){var n=e.error;e.error=function(o){n&&n(t,o,e),t.trigger("error",t,o,e)}};return e})},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(6),s=n(19),a=n(88),l=n(165),c=n(86),u=function(t){function e(e){t.call(this,e),this.destination=e}return o(e,t),e}(i.Subscriber);e.SubjectSubscriber=u;var p=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return o(e,t),e.prototype[c.rxSubscriber]=function(){return new u(this)},e.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,o=e.slice(),r=0;r<n;r++)o[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,o=e.slice(),r=0;r<n;r++)o[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),o=0;o<e;o++)n[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new l.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new r.Observable;return t.source=this,t},e.create=function(t,e){return new d(t,e)},e}(r.Observable);e.Subject=p;var d=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(p);e.AnonymousSubject=d},function(t,e,n){"use strict";e.errorObject={e:{}}},function(t,e,n){"use strict";function o(){try{return i.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}function r(t){return i=t,o}var i,s=n(22);e.tryCatch=r},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(1),s=n(2).BlockUtils,a=n(3);return e=o.extend({name:"atom.InsertBlocks",_note:null,_newBlks:null,_newBlkIds:null,_preBlkId:null,initialize:function(){var t=this,n=t.options.args;a.isCollabCommand(n)||(t._note=t.options.note,t._newBlks=t.options.newBlks,t.options.preBlk&&(t._preBlkId=t.options.preBlk.getId()),t._newBlkIds=[],i.each(t._newBlks,function(e){t._newBlkIds.push(e.getId())})),e.__super__.initialize.apply(t)},apply:function(){var t,e=this,n=0;if(e._preBlkId){if(-1===(t=e._note.getBlockIndexById(e._preBlkId)))return!1;n=t+1}return i.each(e._newBlks,function(t){e._note.insert(n,t),n++}),!0},doUnapply:function(){var t=this;i.each(t._newBlkIds,function(e){t._note.remove(t._note.getBlockIndexById(e))})},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties,r=o.cmdJSON;e.__super__.fromCollabJSON.apply(t),t._note=o.coreEditor.getNote(),r.preBlockId&&(t._preBlkId=r.preBlockId),o.isCollabUndo?t._newBlkIds=r.insertedBlocks:o.isCollabRedo&&(t._newBlks=[],i.each(r.insertedBlocks,function(e){t._newBlks.push(s.buildBlockFromCollabJSON(e,o.coreEditor))}))},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t),o=[];return t.isCollabUndo?i.each(t._newBlks,function(t){o.push(t.getId())}):t.isCollabRedo&&i.each(t._newBlks,function(t){o.push(t.toCollabJSON())}),n.insertedBlocks=o,t._preBlkId&&(n.preBlockId=t._preBlkId),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,o="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r=void 0!==t&&t,i=n||r||o;e.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,n(43))},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(4),s=n(1),a=n(2).BlockTypes,l=n(3);return e=o.extend({name:"atom.DeleteBlocks",_note:null,_deletedBlocks:null,_deletedBlockIds:null,_preBlockId:null,initialize:function(){var t=this,n=t.options.args;l.isCollabCommand(n)||(t._note=t.options.note,t._deletedBlocks=s.sortBy(t.options.blocks,function(e){return t._note.getBlockIndex(e)}),t._deletedBlockIds=[],s.each(t._deletedBlocks,function(e){t._deletedBlockIds.push(e.getId())})),e.__super__.initialize.apply(t)},apply:function(){var t,e,n=this;return n._deletedBlockIds&&0!==n._deletedBlockIds.length?(e=n._note.getBlockById(n._deletedBlockIds[0]),t=n._note.getPreBlock(e),n._preBlockId=t?t.getId():0,s.each(n._deletedBlockIds,function(t,e){n._note.removeBlockById(t,n._deletedBlockIds.length===e+1)}),!0):(i.error(""),!1)},doUnapply:function(){var t=this,e=0;t._preBlockId&&(e=t._note.getBlockIndexById(t._preBlockId)+1),s.each(t._deletedBlocks,function(n){t._note.insert(e,n),e++})},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties,r=o.cmdJSON;e.__super__.fromCollabJSON.apply(t),t._note=o.coreEditor.getNote(),r&&r.preBlockId&&(t._preBlockId=r.preBlockId),o.isCollabUndo?(t._deletedBlocks=[],s.each(r.deletedBlocks,function(e){t._deletedBlocks.push(a.buildBlockFromCollabJSON(e,o.coreEditor))})):o.isCollabRedo&&(t._deletedBlockIds=[],s.each(r.deletedBlocks,function(e){t._deletedBlockIds.push(e)}))},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t),o=[];return t.isCollabUndo?s.each(t._deletedBlocks,function(t){o.push(t.toCollabJSON())}):t.isCollabRedo&&s.each(t._deletedBlockIds,function(t){o.push(t)}),n.preBlockId=t._preBlockId,n.deletedBlocks=o,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(13),r=n(133),i=n(59),s=n(39);return i.extend({className:"bulb__toolbar-item bulb__toolbar-button",events:{click:"onClick",mousedown:"onMouseDown"},name:"unknown",label:"unknown",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},shortcut:null,onEditingStateChange:function(){},onSelectionChange:r,initialize:function(t){var e=this;e.editor=t.editor,e.render(),e.setState(e.defaultState),e.bindEditorEvents(),e.bindEvents()},render:function(){var t,e=this,n=e.$el,r=e.label;n.addClass("bulb__button-"+e.name),t=o.render("web",e.templateName,{name:e.name,label:e.label,defaultState:e.defaultState,icon:e.icon}),n.html(t),null!=e.shortcut&&s.isSafari(),n.find(".bulb__button").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300],content:r,contentAsHTML:!0}),e.isVisible||this.hide()},bindEvents:function(){},bindEditorEvents:function(){var t=this,n=t.editor,o=t.editorEvents;o&&e.each(o,function(e,o){n.on(o,t[e].bind(t))})},onMouseDown:function(t){t.preventDefault()},onClick:function(){},setState:function(t){var e=this,n=e.$el;t=!0===t,e.state=t,t?n.find(".bulb__button").addClass("bulb__active"):n.find(".bulb__button").removeClass("bulb__active")},reset:function(){var t=this;t.setState(t.defaultState)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(29)],void 0!==(r=function(t,e,n){"use strict";return function(t){function e(e){return e=e||{},e.enableEvent=!0,t.call(this,e)||this}return i(e,t),e.prototype.on=function(t,e,n){return this.eventInst.on(t,e,n)},e.prototype.off=function(t,e,n){return this.eventInst.off(t,e,n)},e.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o;return(o=this.eventInst).trigger.apply(o,[t].concat(e))},e.prototype.bind=function(t,e,n){return this.eventInst.bind(t,e,n)},e.prototype.unbind=function(t,e,n){return this.eventInst.unbind(t,e,n)},e.prototype.once=function(t,e,n){return this.eventInst.once(t,e,n)},e.prototype.listenTo=function(t,e,n){return this.eventInst.listenTo(t,e,n)},e.prototype.listenToOnce=function(t,e,n){return this.eventInst.listenToOnce(t,e,n)},e.prototype.stopListening=function(t,e,n){return this.eventInst.stopListening(t,e,n)},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(1),n(20)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(t){t=t||{},t.enableEvent&&(this.eventInst={},n.extend(this.eventInst,o.Events)),this.options=n.extend({},t),this.initialize.apply(this,[t])}return t.extend=function(t,e){var o,r,i=this;return o=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e),r=function(){this.constructor=o},r.prototype=i.prototype,o.prototype=new r,t&&n.extend(o.prototype,t),o.__super__=i.prototype,o},t}()}.apply(e,o))&&(t.exports=r)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var o=n(143)("wks"),r=n(144),i=n(30).Symbol,s="function"==typeof i;(t.exports=function(t){return o[t]||(o[t]=s&&i[t]||(s?i:r)("Symbol."+t))}).store=o},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.listeners=[],this.maxListeners=null}return t.prototype.addListener=function(t,e){return this.on(t,e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this._filterMatchedEvent(this.listeners,t);return o.length>0&&(this._invokeListeners.apply(this,[o].concat(e)),this.listeners=this._filterNotMatchedEvent(this.listeners,t,!0)),o.length>0},t.prototype.getMaxListeners=function(){return null===this.maxListeners?t.defaultMaxListeners:this.maxListeners},t.prototype.listenerCount=function(t){return this._filterMatchedEvent(this.listeners,t).length},t.prototype.on=function(t,e){return this._register({event:t,listener:e,once:!1}),this},t.prototype.off=function(t,e){return this._unregister({event:t,listener:e}),this},t.prototype.once=function(t,e){return this._register({event:t,listener:e,once:!0}),this},t.prototype.removeAllListeners=function(t){return this.listeners=null!=t?this._filterNotMatchedEvent(this.listeners,t):[],this},t.prototype.removeListener=function(t,e){return this.listeners=this._filterNotMatchedEvent(this.listeners,t,null,e),this},t.prototype.setMaxListeners=function(t){return this.maxListeners=t,this},t.prototype._invokeListeners=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.map(function(t){return t.listener.apply(t,e)})},t.prototype._register=function(t){if(!this._checkListenerLimitReached(t.event))return void this.listeners.unshift(t);throw new Error("Listner Limit Reached:"+this.maxListeners)},t.prototype._unregister=function(t){this.listeners=this._filterNotMatchedEvent(this.listeners,t.event,null,t.listener)},t.prototype._returnListenerLimit=function(){return null===this.maxListeners?t.defaultMaxListeners:this.maxListeners},t.prototype._checkListenerLimitReached=function(t){return this.listenerCount(t)===this._returnListenerLimit()},t.prototype._filterMatchedEvent=function(t,e,n){var o=function(t,o,r){return null==n?t.event===e:t.event===e&&t.once===n};return t.filter(o,this)},t.prototype._filterNotMatchedEvent=function(t,e,n,o){var r=function(t,r,i){var s=t.event!==e;return!1===s&&null!=n&&(s=t.once!==n),!1===s&&null!=o&&(s=t.listener!==o),s};return t.filter(r,this)},t.defaultMaxListeners=10,t}();e.YEvent=n}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(4),n(45)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.getRange=function(e){var o,r=t.getSelection(e);return r?r.rangeCount>0?o=r.getRangeAt(0):n.warn("The selection has no range!"):n.warn("The selection is null!"),o},t.getSelection=function(t){return t=t||window,t.getSelection()},t.isNodeInRange=function(e,o){if(!e)return n.warn("The param node is unvalid!"),!1;var r,i=e.ownerDocument||document,s=i.defaultView,a=s.Range;return o=o||t.getRange(s),r=i.createRange(),r.selectNode(e),o.compareBoundaryPoints(a.START_TO_START,r)<1&&o.compareBoundaryPoints(a.END_TO_END,r)>-1},t.isRangeInNode=function(e,o){if(!e)return n.warn("The param node is unvalid!"),!1;var r,i=e.ownerDocument||document,s=i.defaultView;if(!(o=o||t.getRange(s)))return n.warn("The native range is null!"),!1;for(r=o.commonAncestorContainer;r;){if(r===e)return!0;r=r.parentNode}return!1},t.isRangeInSelector=function(e,n){if(!e)return!1;var r;if(n=n||t.getRange(),r=n.commonAncestorContainer,!n||!r)return!1;for(o.isText(r)&&(r=r.parentElement||r.parentNode);r&&r.webkitMatchesSelector;){if(r.webkitMatchesSelector(e))return!0;r=r.parentNode}return!1},t.removeAllRanges=function(e){var n=t.getSelection(e);n&&n.removeAllRanges()},t.setRange=function(e,o){var r=t.getSelection(o);r&&e?(r.removeAllRanges(),r.addRange(e)):n.warn("The selection or range is null!")},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";function o(t){return t&&"function"==typeof t.schedule}e.isScheduler=o},function(t,e,n){var o,r;o=[n,e,n(1)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.bubble=function(t,e,o,r){if(t&&e&&o){var i=n.isArray(t);n.each(t,function(t,n){t&&(i?n=t:!0===t&&(t=n),!0===r&&e.off(n),e.on(n,o.trigger.bind(o,t)))})}},t.addListeners=function(t,e,o,r){t&&e&&o&&n.each(t,function(t,n){!0===r&&e.off(n),e.on(n,o[t].bind(o))})},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.setUnderscore=function(t){e.underscoreInst=t},t.setLogger=function(t){e.loggerInst=t},t}();e.ExternalLibs=n}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return{LEFT:1,RIGHT:2,UP:3,DOWN:4}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";var n=navigator.userAgent.toLowerCase();return function(){function t(){}return t.isSafari=function(){return n&&n.indexOf("applewebkit")>-1&&n.indexOf("chrome")<=-1},t.isEdge=function(){return n&&n.indexOf("applewebkit")>-1&&n.indexOf("edge")>-1},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;!function(){function r(t,e){if(t=t||"",e=e||{},t instanceof r)return t;if(!(this instanceof r))return new r(t,e);var n=i(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=G(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=G(this._r)),this._g<1&&(this._g=G(this._g)),this._b<1&&(this._b=G(this._b)),this._ok=n.ok,this._tc_id=H++}function i(t){var e={r:0,g:0,b:0},n=1,o=!1,r=!1;return"string"==typeof t&&(t=B(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=s(t.r,t.g,t.b),o=!0,r="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=D(t.s),t.v=D(t.v),e=u(t.h,t.s,t.v),o=!0,r="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=D(t.s),t.l=D(t.l),e=l(t.h,t.s,t.l),o=!0,r="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=k(n),{ok:o,format:t.format||r,r:U(255,V(e.r,0)),g:U(255,V(e.g,0)),b:U(255,V(e.b,0)),a:n}}function s(t,e,n){return{r:255*S(t,255),g:255*S(e,255),b:255*S(n,255)}}function a(t,e,n){t=S(t,255),e=S(e,255),n=S(n,255);var o,r,i=V(t,e,n),s=U(t,e,n),a=(i+s)/2;if(i==s)o=r=0;else{var l=i-s;switch(r=a>.5?l/(2-i-s):l/(i+s),i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:r,l:a}}function l(t,e,n){function o(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+6*(e-t)*(2/3-n):t}var r,i,s;if(t=S(t,360),e=S(e,100),n=S(n,100),0===e)r=i=s=n;else{var a=.5>n?n*(1+e):n+e-n*e,l=2*n-a;r=o(l,a,t+1/3),i=o(l,a,t),s=o(l,a,t-1/3)}return{r:255*r,g:255*i,b:255*s}}function c(t,e,n){t=S(t,255),e=S(e,255),n=S(n,255);var o,r,i=V(t,e,n),s=U(t,e,n),a=i,l=i-s;if(r=0===i?0:l/i,i==s)o=0;else{switch(i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:r,v:a}}function u(t,e,n){t=6*S(t,360),e=S(e,100),n=S(n,100);var o=F.floor(t),r=t-o,i=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),l=o%6;return{r:255*[n,s,i,i,a,n][l],g:255*[a,n,n,s,i,i][l],b:255*[i,i,a,n,n,s][l]}}function p(t,e,n,o){var r=[O(G(t).toString(16)),O(G(e).toString(16)),O(G(n).toString(16))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function d(t,e,n,o){return[O(L(o)),O(G(t).toString(16)),O(G(e).toString(16)),O(G(n).toString(16))].join("")}function h(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s-=e/100,n.s=N(n.s),r(n)}function f(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.s+=e/100,n.s=N(n.s),r(n)}function g(t){return r(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l+=e/100,n.l=N(n.l),r(n)}function _(t,e){e=0===e?0:e||10;var n=r(t).toRgb();return n.r=V(0,U(255,n.r-G(-e/100*255))),n.g=V(0,U(255,n.g-G(-e/100*255))),n.b=V(0,U(255,n.b-G(-e/100*255))),r(n)}function b(t,e){e=0===e?0:e||10;var n=r(t).toHsl();return n.l-=e/100,n.l=N(n.l),r(n)}function y(t,e){var n=r(t).toHsl(),o=(G(n.h)+e)%360;return n.h=0>o?360+o:o,r(n)}function v(t){var e=r(t).toHsl();return e.h=(e.h+180)%360,r(e)}function w(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+120)%360,s:e.s,l:e.l}),r({h:(n+240)%360,s:e.s,l:e.l})]}function I(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+90)%360,s:e.s,l:e.l}),r({h:(n+180)%360,s:e.s,l:e.l}),r({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=r(t).toHsl(),n=e.h;return[r(t),r({h:(n+72)%360,s:e.s,l:e.l}),r({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var o=r(t).toHsl(),i=360/n,s=[r(t)];for(o.h=(o.h-(i*e>>1)+720)%360;--e;)o.h=(o.h+i)%360,s.push(r(o));return s}function T(t,e){e=e||6;for(var n=r(t).toHsv(),o=n.h,i=n.s,s=n.v,a=[],l=1/e;e--;)a.push(r({h:o,s:i,v:s})),s=(s+l)%1;return a}function k(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function S(t,e){A(t)&&(t="100%");var n=E(t);return t=U(e,V(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),F.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function N(t){return U(1,V(0,t))}function x(t){return parseInt(t,16)}function A(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function E(t){return"string"==typeof t&&-1!=t.indexOf("%")}function O(t){return 1==t.length?"0"+t:""+t}function D(t){return 1>=t&&(t=100*t+"%"),t}function L(t){return Math.round(255*parseFloat(t)).toString(16)}function R(t){return x(t)/255}function B(t){t=t.replace(P,"").replace(z,"").toLowerCase();var e=!1;if(W[t])t=W[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Z.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Z.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Z.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Z.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Z.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Z.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Z.hex8.exec(t))?{a:R(n[1]),r:x(n[2]),g:x(n[3]),b:x(n[4]),format:e?"name":"hex8"}:(n=Z.hex6.exec(t))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),format:e?"name":"hex"}:!!(n=Z.hex3.exec(t))&&{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),format:e?"name":"hex"}}function j(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}var P=/^\s+/,z=/\s+$/,H=0,F=Math,G=F.round,U=F.min,V=F.max,Y=F.random;r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,o,r,i,s=this.toRgb();return t=s.r/255,e=s.g/255,n=s.b/255,o=.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4),r=.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4),i=.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*r+.0722*i},setAlpha:function(t){return this._a=k(t),this._roundA=G(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=G(360*t.h),n=G(100*t.s),o=G(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+o+"%)":"hsva("+e+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=a(this._r,this._g,this._b),e=G(360*t.h),n=G(100*t.s),o=G(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+o+"%)":"hsla("+e+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return p(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return d(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:G(this._r),g:G(this._g),b:G(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+G(this._r)+", "+G(this._g)+", "+G(this._b)+")":"rgba("+G(this._r)+", "+G(this._g)+", "+G(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:G(100*S(this._r,255))+"%",g:G(100*S(this._g,255))+"%",b:G(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+G(100*S(this._r,255))+"%, "+G(100*S(this._g,255))+"%, "+G(100*S(this._b,255))+"%)":"rgba("+G(100*S(this._r,255))+"%, "+G(100*S(this._g,255))+"%, "+G(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(J[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,o=this._gradientType?"GradientType = 1, ":"";if(t){n=r(t).toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,o=this._a<1&&this._a>=0;return e||!o||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},r.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]="a"===o?t[o]:D(t[o]));t=n}return r(t,e)},r.equals=function(t,e){return!(!t||!e)&&r(t).toRgbString()==r(e).toRgbString()},r.random=function(){return r.fromRatio({r:Y(),g:Y(),b:Y()})},r.mix=function(t,e,n){n=0===n?0:n||50;var o,i=r(t).toRgb(),s=r(e).toRgb(),a=n/100,l=2*a-1,c=s.a-i.a;o=-1==l*c?l:(l+c)/(1+l*c),o=(o+1)/2;var u=1-o;return r({r:s.r*o+i.r*u,g:s.g*o+i.g*u,b:s.b*o+i.b*u,a:s.a*a+i.a*(1-a)})},r.readability=function(t,e){var n=r(t),o=r(e);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},r.isReadable=function(t,e,n){var o,i,s=r.readability(t,e);switch(i=!1,o=j(n),o.level+o.size){case"AAsmall":case"AAAlarge":i=s>=4.5;break;case"AAlarge":i=s>=3;break;case"AAAsmall":i=s>=7}return i},r.mostReadable=function(t,e,n){var o,i,s,a,l=null,c=0;n=n||{},i=n.includeFallbackColors,s=n.level,a=n.size;for(var u=0;u<e.length;u++)(o=r.readability(t,e[u]))>c&&(c=o,l=r(e[u]));return r.isReadable(t,l,{level:s,size:a})||!i?l:(n.includeFallbackColors=!1,r.mostReadable(t,["#fff","#000"],n))};var W=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},J=r.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(W),Z=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=r:void 0!==(o=function(){return r}.call(e,n,e,t))&&(t.exports=o)}()},function(t,e,n){var o;void 0!==(o=function(t){var e=n(59),o=n(133);return e.extend({className:"bulb__toolbar-item bulb__toolbar-split",initialize:o,render:o,enable:o,disable:o,reset:o})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(8),r=n(1),i=n(11),s=n(2).BlockTypes,a=n(4),l=n(805),c=o('<div class="bulb__collab-editing-view-wrapper"><div class="bulb__collab-session-view"></div></div>');return e.View.extend({className:"bulb__block-view bulb__unknown-block-view",_isReadOnly:!1,_pageInfo:null,_$pageBreakContainer:null,PAGE_HEIGHT:null,_viewHeightInlastPaging:null,block:null,_getSelector:function(){var t=this,e=t.tagName,n=t.className.split(/\s+/),o=t.id,i=t.cid,s=".bulb__note-view ";return s+=e,o&&(s+="#"+o),r.each(n,function(t){t&&(s+="."+t)}),s+='[data-yne-cid="'+i+'"]'},initialize:function(t){var e=this;e.block=t.block,e._isReadOnly=t.isReadOnly,r.bindAll(e,"_onLockedChange"),e.block.on("locked-change",e._onLockedChange),t.inlineStyleViewMapper&&(e._inlineStyleViewMapper=t.inlineStyleViewMapper),e._pageInfo={},e.PAGE_HEIGHT=t.pageSize.height,r.isNumber(e.PAGE_HEIGHT)||(a.debugAlert("invalid PAGE_HEIGHT:"+e.PAGE_HEIGHT),e.PAGE_HEIGHT=i.PAGE_TYPE_NONE_HEIGHT),e._$pageBreakContainer=t.pageBreakContainer,e.noteView=t.noteView},render:function(){var t=this;t.$el.attr("data-yne-cid",t.cid),t._updateLockState(t.isLocked()),s.isListItem(t.block)||t.trigger("view-height-changed",t.cid)},convertToNativeRange:function(){a.error("convertToNativeRange() should be implemented by subclass!")},parseNativeRange:function(){a.error("parseNativeRange() should be implemented by subclass!")},bindSelectionEvents:function(){var t=this;r.bindAll(t,"onDrawRange"),t.on("draw-range",t.onDrawRange)},onDrawRange:function(){throw"Method not implemented."},_onLockedChange:function(t){var e=this;e._updateLockState(e.isLocked()),e._updateLockIndicator(e.block.isLocked(),t),e.trigger("locked-change"),e.trigger("view-height-changed",e.cid)},isCollabLocked:function(){var t=this,e=t.block,n=!1;return e&&(n=e.isLocked()),n},isLocked:function(){var t=this,e=t.block,n=t._isReadOnly;return e&&(n=e.isLocked()||t._isReadOnly),n},_updateLockIndicator:function(t,e){var n,o,r=this,i=e&&e.lockColor,s=e&&e.nickname;n=r.$el.find(".bulb__collab-editing-view-wrapper"),null!=n&&0!==n.length||(n=c.clone(),r.$el.prepend(n)),o=n.find(".bulb__collab-session-view"),t?(r.$el.addClass("bulb__collab-editing-view"),null!=s&&o.text(s),null!=i&&o.css("background-color",i)):(r.$el.removeClass("bulb__collab-editing-view"),r.$el.find(".bulb__collab-editing-view-wrapper").remove())},_updateLockState:function(t){var e=this;t?e.$el.addClass("bulb__collab-locked"):e.$el.removeClass("bulb__collab-locked")},onDestroy:function(){},clearHighlight:function(){},clearPageBreaks:function(){var t=this;r.each(t._pageInfo,function(e){e&&e.pageBreak&&t._removePageBreak(e.pageBreak)}),t._pageInfo={}},coincideAllPageBreaks:function(){var t=this;if(!t._pageInfo)return void a.debugAlert("pageInfo should not be null when coincideAllPageBreaks");r.each(t._pageInfo,function(e){e&&e.pageBreak&&t._coincidePageBreak(e.pageBreak)})},disablePageMode:function(){var t=this;t.clearPageBreaks(),t.PAGE_HEIGHT=i.PAGE_HEIGHT_NONE},enablePageMode:function(t){var e=this;e.clearPageBreaks(),t===i.PAGE_TYPE_A4?e.PAGE_HEIGHT=i.PAGE_HEIGHT_A4:t===i.PAGE_TYPE_B5?e.PAGE_HEIGHT=i.PAGE_HEIGHT_B5:t===i.PAGE_TYPE_TEST?e.PAGE_HEIGHT=i.PAGE_HEIGHT_TEST:e.PAGE_HEIGHT=i.PAGE_HEIGHT_NONE},getBottomPosInPage:function(t){var e,n=this;return n._pageInfo[t]?n._pageInfo[t].pageBreak?e=-1:(e=n._pageInfo[t].topPosInPage+n._getHeightInPage(t))>n.PAGE_HEIGHT&&a.warn("Unsplitted Block whose Height is more than PAGE_HEIGHT",n._pageInfo[t].topPosInPage,e,n.PAGE_HEIGHT):(a.debugAlert("should NOT invoke the getBottomPosInPage when the view is NOT on the page"),e=0),e},getFirstTransPageIndex:function(){var t=this,e={};return t._pageInfo?(r.each(t._pageInfo,function(t){t&&(null==e.pageIndex?e=t:t.pageIndex<e.pageIndex&&(e=t))}),e.pageIndex):(a.debugAlert("pageInfo should not be null when getFirstTransPageIndex"),null)},getLastTransPageIndex:function(){var t=this,e={};return t._pageInfo?(r.each(t._pageInfo,function(t){t&&(null==e.pageIndex?e=t:t.pageIndex>e.pageIndex&&(e=t))}),e.pageIndex):(a.debugAlert("pageInfo should not be null when getLastTransPageIndex"),null)},isOnFloat:function(){var t,e=this;return t=e.$el.css("float")||"none","none"!==t.toLowerCase()},resetPageInfo:function(t,e){var n,o,i=this,s=!1;return i._pageInfo?r.isNumber(e)?null==t?(a.debugAlert("pageIndex should NOT be null"),s):null==i._$pageBreakContainer?(a.debugAlert("pageBreakContainer should not be null"),s):(i._pageInfo[t]&&(n=i._pageInfo[t].topPosInPage),e=Math.ceil(e),i.clearPageBreaks(),i._updatePageInfo(t,e),i.$el.css("height","auto"),o=i.$el.outerHeight(!0),e!==n?s=!0:i._isViewHeightChanged(o)?s=!0:i._isPagingContinue()&&(s=!0),s&&(i._viewHeightInlastPaging=o),s):(a.debugAlert("topPosInPage should be a number:"+e),s):(a.debugAlert("pageInfo should not be null when resetPageInfo"),s)},_coincidePageBreak:function(t){var e=this;t.coincide(),e.trigger("pageBreak-positionChanged",t.getPageBreak().attr("data-page-id")),e._showPageBreakInfo(t)},_createPageBreak:function(t,e,n,o){var r=this;return new l({pageIndex:t,topBlankHeight:e,bottomBlankHeight:n,container:r._$pageBreakContainer,noteView:r.noteView,placeholder:o})},_getContentContainer:function(){return this.$el},_getContentContainerBottomInView:function(){var t=this;return t._getOffsetTopPos(t._getContentContainer())+t._getContentContainer().outerHeight()-t._getOffsetTopPos(t.$el)},_getOffsetTopPos:function(t){return t.offset().top},_getHeightInPage:function(t){var e,n,o=this,r=o._pageInfo[t-1],i=o._pageInfo[t];return i?r&&!r.pageBreak?(a.debugAlert("previous pageBreak should NOT be null"),0):r&&0===r.pageBreak.getPlaceholder().next().length?0:s.isTable(o.block)&&0===o._getContentContainer().find("tbody").children().length?0:"none"!==o.$el.css("float")?0:r&&r.pageBreak&&i&&i.pageBreak?(a.debugAlert("_getHeightInPage: should NOT there when crossing previous/current page"),o.PAGE_HEIGHT):(e=r?o._getPageBreakBottomPosInView(t-1):0,i&&i.pageBreak?(a.debugAlert("_getHeightInPage: shoud not be there when current pageBreak ready"),n=o._getPageBreakTopPosInView(t)):n=o._getContentContainerBottomInView(),Math.ceil(n-e)):(a.debugAlert("should NOT invoke the method when not on the page"),0)},_getPageBreakBottomPosInView:function(t){var e,n,o=this;return e=o._pageInfo[t],e&&e.pageBreak?(n=e.pageBreak.getPlaceholder(),o._getOffsetTopPos(n)+n.height()-o._getOffsetTopPos(o.$el)):0},_getPageBreakTopPosInView:function(t){var e,n,o=this;return e=o._pageInfo[t],n=e.pageBreak.getPlaceholder(),o._getOffsetTopPos(n)-o._getOffsetTopPos(o.$el)},_getTopPosInPage:function(t){var e=this,n=0;return e._pageInfo[t-1]&&e._pageInfo[t-1].pageBreak?n=0:e._pageInfo[t]?n=e._pageInfo[t].topPosInPage:a.debugAlert("should NOT invoke the _getTopPosInPage when the view is NOT on the page"),n},_handlePageOverflow:function(t,e){var n,o,r=this,i=r._getHeightInPage(t),s=r._pageInfo[t-1];return o=r.PAGE_HEIGHT-e,s&&s.pageBreak&&0!==e?(a.debugAlert("toPosInPage should be 0 when crossing the previous page"),!1):(o<0&&(o=0),0===e||r.isOnFloat()||o>i?(r._setViewMaxHeight(t),n=!1):(r._insertPageBreak(t,o),n=!0),n)},_insertPageBreak:function(t,e){var n,o=this;n=o._createPageBreak(t,e),n.getPlaceholder().prependTo(o.$el),o._pageInfo[t].pageBreak=n,o.trigger("pageBreak-inserted",n.getPageBreak().attr("data-page-id")),o._coincidePageBreak(n)},_isInPageMode:function(){return this.PAGE_HEIGHT!==i.PAGE_HEIGHT_NONE},_isPagingContinue:function(){return!1},_isViewHeightChanged:function(t){var e=this,n=!1;return(!e._viewHeightInlastPaging||Math.round(Math.abs(t-e._viewHeightInlastPaging))>i.TOLERABLE_HEIGHT_CHANGE)&&(n=!0),n},_removePageBreak:function(t){t.destroy()},_setViewMaxHeight:function(){},_showPageBreakInfo:function(t){var e,n,o,r,i,s,l=this,c=t.getPageBreak();a.DEBUG&&(e=c.find(".bulb__bottomSpan"),e.css("border-bottom","2px dashed #b6b9b6"),n=c.find(".bulb__topSpan"),n.css("border-top","2px dashed #b6b9b6"),i=c.attr("data-page-id"),o=l._getOffsetTopPos(c),r=l._getOffsetTopPos(t.getPlaceholder()),s="Page:"+i+" OffsetTop(mark/placeholder):("+Math.round(o)+"/"+Math.round(r)+") TopBlank:"+n.outerHeight(),n.text(s),i*=1,s="TopOnPage:"+l._pageInfo[i].pageIndex+" BottomBlank:"+e.outerHeight(),e.text(s))},_updatePageInfo:function(t,e){var n=this;n._pageInfo[t]={pageIndex:t,topPosInPage:e},n._handlePageOverflow(t,e)&&n._updatePageInfo(t+1,0)},_getEditor:function(){var t;return this.trigger("get-editor",function(e){t=e}),t},destroy:function(){this.editor&&(this.editor=null),this.options&&this.options.editor&&(this.options.editor=null)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(2).RichText,s=n(3);return e=o.extend({name:"atom.DeleteBlockText",_textBlock:null,_start:null,_end:null,_deletedText:null,initialize:function(){var t=this,n=t.options.args;s.isCollabCommand(n)||(t._textBlock=t.options.block,t._start=t.options.start,t._end=t.options.end),e.__super__.initialize.apply(t)},apply:function(){var t=this,e=t._textBlock,n=e.sliceText(t._start,t._end);return!!n&&(t._deletedText=n,e.deleteText(t._start,t._end),!0)},doUnapply:function(){var t=this,e=t._deletedText;t._textBlock&&t._deletedText&&t._textBlock.insertText(t._start,e)},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),o&&(t._deletedText=i.fromCollabJSON(o.richText),t._textBlock=n.collabProperties.coreEditor.getBlockById(o.blockId),t._start=o.startPosition,t._end=o.endPosition)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._textBlock.getId(),n.richText=t._deletedText.toCollabJSON(),n.startPosition=t._start,n.endPosition=t._end,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1);return{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,getType:function(t){if(t&&t.nodeType)return t.nodeType},isNode:function(t){var n=this,o=n.getType(t);return e.isNumber(o)&&o>=n.ELEMENT_NODE&&o<=n.NOTATION_NODE},isElement:function(t){return this.getType(t)===this.ELEMENT_NODE},isAttribute:function(t){return this.getType(t)===this.ATTRIBUTE_NODE},isText:function(t){return this.getType(t)===this.TEXT_NODE},isCDataSection:function(t){return this.getType(t)===this.CDATA_SECTION_NODE},isEntityReference:function(t){return this.getType(t)===this.ENTITY_REFERENCE_NODE},isEntity:function(t){return this.getType(t)===this.ENTITY_NODE},isProcessingInstruction:function(t){return this.getType(t)===this.PROCESSING_INSTRUCTION_NODE},isComment:function(t){return this.getType(t)===this.COMMENT_NODE},isDocument:function(t){return this.getType(t)===this.DOCUMENT_NODE},isDocumentType:function(t){return this.getType(t)===this.DOCUMENT_TYPE_NODE},isDocumentFragment:function(t){return this.getType(t)===this.DOCUMENT_TYPE_NODE},isNotation:function(t){return this.getType(t)===this.NOTATION_NODE}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(117),s=n(47),a=n(34),l=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return o(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o=t[t.length-1];a.isScheduler(o)?t.pop():o=null;var r=t.length;return r>1?new e(t,o):1===r?new i.ScalarObservable(t[0],o):new s.EmptyObservable(o)},e.dispatch=function(t){var e=t.array,n=t.index,o=t.count,r=t.subscriber;if(n>=o)return void r.complete();r.next(e[n]),r.closed||(t.index=n+1,this.schedule(t))},e.prototype._subscribe=function(t){var n=this.array,o=n.length,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{array:n,index:0,count:o,subscriber:t});for(var i=0;i<o&&!t.closed;i++)t.next(n[i]);t.complete()},e}(r.Observable);e.ArrayObservable=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=function(t){function e(e){t.call(this),this.scheduler=e}return o(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(r.Observable);e.EmptyObservable=i},function(t,e,n){var o;void 0!==(o=function(t){function e(t){var e=this;e.name=t.name,e.value=t.value,e.isNative=!0===t.isNative,e.tryNativeIfNeeded=!1!==t.tryNativeIfNeeded,e.stopSelectionChange=!0===t.stopSelectionChange,e.callback=o.isFunction(t.callback)?t.callback:null}var o=n(1),r=n(4);return e.prototype.isCmdBall=!0,e.prototype.clone=function(){return new e(this)},e.create=function(t){return t&&t.isCmdBall?t:t&&t.name?new e(t):void r.warn("Failed to create cmdBall",t)},e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o=n(62);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.WS_OPENED="WS_OPENED",t.WS_MESSAGE="WS_MESSAGE",t.WS_CLOSED="WS_CLOSED",t.SESSION_CHNAGED="SESSION_CHNAGED",t.SESSION_JOINED="SESSION_JOINED",t.SESSION_QUIT="SESSION_QUIT",t.SESSION_PROP_UPDATE="SESSION_PROP_UPDATE",t.SESSION_LOCK_UPDATE="SESSION_LOCK_UPDATE",t.SESSION_INIT_DONE="SESSION_INIT_DONE",t.SESSION_INIT_BUILT="SESSION_INIT_BUILT",t.NONDATACMD_MODIFIERS_RESULT="NONDATACMD_MODIFIERS_RESULT",t.LOCK_RELEASED="LOCK_RELEASED",t.LOCK_LOCKED="LOCK_LOCKED",t.LOCK_PROP_UPDATE="LOCK_PROP_UPDATE",t.CONFLICT_LOCKED_BY_ME="CONFLICT_LOCKED_BY_ME",t.CONFLICT_LOCKED_BY_OTHERS="CONFLICT_LOCKED_BY_OTHERS",t.CONFLICT_BLOCK_CHANGED="CONFLICT_BLOCK_CHANGED",t.DATACMD_FAILURE="DATACMD_FAILURE",t.DATACMD_NO_PENDING="DATACMD_NO_PENDING",t.DATACMD_SUCCESS="DATACMD_SUCCESS",t.ENGINE_EXCEPTION="ENGINE_EXCEPTION",t}();e.default=n}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(2).RichText,s=n(3);return e=o.extend({name:"atom.InsertBlockText",_textBlock:null,_start:null,_insertedText:null,initialize:function(){var t=this,n=t.options.args;s.isCollabCommand(n)||(t._textBlock=t.options.block,t._start=t.options.start,t._insertedText=t.options.text),e.__super__.initialize.apply(t)},apply:function(){var t=this;return!!t._insertedText&&(t._textBlock.insertText(t._start,t._insertedText),!0)},doUnapply:function(){var t=this;t._textBlock&&t._insertedText&&t._textBlock.deleteText(t._start,t._start+t._insertedText.getLength())},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),o&&(t._insertedText=i.fromCollabJSON(o.richText),t._textBlock=n.collabProperties.coreEditor.getBlockById(o.blockId),t._start=o.startPosition)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._textBlock.getId(),n.richText=t._insertedText.toCollabJSON(),n.startPosition=t._start,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(4),s=n(3),a=n(2),l=a.ConstantConfig,c=a.AttachmentResource,u=a.MacroResource,p=a.TableCellUtil;return e=o.extend({name:"atom.SetTableCellContent",_table:null,_cellRect:null,_oldContent:null,effected:!1,initialize:function(){var t=this,n=t.options.args;s.isCollabCommand(n)||(t._table=t.options.table,t._cellRect=t.options.cellRect,t._content=t.options.content),e.__super__.initialize.apply(t)},_computeSizeChange:function(t){if(t){var e=this,n=e._table,o=n.getCellSize(t.row,t.col),r={rowHeight:0,rowIndex:-1,colWidth:0,colIndex:-1};if(o)return o.height<l.ATTACHMENT_MIN_HEIGHT&&(r.rowHeight=o.heights[0]+l.ATTACHMENT_MIN_HEIGHT-o.height,r.rowIndex=o.rows[0]),o.width<l.ATTACHMENT_MIN_WIDTH&&(r.colWidth=o.widths[0]+l.ATTACHMENT_MIN_WIDTH-o.width,r.colIndex=o.cols[0]),r.rowHeight||r.colWidth?r:null}},apply:function(){var t,e=this,n=e._table,o=e._getCellInfo(e._cellRect)||{},r=e._contentInfo||n.getContentAt(o.row,o.col);return!!r&&(!!n.setCellContent(o.row,o.col,e._content)&&((e._content instanceof c||e._content instanceof u)&&(t=e._sizeChanged||e._computeSizeChange(o)),t&&t.rowHeight&&(e._oldSize={rowIndex:t.rowIndex,rowHeight:n.getRowHeight(t.rowIndex)},n.setRowHeight(t.rowIndex,t.rowHeight)),t&&t.colWidth&&(e._oldSize=e._oldSize||{},e._oldSize.colIndex=t.colIndex,e._oldSize.colWidth=n.getColumnWidth(t.colIndex),n.setColumnWidth(t.colIndex,t.colWidth)),e._sizeChanged=t,e._oldContent=r.content,e.effected=!0,e.effected))},doUnapply:function(){var t,e=this,n=e._table,o=e._getCellInfo(e._cellRect),r=e._oldSize;if(o)return t=n.setCellContent(o.row,o.col,e._oldContent),r&&r.rowHeight&&n.setRowHeight(r.rowIndex,r.rowHeight),r&&r.colWidth&&n.setColumnWidth(r.colIndex,r.colWidth),t},_getCellInfo:function(t){var e=this,n=e._table;if(null!=t.row&&null!=t.col)return{row:t.row,col:t.col,cell:n.getCell(t.row,t.col)};i.error("No cellRect!")},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._content=p.contentFromCollabJSON(i.simpleValue1),n._oldContent=p.contentFromCollabJSON(i.simpleValue2),n._sizeChanged=i.sizeChanged,n._oldSize=i.oldSize,n._cellRect=i.newBlkId)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=p.contentToCollabJSON(t._content),n.simpleValue2=p.contentToCollabJSON(t._oldContent),n.sizeChanged=t._sizeChanged,n.oldSize=t._oldSize,n.newBlkId=t._cellRect,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";function o(t,e){return function(n){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(o,e));var s=Object.create(n,r.connectableObservableDescriptor);return s.source=n,s.subjectFactory=o,s}}var r=n(214);e.multicast=o;var i=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,o=this.subjectFactory(),r=n(o).subscribe(t);return r.add(e.subscribe(o)),r},t}();e.MulticastOperator=i},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var o=n(80),r=n(141);t.exports=n(63)?function(t,e,n){return o.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.NONDATACMD_BLOCKSELECTION="nb_BlkSelection",t.NONDATACMD_CLINTPONG="nb_clientPong",t.NONDATACMD_COLLABCLOSE="nb_CollabClose",t.NONDATACMD_COLLABINFO="nb_CollabInfo",t.NONDATACMD_DATACMDFAILED="nb_dataCmdFailed",t.NONDATACMD_GETMODIFIERS="nb_getModifiers",t.NONDATACMD_NOTESAVE="nb_noteSave",t.NONDATACMD_LOCKRELEASE="nb_lockRelease",t.NONDATACMD_SESSIONINITIALIZED="nb_sessionInitialized",t.NONDATACMD_SEVERPING="nb_serverPing",t}();e.CmdNames=n;!function(t){t[t.EXCEPTION=0]="EXCEPTION",t[t.NO_ERROR=1]="NO_ERROR",t[t.TIME_OUT=100]="TIME_OUT",t[t.STOP_CALL=101]="STOP_CALL"}(e.CustomResultCode||(e.CustomResultCode={}));!function(t){t[t.FAILED_RECEIVE_COLLAB_CMD=4001]="FAILED_RECEIVE_COLLAB_CMD",t[t.FAILED_SEND_LOCAL_CMD=4002]="FAILED_SEND_LOCAL_CMD",t[t.MESSAGE_TOO_BIG=4003]="MESSAGE_TOO_BIG",t[t.SESSION_NOT_OPENED=4004]="SESSION_NOT_OPENED",t[t.CLOSED_BY_HOST=4500]="CLOSED_BY_HOST",t[t.COLLAB_SERVER_UNREACHABLE=9e3]="COLLAB_SERVER_UNREACHABLE",t[t.COLLAB_SERVER_SHUTDOWN=9003]="COLLAB_SERVER_SHUTDOWN",t[t.COLLAB_SESSION_CLOSED=9004]="COLLAB_SESSION_CLOSED"}(e.WSCustomCode||(e.WSCustomCode={}));!function(t){t[t.LOCAL_INVALID_STARTRANGE=5001]="LOCAL_INVALID_STARTRANGE",t[t.LOCAL_INVALID_CMDJSON=5002]="LOCAL_INVALID_CMDJSON",t[t.LOCAL_TARGET_BLOCK_LOCKED=5003]="LOCAL_TARGET_BLOCK_LOCKED",t[t.LOCAL_EMPTY_CMD=5004]="LOCAL_EMPTY_CMD",t[t.LOCAL_CMD_TOO_FAST=5005]="LOCAL_CMD_TOO_FAST",t[t.LOCAL_INVALID_FOR_COLLAB=5006]="LOCAL_INVALID_FOR_COLLAB",t[t.LOCAL_BLOCKS_MISSING=5008]="LOCAL_BLOCKS_MISSING",t[t.LOCAL_NOT_READY_APPLY=5009]="LOCAL_NOT_READY_APPLY",t[t.LOCAL_DIRTY_BLOCKS=5010]="LOCAL_DIRTY_BLOCKS",t[t.COLLAB_TARGET_BLOCK_LOCKED=5500]="COLLAB_TARGET_BLOCK_LOCKED",t[t.COLLAB_NOTEVERSION_MISMATCH=5507]="COLLAB_NOTEVERSION_MISMATCH",t[t.COLLAB_BLOCKS_MISSING=5508]="COLLAB_BLOCKS_MISSING",t[t.COLLAB_DIRTY_BLOCKS=5510]="COLLAB_DIRTY_BLOCKS"}(e.DataCmdFailureCode||(e.DataCmdFailureCode={}))}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(2).BlockTypes,s=n(16),a=n(4),l=n(26),c=n(44),u=n(3);return e=o.extend({name:"abstract.comp.InsertResource",_cmdArgs:null,_note:null,_newStartBlkId:null,_newEndBlkId:null,_resourceBlock:null,_retainStartBlock:null,insertResource:function(t,e,n){throw a.error("Method not implemented with:",t,e,n),"Method not implemented"},initialize:function(){var t,n=this;n._note=n.options.note,t=n._cmdArgs=n.options.args||{},e.__super__.initialize.apply(n,arguments),u.isCollabCommand(t)||(n._newStartBlkId=u.newGUID(),n._newEndBlkId=u.newGUID(),1===t.retainStartBlock||"1"===t.retainStartBlock||!0===t.retainStartBlock?n._retainStartBlock=!0:n._retainStartBlock=!1)},apply:function(){var t=this,e=t._cmdArgs.range,n=e.getStartBlockRange(),o=n.block;return e?(e.isCollapsed()||e.isSingleTableSelected()||s.deleteSelectedContent(t,t._note,e),e.isInMultiBlock()?t._handleMultiBlockSelection(e):i.isTable(o)?t._handleSingleTableSelection(e,o):t._handleSingleBlockSelection(e)):(a.error(this.name+":note range should NOT be null"),!1)},_deleteBlocks:function(t){var e=this;e.executeAtomicCommand(new l({note:e._note,blocks:t}))},_deleteBlockText:function(t,e,n){var o=this,r="";return e<n&&(r=t.sliceText(e,n),o.executeAtomicCommand(new c({block:t,start:e,end:n}))),r},_handleMultiBlockSelection:function(t){var e,n,o,r,a,l,c,u,p,d=this,h=[],f=[];return e=t.getStartBlockRange(),n=e.block,a=t.getEndBlockRange(),l=a.block,i.isListItem(n)?(p=d._note.getNextBlock(l),a.start!==l.getLength()?(u=l.getText?l.getText():"",c=s.createNewListItem(n,l.getId(),u),f.push(c.getId())):i.isTextBlock(p)||(c=s.createNewParagraph(l,l.getId(),"")),d._deleteBlocks([l]),d._resourceBlock=d.insertResource(n,null,c),f.push(l.getId(),d._resourceBlock.getId()),c||(c=p)):i.isTextBlock(n)?i.isListItem(l)||!i.isTextBlock(l)?(u=l.getText?l.getText():"",c=s.createNewParagraph(l,l.getId(),u),d._deleteBlocks([l]),d._resourceBlock=d.insertResource(n,null,c),f.push(l.getId(),d._resourceBlock.getId())):(c=l,d._resourceBlock=d.insertResource(n),f.push(d._resourceBlock.getId())):(r=d._note.getPreBlock(n),i.isTextBlock(r)||(o=s.createNewParagraph(r,d._newStartBlkId,""),f.push(d._newStartBlkId)),h.push(n),f.push(n.getId()),i.isTextBlock(l)||(h.push(l),c=s.createNewParagraph(l,l.getId(),""),f.push(l.getId())),d._deleteBlocks(h),d._resourceBlock=d.insertResource(r,o,c),f.push(d._resourceBlock.getId()),c||(c=l)),s.setTextBlockAsEndingRange(d,c,0,0),d.pushAffectedBlockIds(f),!0},_handleSingleBlockSelection:function(t){var e,n,o,r,a,l,c,u=this,p=[];return e=t.getStartBlockRange(),n=e.block,a=t.getEndBlockRange(),a.block,!i.isTextBlock(n)||n.isEmpty()?(r=u._note.getPreBlock(n),l=u._note.getNextBlock(n),l&&i.isTextBlock(l)||(c=s.createNewParagraph(n,u._newEndBlkId,""),p.push(u._newEndBlkId)),u._retainStartBlock&&(i.isTable(n)||i.isAttachment(n)||i.isImage(n)||i.isMacro(n))||i.isCatalogue(n)?(r=n,o=s.createNewParagraph(n,u._newStartBlkId,""),p.push(u._newStartBlkId)):(r&&i.isTextBlock(r)||(o=s.createNewParagraph(n,u._newStartBlkId,""),p.push(u._newStartBlkId)),u._deleteBlocks([n]),p.push(n.getId())),u._resourceBlock=u.insertResource(r,o,c)):(l=u._note.getNextBlock(n),e.start!==n.getLength()?c=u._handleSingleParaBlock(e,n):i.isTextBlock(l)||(c=s.createNewParagraph(n,u._newEndBlkId,"")),p.push(u._newEndBlkId),u._resourceBlock=u.insertResource(n,null,c)),p.push(u._resourceBlock.getId()),c||(c=l),s.setTextBlockAsEndingRange(u,c,0,0),u.pushAffectedBlockIds(p),!0},_handleSingleParaBlock:function(t,e){var n,o=this;return n=o._deleteBlockText(e,t.start,e.getLength()),i.isHeading(e)?s.createNewHeading(e,o._newEndBlkId,n,e.getLevel()):i.isCatalogue(e)?s.createNewCatalogue(e,{paraId:o._newEndBlkId,text:n,href:e.getHref()}):i.isListItem(e)?s.createNewListItem(e,o._newEndBlkId,n):i.isTodo(e)?s.createNewTodo(e,{id:o._newEndBlkId,text:n,checked:!1}):s.createNewParagraph(e,o._newEndBlkId,n)},_handleSingleTableSelection:function(t,e){var n=this;return n._resourceBlock=n.insertResource(e),n.setEndingRange(t),!0},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._newStartBlkId=n.newStartBlkId,t._newEndBlkId=n.newEndBlkId,t._retainStartBlock=n.abstractSimpleValue1)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newStartBlkId=n._newStartBlkId,t.newEndBlkId=n._newEndBlkId,t.abstractSimpleValue1=n._retainStartBlock),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(8)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.isNoteLinkUrl=function(t){return/^note:\/\/[a-z0-9\-]+$/i.test(t)},t.getNoteId=function(t){if(t=n.trim(t||"")){var e=/^note:\/\/([a-z0-9\-]+)$/i,o=e.exec(t);if(o&&o[1])return o[1]}},t.fillAsUrl=function(t){if((t=n.trim(t||""))&&(this.isNoteLinkUrl(t)&&(t=this.getNoteId(t)),t))return"note://"+t},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){return n(20).View.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},isVisible:!0,show:function(){this.$el.show(),this.isVisible=!0},hide:function(){this.$el.hide(),this.isVisible=!1},enable:function(){this.$el.removeClass("bulb__disabled")},disable:function(){this.$el.addClass("bulb__disabled")},onEditingStateChange:function(){},onSelectionChange:function(){},destroy:function(){this.editor&&(this.editor.off(),this.editor=null),this.options&&this.options.editor&&(this.options.editor=null)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(27),o=n(133);return e.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},onEditingStateChange:function(){},onSelectionChange:o})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(40),i=n(42),s=n(45),a=n(11),l=n(4),c=n(13),u=n(808),p=n(58),d=n(2),h=d.ParagraphRange,f=d.RichText,g=d.Rich2HtmlConvertor,m=d.SupportedInlineStyles,_=d.FontMaps;return i.extend({className:"bulb__block-view bulb__paragraph-view",_template:c.getTemplate("common","paragraph_view"),_tempPlaceholder:null,initialize:function(){i.prototype.initialize.apply(this,arguments);var t=this,n=t.block;e.bindAll(t,"_onContentChange","_onStyleChange","_onHighlight"),n.on("content-change",t._onContentChange),n.on("style-change",t._onStyleChange),n.on("high-light",t._onHighlight),t._tempPlaceholder=o("<div></div>"),t._tempPlaceholder.height(0),t._tempPlaceholder.width(t.$el.width()),t._tempPlaceholder.css("display","inline-block")},render:function(){var t=this;t._renderTemplate(),t._renderText(),t._renderStyles(),i.prototype.render.apply(t,arguments)},_renderTemplate:function(){var t=this;t.$el.html(t._template())},convertToNativeRange:function(t){if(!t)return void l.warn("block range is unvalid!");var e,n,o=this;return(n=o._getCharacterInfo(t.start))?(e=document.createRange(),e.setStart(n.node,n.offset),(n=o._getCharacterInfo(t.end))?(e.setEnd(n.node,n.offset),e):void l.error("_getCharacterInfo blockRange.end error!")):void l.error("_getCharacterInfo blockRange.start error!")},parseNativeRange:function(t,e,n){var o,r,i,s=this;return n?new h({start:0,end:e.getEndOffset(),block:e}):(i=s.el.querySelector(".bulb__place-holder"),i&&" "===i.innerText?(o=r=0,t.collapsed&&(t.setStart(t.startContainer,0),t.setEnd(t.endContainer,0))):(o=s._getCharacterIndex(t.startContainer,t.startOffset,!0),-1===(r=s._getCharacterIndex(t.endContainer,t.endOffset,!1))&&(r=e.getEndOffset())),new h({start:o,end:r,block:e}))},_getCharacterInfo:function(t){var e,n=this,r=n.$el.find(".bulb__para-text").get(0),i=document.createNodeIterator(r,NodeFilter.SHOW_TEXT),s=i.nextNode(),a=0,l=0;if(0===t||!s)return o(r).children().first().hasClass("bulb__page-break-placeholder")&&(l=1),{node:s||r,offset:l};for(;s;){if(e=u(s.nodeValue),e.length>0&&a<t&&a+e.length>=t)return{node:s,offset:e.slice(0,t-a).reduce(function(t,e){return t+e.length},0)};a+=e.length,s=i.nextNode()}},_getTextOfNode:function(t){if(s.isText(t))return t.nodeValue;var e,n=document.createNodeIterator(t,NodeFilter.SHOW_TEXT),o="";if(!n)return"";for(e=n.nextNode();e;)o+=e.nodeValue,e=n.nextNode();return o},_charArrayLengthOfNode:function(t){var e=this,n=e._getTextOfNode(t);return u(n).length},_charArrayOffset:function(t,e){var n,o=u(t);for(n=0;n<o.length&&e>0;n++)e-=o[n].length;return n},_getCharacterIndex:function(t,e,n){var r,i,a=this,l=a.$el.find(".bulb__para-text").get(0),c=0;if(!o.contains(l,t)&&t!==l)return n?0:-1;for(s.isText(t)?c+=a._charArrayOffset(t.nodeValue,e):s.isElement(t)&&e>0&&(c+=a._charArrayLengthOfNode(t)),r=t;r!==l;){for(i=r.previousSibling;i;)"bulb__page-break"!==i.className&&"bulb__page-break-placeholder"!==i.className&&(c+=a._charArrayLengthOfNode(i)),i=i.previousSibling;r=r.parentNode}return c},_createHtmlForBlankLine:function(){var t,n,o,r=this,i=new f({text:" "}),s=document.createElement("span"),a={},c=function(t,e){["bold","italic","font-family","font-size"].indexOf(e)>-1&&(a[e]=t)};return e.each(r.block.getInlineStylesForEmpty(),c),i.setStyles(0," ".length,a),t=g.rich2html(i),s.innerHTML=t,n=s.getElementsByTagName("span"),n&&n.length?1===n.length?(o=n[0],o.setAttribute("class","bulb__place-holder"),t=o.outerHTML):(l.error("_createHtmlForBlankLine error",s),t='<span class="bulb__place-holder">&nbsp;</span>'):(s.setAttribute("class","bulb__place-holder"),t=s.outerHTML),t},_renderText:function(){var t,n,i=this,s=i.block,a=s.getReadOnlyText(),l=i._inlineStyleViewMapper,c=i.$el.find(".bulb__para-text");t=a.isEmpty()?this._createHtmlForBlankLine():g.rich2html(a,{styleRules:{color:function(t){var e=t.color;return t.href!==m.getDefault("href")&&r.equals(t.color,"blue")?"#003884":null!=e&&l?l.valueToView("color",e):void 0},"font-family":function(t){var e,n=t["font-family"];return null!=n&&l&&(e=l.valueToView("font-family",n)),n!==e?e:_.getAllValueByFont(n)||n}}}),c.html(t),n=s.getStyleRanges("href"),e.each(n,function(t){var e,n,r;e=new h({start:t.from,end:t.to,block:s}),n=i.convertToNativeRange(e),(r=i._findLinkNode(n.endContainer))&&(o(r).off("hover"),o(r).hover(function(){p.isNoteLinkUrl(r.href)||i.isCollabLocked()||i.trigger("link-menu-show",{linkNode:r,range:e,block:s})},function(){i.trigger("link-menu-hide")}))})},_findLinkNode:function(t){for(var e=t;e&&"A"!==e.tagName;)e=e.parentNode;return e},_renderStyles:function(){var t=this,n=t.block,o=n.getBlockStyles();e.each(o,function(e,n){t._setStyle(n,e)}),t._renderStylesFix()},_renderStylesFix:function(){this.$el.find(".bulb__para-text").css("fontSize",g.getDefaultForHtml("font-size"))},_setStyle:function(t,e){var n=this.$el,o=n.find(".bulb__para-text");switch(t){case"align":o.css("text-align",e);break;case"line-height":e>0?o.css("line-height",String(e)):o.css("line-height","normal");break;case"indent":e=e>0?e:0,n.css("margin-left",e*a.INDENT_WIDTH||"");break;case"text-indent":e=e>0?e:0,o.css("text-indent",e*a.INDENT_WIDTH||"");break;default:l.warn("unknown block style: "+t)}},_onContentChange:function(){var t=this,n=!1;e.some(t._pageInfo,function(t){return t&&t.pageBreak&&(n=!0),n}),n&&t.$el.css("height",t.$el.height()),t._renderText(),t.trigger("view-height-changed",t.cid),n&&t.$el.css("height","auto")},_onStyleChange:function(t,e){var n=this;n._setStyle(t,e),n.trigger("view-height-changed",n.cid)},_convertToData:function(t,n){var o,r=this,i=r.block;e.each(t,function(t){o=new h({block:i,start:t.start,end:t.end}),n(r.convertToNativeRange(o))})},_onHighlight:function(t,e,n){var o=this,r=o.block,i=r.getHighlight(t,e);i&&o._convertToData(i,n)},_findOverflowSpan:function(t,e){var n,o,r,i,s,a=this,l=a._pageInfo[t-1];for(l?(o=l.pageBreak.isAtViewBeginning()?a.$el.find(".bulb__para-text").children().first():l.pageBreak.getPlaceholder().next(),i=a._getOffsetTopPos(l.pageBreak.getPlaceholder())+l.pageBreak.getPlaceholder().height()):(o=a.$el.find(".bulb__para-text").children().first(),i=a._getOffsetTopPos(a.$el)),o.is("span")||(o=o.find("span").first()),n=o,r=o;n.length>0&&(n.after(a._tempPlaceholder),s=a._getOffsetTopPos(a._tempPlaceholder)-i-e,n.outerHeight(!0)>0&&(r=n),!(s>0));)n=a._tempPlaceholder.next();return a._tempPlaceholder.remove(),{textSpan:r,overflowHeight:s,isFirstSpan:o===r}},_getContentContainer:function(){return this.$el.find(".bulb__para-text")},_handlePageOverflow:function(t,e){var n,o=this,r=o._getHeightInPage(t);return!((n=o.PAGE_HEIGHT-e)>r)&&(o._insertPageBreak(t,n),!0)},_insertPageBreak:function(t,e){var n,o,r,i,s,a,l=this;l.block.isEmpty()||e<=0||l._forcePageBreakBegin?n=l._insertPageBreakAtViewBeginning(t,0):(o=l._findOverflowSpan(t,e),o.overflowHeight<=0?(n=l._createPageBreak(t,Math.abs(o.overflowHeight)),0===o.textSpan.height()?o.textSpan.before(n.getPlaceholder()):o.textSpan.after(n.getPlaceholder())):l._isSplitAvailable(o.textSpan,o.overflowHeight)?(i=o.textSpan.height()-o.overflowHeight,r=l._splitTextSpan(o.textSpan,i),n=l._createPageBreak(t,i-r[0].height()),r[0].after(n.getPlaceholder())):o.isFirstSpan?n=l._insertPageBreakAtViewBeginning(t,e):(s=l._pageInfo[t-1],a=s&&s.pageBreak?e-(l._getOffsetTopPos(o.textSpan)-l._getOffsetTopPos(s.pageBreak.getPlaceholder())-s.pageBreak.getPlaceholder().height()):e-(l._getOffsetTopPos(o.textSpan)-l._getOffsetTopPos(l.$el)),a<0&&(a=0),n=l._createPageBreak(t,a),o.textSpan.before(n.getPlaceholder()))),l._coincidePageBreak(n),l._pageInfo[t].pageBreak=n},_insertPageBreakAtViewBeginning:function(t,e){var n,o=this;return n=o._createPageBreak(t,e),n.setAtViewBeginning(!0),o.$el.prepend(n.getPlaceholder()),n},_isSplitAvailable:function(t,e){var n,o,r;if(0===t.length||""===t.text())return!1;for(o=t.height()-e,n=document.createRange(),r=t[0].firstChild;null!=r&&("#text"!==r.nodeName.toLowerCase()||0===r.textContent.length);)r=r.nextSibling;return null!=r&&(n.setStart(r,0),n.setEnd(r,1),!(n.getBoundingClientRect().height>o)&&(n.setEnd(r,r.textContent.length),!(n.getBoundingClientRect().height<o)))},_splitTextSpan:function(t,e){var n,o,r,i=t[0].firstChild,s=0,a=t.text().length,l=[];for(n=document.createRange(),n.setStart(i,0);a-s>1&&(r=Math.ceil((a+s)/2),n.setEnd(i,r),(o=n.getBoundingClientRect().height)!==e);)o>e?a=r:s=r;if(o<=e){for(;r<t.text().length&&o<=e;)r++,n.setEnd(i,r),o=n.getBoundingClientRect().height;r-=1}else for(;r>0&&o>e;)r--,n.setEnd(i,r),o=n.getBoundingClientRect().height;return l[0]=t.clone(),l[1]=t.clone(),l[0].text(t.text().substr(0,r)),l[1].text(t.text().substr(r)),t.before(l[0]),t.before(l[1]),t.remove(),l}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(140)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={}},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(11),r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"ins",46:"del",106:"*",107:"+",109:"-",110:".",111:"/",144:"numlock",186:";",189:"-",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i=o.IS_MAC?{3:"enter",91:"meta",93:"meta",224:"meta"}:{91:"win",92:"win",93:"menu",224:"win",229:"ime"},s=function(t,n,o){return e.some(t,function(t,e){return t===n&&parseInt(e,10)===o})},a={},l="A".charCodeAt(0),c="Z".charCodeAt(0);for(l;l<=c;l++)r[l]=String.fromCharCode(l).toLowerCase();for(l=1;l<20;++l)r[111+l]="f"+l;for(l=0;l<=9;l++)r[48+l]=l+"";for(l=0;l<=9;++l)r[l+96]=l+"";return{isMatch:function(t,e){var n=t+"-"+e,o=a[n];return null==o&&(o=s(i,t,e)||s(r,t,e),a[n]=o),o},getKey:function(t){if(e.isNumber(t))return t+="",r[t]||i[t]}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(4);return{_getHref:function(t,e){var n;if(!(e<0||e>=t.getLength()))return n=t.getTextStylesAtIndex(e)||{},n.href},_hasHref:function(t,e,n){var o=this,r=o._getHref(t,e);return n?r===n:r&&r.length>0},isAtHrefBorder:function(t,e,n){var o=this,r=n?e-1:e,i=o._getHref(t,r),s=o._getHref(t,n?r+1:r-1);return i&&i.length>0&&i!==s},findHrefBorder:function(t,n,o){if(!t||!t.getText)return e.error("param is not valid!"),-1;var r,i,s,a=this,l=-1,c=t.getText(),u=c.getLength();if(n>u)return-1;if(o){if(r=n-1,!(s=a._getHref(t,r)))return-1;for(i=r-1;i>=-1;i--)if(!a._hasHref(t,i,s)){l=i+1;break}}else{if(r=n,!(s=a._getHref(t,r)))return-1;for(i=r+1;i<=u;i++)if(!a._hasHref(t,i,s)){l=i-1;break}}return l},completeUrl:function(t){var e=/\:\/\//;return!t||e.exec(t)?t:"http://"+t}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";function o(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var o=t.Map;if(o)for(var r=Object.getOwnPropertyNames(o.prototype),i=0;i<r.length;++i){var s=r[i];if("entries"!==s&&"size"!==s&&o.prototype[s]===o.prototype.entries)return s}return"@@iterator"}var r=n(25);e.symbolIteratorPonyfill=o,e.iterator=o(r.root),e.$$iterator=e.iterator},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&r.isScheduler(t[1])?s.from(t[0]):a.concatAll()(i.of.apply(void 0,t))}var r=n(34),i=n(168),s=n(169),a=n(118);e.concat=o},function(t,e,n){"use strict";var o=n(0),r=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return o.Observable.of(this.value);case"E":return o.Observable.throw(this.error);case"C":return o.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=r},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(o){return"number"==typeof e&&(n=e,e=null),o.lift(new a(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(10),s=n(9);e.mergeMap=o;var a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=a;var l=function(t){function e(e,n,o,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=o,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(i.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this.resultSelector?this._notifyResultSelector(t,e,n,o):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,o){var r;try{r=this.resultSelector(t,e,n,o)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=l},function(t,e,n){"use strict";function o(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}var r=n(37);e.isNumeric=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(25),i=n(475),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.pending=!1,this.work=n}return o(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),r.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?e:r.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,o=void 0;try{this.work(t)}catch(t){n=!0,o=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,o=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&n.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i.Action);e.AsyncAction=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(476),i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return o(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}},e}(r.Scheduler);e.AsyncScheduler=i},function(t,e,n){"use strict";function o(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.map=o;var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}();e.MapOperator=s;var a=function(t){function e(e,n,o){t.call(this,e),this.project=n,this.count=0,this.thisArg=o||this}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.Subscriber)},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return o(e,t),e}(Error);e.ArgumentOutOfRangeError=r},function(t,e,n){"use strict";function o(t,e){return arguments.length>=2?function(n){return a.pipe(r.scan(t,e),i.takeLast(1),s.defaultIfEmpty(e))(n)}:function(e){return a.pipe(r.scan(function(e,n,o){return t(e,n,o+1)}),i.takeLast(1))(e)}}var r=n(127),i=n(128),s=n(122),a=n(115);e.reduce=o},function(t,e,n){n(283),n(284),n(299),n(303),t.exports=n(54).Promise},function(t,e,n){var o=n(79);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var o=n(49),r=n(286),i=n(287),s=Object.defineProperty;e.f=n(63)?Object.defineProperty:function(t,e,n){if(o(t),e=i(e,!0),o(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(18),i=n(5),s=n(2).TableRange,a=n(3);return e=r.extend({name:"atom.SetTableCellBlockStyle",_table:null,_rect:null,_type:null,effected:!1,_oldStyles:{},_styles:null,initialize:function(){var t=this,n=t.options.args;t._oldStyles={},a.isCollabCommand(n)||(t._table=t.options.table,t._styles=t.options.styles,t._toggle=t.options.toggle,t._rect=t.options.rect,t._type=t.options.type),t.type===s.TYPES.ALL&&(t._rect=t._rect||{top:0,left:0,width:t._table.getColumnCount(),height:t._table.getRowCount()}),e.__super__.initialize.apply(t)},apply:function(){var t,e,n,r,i,a,l,c,u=this,p=u._table,d=u._rect,h=u._styles||{},f=u._toggle,g=!1;if(!d)return u.effected;if(t=d.top+d.height,e=d.left+d.width,f){if(!(i=s.create({block:p,type:s.TYPES.NORMAL,rect:d})))return u.effected;if(!(a=i.getAsRectRange()))return u.effected;n=p.getCommonBlockStyle(f,a),h[f]=null==n||!n}for(r=o.keys(h),l=d.top;l<t;l++)for(c=d.left;c<e;c++)this._oldStyles[l+"-"+c]=p.getCellBlockStyles({row:l,col:c,names:r}),p.setCellBlockStyles({row:l,col:c,styles:h})&&(g=!0);return u.effected=g,u.effected},doUnapply:function(){var t,e,n=this._table,o=this._rect,r=o.top+o.height,i=o.left+o.width;for(t=o.top;t<r;t++)for(e=o.left;e<i;e++)n.setCellBlockStyles({row:t,col:e,styles:this._oldStyles[t+"-"+e]})},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._styles=i.styleNameValues,n._oldStyles=i.oldStyleNameValues,n._rect=i.simpleValue1,n._type=i.simpleValue2,n._toggle=i.newBlkId)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.styleNameValues=t._styles||null,n.oldStyleNameValues=t._oldStyles,n.simpleValue1=t._rect,n.simpleValue2=t._type,n.newBlkId=t._toggle||null,n}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(1),s=n(3);return e=o.extend({name:"atom.SetListItemLevel",_listItems:null,_newLevels:null,_oldLevels:null,initialize:function(){var t=this,n=t.options,o=n.args;s.isCollabCommand(o)||(t._listItems=n.listItems,t._newLevels={},n.newLevel?i.each(t._listItems,function(e,o){t._newLevels[o]=n.newLevel}):n.deltaLevel&&i.each(t._listItems,function(e,o){t._newLevels[o]=e.getLevel()+n.deltaLevel})),e.__super__.initialize.apply(t)},apply:function(){var t=this;return t._oldLevels={},i.each(t._newLevels,function(e,n){t._oldLevels[n]=t._listItems[n].getLevel(),t._listItems[n].setLevel(e)}),!0},doUnapply:function(){var t=this;return i.each(t._oldLevels,function(e,n){t._listItems[n].setLevel(e)}),!0},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties.cmdJSON;r&&(t=o.collabProperties.coreEditor.getNote(),r.oldLevels&&(n._oldLevels=r.oldLevels),n._newLevels=r.newLevels,n._listItems=[],i.each(r.listItemIds,function(e){n._listItems.push(t.getBlockById(e))})),e.__super__.fromCollabJSON.apply(n)},toCollabJSON:function(){var t=this,n=[],o=e.__super__.toCollabJSON.apply(t);return t._oldLevels&&(o.oldLevels=t._oldLevels),o.newLevels=t._newLevels,i.each(t._listItems,function(t){n.push(t.getId())}),o.listItemIds=n,o}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";function o(t){return"function"==typeof t}e.isFunction=o},function(t,e,n){"use strict";var o=n(25),r=o.root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";function o(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var r=n(25);e.getSymbolObservable=o,e.observable=o(r.root),e.$$observable=e.observable},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return o(e,t),e}(Error);e.ObjectUnsubscribedError=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(21),i=n(19),s=function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return o(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),i.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),i.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(r.Subject);e.AsyncSubject=s},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(new i.ArrayObservable([e].concat(t)),new u(n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(46),s=n(37),a=n(9),l=n(10),c={};e.combineLatest=o;var u=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.project))},t}();e.CombineLatestOperator=u;var p=function(t){function e(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}return r(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var o=t[n];this.add(l.subscribeToResult(this,o,o,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){var i=this.values,s=i[n],a=this.toRespond?s===c?--this.toRespond:this.toRespond:0;i[n]=e,0===a&&(this.project?this._tryProject(i):this.destination.next(i.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.OuterSubscriber);e.CombineLatestSubscriber=p},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(69);e.observeOn=o;var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=a;var l=function(t){function e(e,n,o){void 0===o&&(o=0),t.call(this,e),this.scheduler=n,this.delay=o}return r(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},e}(i.Subscriber);e.ObserveOnSubscriber=l;var c=function(){function t(t,e){this.notification=t,this.destination=e}return t}();e.ObserveOnMessage=c},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(i.identity,null,t)}var r=n(70),i=n(172);e.mergeAll=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,o=null,l=t[t.length-1];return s.isScheduler(l)?(o=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof l&&(n=t.pop()),null===o&&1===t.length&&t[0]instanceof r.Observable?t[0]:a.mergeAll(n)(new i.ArrayObservable(t,o))}var r=n(0),i=n(46),s=n(34),a=n(92);e.merge=o},function(t,e,n){"use strict";function o(t){return t instanceof Date&&!isNaN(+t)}e.isDate=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(r.apply(void 0,[e].concat(t)))}}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),new s.ArrayObservable(t).lift(new d(n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(46),a=n(37),l=n(6),c=n(9),u=n(10),p=n(67);e.zip=o,e.zipStatic=r;var d=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}();e.ZipOperator=d;var h=function(t){function e(e,n,o){void 0===o&&(o=Object.create(null)),t.call(this,e),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=o}return i(e,t),e.prototype._next=function(t){var e=this.iterators;a.isArray(t)?e.push(new g(t)):"function"==typeof t[p.iterator]?e.push(new f(t[p.iterator]())):e.push(new m(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0===e)return void this.destination.complete();this.active=e;for(var n=0;n<e;n++){var o=t[n];o.stillUnsubscribed?this.add(o.subscribe(o,n)):this.active--}},e.prototype.notifyInactive=function(){0===--this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,o=0;o<e;o++){var r=t[o];if("function"==typeof r.hasValue&&!r.hasValue())return}for(var i=!1,s=[],o=0;o<e;o++){var r=t[o],a=r.next();if(r.hasCompleted()&&(i=!0),a.done)return void n.complete();s.push(a.value)}this.project?this._tryProject(s):n.next(s),i&&n.complete()},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(l.Subscriber);e.ZipSubscriber=h;var f=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),g=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[p.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,n,o){t.call(this,e),this.parent=n,this.observable=o,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return i(e,t),e.prototype[p.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return u.subscribeToResult(this,this.observable,this,e)},e}(c.OuterSubscriber)},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(21),i=n(175),s=n(19),a=n(91),l=n(88),c=n(165),u=function(t){function e(e,n,o){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=o,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n}return o(e,t),e.prototype.next=function(e){var n=this._getNow();this._events.push(new p(n,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._trimBufferThenGetEvents(),o=this.scheduler;if(this.closed)throw new l.ObjectUnsubscribedError;this.hasError?e=s.Subscription.EMPTY:this.isStopped?e=s.Subscription.EMPTY:(this.observers.push(t),e=new c.SubjectSubscription(this,t)),o&&t.add(t=new a.ObserveOnSubscriber(t,o));for(var r=n.length,i=0;i<r&&!t.closed;i++)t.next(n[i].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||i.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,o=this._events,r=o.length,i=0;i<r&&!(t-o[i].time<n);)i++;return r>e&&(i=Math.max(i,r-e)),i>0&&o.splice(0,i),o},e}(r.Subject);e.ReplaySubject=u;var p=function(){function t(t,e){this.time=t,this.value=e}return t}()},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return o(e,t),e}(Error);e.EmptyError=r},function(t,e,n){"use strict";function o(t,n){return void 0===n&&(n=e.defaultThrottleConfig),function(e){return e.lift(new a(t,n.leading,n.trailing))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=o;var a=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector,this.leading,this.trailing))},t}(),l=function(t){function e(e,n,o,r){t.call(this,e),this.destination=e,this.durationSelector=n,this._leading=o,this._trailing=r,this._hasTrailingValue=!1}return r(e,t),e.prototype._next=function(t){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t);else{var e=this.tryDurationSelector(t);e&&this.add(this.throttled=s.subscribeToResult(this,e)),this._leading&&(this.destination.next(t),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t))}},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype._unsubscribe=function(){var t=this,e=t.throttled;t._trailingValue,t._hasTrailingValue,t._trailing;this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},e.prototype._sendTrailing=function(){var t=this,e=t.destination,n=t.throttled,o=t._trailing,r=t._trailingValue,i=t._hasTrailingValue;n&&o&&i&&(e.next(r),this._trailingValue=null,this._hasTrailingValue=!1)},e.prototype.notifyNext=function(t,e,n,o,r){this._sendTrailing(),this._unsubscribe()},e.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},e}(i.OuterSubscriber)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(27),o=n(1);return e.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onEditingStateChange:function(t){var e=this;o.has(t,e.name)&&e.setState(t[e.name])},onClick:function(){var t=this,e={};e[t.name]=!t.state,t.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:e})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(135).extend({editorEvents:{"yne-selection-change":"onSelectionChange"},onChange:function(t){var e=this,n={};n[e.name]=t,e.editor.execCommandByToolbar("comp.ApplyStyles",{blockStyles:n})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(29),o=n(8),r=n(1),i=n(11),s=n(65),a=["shift","alt","ctrl","meta"],l={return:"enter",escape:"esc",plus:"+"},c={mod:i.IS_MAC?"meta":"ctrl",option:"alt",command:"meta"};return e.extend({initialize:function(t){var e=this;t=t||{},t.el&&(r.bindAll(e,"_onKeyDown"),e.el=t.el,e._beforeMatch=t.beforeMatch,e._afterMatch=t.afterMatch,e._hasBindEvents=!1)},_bindEvents:function(){var t=this;t._hasBindEvents||(o(t.el).on("keydown",t._onKeyDown),t._hasBindEvents=!0)},_unbindEvents:function(){var t=this;t._hasBindEvents&&(o(t.el).off("keydown",t._onKeyDown),t._hasBindEvents=!1)},_prepareForBindKey:function(){var t=this;t._hasBindEvents||t._bindEvents(),t._keyMap||(t._keyMap={}),t._matchCache||(t._matchCache={})},_formatKey:function(t){t=o.trim(t),t=t.toLowerCase(),t=t.replace(/\s+/g,""),r.each(c,function(e,n){t=t.replace(n+"+",e+"+")});var e={},n=t.split(/\+/),i=r.last(n),s=[];return i=l[i]||i,e.key=i,r.each(a,function(n){t.indexOf(n)>-1&&(e[n]=!0,s.push(n))}),s.push(i),e.mark=s.join("-"),e},isEventMatchKey:function(t,e){var n=this._extractEventInfo(t),o=this._formatKey(e);return this._isMatch(n,o)},_extractEventInfo:function(t){var e={},n=[];return r.each(a,function(o){t[o+"Key"]&&(e[o]=!0,n.push(o))}),n.push(t.keyCode),e.keyCode=t.keyCode,e.mark=n.join("-"),e},_isMatch:function(t,e){return!(!e||!event)&&(r.every(a,function(n){return e[n]===t[n]})&&s.isMatch(e.key,t.keyCode))},_onKeyDown:function(t){var e,n,o=this,i=o._keyMap,s=o._extractEventInfo(t),a=s.mark,l=o._matchCache,c=l[a];o._beforeMatch&&o._beforeMatch(t),c||(c=l[a]={eventInfo:s},e={},n=!1,r.each(i,function(t,r){o._isMatch(s,t.keyInfo)&&(e[r]=t,n=!0)}),n&&(c.handlers=e)),r.each(c.handlers,function(e){e.callback.apply(null,[t])}),o._afterMatch&&o._afterMatch(t,n)},bind:function(t,e){var n,o,i=this,s=i._formatKey(t);s&&(i._prepareForBindKey(),o=i._keyMap["key-"+t]={keyInfo:s,callback:e},n=i._matchCache,r.each(n,function(t){if(t&&t.eventInfo){var e,n=t.handlers;n?e=!0:(n={},e=!1),i._isMatch(t.eventInfo,s)&&(n[s.mark]=o,e=!0),e&&(t.handlers=n)}}))},unbind:function(t){var e=this,n=e._keyMap,o=e._matchCache,i="key-"+t;n&&n[i]&&delete n[i],r.each(o,function(t){var e=t.handlers;e&&e[i]&&delete e[i]})},unbindAll:function(){var t=this;t._unbindEvents(),t._keyMap={},t._matchCache={}},clearCache:function(){this._matchCache={}}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e,n){var o=n(62),r=n(30).document,i=o(r)&&o(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},function(t,e,n){var o=n(294),r=n(103);t.exports=function(t){return o(r(t))}},function(t,e,n){var o=n(143)("keys"),r=n(144);t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e,n){var o=n(80).f,r=n(81),i=n(31)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";var n=/</g,o=/>/g,r=/"/g,i=/&quot;/g,s=/&#([a-zA-Z0-9]*);?/gim,a=/&colon;?/gim,l=/&newline;?/gim,c=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,u=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,p=/u\s*r\s*l\s*\(.*/gi,d=/<!--[\s\S]*?-->/g;return function(){function t(){}return t.escapeHtml=function(t){return t.replace(n,"&lt;").replace(o,"&gt;")},t.escapeQuote=function(t){return t.replace(r,"&quot;")},t.unescapeQuote=function(t){return t.replace(i,'"')},t.escapeHtmlEntities=function(t){return t.replace(s,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})},t.escapeDangerHtml5Entities=function(t){return t.replace(a,":").replace(l," ")},t.clearNonPrintableCharacter=function(t){for(var e="",n=0,o=t.length;n<o;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return e.trim()},t.friendlyAttrValue=function(t){return t=this.unescapeQuote(t),t=this.escapeHtmlEntities(t),t=this.escapeDangerHtml5Entities(t),t=this.clearNonPrintableCharacter(t)},t.escapeAttrValue=function(t){return t=this.escapeQuote(t),t=this.escapeHtml(t)},t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(t,e){function n(e){return!!o||-1!==t.indexOf(e)}"function"!=typeof e&&(e=function(){});var o=!Array.isArray(t),r=[],i=!1;return{onIgnoreTag:function(t,o,s){if(n(t)){if(s.isClosing){var a="[/removed]",l=s.position+a.length;return r.push([!1!==i?i:s.position,l]),i=!1,a}return i||(i=s.position),"[removed]"}return e(t,o,s)},remove:function(t){var e="",n=0;return r.forEach(function(o){e+=t.slice(n,o[0]),n=o[1]}),e+=t.slice(n)}}},t.stripCommentTag=function(t){return t.replace(d,"")},t.stripBlankChar=function(t){var e=t.split("");return e=e.filter(function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}),e.join("")},t.safeHref=function(t){return t=this.friendlyAttrValue(t),c.lastIndex=0,c.test(t)?"":t=this.escapeAttrValue(t)},t.safeAttrValue=function(t,e){if(e=this.friendlyAttrValue(e),"href"===t||"src"===t){if("#"===(e=e.trim()))return"#";if("http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&"mailto:"!==e.substr(0,7)&&"#"!==e[0]&&"/"!==e[0])return""}else if("background"===t){if(c.lastIndex=0,c.test(e))return""}else if("style"===t){if(u.lastIndex=0,u.test(e))return"";if(p.lastIndex=0,p.test(e)&&(c.lastIndex=0,c.test(e)))return""}return e=this.escapeAttrValue(e)},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isCmdVersionMatchNoteVersion=function(t,e){return t-e==1},t.isMessageTooLarge=function(t){return t>5e3},t.newGUID=function(){var t="";return t+=Math.floor(10*Math.random()).toString().substr(0,1),t+=Math.floor(10*Math.random()).toString().substr(0,1),t+="-",t+=Date.now().toString()},t}();e.Utils=n}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return{test:function(t){var e=/(https?:\/\/|www\.|ssh:\/\/|ftp:\/\/)[a-z0-9&_+\-\?\/\.=\#,:,@]+$/i,n=/[a-z0-9_+\-\.]+@[a-z0-9_+\-\.]+$/i;return t=String(t),e.test(t)||n.test(t)||!1},matchEnd:function(t){var e,n,o=/(https?:\/\/|www\.|ssh:\/\/|ftp:\/\/)[a-z0-9&_+\-\?\/\.=\#,:@%\(\)~]+$/i,r=/[a-z0-9_+\-\.]+@[a-z0-9_+\-\.]+$/i;return t=String(t),(e=o.exec(t))?(n=e[0],{mail:!1,fullURI:0===n.toLowerCase().indexOf("www.")?"http://"+n:n,result:e}):(e=r.exec(t),e?(n=e[0],{mail:!0,fullURI:"mailto:"+n,result:e}):void 0)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(1),s=n(3);return e=o.extend({name:"atom.SetInlineStyle",_selectedBlocks:null,_start:null,_end:null,_isFullText:!1,_oldStyleNameValues:{},_styleNameValues:null,initialize:function(){var t=this,n=t.options.args;t._oldStyleNameValues={},s.isCollabCommand(n)||(t._selectedBlocks=t.options.blocks,t._styleNameValues=t.options.styleNameValues,t._start=t.options.start,t._end=t.options.end,t._isFullText=t.options.fullText),e.__super__.initialize.apply(t)},apply:function(){var t=this;i.each(t._styleNameValues,function(e,n){t._setStyleToSelectedBlocks(n,e)})},doUnapply:function(){var t,e=this;i.each(e._selectedBlocks,function(n){t=e._oldStyleNameValues[n.getId()],e._isFullText&&(e._start=n.getStartOffset(),e._end=n.getEndOffset()),i.each(t,function(t,o){n.setTextStyle(o,t,e._start,e._end)})})},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,s=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),s&&(n._selectedBlocks=[],i.each(s.blockIds,function(e){n._selectedBlocks.push(t.getBlockById(e))}),n._styleNameValues=s.styleNameValues,n._oldStyleNameValues=s.oldStyleNameValues,n._start=s.startPosition,n._end=s.endPosition,n._isFullText=s.simpleValue1)},toCollabJSON:function(){var t=this,n=[],o=e.__super__.toCollabJSON.apply(t);return t._selectedBlockIds=[],i.each(t._selectedBlocks,function(t){n.push(t.getId())}),o.blockIds=n,o.styleNameValues=t._styleNameValues,o.oldStyleNameValues=t._oldStyleNameValues,o.startPosition=t._start,o.endPosition=t._end,t._isFullText&&(o.simpleValue1=!0),o},_setStyleToSelectedBlocks:function(t,e){var n,o,r,s=this;i.each(s._selectedBlocks,function(i){o=i.getId(),s._isFullText&&(s._start=i.getStartOffset(),s._end=i.getEndOffset()),n=i.getTextStyle(t,s._start,s._end),s._oldStyleNameValues[o]||(s._oldStyleNameValues[o]={}),s._oldStyleNameValues[o][t]=n,i.isEmpty()&&(r=i.getInlineStylesForEmpty(),r[t]=e,i.setInlineStylesForEmpty(r)),i.setTextStyle(t,e,s._start,s._end)})}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(3),s={POINT:"point",CELL:"cell"};return e=o.extend({name:"atom.SetTableCellAttr",_table:null,_rect:null,_type:null,_value:null,_oldValue:null,effected:!1,initialize:function(){var t=this,n=t.options.args;i.isCollabCommand(n)||(t._table=t.options.table,t._rect=t.options.rect,t._type=t.options.type,t._value=t.options.value),e.__super__.initialize.apply(t)},apply:function(){var t=this,e=t._type,n=t._table,o=t._rect,r=t._value;return r?e===s.POINT?(t._oldValue=t._getOldAttr(o.row,o.col),n.setMergePointAttrAt(o.row,o.col,r.width,r.height),void(t.effected=!0)):e===s.CELL?(t._oldValue=t._getOldAttr(o.row,o.col),n.setMergedCellAttrAt(o.row,o.col,r.dx,r.dy),void(t.effected=!0)):void 0:void((n.isMergePoint(o.row,o.col)||n.isMergedCell(o.row,o.col))&&(t._oldValue=t._getOldAttr(o.row,o.col),n.clearCellAttr(o.row,o.col),t.effected=!0))},_getOldAttr:function(t,e){var n=this,o=n._table;return o.isMergedCell(t,e)?o.getMergedCellAttrAt(t,e):o.isMergePoint(t,e)?o.getMergePointAttrAt(t,e):null},doUnapply:function(){var t=this,e=t._table,n=t._rect,o=t._oldValue;if(!o)return void e.clearCellAttr(n.row,n.col);(o.width||o.height)&&e.setMergePointAttrAt(n.row,n.col,o.width,o.height),(o.dx||o.dy)&&e.setMergedCellAttrAt(n.row,n.col,o.dx,o.dy)},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._value=i.styleNameValues,n._oldValue=i.oldStyleNameValues,n._rect=i.simpleValue1,n._type=i.simpleValue2)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.styleNameValues=t._value,n.oldStyleNameValues=t._oldValue,n.simpleValue1=t._rect,n.simpleValue2=t._type,n}},{TYPES:s}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";var o=n(434),r=n(1),i=new o.Subject,s=function(){i.next()};return{trigger:r.debounce(s,100),register:function(t){i.subscribe(t)}}}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r(t)}function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:i.noop}var i=n(116);e.pipe=o,e.pipeFromArray=r},function(t,e,n){"use strict";function o(){}e.noop=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return o(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,o=t.subscriber;if(e)return void o.complete();o.next(n),o.closed||(t.done=!0,this.schedule(t))},e.prototype._subscribe=function(t){var n=this.value,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(r.Observable);e.ScalarObservable=i},function(t,e,n){"use strict";function o(){return r.mergeAll(1)}var r=n(92);e.concatAll=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!i.isArray(t[0]))return t[0];t=t[0]}return new s.ArrayObservable(t).lift(new c)}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(37),s=n(46),a=n(9),l=n(10);e.race=o;var c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}();e.RaceOperator=c;var u=function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return r(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var o=t[n],r=l.subscribeToResult(this,o,o,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,o,r){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var s=this.subscriptions[i];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(a.OuterSubscriber);e.RaceSubscriber=u},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&a.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new u(t))}}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return 1===t.length&&a.isArray(t[0])&&(t=t[0]),n=t.shift(),new s.FromObservable(n,null).lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(170),a=n(37),l=n(9),c=n(10);e.onErrorResumeNext=o,e.onErrorResumeNextStatic=r;var u=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.nextSources))},t}(),p=function(t){function e(e,n){t.call(this,e),this.destination=e,this.nextSources=n}return i(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(c.subscribeToResult(this,t)):this.destination.complete()},e}(l.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){return r.mergeMap(t,e,1)}var r=n(70);e.concatMap=o},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=null),function(e){return e.lift(new s(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.defaultIfEmpty=o;var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.defaultValue))},t}(),a=function(t){function e(e,n){t.call(this,e),this.defaultValue=n,this.isEmpty=!0}return r(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new l(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(23),a=n(22);e.distinctUntilChanged=o;var l=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compare,this.keySelector))},t}(),c=function(t){function e(e,n,o){t.call(this,e),this.keySelector=o,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return r(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=this.keySelector,n=t;if(e&&(n=s.tryCatch(this.keySelector)(t))===a.errorObject)return this.destination.error(a.errorObject.e);var o=!1;if(this.hasKey){if((o=s.tryCatch(this.compare)(this.key,n))===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;!1===Boolean(o)&&(this.key=n,this.destination.next(t))},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new s(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.filter=o;var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))},t}(),a=function(t){function e(e,n,o){t.call(this,e),this.predicate=n,this.thisArg=o,this.count=0}return r(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new s(t,n,!1,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.find=o;var s=function(){function t(t,e,n,o){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=o}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=s;var a=function(t){function e(e,n,o,r,i){t.call(this,e),this.predicate=n,this.source=o,this.yieldIndex=r,this.thisArg=i,this.index=0}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this,n=e.predicate,o=e.thisArg,r=this.index++;try{n.call(o||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(i.Subscriber);e.FindValueSubscriber=a},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new c(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(23),s=n(22),a=n(9),l=n(10);e.audit=o;var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.durationSelector))},t}(),u=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return r(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=i.tryCatch(this.durationSelector)(t);if(e===s.errorObject)this.destination.error(s.errorObject.e);else{var n=l.subscribeToResult(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,o=t.throttled;o&&(this.remove(o),this.throttled=null,o.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(t,e,n,o){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(a.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new s(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.scan=o;var s=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))},t}(),a=function(t){function e(e,n,o,r){t.call(this,e),this.accumulator=n,this._seed=o,this.hasSeed=r,this.index=0}return r(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return 0===t?new a.EmptyObservable:e.lift(new l(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(75),a=n(47);e.takeLast=o;var l=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){t.call(this,e),this.total=n,this.ring=new Array,this.count=0}return r(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,o=this.count++;if(e.length<n)e.push(t);else{e[o%n]=t}},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,o=this.ring,r=0;r<n;r++){var i=e++%n;t.next(o[i])}t.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new s(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.refCount=o;var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var o=new a(t,n),r=e.subscribe(o);return o.closed||(o.connection=n.connect()),r},t}(),a=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(!t)return void(this.connection=null);this.connectable=null;var e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);var n=this.connection,o=t._connection;this.connection=null,!o||n&&o!==n||o.unsubscribe()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.switchMap=o;var a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.resultSelector))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.project=n,this.resultSelector=o,this.index=0}return r(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var o=this.innerSubscription;o&&o.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,o,r){this.resultSelector?this._tryNotifyNext(t,e,n,o):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,o){var r;try{r=this.resultSelector(t,e,n,o)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=r.async),i.map(function(e){return new s(e,t.now())})}var r=n(14),i=n(74);e.timestamp=o;var s=function(){function t(t,e){this.value=t,this.timestamp=e}return t}();e.Timestamp=s},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";var n=/^http[s]{0,1}:\/\/note.youdao.com/;return function(){function t(){}return t.setUseConvert=function(t){this._useConvert=!!t},t.isInnerResoures=function(t){return n.test(t)},t.getURL=function(t){return this._useConvert&&this.isInnerResoures(t)?t.replace(n,"//note.youdao.com"):t},t._useConvert=!1,t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return function(){}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(135),o=n(8),r=n(1);return e.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onChange:function(t){var e=this,n={};n[e.name]=t,e.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:n})},updateValueUI:function(t){var e=this,n=o(e.valueWrapperEl).find(".bulb__combo-value")[0];e.items[t]?o(n).text(e.items[t]):o(n).text(e.getUnlistedText(t)||"")},getUnlistedText:function(){return""},onEditingStateChange:function(t,e){var n=this;n._isForceSelectWhenClick=!1,r.has(t,n.name)&&(e&&r.has(e,n.name)&&t[n.name]!==e[n.name]&&(n._isForceSelectWhenClick=!0),n.select(t[n.name]))}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(13),i=n(59),s=n(39),a=n(11);return i.extend({className:"bulb__toolbar-item bulb__toolbar-combo-box",events:{"click .bulb__combo-value-wrapper":"onValueWrapperElClick","click .bulb__combo-expand-wrapper":"onExpandWrapperElClick","click .bulb__combo-menu-wrapper":"onMenuWrapperClick",mousedown:"onMouseDown"},name:"unknown",label:"unknown",defaultValue:"",items:{},value:"",templateName:"toolbar-combo-box-template",_isForceSelectWhenClick:!1,initialize:function(t){var e=this;e.editor=t.editor,e.render(),e.defaultSetValue?e.select(e.defaultSetValue):e.select(e.defaultValue),e.bindEvents(),e.bindDocumentEvents(),e.bindEditorEvents()},render:function(){var t,e=this,n=e.$el;if(n.addClass("bulb__combo-box-"+e.name),t=r.render("web",e.templateName,{name:e.name,label:e.label,defaultValue:e.defaultValue,items:e.items}),n.html(t),e.valueWrapperEl=n.find(".bulb__combo-value-wrapper")[0],e.expandWrapperEl=n.find(".bulb__combo-expand-wrapper")[0],e.menuWrapperEl=n.find(".bulb__combo-menu-wrapper")[0],e.displayWrapperEl=n.find(".bulb__combo-display-wrapper")[0],o(e.displayWrapperEl).tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]}),e.isVisible||e.hide(),"heading"===e.name&&!s.isSafari())for(var i=a.IS_MAC?"Command+":"Ctrl+",l=3;l<=6;l++)o(o(e.menuWrapperEl).find("li[data-value="+l+"]")[0]).tooltipster({animation:"",animationDuration:0,theme:["tooltipster-heading","tooltipster-heading-customized"],side:"right",delay:[800,300],content:i+(l-2)})},bindEvents:function(){},bindDocumentEvents:function(){var t=this;e.bindAll(t,"onDocumentMouseDown"),o(document).on("mousedown",t.onDocumentMouseDown)},bindEditorEvents:function(){var t=this,n=t.editor,o=t.editorEvents;o&&e.each(o,function(e,o){n.on(o,t[e].bind(t))})},onValueWrapperElClick:function(){this.toggleMenu()},onExpandWrapperElClick:function(){this.toggleMenu()},onMenuWrapperClick:function(t){var e=this,n=t.target,r=o(n).closest(".bulb__combo-item")[0];r&&(e.hideMenu(),e.onItemClick(r))},onItemClick:function(t){var e,n,r=this,i=o(t).data("value"),s=r.editor,a=s.getNoteRange();i&&(i!==r.value||!0===r._isForceSelectWhenClick||a.isInMultiBlock())&&(r._isForceSelectWhenClick=!1,r.select(i),r.onChange(i)),a.isSingleTableSelected()&&(e=a.startRange,n=e.getAsRectRange(),n.onlyOneCell()||(r.select(i),r.onChange(i)))},select:function(t){var e=this;e.value=t,e.updateValueUI(t)},updateValueUI:function(){},onChange:function(){},showMenu:function(){var t,e=this,n=e.menuWrapperEl;o(n).removeClass("bulb__menu-position-fix"),o(n).addClass("bulb__show"),t=n.getBoundingClientRect(),t.right>document.documentElement.offsetWidth&&o(n).addClass("bulb__menu-position-fix")},hideMenu:function(){o(this.menuWrapperEl).removeClass("bulb__show")},toggleMenu:function(){var t=this;o(t.menuWrapperEl).hasClass("bulb__show")?t.hideMenu():t.showMenu()},onDocumentMouseDown:function(t){var e=this,n=t.target;o.contains(e.el,n)||e.hideMenu()},onMouseDown:function(t){t.preventDefault()},reset:function(){var t=this;t.defaultSetValue?t.select(t.defaultSetValue):t.select(t.defaultValue)},destroy:function(){i.prototype.destroy.apply(this,arguments),o(document).off("mousedown")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({editorEvents:{"yne-selection-change":"onSelectionChange"},onSelectionChange:function(){var t=this;t.setState(t.querySelectionState())},querySelectionState:function(){var t=this;return t.editor.querySelectionInlineStyle(t.name)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(1)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.getFileType=function(t){if(n.isUndefined(t))return null;var e=t.toLowerCase().split("."),o=e[e.length-1];return this.FILE_MAP[o]||"other"},t.getSizeString=function(t){var e=0,n=parseInt(t,10);if(n=n||0,isNaN(n))return"";if(n<=0)return"";for(;n>=1024&&e<3;)e++,n/=1024;return String(Math.floor(100*n)/100)+this.TEXT[e]},t.splitFileFullName=function(t){if(n.isUndefined(t))return null;var e,o,r=t.lastIndexOf(".");return r<0?(e=t,o=""):0===r?(e="",o=t):(e=t.substring(0,r-1),o=t.substring(r-1)),{fileName:e,fileType:o}},t.getFileIconByName=function(t){var e=this.getFileType(t),n="bulb__svg--type_other_large";return e&&(n="bulb__svg--type_"+e+"_large"),n},t.TEXT=["B","KB","MB","GB","TB"],t.FILE_MAP={table:"table",pdf:"pdf",txt:"txt",text:"txt",mht:"html",doc:"word",docx:"word",excel:"excel",xls:"excel",xlsx:"excel",csv:"excel",ppt:"ppt",pps:"ppt",pptx:"ppt",ppsx:"ppt",flash:"flash",swf:"flash",flv:"flash",compress:"compress",zip:"compress",rar:"compress","7z":"compress",audio:"audio",mp3:"music",aac:"music",ogg:"music",wav:"music",flac:"music",m4a:"music",ape:"music",wma:"music",video:"video",rm:"video",rmvb:"video",avi:"video",mkv:"video",mpg:"video",mpeg:"video",wmv:"video",ts:"video",m4v:"video",mp4:"video",image:"image",jpg:"image",jpeg:"image",gif:"image",png:"image",bmp:"image",md:"md",scan:"scan",html:"html",htm:"html"},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";var o=n(104),r=n(139),i=n(288),s=n(55),a=n(64),l=n(289),c=n(108),u=n(297),p=n(31)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,f,g,m,_){l(n,e,f);var b,y,v,w=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},I=e+" Iterator",C="values"==g,M=!1,T=t.prototype,k=T[p]||T["@@iterator"]||g&&T[g],S=k||w(g),N=g?C?w("entries"):S:void 0,x="Array"==e?T.entries||k:k;if(x&&(v=u(x.call(new t)))!==Object.prototype&&v.next&&(c(v,I,!0),o||"function"==typeof v[p]||s(v,p,h)),C&&k&&"values"!==k.name&&(M=!0,S=function(){return k.call(this)}),o&&!_||!d&&!M&&T[p]||s(T,p,S),a[e]=S,a[I]=h,g)if(b={values:C?S:w("values"),keys:m?S:w("keys"),entries:N},_)for(y in b)y in T||i(T,y,b[y]);else r(r.P+r.F*(d||M),e,b);return b}},function(t,e,n){var o=n(30),r=n(54),i=n(78),s=n(55),a=n(81),l=function(t,e,n){var c,u,p,d=t&l.F,h=t&l.G,f=t&l.S,g=t&l.P,m=t&l.B,_=t&l.W,b=h?r:r[e]||(r[e]={}),y=b.prototype,v=h?o:f?o[e]:(o[e]||{}).prototype;h&&(n=e);for(c in n)(u=!d&&v&&void 0!==v[c])&&a(b,c)||(p=u?v[c]:n[c],b[c]=h&&"function"!=typeof v[c]?n[c]:m&&u?i(p,o):_&&v[c]==p?function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(p):g&&"function"==typeof p?i(Function.call,p):p,g&&((b.virtual||(b.virtual={}))[c]=p,t&l.R&&y&&!y[c]&&s(y,c,p)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var o=n(102),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},function(t,e,n){var o=n(54),r=n(30),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:n(104)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var o=n(30).document;t.exports=o&&o.documentElement},function(t,e,n){var o=n(82),r=n(31)("toStringTag"),i="Arguments"==o(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:i?o(e):"Object"==(a=o(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var o,r,i,s=n(78),a=n(310),l=n(146),c=n(105),u=n(30),p=u.process,d=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,g=u.Dispatch,m=0,_={},b=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){b.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++m]=function(){a("function"==typeof t?t:Function(t),e)},o(m),m},h=function(t){delete _[t]},"process"==n(82)(p)?o=function(t){p.nextTick(s(b,t,1))}:g&&g.now?o=function(t){g.now(s(b,t,1))}:f?(r=new f,i=r.port2,r.port1.onmessage=y,o=s(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):o="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){"use strict";function o(t){var e,n;this.promise=new t(function(t,o){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=o}),this.resolve=r(e),this.reject=r(n)}var r=n(79);t.exports.f=function(t){return new o(t)}},function(t,e,n){var o,o;!function(e){t.exports=e()}(function(){return function t(e,n,r){function i(a,l){if(!n[a]){if(!e[a]){var c="function"==typeof o&&o;if(!l&&c)return o(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var o=t("./trim"),r=t("./decapitalize");e.exports=function(t,e){return t=o(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""}),!0===e?r(t):t}},{"./decapitalize":9,"./trim":60}],2:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return t=o(t),t.charAt(0).toUpperCase()+t.slice(1)}},{"./helper/makeString":19}],3:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).split("")}},{"./helper/makeString":19}],4:[function(t,e,n){e.exports=function(t,e){return null==t?[]:(t=String(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])}},{}],5:[function(t,e,n){var o=t("./capitalize"),r=t("./camelize"),i=t("./helper/makeString");e.exports=function(t){return t=i(t),o(r(t.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":1,"./capitalize":2,"./helper/makeString":19}],6:[function(t,e,n){var o=t("./trim");e.exports=function(t){return o(t).replace(/\s+/g," ")}},{"./trim":60}],7:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){if(t=o(t),e=o(e),0===t.length||0===e.length)return 0;for(var n=0,r=0,i=e.length;;){if(-1===(r=t.indexOf(e,r)))break;n++,r+=i}return n}},{"./helper/makeString":19}],8:[function(t,e,n){var o=t("./trim");e.exports=function(t){return o(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":60}],9:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return t=o(t),t.charAt(0).toLowerCase()+t.slice(1)}},{"./helper/makeString":19}],10:[function(t,e,n){function o(t){for(var e=t.match(/^[\s\\t]*/gm),n=e[0].length,o=1;o<e.length;o++)n=Math.min(e[o].length,n);return n}var r=t("./helper/makeString");e.exports=function(t,e){t=r(t);var n,i=o(t);return 0===i?t:(n="string"==typeof e?new RegExp("^"+e,"gm"):new RegExp("^[ \\t]{"+i+"}","gm"),t.replace(n,""))}},{"./helper/makeString":19}],11:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/toPositive");e.exports=function(t,e,n){return t=o(t),e=""+e,(n=void 0===n?t.length-e.length:Math.min(r(n),t.length)-e.length)>=0&&t.indexOf(e,n)===n}},{"./helper/makeString":19,"./helper/toPositive":21}],12:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/escapeChars"),i={};for(var s in r)i[r[s]]=s;i["'"]="#39",e.exports=function(t){return o(t).replace(/[&<>"']/g,function(t){return"&"+i[t]+";"})}},{"./helper/escapeChars":17,"./helper/makeString":19}],13:[function(t,e,n){e.exports=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse|join)$/)&&(t[e]=this[e]);return t}},{}],14:[function(t,e,n){"use strict";function o(t){if(!(this instanceof o))return new o(t);this._wrapped=t}function r(t,e){"function"==typeof e&&(o.prototype[t]=function(){var t=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=e.apply(null,t);return"string"==typeof n?new o(n):n})}o.VERSION="3.0.3",o.isBlank=t("./isBlank"),o.stripTags=t("./stripTags"),o.capitalize=t("./capitalize"),o.decapitalize=t("./decapitalize"),o.chop=t("./chop"),o.trim=t("./trim"),o.clean=t("./clean"),o.count=t("./count"),o.chars=t("./chars"),o.swapCase=t("./swapCase"),o.escapeHTML=t("./escapeHTML"),o.unescapeHTML=t("./unescapeHTML"),o.splice=t("./splice"),o.insert=t("./insert"),o.replaceAll=t("./replaceAll"),o.include=t("./include"),o.join=t("./join"),o.lines=t("./lines"),o.dedent=t("./dedent"),o.reverse=t("./reverse"),o.startsWith=t("./startsWith"),o.endsWith=t("./endsWith"),o.pred=t("./pred"),o.succ=t("./succ"),o.titleize=t("./titleize"),o.camelize=t("./camelize"),o.underscored=t("./underscored"),o.dasherize=t("./dasherize"),o.classify=t("./classify"),o.humanize=t("./humanize"),o.ltrim=t("./ltrim"),o.rtrim=t("./rtrim"),o.truncate=t("./truncate"),o.prune=t("./prune"),o.words=t("./words"),o.pad=t("./pad"),o.lpad=t("./lpad"),o.rpad=t("./rpad"),o.lrpad=t("./lrpad"),o.sprintf=t("./sprintf"),o.vsprintf=t("./vsprintf"),o.toNumber=t("./toNumber"),o.numberFormat=t("./numberFormat"),o.strRight=t("./strRight"),o.strRightBack=t("./strRightBack"),o.strLeft=t("./strLeft"),o.strLeftBack=t("./strLeftBack"),o.toSentence=t("./toSentence"),o.toSentenceSerial=t("./toSentenceSerial"),o.slugify=t("./slugify"),o.surround=t("./surround"),o.quote=t("./quote"),o.unquote=t("./unquote"),o.repeat=t("./repeat"),o.naturalCmp=t("./naturalCmp"),o.levenshtein=t("./levenshtein"),o.toBoolean=t("./toBoolean"),o.exports=t("./exports"),o.escapeRegExp=t("./helper/escapeRegExp"),o.strip=o.trim,o.lstrip=o.ltrim,o.rstrip=o.rtrim,o.center=o.lrpad,o.rjust=o.lpad,o.ljust=o.rpad,o.contains=o.include,o.q=o.quote,o.toBool=o.toBoolean,o.camelcase=o.camelize,o.prototype={value:function(){return this._wrapped}};for(var i in o)r(i,o[i]);r("tap",function(t,e){return e(t)});var s=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var i in s)!function(t){r(t,function(e){var n=Array.prototype.slice.call(arguments,1);return String.prototype[t].apply(e,n)})}(s[i]);e.exports=o},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./count":7,"./dasherize":8,"./decapitalize":9,"./dedent":10,"./endsWith":11,"./escapeHTML":12,"./exports":13,"./helper/escapeRegExp":18,"./humanize":22,"./include":23,"./insert":24,"./isBlank":25,"./join":26,"./levenshtein":27,"./lines":28,"./lpad":29,"./lrpad":30,"./ltrim":31,"./naturalCmp":32,"./numberFormat":33,"./pad":34,"./pred":35,"./prune":36,"./quote":37,"./repeat":38,"./replaceAll":39,"./reverse":40,"./rpad":41,"./rtrim":42,"./slugify":43,"./splice":44,"./sprintf":45,"./startsWith":46,"./strLeft":47,"./strLeftBack":48,"./strRight":49,"./strRightBack":50,"./stripTags":51,"./succ":52,"./surround":53,"./swapCase":54,"./titleize":55,"./toBoolean":56,"./toNumber":57,"./toSentence":58,"./toSentenceSerial":59,"./trim":60,"./truncate":61,"./underscored":62,"./unescapeHTML":63,"./unquote":64,"./vsprintf":65,"./words":66}],15:[function(t,e,n){var o=t("./makeString");e.exports=function(t,e){return t=o(t),0===t.length?"":t.slice(0,-1)+String.fromCharCode(t.charCodeAt(t.length-1)+e)}},{"./makeString":19}],16:[function(t,e,n){var o=t("./escapeRegExp");e.exports=function(t){return null==t?"\\s":t.source?t.source:"["+o(t)+"]"}},{"./escapeRegExp":18}],17:[function(t,e,n){var o={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};e.exports=o},{}],18:[function(t,e,n){var o=t("./makeString");e.exports=function(t){return o(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":19}],19:[function(t,e,n){e.exports=function(t){return null==t?"":""+t}},{}],20:[function(t,e,n){e.exports=function(t,e){if(e<1)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n}},{}],21:[function(t,e,n){e.exports=function(t){return t<0?0:+t||0}},{}],22:[function(t,e,n){var o=t("./capitalize"),r=t("./underscored"),i=t("./trim");e.exports=function(t){return o(i(r(t).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":2,"./trim":60,"./underscored":62}],23:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){return""===e||-1!==o(t).indexOf(e)}},{"./helper/makeString":19}],24:[function(t,e,n){var o=t("./splice");e.exports=function(t,e,n){return o(t,e,0,n)}},{"./splice":44}],25:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return/^\s*$/.test(o(t))}},{"./helper/makeString":19}],26:[function(t,e,n){var o=t("./helper/makeString"),r=[].slice;e.exports=function(){var t=r.call(arguments),e=t.shift();return t.join(o(e))}},{"./helper/makeString":19}],27:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);for(var n,r,i=[],s=0;s<=e.length;s++)for(var a=0;a<=t.length;a++)r=s&&a?t.charAt(a-1)===e.charAt(s-1)?n:Math.min(i[a],i[a-1],n)+1:s+a,n=i[a],i[a]=r;return i.pop()}},{"./helper/makeString":19}],28:[function(t,e,n){e.exports=function(t){return null==t?[]:String(t).split(/\r?\n/)}},{}],29:[function(t,e,n){var o=t("./pad");e.exports=function(t,e,n){return o(t,e,n)}},{"./pad":34}],30:[function(t,e,n){var o=t("./pad");e.exports=function(t,e,n){return o(t,e,n,"both")}},{"./pad":34}],31:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=String.prototype.trimLeft;e.exports=function(t,e){return t=o(t),!e&&i?i.call(t):(e=r(e),t.replace(new RegExp("^"+e+"+"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],32:[function(t,e,n){e.exports=function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,o=String(t).match(n),r=String(e).match(n),i=Math.min(o.length,r.length),s=0;s<i;s++){var a=o[s],l=r[s];if(a!==l){var c=+a,u=+l;return c===c&&u===u?c>u?1:-1:a<l?-1:1}}return o.length!=r.length?o.length-r.length:t<e?-1:1}},{}],33:[function(t,e,n){e.exports=function(t,e,n,o){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),o="string"==typeof o?o:",";var r=t.split("."),i=r[0],s=r[1]?(n||".")+r[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+o)+s}},{}],34:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/strRepeat");e.exports=function(t,e,n,i){t=o(t),e=~~e;var s=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",i){case"right":return s=e-t.length,t+r(n,s);case"both":return s=e-t.length,r(n,Math.ceil(s/2))+t+r(n,Math.floor(s/2));default:return s=e-t.length,r(n,s)+t}}},{"./helper/makeString":19,"./helper/strRepeat":20}],35:[function(t,e,n){var o=t("./helper/adjacent");e.exports=function(t){return o(t,-1)}},{"./helper/adjacent":15}],36:[function(t,e,n){var o=t("./helper/makeString"),r=t("./rtrim");e.exports=function(t,e,n){if(t=o(t),e=~~e,n=null!=n?String(n):"...",t.length<=e)return t;var i=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},s=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,i);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):r(s.slice(0,s.length-1)),(s+n).length>t.length?t:t.slice(0,s.length)+n}},{"./helper/makeString":19,"./rtrim":42}],37:[function(t,e,n){var o=t("./surround");e.exports=function(t,e){return o(t,e||'"')}},{"./surround":53}],38:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/strRepeat");e.exports=function(t,e,n){if(t=o(t),e=~~e,null==n)return r(t,e);for(var i=[];e>0;i[--e]=t);return i.join(n)}},{"./helper/makeString":19,"./helper/strRepeat":20}],39:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e,n,r){var i=!0===r?"gi":"g",s=new RegExp(e,i);return o(t).replace(s,n)}},{"./helper/makeString":19}],40:[function(t,e,n){var o=t("./chars");e.exports=function(t){return o(t).reverse().join("")}},{"./chars":3}],41:[function(t,e,n){var o=t("./pad");e.exports=function(t,e,n){return o(t,e,n,"right")}},{"./pad":34}],42:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=String.prototype.trimRight;e.exports=function(t,e){return t=o(t),!e&&i?i.call(t):(e=r(e),t.replace(new RegExp(e+"+$"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],43:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=t("./trim"),s=t("./dasherize");e.exports=function(t){var e="",n=new RegExp(r(e),"g");return t=o(t).toLowerCase().replace(n,function(t){return"aaaaaaaaaccceeeeeghiiiijllnnoooooooossssttuuuuuunyyczzz".charAt(e.indexOf(t))||"-"}),i(s(t.replace(/[^\w\s-]/g,"-")),"-")}},{"./dasherize":8,"./helper/defaultToWhiteSpace":16,"./helper/makeString":19,"./trim":60}],44:[function(t,e,n){var o=t("./chars");e.exports=function(t,e,n,r){var i=o(t);return i.splice(~~e,~~n,r),i.join("")}},{"./chars":3}],45:[function(t,e,n){var o=t("./helper/strRepeat"),r=Object.prototype.toString,i=function(){function t(t){return r.call(t).slice(8,-1).toLowerCase()}var e=o,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,o){var r,s,a,l,c,u,p,d=1,h=n.length,f="",g=[];for(s=0;s<h;s++)if("string"===(f=t(n[s])))g.push(n[s]);else if("array"===f){if(l=n[s],l[2])for(r=o[d],a=0;a<l[2].length;a++){if(!r.hasOwnProperty(l[2][a]))throw new Error(i('[_.sprintf] property "%s" does not exist',l[2][a]));r=r[l[2][a]]}else r=l[1]?o[l[1]]:o[d++];if(/[^s]/.test(l[8])&&"number"!=t(r))throw new Error(i("[_.sprintf] expecting number but found %s",t(r)));switch(l[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=l[7]?r.toExponential(l[7]):r.toExponential();break;case"f":r=l[7]?parseFloat(r).toFixed(l[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&l[7]?r.substring(0,l[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(l[8])&&l[3]&&r>=0?"+"+r:r,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",p=l[6]-String(r).length,c=l[6]?e(u,p):"",g.push(l[5]?r+c:c+r)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,n=[],o=[],r=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))o.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))o.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var i=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(i.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))i.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");i.push(a[1])}n[2]=i}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");o.push(n)}e=e.substring(n[0].length)}return o},n}();e.exports=i},{"./helper/strRepeat":20}],46:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/toPositive");e.exports=function(t,e,n){return t=o(t),e=""+e,n=null==n?0:Math.min(r(n),t.length),t.lastIndexOf(e,n)===n}},{"./helper/makeString":19,"./helper/toPositive":21}],47:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=e?t.indexOf(e):-1;return~n?t.slice(0,n):t}},{"./helper/makeString":19}],48:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=t.lastIndexOf(e);return~n?t.slice(0,n):t}},{"./helper/makeString":19}],49:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=e?t.indexOf(e):-1;return~n?t.slice(n+e.length,t.length):t}},{"./helper/makeString":19}],50:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e){t=o(t),e=o(e);var n=e?t.lastIndexOf(e):-1;return~n?t.slice(n+e.length,t.length):t}},{"./helper/makeString":19}],51:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":19}],52:[function(t,e,n){var o=t("./helper/adjacent");e.exports=function(t){return o(t,1)}},{"./helper/adjacent":15}],53:[function(t,e,n){e.exports=function(t,e){return[e,t,e].join("")}},{}],54:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})}},{"./helper/makeString":19}],55:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t){return o(t).toLowerCase().replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})}},{"./helper/makeString":19}],56:[function(t,e,n){function o(t,e){var n,o,r=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(o=e[n]){if(o.test&&o.test(t))return!0;if(o.toLowerCase()===r)return!0}}var r=t("./trim");e.exports=function(t,e,n){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=r(t),!!o(t,e||["true","1"])||!o(t,n||["false","0"])&&void 0)}},{"./trim":60}],57:[function(t,e,n){t("./trim");e.exports=function(t,e){if(null==t)return 0;var n=Math.pow(10,isFinite(e)?e:0);return Math.round(t*n)/n}},{"./trim":60}],58:[function(t,e,n){var o=t("./rtrim");e.exports=function(t,e,n,r){e=e||", ",n=n||" and ";var i=t.slice(),s=i.pop();return t.length>2&&r&&(n=o(e)+n),i.length?i.join(e)+n+s:s}},{"./rtrim":42}],59:[function(t,e,n){var o=t("./toSentence");e.exports=function(t,e,n){return o(t,e,n,!0)}},{"./toSentence":58}],60:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/defaultToWhiteSpace"),i=String.prototype.trim;e.exports=function(t,e){return t=o(t),!e&&i?i.call(t):(e=r(e),t.replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":19}],61:[function(t,e,n){var o=t("./helper/makeString");e.exports=function(t,e,n){return t=o(t),n=n||"...",e=~~e,t.length>e?t.slice(0,e)+n:t}},{"./helper/makeString":19}],62:[function(t,e,n){var o=t("./trim");e.exports=function(t){return o(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":60}],63:[function(t,e,n){var o=t("./helper/makeString"),r=t("./helper/escapeChars");e.exports=function(t){return o(t).replace(/\&([^;]+);/g,function(t,e){var n;return e in r?r[e]:(n=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=e.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):t})}},{"./helper/escapeChars":17,"./helper/makeString":19}],64:[function(t,e,n){e.exports=function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t}},{}],65:[function(t,e,n){var o=t("./sprintf");e.exports=function(t,e){return e.unshift(t),o.apply(null,e)}},{"./sprintf":45}],66:[function(t,e,n){var o=t("./isBlank"),r=t("./trim");e.exports=function(t,e){return o(t)?[]:r(t,e).split(e||/\s+/)}},{"./isBlank":25,"./trim":60}]},{},[14])(14)})},function(t,e,n){var o,r;o=[n,e,n(1),n(11)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.parseToBoolean=function(t,e){var o=null;return n.isBoolean(t)?o=t:n.isNumber(t)?0===t?o=!1:1===t&&(o=!0):n.isString(t)&&("0"===t.toLowerCase()||"false"===t.toLowerCase()?o=!1:"1"!==t.toLowerCase()&&"true"!==t.toLowerCase()||(o=!0)),null===o&&n.isBoolean(e)&&(o=e),o},t.parseToNumber=function(t,e){var o=null;return n.isNumber(t)?o=t:n.isString(t)&&(o=parseInt(t)),(isNaN(o)||null===o)&&n.isNumber(e)&&(o=e),o},t.parseToPageType=function(t){var e=o.PAGE_TYPE_NONE;return t&&(t.trim().toUpperCase()===o.PAGE_TYPE_B5?e=o.PAGE_TYPE_B5:t.trim().toUpperCase()===o.PAGE_TYPE_A4?e=o.PAGE_TYPE_A4:t.trim().toUpperCase()===o.PAGE_TYPE_TEST&&(e=o.PAGE_TYPE_TEST)),e},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(12),o=n(5),r=n(11),i=n(4),s=n(3),a=n(2),l=a.NoteRange,c=a.TableRange,u=e.extend({name:"ManagerAdapter",effected:!0,_block:null,_dataBefore:null,_dataAfter:null,_args:null,initialize:function(t){var e,n=this;t.args=t.args||{},n._args=t.args,u.__super__.initialize.apply(n,arguments),s.isCollabCommand(n._args)||(n._block=t.block,n._dataBefore=t.dataBefore,n._dataAfter=t.dataAfter,(e=n._args.range)&&e.clone&&(n.setStartingRange(e),n.setEndingRange(e.clone(!0))))},apply:function(){var t=this,e=t._args,n=e.collabProperties||{},o=n.coreEditor;o.isCollabEnabled()&&n.isCollabCmd&&(t._block?t._NeedToSetData(o)&&t._block.setInnerData(t._dataAfter):(n.dataCmdError="Table block has been deleted",n.isOwnCmd&&o.notifyErrorToHost(r.INVALIDACTION_BLOCKS_DIRTY,n.coreEditor),t.effected=!1))},doReapply:function(t){var e,n,o=this,i=o._block,s=t.collabProperties,a=s.coreEditor;if(i&&(e=i.getInnerCommandManager()),!a.isCollabEnabled())return void(e&&e.redo());s.redoUndoEffected=!0,s.isCollabCmd?i?(i.setInnerData(o._dataAfter),s.isOwnCmd&&e&&(n=e.redoStack.pop())&&e.undoStack.push(n)):(s.dataCmdError="Table block has been deleted",s.isOwnCmd&&s.coreEditor.notifyErrorToHost(r.INVALIDACTION_BLOCKS_DIRTY,a),s.redoUndoEffected=!1):e&&e.redo()},sendInfoToInner:function(t){var e=this,n=e._block;if(!n||!n.sendInfoToInner)return void i.error("The block or sendInfoToInner() method is not valid!");n.sendInfoToInner(t)},doUnapply:function(t){var e,n,o=this,i=o._block,s=t.collabProperties||{},a=s.coreEditor;if(i&&(e=i.getInnerCommandManager()),!a.isCollabEnabled())return void(e&&e.undo());s.isCollabCmd?i?(i.setInnerData(o._dataBefore),s.isOwnCmd&&e&&(n=e.undoStack.pop())&&e.redoStack.push(n)):(s.dataCmdError="Table block has been deleted",s.isOwnCmd&&a.notifyErrorToHost(r.INVALIDACTION_BLOCKS_DIRTY,a),s.redoUndoEffected=!1):e&&e.undo()},fromCollabJSON:function(){var t=this,e=t._args,n=e.collabProperties,o=n.cmdJSON,r=n.coreEditor,i=r.getBlockById(o.blockId);t._block=i,t._dataBefore=o.dataBefore,t._dataAfter=o.dataAfter,u.__super__.fromCollabJSON.apply(t)},getBlockId:function(){var t=this,e=null;return t._block&&(e=t._block.getId()),e},toCollabJSON:function(){var t,e=this,n=e._block.getId();return e.rangeIsRequired=!1,t=u.__super__.toCollabJSON.apply(e),t.blockId=n,t.dataBefore=e._dataBefore,t.dataAfter=e._dataAfter,t},_NeedToSetData:function(t){var e=this,n=e._args.collabProperties||{},o=t.getLastNotOwnExecCmd(),r=!0;return n.isOwnCmd&&(o?o.name!==e.name?r=!1:e._block.getId()!==e.getBlockId()?r=!1:e.getCmdOriginalNoteVersion()!==o.getCmdOriginalNoteVersion()&&(r=!1):r=!1),r}},{create:function(t,e,n){var o,r,s={};return t&&t.getInnerCommandManager&&t.setInnerData?(o=new c({block:t}),r=new l({startRange:o,endRange:o}),s.range=r,new u({args:s,block:t,dataBefore:e,dataAfter:n})):void i.error("The block is not valid: ",t)}});return o.add(u),u}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(29),o=n(11),r=n(3),i=n(4);return e.extend({name:"UnknownCommand",isSimple:!1,cmdError:null,cmdId:null,isCollabRedo:!1,isCollabUndo:!1,rangeIsRequired:null,initialize:function(){var t=this,e=t.options.args||{};r.isCollabCommand(e)?t.fromCollabJSON(e.collabProperties.cmdJSON):t.cmdId=r.newGUID()},apply:function(){throw"Method not implemented."},doReapply:function(){throw"Method not implemented."},doUnapply:function(){throw"Method not implemented."},fromCollabJSON:function(){var t,e=this,n=e.options.args,o=n.collabProperties.cmdJSON;t=o.cmdId,null!=t?e.cmdId=o.cmdId:i.debugAlert("cmdJSON.cmdId should NOT be null")},getCmdId:function(){var t=this.cmdId;return null==t&&i.debugAlert("cmdId should NOT be null"),t},setCollabRedo:function(t){this.isCollabRedo=t},setCollabUndo:function(t){this.isCollabUndo=t},toCollabJSON:function(){var t=this,e={};return e[o.CJSON_ACTION]=t.name,e.cmdId=t.getCmdId(),e}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(1)],void 0!==(r=function(t,e,n){"use strict";var o,r,i,s,a={};o={default:{name:"","font-size":14},a:{name:"","font-size":32,bold:!0},b:{name:"","font-size":18,color:"#595959",bold:!0},1:{name:"1","font-size":28,bold:!0},2:{name:"2","font-size":20,bold:!0},3:{name:"3","font-size":16,bold:!0},4:{name:"4","font-size":14,bold:!0}},r=[o.default,o.a,o.b,o[1],o[2],o[3],o[4]],i={};for(s in o)"default"!==s&&(a[s]=n.clone(o[s]),delete a[s].name,delete a[s].align);return{headingMap:o,headingArray:r,headingBlockStyles:i,headingInlineStyles:a}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(1),s=n(3);return e=o.extend({name:"atom.SetBlockStyle",_selectedBlocks:null,_oldStyleNameValues:{},_styleNameValues:null,initialize:function(t){var n=this,o=n.options.args;n._oldStyleNameValues={},s.isCollabCommand(o)||(n._selectedBlocks=t.blocks,n._styleNameValues=n.options.styleNameValues),e.__super__.initialize.apply(n,arguments)},apply:function(){var t=this;i.each(t._styleNameValues,function(e,n){t._setStyleToSelectedBlocks(n,e)})},doUnapply:function(){var t,e=this;i.each(e._selectedBlocks,function(n){t=e._oldStyleNameValues[n.getId()],i.each(t,function(t,e){n.setBlockStyle(e,t)})})},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties,r=o.cmdJSON;e.__super__.fromCollabJSON.apply(t),t._note=o.coreEditor.getNote(),r&&(t._selectedBlocks=[],i.each(r.blockIds,function(e){t._selectedBlocks.push(t._note.getBlockById(e))}),t._styleNameValues=r.styleNameValues,t._oldStyleNameValues=r.oldStyleNameValues)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t),o=[];return i.each(t._selectedBlocks,function(t){o.push(t.getId())}),n.blockIds=o,n.styleNameValues=t._styleNameValues,n.oldStyleNameValues=t._oldStyleNameValues,n},_setStyleToSelectedBlocks:function(t,e){var n,o,r=this;i.each(r._selectedBlocks,function(i){o=i.getId(),n=i.getBlockStyle(t),r._oldStyleNameValues[o]||(r._oldStyleNameValues[o]={}),r._oldStyleNameValues[o][t]=n,i.setBlockStyle(t,e)})}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(18),i=n(5),s=n(2).TableRange,a=n(3);return e=r.extend({name:"atom.SetTableCellInlineStyle",_table:null,_rect:null,_type:null,effected:!1,_oldStyles:{},_styles:null,initialize:function(){var t=this,n=t.options.args;t._oldStyles={},a.isCollabCommand(n)||(t._table=t.options.table,t._styles=t.options.styles,t._rect=t.options.rect,t._type=t.options.type,t._toggle=t.options.toggle),t.type===s.TYPES.ALL&&(t._rect=t._rect||{top:0,left:0,width:t._table.getColumnCount(),height:t._table.getRowCount()}),e.__super__.initialize.apply(t)},apply:function(){var t,e,n,r,i,a=this._table,l=this._rect,c=this._styles||{},u=this._toggle,p=l.top+l.height,d=l.left+l.width;if(!l)return this.effected;if(u){if(r=s.create({block:a,type:s.TYPES.NORMAL,rect:l})){if(!(i=r.getAsRectRange()))return this.effected;t=a.getCommonInlineStyle(u,i)}c[u]=null==t||!t}for(e=l.top;e<p;e++)for(n=l.left;n<d;n++)this._oldStyles[e+"-"+n]=a.getCellInlineStyles({row:e,col:n,names:o.keys(c)}),a.setCellInlineStyles({row:e,col:n,styles:c})&&(this.effected=!0);return this.effected},doUnapply:function(){var t,e,n=this._table,o=this._rect,r=o.top+o.height,i=o.left+o.width;for(t=o.top;t<r;t++)for(e=o.left;e<i;e++)n.setCellInlineStyles({row:t,col:e,styles:this._oldStyles[t+"-"+e]})},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._styles=i.styleNameValues,n._oldStyles=i.oldStyleNameValues,n._rect=i.simpleValue1,n._type=i.simpleValue2,n._toggle=i.newBlkId)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.styleNameValues=t._styles||null,n.oldStyleNameValues=t._oldStyles,n.simpleValue1=t._rect,n.simpleValue2=t._type,n.newBlkId=t._toggle||null,n}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(4),a=n(26),l=n(44),c=n(51),u=n(112),p=n(66),d=n(2),h=d.BlockTypes,f=d.RangeUtil;return e=o.extend({name:"abstract.comp.DeleteNoteRange",_cmdArgs:null,_note:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args,e.__super__.initialize.apply(t)},apply:function(){var t,e,n,o,r,l=this,u=l._cmdArgs.range,p=[];if(!u)return s.error(this.name+":note range should NOT be null"),!1;if(t=u.getStartBlockRange(),e=t.block,n=u.getEndBlockRange(),o=n.block,r=l._note.getNextBlock(o),!u.isCollapsed()&&(i.deleteSelectedContent(l,l._note,u),u.isInSingleBlock()&&h.isTextBlock(e)))return i.setTextBlockAsEndingRange(l,e,t.start,t.start),!0;if(u.isInSingleBlock()){if(h.isTextBlock(e)){if(u.isCollapsed())return t.start===e.getLength()?l._deleteAtTextBlockEnd(r,e):l._deleteAtTextBlockMiddle(e,t.start);i.setTextBlockAsEndingRange(l,e,t.start,t.start)}else r&&!h.isTable(r)?(l.executeAtomicCommand(new a({note:l._note,blocks:[e]})),e=r):e=i.replaceBlockWithParagraph(l,l._note,e,""),h.isTextBlock(e)?i.setTextBlockAsEndingRange(l,e,0,0):i.setNonTextBlockAsEndingRange(l,e);return!0}return u.isInMultiBlock(o)?(h.isTextBlock(e)&&h.isTextBlock(o)?(l.executeAtomicCommand(new c({block:e,start:e.getLength(),text:o.getText()})),p.push(o),i.setTextBlockAsEndingRange(l,e,t.start,t.start)):h.isTextBlock(e)?(p.push(o),i.setTextBlockAsEndingRange(l,e,t.start,t.start)):h.isTextBlock(o)?(p.push(e),i.setTextBlockAsEndingRange(l,o,0,0)):(p.push(e),r?p.push(o):o=i.replaceBlockWithParagraph(l,l._note,o,""),i.setTextBlockAsEndingRange(l,o,0,0)),l.executeAtomicCommand(new a({note:l._note,blocks:p})),!0):void 0},_deleteAtTextBlockEnd:function(t,e){var n,o=this;return!(t&&!h.isTable(t))||(h.isAttachment(t)||h.isImage(t)||h.isMacro(t)?(o.setEndingRange(f.buildNoteRangeFromNonTextBlock(t)),!0):(n=e.getLength(),h.isTextBlock(t)&&o.executeAtomicCommand(new c({block:e,start:e.getLength(),text:t.getText()})),o.executeAtomicCommand(new a({note:o._note,blocks:[t]})),i.setTextBlockAsEndingRange(o,e,n,n),!0))},_deleteAtTextBlockMiddle:function(t,e){var n=this;if(p.isAtHrefBorder(t,e,!1))return n._deleteHref(t,e,!1),!0;n.executeAtomicCommand(new l({block:t,start:e,end:e+1})),i.setTextBlockAsEndingRange(n,t,e,e)},_deleteHref:function(t,e){var n,o=this,r={href:"",color:"#393939",underline:!1};-1!==(n=p.findHrefBorder(t,e,!1))&&o.executeAtomicCommand(new u({blocks:[t],styleNameValues:r,start:e,end:n+1}))},isSingleBlockAffected:function(){var t,n,o=this,r=o._args.range,i=e.__super__.isSingleBlockAffected.apply(o),s=0;return i&&r&&r.isCollapsed()&&(n=r.getStartBlockRange(),t=n.block,s=n.start,o._note.getNextBlock(t)&&s===t.getEndOffset()&&(i=!1)),i}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function o(t){return"set"+e(t)}function r(t){return"get"+e(t)}var i,s=n(18),a=n(5),l=n(1),c=n(3);return i=s.extend({name:"atom.SetBlockProps",_blocks:null,_oldPropsMap:{},_props:null,initialize:function(t){var e=this,n=e.options.args;e._oldPropsMap={},c.isCollabCommand(n)||(e._blocks=t.blocks,e._props=t.props),i.__super__.initialize.apply(e,arguments)},apply:function(){var t,e=this;l.each(e._blocks,function(n){t={},l.each(e._props,function(e,i){t[i]=n[r(i)](),n[o(i)](e)}),e._oldPropsMap[n.getId()]=t})},doUnapply:function(){var t,e=this;l.each(e._blocks,function(n){t=e._oldPropsMap[n.getId()],l.each(t,function(t,e){n[o(e)](t)})})},fromCollabJSON:function(){var t=this,e=t.options.args,n=e.collabProperties,o=n.cmdJSON;i.__super__.fromCollabJSON.apply(t),t._note=n.coreEditor.getNote(),o&&(t._blocks=[],l.each(o.blockIds,function(e){t._blocks.push(t._note.getBlockById(e))}),t._props=o.simpleValue1,t._oldPropsMap=o.simpleValue2)},toCollabJSON:function(){var t=this,e=i.__super__.toCollabJSON.apply(t),n=[];return l.each(t._blocks,function(t){n.push(t.getId())}),e.blockIds=n,e.simpleValue1=t._props,e.simpleValue2=t._oldPropsMap,e}}),a.add(i),i}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(2).TableUtil,s=n(3);return e=o.extend({name:"atom.InsertTableRowCol",_table:null,_rect:null,_cellsData:null,_dataLength:null,effected:!1,initialize:function(){var t=this,n=t.options,o=n.args;s.isCollabCommand(o)||(this._cellsData=n.cellsData,this._sizes=n.sizes,this._rect=n.rect,this._table=n.table,this._dataLength=this._cellsData.length),e.__super__.initialize.apply(t)},apply:function(){var t=this,e=t._rect,n=t._table,o=t._cellsData,r=t._sizes;null!=e.row&&(n.insertRows(e.row,o,r),this.effected=!0),null!=e.col&&(n.insertCols(e.col,o,r),this.effected=!0)},doUnapply:function(){var t=this,e=t._rect,n=t._table,o=t._dataLength;null!=e.row&&n.deleteRows(e.row,o),null!=e.col&&n.deleteCols(e.col,o)},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,s=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),s&&(n._table=t.getBlockById(s.blockId),n._cellsData=i.cellsFromCollabJSON(s.dataBefore),n._rect=s.simpleValue1,n._dataLength=s.simpleValue2)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.dataBefore=i.cellsToCollabJSON(t._cellsData),n.simpleValue1=t._rect,n.simpleValue2=t._dataLength,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(161)],void 0!==(r=function(t,e,n){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){var e=t.event,n=e.originalEvent||e;this._dataTransfer=n.clipboardData},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(29),n(4),n(39),n(407)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";var l=s.isEdge(),c={"text/html":!0,"text/plain":!0,"text/uri-list":!0,"text/yne-image-json":!1,"text/yne-json":!1,"text/yne-note-id":!1,"text/yne-table-json":!1};return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){var e=t.event,n=e.originalEvent||e;this._dataTransfer=n.dataTransfer},e.prototype.getData=function(t){var e,n,o=this._dataTransfer;return l?(e=c[t],!0===e?n=o.getData(t):!1===e?n=this._getCustomData(t):r.error("type should be registered!",t),n):o.getData(t)},e.prototype.setDataMap=function(t){var e,o=this._dataTransfer,i=function(e,n){try{var i=e;"text/html"===n&&null!=t["text/yne-json"]&&null!=t["text/html"]&&(t["text/html"]=t["text/html"]+"\x3c!--5f39ae17-8c62-4a45-bc43-b32064c9388a:"+a.encode(t["text/yne-json"])+"--\x3e",i=t["text/html"]),o.setData(n,i)}catch(t){r.error(t)}},s={},u=0;if(l){if(n.each(t,function(t,e){var n=c[e];!0===n?i(t,e):!1===n?(s[e]=t,u++):r.error("type should be registered!",e)}),u>0)try{e=JSON.stringify(s),i(e,"application/json")}catch(t){r.error(t)}}else n.each(t,i)},e.prototype.clearData=function(t){return this._dataTransfer.clearData(t)},e.prototype.setProperty=function(t,e){this._dataTransfer[t]=e},e.prototype._getCustomData=function(t){var e,n;if(!this._altData){e=this._dataTransfer.getData("application/json");try{n=JSON.parse(e),this._altData=n}catch(t){r.error(t),this._altData={}}}return this._altData[t]},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){"use strict";function o(t){return null!=t&&"object"==typeof t}e.isObject=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return o(e,t),e}(Error);e.UnsubscriptionError=r},function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(19),i=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(r.Subscription);e.SubjectSubscription=i},function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";function o(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}e.isPromise=o},function(t,e,n){"use strict";var o=n(46);e.of=o.ArrayObservable.of},function(t,e,n){"use strict";var o=n(170);e.from=o.FromObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(37),i=n(166),s=n(167),a=n(171),l=n(447),c=n(46),u=n(448),p=n(67),d=n(0),h=n(91),f=n(87),g=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return o(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[f.observable])return t instanceof d.Observable&&!n?t:new e(t,n);if(r.isArray(t))return new c.ArrayObservable(t,n);if(s.isPromise(t))return new a.PromiseObservable(t,n);if("function"==typeof t[p.iterator]||"string"==typeof t)return new l.IteratorObservable(t,n);if(i.isArrayLike(t))return new u.ArrayLikeObservable(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[f.observable]().subscribe(t):e[f.observable]().subscribe(new h.ObserveOnSubscriber(t,n,0))},e}(d.Observable);e.FromObservable=g},function(t,e,n){"use strict";function o(t){var e=t.value,n=t.subscriber;n.closed||(n.next(e),n.complete())}function r(t){var e=t.err,n=t.subscriber;n.closed||n.error(e)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(25),a=n(0),l=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return i(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,i=this.scheduler;if(null==i)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){s.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return i.schedule(o,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(i.schedule(o,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(i.schedule(r,0,{err:e,subscriber:t}))}).then(null,function(t){s.root.setTimeout(function(){throw t})})},e}(a.Observable);e.PromiseObservable=l},function(t,e,n){"use strict";function o(t){return t}e.identity=o},function(t,e,n){"use strict";var o=n(498);e.timer=o.TimerObservable.create},function(t,e,n){"use strict";function o(){if(h.root.XMLHttpRequest)return new h.root.XMLHttpRequest;if(h.root.XDomainRequest)return new h.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function r(){if(h.root.XMLHttpRequest)return new h.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(t=e[n],new h.root.ActiveXObject(t))break}catch(t){}return new h.root.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}function i(t,e){return void 0===e&&(e=null),new v({method:"GET",url:t,headers:e})}function s(t,e,n){return new v({method:"POST",url:t,body:e,headers:n})}function a(t,e){return new v({method:"DELETE",url:t,headers:e})}function l(t,e,n){return new v({method:"PUT",url:t,body:e,headers:n})}function c(t,e,n){return new v({method:"PATCH",url:t,body:e,headers:n})}function u(t,e){return y(new v({method:"GET",url:t,responseType:"json",headers:e}))}function p(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var d=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},h=n(25),f=n(23),g=n(22),m=n(0),_=n(6),b=n(74);e.ajaxGet=i,e.ajaxPost=s,e.ajaxDelete=a,e.ajaxPut=l,e.ajaxPatch=c;var y=b.map(function(t,e){return t.response});e.ajaxGetJSON=u;var v=function(t){function e(e){t.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?o.call(this):r()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)n.url=e;else for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);this.request=n}return d(e,t),e.prototype._subscribe=function(t){return new w(t,this.request)},e.create=function(){var t=function(t){return new e(t)};return t.get=i,t.post=s,t.delete=a,t.put=l,t.patch=c,t.getJSON=u,t}(),e}(m.Observable);e.AjaxObservable=v;var w=function(t){function e(e,n){t.call(this,e),this.request=n,this.done=!1;var o=n.headers=n.headers||{};n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in o||h.root.FormData&&n.body instanceof h.root.FormData||void 0===n.body||(o["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return d(e,t),e.prototype.next=function(t){this.done=!0;var e=this,n=e.xhr,o=e.request,r=e.destination,i=new I(t,n,o);r.next(i)},e.prototype.send=function(){var t=this,e=t.request,n=t.request,o=n.user,r=n.method,i=n.url,s=n.async,a=n.password,l=n.headers,c=n.body,u=e.createXHR,p=f.tryCatch(u).call(e);if(p===g.errorObject)this.error(g.errorObject.e);else{this.xhr=p,this.setupEvents(p,e);if((o?f.tryCatch(p.open).call(p,r,i,s,o,a):f.tryCatch(p.open).call(p,r,i,s))===g.errorObject)return this.error(g.errorObject.e),null;if(s&&(p.timeout=e.timeout,p.responseType=e.responseType),"withCredentials"in p&&(p.withCredentials=!!e.withCredentials),this.setHeaders(p,l),(c?f.tryCatch(p.send).call(p,c):f.tryCatch(p.send).call(p))===g.errorObject)return this.error(g.errorObject.e),null}return p},e.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(h.root.FormData&&t instanceof h.root.FormData)return t;if(e){var n=e.indexOf(";");-1!==n&&(e=e.substring(0,n))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},e.prototype.setupEvents=function(t,e){function n(t){var e=n,o=e.subscriber,r=e.progressSubscriber,i=e.request;r&&r.error(t),o.error(new M(this,i))}function o(t){var e=o,n=e.subscriber,r=e.progressSubscriber,i=e.request;if(4===this.readyState){var s=1223===this.status?204:this.status,a="text"===this.responseType?this.response||this.responseText:this.response;0===s&&(s=a?200:0),200<=s&&s<300?(r&&r.complete(),n.next(t),n.complete()):(r&&r.error(t),n.error(new C("ajax error "+s,this,i)))}}var r=e.progressSubscriber;if(t.ontimeout=n,n.request=e,n.subscriber=this,n.progressSubscriber=r,t.upload&&"withCredentials"in t){if(r){var i;i=function(t){i.progressSubscriber.next(t)},h.root.XDomainRequest?t.onprogress=i:t.upload.onprogress=i,i.progressSubscriber=r}var s;s=function(t){var e=s,n=e.progressSubscriber,o=e.subscriber,r=e.request;n&&n.error(t),o.error(new C("ajax error",this,r))},t.onerror=s,s.request=e,s.subscriber=this,s.progressSubscriber=r}t.onreadystatechange=o,o.subscriber=this,o.progressSubscriber=r,o.request=e},e.prototype.unsubscribe=function(){var e=this,n=e.done,o=e.xhr;!n&&o&&4!==o.readyState&&"function"==typeof o.abort&&o.abort(),t.prototype.unsubscribe.call(this)},e}(_.Subscriber);e.AjaxSubscriber=w;var I=function(){function t(t,e,n){this.originalEvent=t,this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.response=p(this.responseType,e)}return t}();e.AjaxResponse=I;var C=function(t){function e(e,n,o){t.call(this,e),this.message=e,this.xhr=n,this.request=o,this.status=n.status,this.responseType=n.responseType||o.responseType,this.response=p(this.responseType,n)}return d(e,t),e}(Error);e.AjaxError=C;var M=function(t){function e(e,n){t.call(this,"ajax timeout",e,n)}return d(e,t),e}(C);e.AjaxTimeoutError=M},function(t,e,n){"use strict";var o=n(506),r=n(507);e.queue=new r.QueueScheduler(o.QueueAction)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.buffer=o;var a=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.closingNotifier))},t}(),l=function(t){function e(e,n){t.call(this,e),this.buffer=[],this.add(s.subscribeToResult(this,n))}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,o,r){var i=this.buffer;this.buffer=[],this.destination.next(i)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=null),function(n){return n.lift(new s(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.bufferCount=o;var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?l:a}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),a=function(t){function e(e,n){t.call(this,e),this.bufferSize=n,this.buffer=[]}return r(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(i.Subscriber),l=function(t){function e(e,n,o){t.call(this,e),this.bufferSize=n,this.startBufferEvery=o,this.buffers=[],this.count=0}return r(e,t),e.prototype._next=function(t){var e=this,n=e.bufferSize,o=e.startBufferEvery,r=e.buffers,i=e.count;this.count++,i%o==0&&r.push([]);for(var s=r.length;s--;){var a=r[s];a.push(t),a.length===n&&(r.splice(s,1),this.destination.next(a))}},e.prototype._complete=function(){for(var e=this,n=e.buffers,o=e.destination;n.length>0;){var r=n.shift();r.length>0&&o.next(r)}t.prototype._complete.call(this)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){var e=arguments.length,n=l.async;u.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var o=null;e>=2&&(o=arguments[1]);var r=Number.POSITIVE_INFINITY;return e>=3&&(r=arguments[2]),function(e){return e.lift(new p(t,o,r,n))}}function r(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function i(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,o=t.subscriber,r=t.scheduler,i=o.openContext(),a=this;o.closed||(o.add(i.closeAction=r.schedule(s,n,{subscriber:o,context:i})),a.schedule(t,e))}function s(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=n(14),c=n(6),u=n(34);e.bufferTime=o;var p=function(){function t(t,e,n,o){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=o}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),d=function(){function t(){this.buffer=[]}return t}(),h=function(t){function e(e,n,o,a,l){t.call(this,e),this.bufferTimeSpan=n,this.bufferCreationInterval=o,this.maxBufferSize=a,this.scheduler=l,this.contexts=[];var c=this.openContext();if(this.timespanOnly=null==o||o<0,this.timespanOnly){var u={subscriber:this,context:c,bufferTimeSpan:n};this.add(c.closeAction=l.schedule(r,n,u))}else{var p={subscriber:this,context:c},d={bufferTimeSpan:n,bufferCreationInterval:o,subscriber:this,scheduler:l};this.add(c.closeAction=l.schedule(s,n,p)),this.add(l.schedule(i,o,d))}}return a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,o=n.length,r=0;r<o;r++){var i=n[r],s=i.buffer;s.push(t),s.length==this.maxBufferSize&&(e=i)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this,n=e.contexts,o=e.destination;n.length>0;){var r=n.shift();o.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,o={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(r,n,o))}},e.prototype.openContext=function(){var t=new d;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(c.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new l(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(19),s=n(10),a=n(9);e.bufferToggle=o;var l=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.openings,this.closingSelector))},t}(),c=function(t){function e(e,n,o){t.call(this,e),this.openings=n,this.closingSelector=o,this.contexts=[],this.add(s.subscribeToResult(this,n))}return r(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,o=0;o<n;o++)e[o].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var o=n.shift();o.subscription.unsubscribe(),o.buffer=null,o.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,o,r){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector,n=e.call(this,t);n&&this.trySubscribe(n)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,o=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(o),o.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=[],o=new i.Subscription,r={buffer:n,subscription:o};e.push(r);var a=s.subscribeToResult(this,t,r);!a||a.closed?this.closeBuffer(r):(a.context=r,this.add(a),o.add(a))},e}(a.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new u(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(19),s=n(23),a=n(22),l=n(9),c=n(10);e.bufferWhen=o;var u=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.closingSelector))},t}(),p=function(t){function e(e,n){t.call(this,e),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,o,r){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=s.tryCatch(this.closingSelector)();n===a.errorObject?this.error(a.errorObject.e):(t=new i.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(c.subscribeToResult(this,n)),this.subscribing=!1)},e}(l.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){var n=new a(t),o=e.lift(n);return n.caught=o}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.catchError=o;var a=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.selector,this.caught))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.selector=n,this.caught=o}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(s.subscribeToResult(this,n))}},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new r.CombineLatestOperator(t))}}var r=n(90);e.combineAll=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(r.concat.apply(void 0,[e].concat(t)))}}var r=n(68),i=n(68);e.concatStatic=i.concat,e.concat=o},function(t,e,n){"use strict";function o(t,e){return r.concatMap(function(){return t},e)}var r=n(121);e.concatMapTo=o},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new s(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.count=o;var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.source))},t}(),a=function(t){function e(e,n,o){t.call(this,e),this.predicate=n,this.source=o,this.count=0,this.index=0}return r(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new s)}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.dematerialize=o;var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e)}return r(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.debounce=o;var a=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return r(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=s.subscribeToResult(this,e),n.closed||this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,o,r){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=a.async),function(n){return n.lift(new l(t,e))}}function r(t){t.debouncedNext()}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(6),a=n(14);e.debounceTime=o;var l=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.dueTime,this.scheduler))},t}(),c=function(t){function e(e,n,o){t.call(this,e),this.dueTime=n,this.scheduler=o,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return i(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(r,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(s.Subscriber)},function(t,e,n){"use strict";function o(t,e){void 0===e&&(e=i.async);var n=s.isDate(t),o=n?+t-e.now():Math.abs(t);return function(t){return t.lift(new c(o,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(14),s=n(94),a=n(6),l=n(69);e.delay=o;var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.delay,this.scheduler))},t}(),u=function(t){function e(e,n,o){t.call(this,e),this.delay=n,this.scheduler=o,this.queue=[],this.active=!1,this.errored=!1}return r(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,o=t.scheduler,r=t.destination;n.length>0&&n[0].time-o.now()<=0;)n.shift().notification.observe(r);if(n.length>0){var i=Math.max(0,n[0].time-o.now());this.schedule(t,i)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new p(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(l.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(l.Notification.createComplete())},e}(a.Subscriber),p=function(){function t(t,e){this.time=t,this.notification=e}return t}()},function(t,e,n){"use strict";function o(t,e){return e?function(n){return new p(n,e).lift(new c(t))}:function(e){return e.lift(new c(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(0),a=n(9),l=n(10);e.delayWhen=o;var c=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.delayDurationSelector))},t}(),u=function(t){function e(e,n){t.call(this,e),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(t),this.removeSubscription(r),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return-1!==e&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},e.prototype.tryDelay=function(t,e){var n=l.subscribeToResult(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(a.OuterSubscriber),p=function(t){function e(e,n){t.call(this),this.source=e,this.subscriptionDelay=n}return r(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new d(t,this.source))},e}(s.Observable),d=function(t){function e(e,n){t.call(this),this.parent=e,this.source=n,this.sourceSubscribed=!1}return r(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new l(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10),a=n(549);e.distinct=o;var l=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.flushes))},t}(),c=function(t){function e(e,n,o){t.call(this,e),this.keySelector=n,this.values=new a.Set,o&&this.add(s.subscribeToResult(this,o))}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(i.OuterSubscriber);e.DistinctSubscriber=c},function(t,e,n){"use strict";function o(t,e){return r.distinctUntilChanged(function(n,o){return e?e(n[t],o[t]):n[t]===o[t]})}var r=n(123);e.distinctUntilKeyChanged=o},function(t,e,n){"use strict";function o(t,e,n){return function(o){return o.lift(new s(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.tap=o;var s=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(t){function e(e,n,o,r){t.call(this,e);var s=new i.Subscriber(n,o,r);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new a)}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.exhaust=o;var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}return r(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.exhaustMap=o;var a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.resultSelector))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.project=n,this.resultSelector=o,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return r(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var o=this.project(t,e);this.hasSubscription=!0,this.add(s.subscribeToResult(this,o,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){var i=this,s=i.resultSelector,a=i.destination;s?this.trySelectResult(t,e,n,o):a.next(e)},e.prototype.trySelectResult=function(t,e,n,o){var r=this,i=r.resultSelector,s=r.destination;try{var a=i(t,e,n,o);s.next(a)}catch(t){s.error(t)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(o){return o.lift(new c(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(23),s=n(22),a=n(9),l=n(10);e.expand=o;var c=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=c;var u=function(t){function e(e,n,o,r){t.call(this,e),this.project=n,this.concurrent=o,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,o<Number.POSITIVE_INFINITY&&(this.buffer=[])}return r(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,o=t.value,r=t.index;e.subscribeToProjection(n,o,r)},e.prototype._next=function(t){var n=this.destination;if(n.closed)return void this._complete();var o=this.index++;if(this.active<this.concurrent){n.next(t);var r=i.tryCatch(this.project)(t,o);if(r===s.errorObject)n.error(s.errorObject.e);else if(this.scheduler){var a={subscriber:this,result:r,value:t,index:o};this.add(this.scheduler.schedule(e.dispatch,0,a))}else this.subscribeToProjection(r,t,o)}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(l.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(a.OuterSubscriber);e.ExpandSubscriber=u},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(75);e.elementAt=o;var a=function(){function t(t,e){if(this.index=t,this.defaultValue=e,t<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.index,this.defaultValue))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.index=n,this.defaultValue=o}return r(e,t),e.prototype._next=function(t){0==this.index--&&(this.destination.next(t),this.destination.complete())},e.prototype._complete=function(){var t=this.destination;this.index>=0&&(void 0!==this.defaultValue?t.next(this.defaultValue):t.error(new s.ArgumentOutOfRangeError)),t.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(19);e.finalize=o;var a=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.callback))},t}(),l=function(t){function e(e,n){t.call(this,e),this.add(new s.Subscription(n))}return r(e,t),e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new r.FindValueOperator(t,n,!0,e))}}var r=n(125);e.findIndex=o},function(t,e,n){"use strict";function o(t,e,n){return function(o){return o.lift(new a(t,e,n,o))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(97);e.first=o;var a=function(){function t(t,e,n,o){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=o}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),l=function(t){function e(e,n,o,r,i){t.call(this,e),this.predicate=n,this.resultSelector=o,this.defaultValue=r,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){if(this.resultSelector)return void this._tryResultSelector(t,e);this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||t.error(new s.EmptyError):(t.next(this.defaultValue),t.complete())},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e,n,o){return function(r){return r.lift(new p(t,e,n,o))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(19),a=n(0),l=n(21),c=n(576),u=n(578);e.groupBy=o;var p=function(){function t(t,e,n,o){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=o}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),d=function(t){function e(e,n,o,r,i){t.call(this,e),this.keySelector=n,this.elementSelector=o,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return r(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups="string"==typeof e?new u.FastMap:new c.Map);var o,r=n.get(e);if(this.elementSelector)try{o=this.elementSelector(t)}catch(t){this.error(t)}else o=t;if(!r){r=this.subjectSelector?this.subjectSelector():new l.Subject,n.set(e,r);var i=new f(e,r,this);if(this.destination.next(i),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(e,r))}catch(t){return void this.error(t)}this.add(s.subscribe(new h(e,r,this)))}}r.closed||r.next(o)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.Subscriber),h=function(t){function e(e,n,o){t.call(this,n),this.key=e,this.group=n,this.parent=o}return r(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this,e=t.parent,n=t.key;this.key=this.parent=null,e&&e.removeGroup(n)},e}(i.Subscriber),f=function(t){function e(e,n,o){t.call(this),this.key=e,this.groupSubject=n,this.refCountSubscription=o}return r(e,t),e.prototype._subscribe=function(t){var e=new s.Subscription,n=this,o=n.refCountSubscription,r=n.groupSubject;return o&&!o.closed&&e.add(new g(o)),e.add(r.subscribe(t)),e},e}(a.Observable);e.GroupedObservable=f;var g=function(t){function e(e){t.call(this),this.parent=e,e.count++}return r(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.Subscription)},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new a)}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(116);e.ignoreElements=o;var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype._next=function(t){s.noop()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new s)}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.isEmpty=o;var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e)}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.async),i.audit(function(){return s.timer(t,e)})}var r=n(14),i=n(126),s=n(173);e.auditTime=o},function(t,e,n){"use strict";function o(t,e,n){return function(o){return o.lift(new a(t,e,n,o))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(97);e.last=o;var a=function(){function t(t,e,n,o){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=o}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),l=function(t){function e(e,n,o,r,i){t.call(this,e),this.predicate=n,this.resultSelector=o,this.defaultValue=r,this.source=i,this.hasValue=!1,this.index=0,void 0!==r&&(this.lastValue=r,this.hasValue=!0)}return r(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this.lastValue=n,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new s.EmptyError)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new s(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.every=o;var s=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg,this.source))},t}(),a=function(t){function e(e,n,o,r){t.call(this,e),this.predicate=n,this.thisArg=o,this.source=r,this.index=0,this.thisArg=o||this}return r(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new s(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.mapTo=o;var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.value))},t}(),a=function(t){function e(e,n){t.call(this,e),this.value=n}return r(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new a)}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(69);e.materialize=o;var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){t.call(this,e)}return r(e,t),e.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return r.reduce(e)}var r=n(76);e.max=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(r.merge.apply(void 0,[e].concat(t)))}}var r=n(93),i=n(93);e.mergeStatic=i.merge,e.merge=o},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof e&&(n=e,e=null),function(o){return o.lift(new a(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.mergeMapTo=o;var a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.ish,this.resultSelector,this.concurrent))},t}();e.MergeMapToOperator=a;var l=function(t){function e(e,n,o,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=n,this.resultSelector=o,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,n=this.index++,o=this.ish,r=this.destination;this.active++,this._innerSub(o,r,e,t,n)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n,o,r){this.add(s.subscribeToResult(this,t,o,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){var i=this,s=i.resultSelector,a=i.destination;s?this.trySelectResult(t,e,n,o):a.next(e)},e.prototype.trySelectResult=function(t,e,n,o){var r,i=this,s=i.resultSelector,a=i.destination;try{r=s(t,e,n,o)}catch(t){return void a.error(t)}a.next(r)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber);e.MergeMapToSubscriber=l},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(o){return o.lift(new c(t,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(23),s=n(22),a=n(10),l=n(9);e.mergeScan=o;var c=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=c;var u=function(t){function e(e,n,o,r){t.call(this,e),this.accumulator=n,this.acc=o,this.concurrent=r,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=i.tryCatch(this.accumulator)(this.acc,t),o=this.destination;n===s.errorObject?o.error(s.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(a.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,o,r){var i=this.destination;this.acc=e,this.hasValue=!0,i.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(l.OuterSubscriber);e.MergeScanSubscriber=u},function(t,e,n){"use strict";function o(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return r.reduce(e)}var r=n(76);e.min=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(21),i=n(0),s=n(6),a=n(19),l=n(129),c=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,t=this._connection=new a.Subscription,t.add(this.source.subscribe(new p(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return l.refCount()(this)},e}(i.Observable);e.ConnectableObservable=c;var u=c.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var p=function(t){function e(e,n){t.call(this,e),this.connectable=n}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(r.SubjectSubscriber),d=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var o=new d(t,n),r=e.subscribe(o);return o.closed||(o.connection=n.connect()),r}}(),function(t){function e(e,n){t.call(this,e),this.connectable=n}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(!t)return void(this.connection=null);this.connectable=null;var e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);var n=this.connection,o=t._connection;this.connection=null,!o||n&&o!==n||o.unsubscribe()},e}(s.Subscriber))},function(t,e,n){"use strict";function o(){return function(t){return t.lift(new s)}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.pairwise=o;var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e),this.hasPrev=!1}return r(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return[i.filter(t,e)(n),i.filter(r.not(t,e))(n)]}}var r=n(623),i=n(124);e.partition=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return i.map(r(t,n))(e)}}function r(t,e){return function(n){for(var o=n,r=0;r<e;r++){var i=o[t[r]];if(void 0===i)return;o=i}return o}}var i=n(74);e.pluck=o},function(t,e,n){"use strict";function o(t){return t?i.multicast(function(){return new r.Subject},t):i.multicast(new r.Subject)}var r=n(21),i=n(53);e.publish=o},function(t,e,n){"use strict";function o(t){return function(e){return i.multicast(new r.BehaviorSubject(t))(e)}}var r=n(220),i=n(53);e.publishBehavior=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(21),i=n(88),s=function(t){function e(e){t.call(this),this._value=e}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(r.Subject);e.BehaviorSubject=s},function(t,e,n){"use strict";function o(t,e,n,o){n&&"function"!=typeof n&&(o=n);var s="function"==typeof n?n:void 0,a=new r.ReplaySubject(t,e,o);return function(t){return i.multicast(function(){return a},s)(t)}}var r=n(96),i=n(53);e.publishReplay=o},function(t,e,n){"use strict";function o(){return function(t){return i.multicast(new r.AsyncSubject)(t)}}var r=n(89),i=n(53);e.publishLast=o},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return 1===t.length&&r.isArray(t[0])&&(t=t[0]),e.lift.call(i.race.apply(void 0,[e].concat(t)))}}var r=n(37),i=n(119);e.race=o},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=-1),function(e){return 0===t?new s.EmptyObservable:t<0?e.lift(new a(-1,e)):e.lift(new a(t-1,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(47);e.repeat=o;var a=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.count,this.source))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.count=n,this.source=o}return r(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,o=e.count;if(0===o)return t.prototype.complete.call(this);o>-1&&(this.count=o-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new u(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(21),s=n(23),a=n(22),l=n(9),c=n(10);e.repeatWhen=o;var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.notifier,e))},t}(),p=function(t){function e(e,n,o){t.call(this,e),this.notifier=n,this.source=o,this.sourceIsBeingSubscribedTo=!0}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this,e=t.notifications,n=t.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this,n=e.notifications,o=e.retries,r=e.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,t.prototype._unsubscribeAndRecycle.call(this),this.notifications=n,this.retries=o,this.retriesSubscription=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new i.Subject;var e=s.tryCatch(this.notifier)(this.notifications);if(e===a.errorObject)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=c.subscribeToResult(this,e)},e}(l.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=-1),function(e){return e.lift(new s(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.retry=o;var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.count,this.source))},t}(),a=function(t){function e(e,n,o){t.call(this,e),this.count=n,this.source=o}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this,o=n.source,r=n.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),o.subscribe(this._unsubscribeAndRecycle())}},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new u(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(21),s=n(23),a=n(22),l=n(9),c=n(10);e.retryWhen=o;var u=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.notifier,this.source))},t}(),p=function(t){function e(e,n,o){t.call(this,e),this.notifier=n,this.source=o}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,o=this.retries,r=this.retriesSubscription;if(o)this.errors=null,this.retriesSubscription=null;else{if(n=new i.Subject,(o=s.tryCatch(this.notifier)(n))===a.errorObject)return t.prototype.error.call(this,a.errorObject.e);r=c.subscribeToResult(this,o)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=o,this.retriesSubscription=r,n.next(e)}},e.prototype._unsubscribe=function(){var t=this,e=t.errors,n=t.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,o,r){var i=this,s=i.errors,a=i.retries,l=i.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=s,this.retries=a,this.retriesSubscription=l,this.source.subscribe(this)},e}(l.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.sample=o;var a=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new l(t),o=e.subscribe(n);return o.add(s.subscribeToResult(n,this.notifier)),o},t}(),l=function(t){function e(){t.apply(this,arguments),this.hasValue=!1}return r(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,o,r){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=a.async),function(n){return n.lift(new l(t,e))}}function r(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(6),a=n(14);e.sampleTime=o;var l=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.period,this.scheduler))},t}(),c=function(t){function e(e,n,o){t.call(this,e),this.period=n,this.scheduler=o,this.hasValue=!1,this.add(o.schedule(r,n,{subscriber:this,period:n}))}return i(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(s.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new l(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(23),a=n(22);e.sequenceEqual=o;var l=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compareTo,this.comparor))},t}();e.SequenceEqualOperator=l;var c=function(t){function e(e,n,o){t.call(this,e),this.compareTo=n,this.comparor=o,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new u(e,this)))}return r(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this,e=t._a,n=t._b,o=t.comparor;e.length>0&&n.length>0;){var r=e.shift(),i=n.shift(),l=!1;o?(l=s.tryCatch(o)(r,i))===a.errorObject&&this.destination.error(a.errorObject.e):l=r===i,l||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(i.Subscriber);e.SequenceEqualSubscriber=c;var u=function(t){function e(e,n){t.call(this,e),this.parent=n}return r(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){return new a.Subject}function r(){return function(t){return s.refCount()(i.multicast(o)(t))}}var i=n(53),s=n(129),a=n(21);e.share=r},function(t,e,n){"use strict";function o(t,e,n){return function(o){return o.lift(r(t,e,n))}}function r(t,e,n){var o,r,s=0,a=!1,l=!1;return function(c){s++,o&&!a||(a=!1,o=new i.ReplaySubject(t,e,n),r=c.subscribe({next:function(t){o.next(t)},error:function(t){a=!0,o.error(t)},complete:function(){l=!0,o.complete()}}));var u=o.subscribe(this);return function(){s--,u.unsubscribe(),r&&0===s&&l&&r.unsubscribe()}}}var i=n(96);e.shareReplay=o},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(97);e.single=o;var a=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.predicate,this.source))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.predicate=n,this.source=o,this.seenValue=!1,this.index=0}return r(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new s(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.skip=o;var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return r(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(75);e.skipLast=o;var a=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new i.Subscriber(t)):e.subscribe(new l(t,this._skipCount))},t}(),l=function(t){function e(e,n){t.call(this,e),this._skipCount=n,this._count=0,this._ring=new Array(n)}return r(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var o=n%e,r=this._ring,i=r[o];r[o]=t,this.destination.next(i)}},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.skipUntil=o;var a=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.notifier))},t}(),l=function(t){function e(e,n){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(s.subscribeToResult(this,n))}return r(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,o,r){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new s(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.skipWhile=o;var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate))},t}(),a=function(t){function e(e,n){t.call(this,e),this.predicate=n,this.skipping=!0,this.index=0}return r(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(i.Subscriber)},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n=t[t.length-1];l.isScheduler(n)?t.pop():n=null;var o=t.length;return 1===o?a.concat(new i.ScalarObservable(t[0],n),e):o>1?a.concat(new r.ArrayObservable(t,n),e):a.concat(new s.EmptyObservable(n),e)}}var r=n(46),i=n(117),s=n(47),a=n(68),l=n(34);e.startWith=o},function(t,e,n){"use strict";var o=n(674),r=n(678);e.asap=new r.AsapScheduler(o.AsapAction)},function(t,e,n){(function(t){function o(t,e){this._id=t,this._clearFn=e}var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(676),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(43))},function(t,e,n){"use strict";function o(){return r.switchMap(i.identity)}var r=n(130),i=n(172);e.switchAll=o},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.switchMapTo=o;var a=function(){function t(t,e){this.observable=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.observable,this.resultSelector))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.inner=n,this.resultSelector=o,this.index=0}return r(e,t),e.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,this.inner,t,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,o,r){var i=this,s=i.resultSelector,a=i.destination;s?this.tryResultSelector(t,e,n,o):a.next(e)},e.prototype.tryResultSelector=function(t,e,n,o){var r,i=this,s=i.resultSelector,a=i.destination;try{r=s(t,e,n,o)}catch(t){return void a.error(t)}a.next(r)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return 0===t?new a.EmptyObservable:e.lift(new l(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(75),a=n(47);e.take=o;var l=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return r(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new a(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.takeUntil=o;var a=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.notifier))},t}(),l=function(t){function e(e,n){t.call(this,e),this.notifier=n,this.add(s.subscribeToResult(this,n))}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.complete()},e.prototype.notifyComplete=function(){},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new s(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6);e.takeWhile=o;var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate))},t}(),a=function(t){function e(e,n){t.call(this,e),this.predicate=n,this.index=0}return r(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e,n){return void 0===e&&(e=a.async),void 0===n&&(n=l.defaultThrottleConfig),function(o){return o.lift(new c(t,e,n.leading,n.trailing))}}function r(t){t.subscriber.clearThrottle()}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(6),a=n(14),l=n(98);e.throttleTime=o;var c=function(){function t(t,e,n,o){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=o}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),u=function(t){function e(e,n,o,r,i){t.call(this,e),this.duration=n,this.scheduler=o,this.leading=r,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}return i(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(r,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(s.Subscriber)},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=r.async),i.timeInterval(t)(this)}var r=n(14),i=n(248);e.TimeInterval=i.TimeInterval,e.timeInterval=o},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=s.async),function(e){return e.lift(new l(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(14);e.timeInterval=o;var a=function(){function t(t,e){this.value=t,this.interval=e}return t}();e.TimeInterval=a;var l=function(){function t(t){this.scheduler=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.scheduler))},t}(),c=function(t){function e(e,n){t.call(this,e),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}return r(e,t),e.prototype._next=function(t){var e=this.scheduler.now(),n=e-this.lastTime;this.lastTime=e,this.destination.next(new a(t,n))},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t,e){void 0===e&&(e=i.async);var n=s.isDate(t),o=n?+t-e.now():Math.abs(t);return function(t){return t.lift(new c(o,n,e,new l.TimeoutError))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(14),s=n(94),a=n(6),l=n(250);e.timeout=o;var c=function(){function t(t,e,n,o){this.waitFor=t,this.absoluteTimeout=e,this.scheduler=n,this.errorInstance=o}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},t}(),u=function(t){function e(e,n,o,r,i){t.call(this,e),this.absoluteTimeout=n,this.waitFor=o,this.scheduler=r,this.errorInstance=i,this.action=null,this.scheduleTimeout()}return r(e,t),e.dispatchTimeout=function(t){t.error(t.errorInstance)},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},e}(a.Subscriber)},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"Timeout has occurred");this.name=e.name="TimeoutError",this.stack=e.stack,this.message=e.message}return o(e,t),e}(Error);e.TimeoutError=r},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=i.async),function(o){var r=s.isDate(t),i=r?+t-n.now():Math.abs(t);return o.lift(new c(i,r,e,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(14),s=n(94),a=n(9),l=n(10);e.timeoutWith=o;var c=function(){function t(t,e,n,o){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=o}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),u=function(t){function e(e,n,o,r,i){t.call(this,e),this.absoluteTimeout=n,this.waitFor=o,this.withObservable=r,this.scheduler=i,this.action=null,this.scheduleTimeout()}return r(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(l.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(a.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e,n){return 0===n?[e]:(t.push(e),t)}function r(){return i.reduce(o,[])}var i=n(76);e.toArray=r},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new l(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(21),s=n(9),a=n(10);e.window=o;var l=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new c(t),o=e.subscribe(n);return o.closed||n.add(a.subscribeToResult(n,this.windowBoundaries)),o},t}(),c=function(t){function e(e){t.call(this,e),this.window=new i.Subject,e.next(this.window)}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new i.Subject;e.next(n)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),s=n(21);e.windowCount=o;var a=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.windowSize,this.startWindowEvery))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.destination=e,this.windowSize=n,this.startWindowEvery=o,this.windows=[new s.Subject],this.count=0,e.next(this.windows[0])}return r(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,o=this.windowSize,r=this.windows,i=r.length,a=0;a<i&&!this.closed;a++)r[a].next(t);var l=this.count-o+1;if(l>=0&&l%e==0&&!this.closed&&r.shift().complete(),++this.count%e==0&&!this.closed){var c=new s.Subject;r.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(i.Subscriber)},function(t,e,n){"use strict";function o(t){var e=c.async,n=null,o=Number.POSITIVE_INFINITY;return d.isScheduler(arguments[3])&&(e=arguments[3]),d.isScheduler(arguments[2])?e=arguments[2]:p.isNumeric(arguments[2])&&(o=arguments[2]),d.isScheduler(arguments[1])?e=arguments[1]:p.isNumeric(arguments[1])&&(n=arguments[1]),function(r){return r.lift(new h(t,n,o,e))}}function r(t){var e=t.subscriber,n=t.windowTimeSpan,o=t.window;o&&e.closeWindow(o),t.window=e.openWindow(),this.schedule(t,n)}function i(t){var e=t.windowTimeSpan,n=t.subscriber,o=t.scheduler,r=t.windowCreationInterval,i=n.openWindow(),a=this,l={action:a,subscription:null},c={subscriber:n,window:i,context:l};l.subscription=o.schedule(s,e,c),a.add(l.subscription),a.schedule(t,r)}function s(t){var e=t.subscriber,n=t.window,o=t.context;o&&o.action&&o.subscription&&o.action.remove(o.subscription),e.closeWindow(n)}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=n(21),c=n(14),u=n(6),p=n(71),d=n(34);e.windowTime=o;var h=function(){function t(t,e,n,o){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=o}return t.prototype.call=function(t,e){return e.subscribe(new g(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),f=function(t){function e(){t.apply(this,arguments),this._numberOfNextedValues=0}return a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(l.Subject),g=function(t){function e(e,n,o,a,l){t.call(this,e),this.destination=e,this.windowTimeSpan=n,this.windowCreationInterval=o,this.maxWindowSize=a,this.scheduler=l,this.windows=[];var c=this.openWindow();if(null!==o&&o>=0){var u={subscriber:this,window:c,context:null},p={windowTimeSpan:n,windowCreationInterval:o,subscriber:this,scheduler:l};this.add(l.schedule(s,n,u)),this.add(l.schedule(i,o,p))}else{var d={subscriber:this,window:c,windowTimeSpan:n};this.add(l.schedule(r,n,d))}}return a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,o=0;o<n;o++){var r=e[o];r.closed||(r.next(t),r.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(r))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new f;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(u.Subscriber)},function(t,e,n){"use strict";function o(t,e){return function(n){return n.lift(new p(t,e))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(21),s=n(19),a=n(23),l=n(22),c=n(9),u=n(10);e.windowToggle=o;var p=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.openings,this.closingSelector))},t}(),d=function(t){function e(e,n,o){t.call(this,e),this.openings=n,this.closingSelector=o,this.contexts=[],this.add(this.openSubscription=u.subscribeToResult(this,n,n))}return r(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,o=0;o<n;o++)e[o].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var o=n.length,r=-1;++r<o;){var i=n[r];i.window.error(e),i.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,o=-1;++o<n;){var r=e[o];r.window.complete(),r.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var o=t[n];o.window.unsubscribe(),o.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,o,r){if(t===this.openings){var c=this.closingSelector,p=a.tryCatch(c)(e);if(p===l.errorObject)return this.error(l.errorObject.e);var d=new i.Subject,h=new s.Subscription,f={window:d,subscription:h};this.contexts.push(f);var g=u.subscribeToResult(this,p,f);g.closed?this.closeWindow(this.contexts.length-1):(g.context=f,h.add(g)),this.destination.next(d)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],o=n.window,r=n.subscription;e.splice(t,1),o.complete(),r.unsubscribe()}},e}(c.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new u(t))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(21),s=n(23),a=n(22),l=n(9),c=n(10);e.windowWhen=o;var u=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.closingSelector))},t}(),p=function(t){function e(e,n){t.call(this,e),this.destination=e,this.closingSelector=n,this.openWindow()}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.openWindow(r)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new i.Subject;this.destination.next(n);var o=s.tryCatch(this.closingSelector)();if(o===a.errorObject){var r=a.errorObject.e;this.destination.error(r),this.window.error(r)}else this.add(this.closingNotification=c.subscribeToResult(this,o))},e}(l.OuterSubscriber)},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var o=t;return e.lift(new a(o,n))}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),s=n(10);e.withLatestFrom=o;var a=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.observables,this.project))},t}(),l=function(t){function e(e,n,o){t.call(this,e),this.observables=n,this.project=o,this.toRespond=[];var r=n.length;this.values=new Array(r);for(var i=0;i<r;i++)this.toRespond.push(i);for(var i=0;i<r;i++){var a=n[i];this.add(s.subscribeToResult(this,a,a,i))}}return r(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.values[n]=e;var i=this.toRespond;if(i.length>0){var s=i.indexOf(n);-1!==s&&i.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";function o(t){return function(e){return e.lift(new r.ZipOperator(t))}}var r=n(95);e.zipAll=o},function(t,e,n){"use strict";var o=n(261),r=function(){function t(){this.subscriptions=[]}return t.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new o.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},t.prototype.logUnsubscribedFrame=function(t){var e=this.subscriptions,n=e[t];e[t]=new o.SubscriptionLog(n.subscribedFrame,this.scheduler.now())},t}();e.SubscriptionLoggable=r},function(t,e,n){"use strict";var o=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=t,this.unsubscribedFrame=e}return t}();e.SubscriptionLog=o},function(t,e,n){"use strict";function o(t,e){for(var n=0,o=e.length;n<o;n++)for(var r=e[n],i=Object.getOwnPropertyNames(r.prototype),s=0,a=i.length;s<a;s++){var l=i[s];t.prototype[l]=r.prototype[l]}}e.applyMixins=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(72),i=n(73),s=function(t){function e(e,n){var o=this;void 0===e&&(e=a),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this,e,function(){return o.frame}),this.maxFrames=n,this.frame=0,this.index=-1}return o(e,t),e.prototype.flush=function(){for(var t,e,n=this,o=n.actions,r=n.maxFrames;(e=o.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=o.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(i.AsyncScheduler);e.VirtualTimeScheduler=s;var a=function(t){function e(e,n,o){void 0===o&&(o=e.index+=1),t.call(this,e,n),this.scheduler=e,this.work=n,this.index=o,this.active=!0,this.index=e.index=o}return o(e,t),e.prototype.schedule=function(n,o){if(void 0===o&&(o=0),!this.id)return t.prototype.schedule.call(this,n,o);this.active=!1;var r=new e(this.scheduler,this.work);return this.add(r),r.schedule(n,o)},e.prototype.requestAsyncId=function(t,n,o){void 0===o&&(o=0),this.delay=t.frame+o;var r=t.actions;return r.push(this),r.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(r.AsyncAction);e.VirtualAction=a},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(t){var e,n;window.getSelection?(e=window.getSelection(),e.getRangeAt&&e.rangeCount&&(n=e.getRangeAt(0),n.deleteContents(),n.insertNode(document.createTextNode(t)))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=t)}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;/*! tooltipster v4.1.8 */!function(i,s){o=[n(8)],void 0!==(r=function(t){return s(t)}.apply(e,o))&&(t.exports=r)}(0,function(t){function e(t){this.$container,this.constraints=null,this.__$tooltip,this.__init(t)}function n(e,n){var o=!0;return t.each(e,function(t,r){return void 0===n[t]||e[t]!==n[t]?(o=!1,!1):void 0}),o}function o(e){var n=e.attr("id"),o=n?s.window.document.getElementById(n):null;return o?o===e[0]:t.contains(s.window.document.body,e[0])}var r={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},i="undefined"!=typeof window?window:null,s={hasTouchCapability:!(!i||!("ontouchstart"in i||i.DocumentTouch&&i.document instanceof i.DocumentTouch||i.navigator.maxTouchPoints)),hasTransitions:function(){if(!i)return!1;var t=i.document.body||i.document.documentElement,e=t.style,n="transition",o=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[n])return!0;n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<o.length;r++)if("string"==typeof e[o[r]+n])return!0;return!1}(),IE:!1,semVer:"4.1.8",window:i},a=function(){this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__instancesLatestArr=[],this.__plugins={},this._env=s};a.prototype={__bridge:function(e,n,o){if(!n[o]){var i=function(){};i.prototype=e;var s=new i;s.__init&&s.__init(n),t.each(e,function(t,e){0!=t.indexOf("__")&&(n[t]?r.debug&&console.log("The "+t+" method of the "+o+" plugin conflicts with another plugin or native methods"):(n[t]=function(){return s[t].apply(s,Array.prototype.slice.apply(arguments))},n[t].bridged=s))}),n[o]=s}return this},__setWindow:function(t){return s.window=t,this},_getRuler:function(t){return new e(t)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(e){var n=this;if("string"==typeof e){var o=e,r=null;return o.indexOf(".")>0?r=n.__plugins[o]:t.each(n.__plugins,function(t,e){return e.name.substring(e.name.length-o.length-1)=="."+o?(r=e,!1):void 0}),r}if(e.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return n.__plugins[e.name]=e,e.core&&n.__bridge(e.core,n,e.name),this},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return"string"==typeof t[0]&&(t[0]={type:t[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},instances:function(e){var n=[];return t(e||".tooltipstered").each(function(){var e=t(this),o=e.data("tooltipster-ns");o&&t.each(o,function(t,o){n.push(e.data(o))})}),n},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(e){return t((e?e+" ":"")+".tooltipstered").toArray()},setDefaults:function(e){return t.extend(r,e),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.tooltipster=new a,t.Tooltipster=function(e,n){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__destroying=!1,this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(e,n)},t.Tooltipster.prototype={__init:function(e,n){var o=this;if(o._$origin=t(e),o.__options=t.extend(!0,{},r,n),o.__optionsFormat(),!s.IE||s.IE>=o.__options.IEmin){var i=null;if(void 0===o._$origin.data("tooltipster-initialTitle")&&(i=o._$origin.attr("title"),void 0===i&&(i=null),o._$origin.data("tooltipster-initialTitle",i)),null!==o.__options.content)o.__contentSet(o.__options.content);else{var a,l=o._$origin.attr("data-tooltip-content");l&&(a=t(l)),a&&a[0]?o.__contentSet(a.first()):o.__contentSet(i)}o._$origin.removeAttr("title").addClass("tooltipstered"),o.__prepareOrigin(),o.__prepareGC(),t.each(o.__options.plugins,function(t,e){o._plug(e)}),s.hasTouchCapability&&t(s.window.document.body).on("touchmove."+o.__namespace+"-triggerOpen",function(t){o._touchRecordEvent(t)}),o._on("created",function(){o.__prepareTooltip()})._on("repositioned",function(t){o.__lastPosition=t.position})}else o.__options.disabled=!0},__contentInsert:function(){var t=this,e=t._$tooltip.find(".tooltipster-content"),n=t.__Content,o=function(t){n=t};return t._trigger({type:"format",content:t.__Content,format:o}),t.__options.functionFormat&&(n=t.__options.functionFormat.call(t,t,{origin:t._$origin[0]},t.__Content)),"string"!=typeof n||t.__options.contentAsHTML?e.empty().append(n):e.text(n),t},__contentSet:function(e){return e instanceof t&&this.__options.contentCloning&&(e=e.clone(!0)),this.__Content=e,this._trigger({type:"updated",content:e}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var e=this,n=e._$origin,o=e._$origin.is("area");if(o){var r=e._$origin.parent().attr("name");n=t('img[usemap="#'+r+'"]')}var i=n[0].getBoundingClientRect(),a=t(s.window.document),l=t(s.window),c=n,u={available:{document:null,window:null},document:{size:{height:a.height(),width:a.width()}},window:{scroll:{left:s.window.scrollX||s.window.document.documentElement.scrollLeft,top:s.window.scrollY||s.window.document.documentElement.scrollTop},size:{height:l.height(),width:l.width()}},origin:{fixedLineage:!1,offset:{},size:{height:i.bottom-i.top,width:i.right-i.left},usemapImage:o?n[0]:null,windowOffset:{bottom:i.bottom,left:i.left,right:i.right,top:i.top}}};if(o){var p=e._$origin.attr("shape"),d=e._$origin.attr("coords");if(d&&(d=d.split(","),t.map(d,function(t,e){d[e]=parseInt(t)})),"default"!=p)switch(p){case"circle":var h=d[0],f=d[1],g=d[2],m=f-g,_=h-g;u.origin.size.height=2*g,u.origin.size.width=u.origin.size.height,u.origin.windowOffset.left+=_,u.origin.windowOffset.top+=m;break;case"rect":var b=d[0],y=d[1],v=d[2],w=d[3];u.origin.size.height=w-y,u.origin.size.width=v-b,u.origin.windowOffset.left+=b,u.origin.windowOffset.top+=y;break;case"poly":for(var I=0,C=0,M=0,T=0,k="even",S=0;S<d.length;S++){var N=d[S];"even"==k?(N>M&&(M=N,0===S&&(I=M)),I>N&&(I=N),k="odd"):(N>T&&(T=N,1==S&&(C=T)),C>N&&(C=N),k="even")}u.origin.size.height=T-C,u.origin.size.width=M-I,u.origin.windowOffset.left+=I,u.origin.windowOffset.top+=C}}var x=function(t){u.origin.size.height=t.height,u.origin.windowOffset.left=t.left,u.origin.windowOffset.top=t.top,u.origin.size.width=t.width};for(e._trigger({type:"geometry",edit:x,geometry:{height:u.origin.size.height,left:u.origin.windowOffset.left,top:u.origin.windowOffset.top,width:u.origin.size.width}}),u.origin.windowOffset.right=u.origin.windowOffset.left+u.origin.size.width,u.origin.windowOffset.bottom=u.origin.windowOffset.top+u.origin.size.height,u.origin.offset.left=u.origin.windowOffset.left+u.window.scroll.left,u.origin.offset.top=u.origin.windowOffset.top+u.window.scroll.top,u.origin.offset.bottom=u.origin.offset.top+u.origin.size.height,u.origin.offset.right=u.origin.offset.left+u.origin.size.width,u.available.document={bottom:{height:u.document.size.height-u.origin.offset.bottom,width:u.document.size.width},left:{height:u.document.size.height,width:u.origin.offset.left},right:{height:u.document.size.height,width:u.document.size.width-u.origin.offset.right},top:{height:u.origin.offset.top,width:u.document.size.width}},u.available.window={bottom:{height:Math.max(u.window.size.height-Math.max(u.origin.windowOffset.bottom,0),0),width:u.window.size.width},left:{height:u.window.size.height,width:Math.max(u.origin.windowOffset.left,0)},right:{height:u.window.size.height,width:Math.max(u.window.size.width-Math.max(u.origin.windowOffset.right,0),0)},top:{height:Math.max(u.origin.windowOffset.top,0),width:u.window.size.width}};"html"!=c[0].tagName.toLowerCase();){if("fixed"==c.css("position")){u.origin.fixedLineage=!0;break}c=c.parent()}return u},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=t(s.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=t(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var e=this;return e.__options.selfDestruction?e.__garbageCollector=setInterval(function(){var n=(new Date).getTime();e.__touchEvents=t.grep(e.__touchEvents,function(t,e){return n-t.time>6e4}),o(e._$origin)||e.destroy()},2e4):clearInterval(e.__garbageCollector),e},__prepareOrigin:function(){var t=this;if(t._$origin.off("."+t.__namespace+"-triggerOpen"),s.hasTouchCapability&&t._$origin.on("touchstart."+t.__namespace+"-triggerOpen touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen",function(e){t._touchRecordEvent(e)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&s.hasTouchCapability){var e="";t.__options.triggerOpen.click&&(e+="click."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.tap&&s.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&t._open(e)})}if(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&s.hasTouchCapability){var e="";t.__options.triggerOpen.mouseenter&&(e+="mouseenter."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.touchstart&&s.hasTouchCapability&&(e+="touchstart."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){!t._touchIsTouchEvent(e)&&t._touchIsEmulatedEvent(e)||(t.__pointerIsOverOrigin=!0,t._openShortly(e))})}if(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&s.hasTouchCapability){var e="";t.__options.triggerClose.mouseleave&&(e+="mouseleave."+t.__namespace+"-triggerOpen "),t.__options.triggerClose.touchleave&&s.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&(t.__pointerIsOverOrigin=!1)})}return t},__prepareTooltip:function(){var e=this,n=e.__options.interactive?"auto":"";return e._$tooltip.attr("id",e.__namespace).css({"pointer-events":n,zIndex:e.__options.zIndex}),t.each(e.__previousThemes,function(t,n){e._$tooltip.removeClass(n)}),t.each(e.__options.theme,function(t,n){e._$tooltip.addClass(n)}),e.__previousThemes=t.merge([],e.__options.theme),e},__scrollHandler:function(e){var n=this;if(n.__options.triggerClose.scroll)n._close(e);else if(o(n._$origin)&&o(n._$tooltip)){if(e.target===s.window.document)n.__Geometry.origin.fixedLineage||n.__options.repositionOnScroll&&n.reposition(e);else{var r=n.__geometry(),i=!1;if("fixed"!=n._$origin.css("position")&&n.__$originParents.each(function(e,n){var o=t(n),s=o.css("overflow-x"),a=o.css("overflow-y");if("visible"!=s||"visible"!=a){var l=n.getBoundingClientRect();if("visible"!=s&&(r.origin.windowOffset.left<l.left||r.origin.windowOffset.right>l.right))return i=!0,!1;if("visible"!=a&&(r.origin.windowOffset.top<l.top||r.origin.windowOffset.bottom>l.bottom))return i=!0,!1}return"fixed"!=o.css("position")&&void 0}),i)n._$tooltip.css("visibility","hidden");else if(n._$tooltip.css("visibility","visible"),n.__options.repositionOnScroll)n.reposition(e);else{var a=r.origin.offset.left-n.__Geometry.origin.offset.left,l=r.origin.offset.top-n.__Geometry.origin.offset.top;n._$tooltip.css({left:n.__lastPosition.coord.left+a,top:n.__lastPosition.coord.top+l})}}n._trigger({type:"scroll",event:e})}return n},__stateSet:function(t){return this.__state=t,this._trigger({type:"state",state:t}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,t.each(this.__timeouts.close,function(t,e){clearTimeout(e)}),this.__timeouts.close=[],this},__trackerStart:function(){var t=this,e=t._$tooltip.find(".tooltipster-content");return t.__options.trackTooltip&&(t.__contentBcr=e[0].getBoundingClientRect()),t.__tracker=setInterval(function(){if(o(t._$origin)&&o(t._$tooltip)){if(t.__options.trackOrigin){var r=t.__geometry(),i=!1;n(r.origin.size,t.__Geometry.origin.size)&&(t.__Geometry.origin.fixedLineage?n(r.origin.windowOffset,t.__Geometry.origin.windowOffset)&&(i=!0):n(r.origin.offset,t.__Geometry.origin.offset)&&(i=!0)),i||(t.__options.triggerClose.mouseleave?t._close():t.reposition())}if(t.__options.trackTooltip){var s=e[0].getBoundingClientRect();s.height===t.__contentBcr.height&&s.width===t.__contentBcr.width||(t.reposition(),t.__contentBcr=s)}}else t._close()},t.__options.trackerInterval),t},_close:function(e,n){var o=this,r=!0;if(o._trigger({type:"close",event:e,stop:function(){r=!1}}),r||o.__destroying){n&&o.__callbacks.close.push(n),o.__callbacks.open=[],o.__timeoutsClear();var i=function(){t.each(o.__callbacks.close,function(t,n){n.call(o,o,{event:e,origin:o._$origin[0]})}),o.__callbacks.close=[]};if("closed"!=o.__state){var a=!0,l=new Date,c=l.getTime(),u=c+o.__options.animationDuration[1];if("disappearing"==o.__state&&u>o.__closingTime&&(a=!1),a){o.__closingTime=u,"disappearing"!=o.__state&&o.__stateSet("disappearing");var p=function(){clearInterval(o.__tracker),o._trigger({type:"closing",event:e}),o._$tooltip.off("."+o.__namespace+"-triggerClose").removeClass("tooltipster-dying"),t(s.window).off("."+o.__namespace+"-triggerClose"),o.__$originParents.each(function(e,n){t(n).off("scroll."+o.__namespace+"-triggerClose")}),o.__$originParents=null,t(s.window.document.body).off("."+o.__namespace+"-triggerClose"),o._$origin.off("."+o.__namespace+"-triggerClose"),o._off("dismissable"),o.__stateSet("closed"),o._trigger({type:"after",event:e}),o.__options.functionAfter&&o.__options.functionAfter.call(o,o,{event:e,origin:o._$origin[0]}),i()};s.hasTransitions?(o._$tooltip.css({"-moz-animation-duration":o.__options.animationDuration[1]+"ms","-ms-animation-duration":o.__options.animationDuration[1]+"ms","-o-animation-duration":o.__options.animationDuration[1]+"ms","-webkit-animation-duration":o.__options.animationDuration[1]+"ms","animation-duration":o.__options.animationDuration[1]+"ms","transition-duration":o.__options.animationDuration[1]+"ms"}),o._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),o.__options.animationDuration[1]>0&&o._$tooltip.delay(o.__options.animationDuration[1]),o._$tooltip.queue(p)):o._$tooltip.stop().fadeOut(o.__options.animationDuration[1],p)}}else i()}return o},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(e,n){var r=this;if(!r.__destroying&&o(r._$origin)&&r.__enabled){var i=!0;if("closed"==r.__state&&(r._trigger({type:"before",event:e,stop:function(){i=!1}}),i&&r.__options.functionBefore&&(i=r.__options.functionBefore.call(r,r,{event:e,origin:r._$origin[0]}))),!1!==i&&null!==r.__Content){n&&r.__callbacks.open.push(n),r.__callbacks.close=[],r.__timeoutsClear();var a,l=function(){"stable"!=r.__state&&r.__stateSet("stable"),t.each(r.__callbacks.open,function(t,e){e.call(r,r,{origin:r._$origin[0],tooltip:r._$tooltip[0]})}),r.__callbacks.open=[]};if("closed"!==r.__state)a=0,"disappearing"===r.__state?(r.__stateSet("appearing"),s.hasTransitions?(r._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),r.__options.animationDuration[0]>0&&r._$tooltip.delay(r.__options.animationDuration[0]),r._$tooltip.queue(l)):r._$tooltip.stop().fadeIn(l)):"stable"==r.__state&&l();else{if(r.__stateSet("appearing"),a=r.__options.animationDuration[0],r.__contentInsert(),r.reposition(e,!0),s.hasTransitions?(r._$tooltip.addClass("tooltipster-"+r.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":r.__options.animationDuration[0]+"ms","-ms-animation-duration":r.__options.animationDuration[0]+"ms","-o-animation-duration":r.__options.animationDuration[0]+"ms","-webkit-animation-duration":r.__options.animationDuration[0]+"ms","animation-duration":r.__options.animationDuration[0]+"ms","transition-duration":r.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=r.__state&&(r._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),r.__options.animationDuration[0]>0&&r._$tooltip.delay(r.__options.animationDuration[0]),r._$tooltip.queue(l))},0)):r._$tooltip.css("display","none").fadeIn(r.__options.animationDuration[0],l),r.__trackerStart(),t(s.window).on("resize."+r.__namespace+"-triggerClose",function(e){var n=t(document.activeElement);(n.is("input")||n.is("textarea"))&&t.contains(r._$tooltip[0],n[0])||r.reposition(e)}).on("scroll."+r.__namespace+"-triggerClose",function(t){r.__scrollHandler(t)}),r.__$originParents=r._$origin.parents(),r.__$originParents.each(function(e,n){t(n).on("scroll."+r.__namespace+"-triggerClose",function(t){r.__scrollHandler(t)})}),r.__options.triggerClose.mouseleave||r.__options.triggerClose.touchleave&&s.hasTouchCapability){r._on("dismissable",function(t){t.dismissable?t.delay?(d=setTimeout(function(){r._close(t.event)},t.delay),r.__timeouts.close.push(d)):r._close(t):clearTimeout(d)});var c=r._$origin,u="",p="",d=null;r.__options.interactive&&(c=c.add(r._$tooltip)),r.__options.triggerClose.mouseleave&&(u+="mouseenter."+r.__namespace+"-triggerClose ",p+="mouseleave."+r.__namespace+"-triggerClose "),r.__options.triggerClose.touchleave&&s.hasTouchCapability&&(u+="touchstart."+r.__namespace+"-triggerClose",p+="touchend."+r.__namespace+"-triggerClose touchcancel."+r.__namespace+"-triggerClose"),c.on(p,function(t){if(r._touchIsTouchEvent(t)||!r._touchIsEmulatedEvent(t)){var e="mouseleave"==t.type?r.__options.delay:r.__options.delayTouch;r._trigger({delay:e[1],dismissable:!0,event:t,type:"dismissable"})}}).on(u,function(t){!r._touchIsTouchEvent(t)&&r._touchIsEmulatedEvent(t)||r._trigger({dismissable:!1,event:t,type:"dismissable"})})}r.__options.triggerClose.originClick&&r._$origin.on("click."+r.__namespace+"-triggerClose",function(t){r._touchIsTouchEvent(t)||r._touchIsEmulatedEvent(t)||r._close(t)}),(r.__options.triggerClose.click||r.__options.triggerClose.tap&&s.hasTouchCapability)&&setTimeout(function(){if("closed"!=r.__state){var e="",n=t(s.window.document.body);r.__options.triggerClose.click&&(e+="click."+r.__namespace+"-triggerClose "),r.__options.triggerClose.tap&&s.hasTouchCapability&&(e+="touchend."+r.__namespace+"-triggerClose"),n.on(e,function(e){r._touchIsMeaningfulEvent(e)&&(r._touchRecordEvent(e),r.__options.interactive&&t.contains(r._$tooltip[0],e.target)||r._close(e))}),r.__options.triggerClose.tap&&s.hasTouchCapability&&n.on("touchstart."+r.__namespace+"-triggerClose",function(t){r._touchRecordEvent(t)})}},0),r._trigger("ready"),r.__options.functionReady&&r.__options.functionReady.call(r,r,{origin:r._$origin[0],tooltip:r._$tooltip[0]})}if(r.__options.timer>0){var d=setTimeout(function(){r._close()},r.__options.timer+a);r.__timeouts.close.push(d)}}}return r},_openShortly:function(t){var e=this,n=!0;if("stable"!=e.__state&&"appearing"!=e.__state&&!e.__timeouts.open&&(e._trigger({type:"start",event:t,stop:function(){n=!1}}),n)){var o=0==t.type.indexOf("touch")?e.__options.delayTouch:e.__options.delay;o[0]?e.__timeouts.open=setTimeout(function(){e.__timeouts.open=null,e.__pointerIsOverOrigin&&e._touchIsMeaningfulEvent(t)?(e._trigger("startend"),e._open(t)):e._trigger("startcancel")},o[0]):(e._trigger("startend"),e._open(t))}return e},_optionsExtract:function(e,n){var o=this,r=t.extend(!0,{},n),i=o.__options[e];return i||(i={},t.each(n,function(t,e){var n=o.__options[t];void 0!==n&&(i[t]=n)})),t.each(r,function(e,n){void 0!==i[e]&&("object"!=typeof n||n instanceof Array||null==n||"object"!=typeof i[e]||i[e]instanceof Array||null==i[e]?r[e]=i[e]:t.extend(r[e],i[e]))}),r},_plug:function(e){var n=t.tooltipster._plugin(e);if(!n)throw new Error('The "'+e+'" plugin is not defined');return n.instance&&t.tooltipster.__bridge(n.instance,this,n.name),this},_touchIsEmulatedEvent:function(t){for(var e=!1,n=(new Date).getTime(),o=this.__touchEvents.length-1;o>=0;o--){var r=this.__touchEvents[o];if(!(n-r.time<500))break;r.target===t.target&&(e=!0)}return e},_touchIsMeaningfulEvent:function(t){return this._touchIsTouchEvent(t)&&!this._touchSwiped(t.target)||!this._touchIsTouchEvent(t)&&!this._touchIsEmulatedEvent(t)},_touchIsTouchEvent:function(t){return 0==t.type.indexOf("touch")},_touchRecordEvent:function(t){return this._touchIsTouchEvent(t)&&(t.time=(new Date).getTime(),this.__touchEvents.push(t)),this},_touchSwiped:function(t){for(var e=!1,n=this.__touchEvents.length-1;n>=0;n--){var o=this.__touchEvents[n];if("touchmove"==o.type){e=!0;break}if("touchstart"==o.type&&t===o.target)break}return e},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),e[0].instance=this,e[0].origin=this._$origin?this._$origin[0]:null,e[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),t.tooltipster._trigger.apply(t.tooltipster,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},_unplug:function(e){var n=this;if(n[e]){var o=t.tooltipster._plugin(e);o.instance&&t.each(o.instance,function(t,o){n[t]&&n[t].bridged===n[e]&&delete n[t]}),n[e].__destroy&&n[e].__destroy(),delete n[e]}return n},close:function(t){return this.__destroyed?this.__destroyError():this._close(null,t),this},content:function(t){var e=this;if(void 0===t)return e.__Content;if(e.__destroyed)e.__destroyError();else if(e.__contentSet(t),null!==e.__Content){if("closed"!==e.__state&&(e.__contentInsert(),e.reposition(),e.__options.updateAnimation))if(s.hasTransitions){var n=e.__options.updateAnimation;e._$tooltip.addClass("tooltipster-update-"+n),setTimeout(function(){"closed"!=e.__state&&e._$tooltip.removeClass("tooltipster-update-"+n)},1e3)}else e._$tooltip.fadeTo(200,.5,function(){"closed"!=e.__state&&e._$tooltip.fadeTo(200,1)})}else e._close();return e},destroy:function(){var e=this;return e.__destroyed?e.__destroyError():e.__destroying||(e.__destroying=!0,e._close(null,function(){e._trigger("destroy"),e.__destroying=!1,e.__destroyed=!0,e._$origin.removeData(e.__namespace).off("."+e.__namespace+"-triggerOpen"),t(s.window.document.body).off("."+e.__namespace+"-triggerOpen");var n=e._$origin.data("tooltipster-ns");if(n)if(1===n.length){var o=null;"previous"==e.__options.restoration?o=e._$origin.data("tooltipster-initialTitle"):"current"==e.__options.restoration&&(o="string"==typeof e.__Content?e.__Content:t("<div></div>").append(e.__Content).html()),o&&e._$origin.attr("title",o),e._$origin.removeClass("tooltipstered"),e._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else n=t.grep(n,function(t,n){return t!==e.__namespace}),e._$origin.data("tooltipster-ns",n);e._trigger("destroyed"),e._off(),e.off(),e.__Content=null,e.__$emitterPrivate=null,e.__$emitterPublic=null,e.__options.parent=null,e._$origin=null,e._$tooltip=null,t.tooltipster.__instancesLatestArr=t.grep(t.tooltipster.__instancesLatestArr,function(t,n){return e!==t}),clearInterval(e.__garbageCollector)})),e},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(t){return this.close(t)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(t){return this.__destroyed||this.__destroying?this.__destroyError():this._open(null,t),this},option:function(e,n){return void 0===n?this.__options[e]:(this.__destroyed?this.__destroyError():(this.__options[e]=n,this.__optionsFormat(),t.inArray(e,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===e&&this.__prepareGC()),this)},reposition:function(t,e){var n=this;return n.__destroyed?n.__destroyError():"closed"!=n.__state&&o(n._$origin)&&(e||o(n._$tooltip))&&(e||n._$tooltip.detach(),n.__Geometry=n.__geometry(),n._trigger({type:"reposition",event:t,helper:{geo:n.__Geometry}})),n},show:function(t){return this.open(t)},status:function(){return{destroyed:this.__destroyed,destroying:this.__destroying,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.fn.tooltipster=function(){var e=Array.prototype.slice.apply(arguments),n="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof e[0]){var o="#*$~&";return this.each(function(){var r=t(this).data("tooltipster-ns"),i=r?t(this).data(r[0]):null;if(!i)throw new Error("You called Tooltipster's \""+e[0]+'" method on an uninitialized element');if("function"!=typeof i[e[0]])throw new Error('Unknown method "'+e[0]+'"');this.length>1&&"content"==e[0]&&(e[1]instanceof t||"object"==typeof e[1]&&null!=e[1]&&e[1].tagName)&&!i.__options.contentCloning&&i.__options.debug&&console.log(n);var s=i[e[0]](e[1],e[2]);return s!==i||"instance"===e[0]?(o=s,!1):void 0}),"#*$~&"!==o?o:this}t.tooltipster.__instancesLatestArr=[];var i=e[0]&&void 0!==e[0].multiple,s=i&&e[0].multiple||!i&&r.multiple,a=e[0]&&void 0!==e[0].content,l=a&&e[0].content||!a&&r.content,c=e[0]&&void 0!==e[0].contentCloning,u=c&&e[0].contentCloning||!c&&r.contentCloning,p=e[0]&&void 0!==e[0].debug,d=p&&e[0].debug||!p&&r.debug;return this.length>1&&(l instanceof t||"object"==typeof l&&null!=l&&l.tagName)&&!u&&d&&console.log(n),this.each(function(){var n=!1,o=t(this),r=o.data("tooltipster-ns"),i=null;r?s?n=!0:d&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):n=!0,n&&(i=new t.Tooltipster(this,e[0]),r||(r=[]),r.push(i.__namespace),o.data("tooltipster-ns",r),o.data(i.__namespace,i),i.__options.functionInit&&i.__options.functionInit.call(i,i,{origin:this}),i._trigger("init")),t.tooltipster.__instancesLatestArr.push(i)}),this},e.prototype={__init:function(e){this.__$tooltip=e,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=t('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(s.window.document.body)},__forceRedraw:function(){var t=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(t)},constrain:function(t,e){return this.constraints={width:t,height:e},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:t}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var t=this.__$tooltip[0].getBoundingClientRect(),e={size:{height:t.height||t.bottom,width:t.width||t.right}};if(this.constraints){var n=this.__$tooltip.find(".tooltipster-content"),o=this.__$tooltip.outerHeight(),r=n[0].getBoundingClientRect(),i={height:o<=this.constraints.height,width:t.width<=this.constraints.width&&r.width>=n[0].scrollWidth-1};e.fits=i.height&&i.width}return s.IE&&s.IE<=11&&e.size.width!==s.window.document.documentElement.clientWidth&&(e.size.width=Math.ceil(e.size.width)+1),e}};var l=navigator.userAgent.toLowerCase();-1!=l.indexOf("msie")?s.IE=parseInt(l.split("msie")[1]):-1!==l.toLowerCase().indexOf("trident")&&-1!==l.indexOf(" rv:11")?s.IE=11:-1!=l.toLowerCase().indexOf("edge/")&&(s.IE=parseInt(l.toLowerCase().split("edge/")[1]));var c="tooltipster.sideTip";return t.tooltipster._plugin({name:c,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(t){var e=this;e.__instance=t,e.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),e.__previousState="closed",e.__options,e.__optionsFormat(),e.__instance._on("state."+e.__namespace,function(t){"closed"==t.state?e.__close():"appearing"==t.state&&"closed"==e.__previousState&&e.__create(),e.__previousState=t.state}),e.__instance._on("options."+e.__namespace,function(){e.__optionsFormat()}),e.__instance._on("reposition."+e.__namespace,function(t){e.__reposition(t.event,t.helper)})},__close:function(){this.__instance.content()instanceof t&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var e=t('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||e.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&e.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&e.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=e,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var e=this;if(e.__options=e.__instance._optionsExtract(c,e.__defaults()),e.__options.position&&(e.__options.side=e.__options.position),"object"!=typeof e.__options.distance&&(e.__options.distance=[e.__options.distance]),e.__options.distance.length<4&&(void 0===e.__options.distance[1]&&(e.__options.distance[1]=e.__options.distance[0]),void 0===e.__options.distance[2]&&(e.__options.distance[2]=e.__options.distance[0]),void 0===e.__options.distance[3]&&(e.__options.distance[3]=e.__options.distance[1]),e.__options.distance={top:e.__options.distance[0],right:e.__options.distance[1],bottom:e.__options.distance[2],left:e.__options.distance[3]}),"string"==typeof e.__options.side){var n={top:"bottom",right:"left",bottom:"top",left:"right"};e.__options.side=[e.__options.side,n[e.__options.side]],"left"==e.__options.side[0]||"right"==e.__options.side[0]?e.__options.side.push("top","bottom"):e.__options.side.push("right","left")}6===t.tooltipster._env.IE&&!0!==e.__options.arrow&&(e.__options.arrow=!1)},__reposition:function(e,n){var o,r=this,i=r.__targetFind(n),s=[];r.__instance._$tooltip.detach();var a=r.__instance._$tooltip.clone(),l=t.tooltipster._getRuler(a),c=!1,u=r.__instance.option("animation");switch(u&&a.removeClass("tooltipster-"+u),t.each(["window","document"],function(o,u){var p=null;if(r.__instance._trigger({container:u,helper:n,satisfied:c,takeTest:function(t){p=t},results:s,type:"positionTest"}),1==p||0!=p&&0==c&&("window"!=u||r.__options.viewportAware))for(var o=0;o<r.__options.side.length;o++){var d={horizontal:0,vertical:0},h=r.__options.side[o];"top"==h||"bottom"==h?d.vertical=r.__options.distance[h]:d.horizontal=r.__options.distance[h],r.__sideChange(a,h),t.each(["natural","constrained"],function(t,o){if(p=null,r.__instance._trigger({container:u,event:e,helper:n,mode:o,results:s,satisfied:c,side:h,takeTest:function(t){p=t},type:"positionTest"}),1==p||0!=p&&0==c){var a={container:u,distance:d,fits:null,mode:o,outerSize:null,side:h,size:null,target:i[h],whole:null},f="natural"==o?l.free():l.constrain(n.geo.available[u][h].width-d.horizontal,n.geo.available[u][h].height-d.vertical),g=f.measure();if(a.size=g.size,a.outerSize={height:g.size.height+d.vertical,width:g.size.width+d.horizontal},"natural"==o?n.geo.available[u][h].width>=a.outerSize.width&&n.geo.available[u][h].height>=a.outerSize.height?a.fits=!0:a.fits=!1:a.fits=g.fits,"window"==u&&(a.fits?a.whole="top"==h||"bottom"==h?n.geo.origin.windowOffset.right>=r.__options.minIntersection&&n.geo.window.size.width-n.geo.origin.windowOffset.left>=r.__options.minIntersection:n.geo.origin.windowOffset.bottom>=r.__options.minIntersection&&n.geo.window.size.height-n.geo.origin.windowOffset.top>=r.__options.minIntersection:a.whole=!1),s.push(a),a.whole)c=!0;else if("natural"==a.mode&&(a.fits||a.size.width<=n.geo.available[u][h].width))return!1}})}}),r.__instance._trigger({edit:function(t){s=t},event:e,helper:n,results:s,type:"positionTested"}),s.sort(function(t,e){if(t.whole&&!e.whole)return-1;if(!t.whole&&e.whole)return 1;if(t.whole&&e.whole){var n=r.__options.side.indexOf(t.side),o=r.__options.side.indexOf(e.side);return o>n?-1:n>o?1:"natural"==t.mode?-1:1}if(t.fits&&!e.fits)return-1;if(!t.fits&&e.fits)return 1;if(t.fits&&e.fits){var n=r.__options.side.indexOf(t.side),o=r.__options.side.indexOf(e.side);return o>n?-1:n>o?1:"natural"==t.mode?-1:1}return"document"==t.container&&"bottom"==t.side&&"natural"==t.mode?-1:1}),o=s[0],o.coord={},o.side){case"left":case"right":o.coord.top=Math.floor(o.target-o.size.height/2);break;case"bottom":case"top":o.coord.left=Math.floor(o.target-o.size.width/2)}switch(o.side){case"left":o.coord.left=n.geo.origin.windowOffset.left-o.outerSize.width;break;case"right":o.coord.left=n.geo.origin.windowOffset.right+o.distance.horizontal;break;case"top":o.coord.top=n.geo.origin.windowOffset.top-o.outerSize.height;break;case"bottom":o.coord.top=n.geo.origin.windowOffset.bottom+o.distance.vertical}"window"==o.container?"top"==o.side||"bottom"==o.side?o.coord.left<0?n.geo.origin.windowOffset.right-this.__options.minIntersection>=0?o.coord.left=0:o.coord.left=n.geo.origin.windowOffset.right-this.__options.minIntersection-1:o.coord.left>n.geo.window.size.width-o.size.width&&(n.geo.origin.windowOffset.left+this.__options.minIntersection<=n.geo.window.size.width?o.coord.left=n.geo.window.size.width-o.size.width:o.coord.left=n.geo.origin.windowOffset.left+this.__options.minIntersection+1-o.size.width):o.coord.top<0?n.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?o.coord.top=0:o.coord.top=n.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:o.coord.top>n.geo.window.size.height-o.size.height&&(n.geo.origin.windowOffset.top+this.__options.minIntersection<=n.geo.window.size.height?o.coord.top=n.geo.window.size.height-o.size.height:o.coord.top=n.geo.origin.windowOffset.top+this.__options.minIntersection+1-o.size.height):(o.coord.left>n.geo.window.size.width-o.size.width&&(o.coord.left=n.geo.window.size.width-o.size.width),o.coord.left<0&&(o.coord.left=0)),r.__sideChange(a,o.side),n.tooltipClone=a[0],n.tooltipParent=r.__instance.option("parent").parent[0],n.mode=o.mode,n.whole=o.whole,n.origin=r.__instance._$origin[0],n.tooltip=r.__instance._$tooltip[0],delete o.container,delete o.fits,delete o.mode,delete o.outerSize,delete o.whole,o.distance=o.distance.horizontal||o.distance.vertical;var p=t.extend(!0,{},o);if(r.__instance._trigger({edit:function(t){o=t},event:e,helper:n,position:p,type:"position"}),r.__options.functionPosition){var d=r.__options.functionPosition.call(r,r.__instance,n,p);d&&(o=d)}l.destroy();var h,f;"top"==o.side||"bottom"==o.side?(h={prop:"left",val:o.target-o.coord.left},f=o.size.width-this.__options.minIntersection):(h={prop:"top",val:o.target-o.coord.top},f=o.size.height-this.__options.minIntersection),h.val<this.__options.minIntersection?h.val=this.__options.minIntersection:h.val>f&&(h.val=f);var g;g=n.geo.origin.fixedLineage?n.geo.origin.windowOffset:{left:n.geo.origin.windowOffset.left+n.geo.window.scroll.left,top:n.geo.origin.windowOffset.top+n.geo.window.scroll.top},o.coord={left:g.left+(o.coord.left-n.geo.origin.windowOffset.left),top:g.top+(o.coord.top-n.geo.origin.windowOffset.top)},r.__sideChange(r.__instance._$tooltip,o.side),n.geo.origin.fixedLineage?r.__instance._$tooltip.css("position","fixed"):r.__instance._$tooltip.css("position",""),r.__instance._$tooltip.css({left:o.coord.left,top:o.coord.top,height:o.size.height,width:o.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(h.prop,h.val),r.__instance._$tooltip.appendTo(r.__instance.option("parent")),r.__instance._trigger({type:"repositioned",event:e,position:o})},__sideChange:function(t,e){t.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+e)},__targetFind:function(t){var e={},n=this.__instance._$origin[0].getClientRects();if(n.length>1){1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),n=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1))}if(n.length<2)e.top=Math.floor(t.geo.origin.windowOffset.left+t.geo.origin.size.width/2),e.bottom=e.top,e.left=Math.floor(t.geo.origin.windowOffset.top+t.geo.origin.size.height/2),e.right=e.left;else{var o=n[0];e.top=Math.floor(o.left+(o.right-o.left)/2),o=n.length>2?n[Math.ceil(n.length/2)-1]:n[0],e.right=Math.floor(o.top+(o.bottom-o.top)/2),o=n[n.length-1],e.bottom=Math.floor(o.left+(o.right-o.left)/2),o=n.length>2?n[Math.ceil((n.length+1)/2)-1]:n[n.length-1],e.left=Math.floor(o.top+(o.bottom-o.top)/2)}return e}}}),t})},function(t,e,n){var o;void 0!==(o=function(t){var e=n(41),o=n(1);return e.extend({name:"no-table-split",isVisible:!1,initialize:function(t){this.editor=t.editor,this.bindEditorEvents(),this.isVisible||this.hide()},editorEvents:{"yne-selection-change":"onSelectionChange"},bindEditorEvents:function(){var t=this,e=t.editor,n=t.editorEvents;n&&o.each(n,function(n,o){e.on(o,t[n].bind(t))})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(775),o=n(1);return e.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onEditingStateChange:function(t){var e=this;o.has(t,e.name)&&(e.selectedValue=t[e.name])}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(t){if(!t||/^http/i.test(t))return t;var e,n=t.lastIndexOf("\\");return-1===n?t:(e=t.substring(n+1),t.substring(0,n+1)+encodeURIComponent(e))}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(1),n(8)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.isDataUrl=function(t){return/^data:/i.test(t)},t.isHttpUrl=function(t){return/^http/i.test(t)},t.has=function(t){return/\?\d+$/.test(String(t))},t.remove=function(t){return String(t).replace(/\?\d+$/,"")},t.addIfNeeded=function(t,e){if(t=String(t),t=o.trim(t),this.isHttpUrl(t))return t;if(this.isDataUrl(t))return t;if(this.has(t)){if(!0!==e)return t;t=this.remove(t)}else if(/\?/.test(t))return t;return t+"?"+n.uniqueId()},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(42),r=n(13),i=n(8),s=n(40),a=n(4),l=n(35),c=n(271),u=n(817),p=n(818),d=n(819),h=n(841),f=n(842),g=n(7),m=n(843),_=n(272),b=n(38),y=n(17),v=n(33),w=n(58),I=n(160),C=n(2),M=n(77),T=C.TableRange,k=C.NoteRange,S=C.TableCellType,N=C.SupportedInlineStyles,x=C.FontMaps,A=C.BlockTypes,E=C.Parser,O=C.TableCell,D=C.RichText,L=C.MacroResource,R=C.ImageResource;return n(844),o.extend({className:"bulb__block-view bulb__table-view",_template:r.getTemplate("common","table_view"),_wrapperElClassName:"bulb__table-wrapper",_cellEditClassName:"bulb__cell-edit",_cellSelectedClassName:"bulb__cell-selected",_layoutElClassName:"bulb__table-layout",_layoutInnerElClassName:"bulb__table-layout-inner",_rectOnDragStart:null,_oldRangeType:null,_rending:null,_isPasteAsText:!1,_OCRHighlightInfos:null,_OCRHighlightItem:null,events:{"mouseenter td":"_onCellMouseEnter","mouseleave td":"_onCellMouseLeave",mousedown:"_onMouseDown",dblclick:"_onDblclick",click:"_onClick","mouseenter a":"_onEnterLink","mouseleave a":"_onLeaveLink"},initialize:function(t){var e=this;e.editor=t.editor,o.prototype.initialize.apply(e,arguments),e._draggable=new c({el:this.el,disableDocSelection:!0}),e.bindSelectionEvents(),e._initEvents(),e._OCRHighlightInfos=[],e._OCRHighlightItem=[]},_initEvents:function(){var t=this,n=t.block,o=t._draggable,r={};e.bindAll(t,"_onAttributeChanged","_onDragging"),l.addListeners({"cell-inline-style-change":"_onCellInlineStyleChange","cell-block-style-change":"_onCellBlockStyleChange","row-height-set":"_onRowHeightSet","col-width-set":"_onColWidthSet","row-inserted":"_onRowInserted","col-inserted":"_onColInserted","row-deleted":"_onRowDeleted","col-deleted":"_onColDeleted","cell-content-change":"_onCellContentChange","content-change":"_reRenderCells","high-light":"onHighlight"},n,t),n.on("attribute-changed",e.throttle(t._onAttributeChanged),100),t.on("resize",t._triggerResize),r[c.DRAG_START]="_onDragStart",r[c.DRAG_END]="_onDragEnd",l.addListeners(r,o,t),o.on(c.DRAGGING,e.throttle(t._onDragging,100)),t._triggerResize=e.throttle(t._triggerResize,100)},_removeSubViews:function(){var t=this;e.each(["_cellEditView","_selectionView","_hiddenInputView"],function(e){var n=t[e];n&&(n.destroy?n.destroy():a.error("view has no destroy()",n),t[e]=null)})},_addSubViews:function(){var t,n=this,o=n._keyHandlerManager;n._removeSubViews(),n._cellEditView=d.create({table:n.block,tableView:n,styleRules:n._getStyleRules(),mapper:this._inlineStyleViewMapper}),l.addListeners({"set-cell-content":"_onSetCellContent",blur:"_onCellEditViewBlur","cell-edit-view-exit":"_onCellEditViewExit","cell-edit-view-enter":"_onCellEditViewEnter"},n._cellEditView,n),l.bubble({"cell-edit-view-selection-change":!0,"cell-edit-view-exit":!0,"cell-edit-view-history-change":!0,"cell-edit-view-command-executed":!0},n._cellEditView,n),n.addViewToInner(n._cellEditView),n._selectionView=new p({tableView:n}),n.addViewToInner(n._selectionView),n._cellResizeView=new f({tableView:n}),n.addViewToInner(n._cellResizeView),l.addListeners({"set-row-height":"_onSetRowHeight","set-col-width":"_onSetColWidth","set-cells-size":"_setCellsSize"},n._cellResizeView,n),n._hiddenInputView=h.create({}),o||(o=n._keyHandlerManager=new g({scope:"table-hidden-input"})),o.on("bind-key",function(t){var e=n._hiddenInputView;e&&e.bindKey(t)}),o.on("unbind-key",function(t){var e=n._hiddenInputView;e&&e.unbindKey(t)}),t=o.getAvailableHandlerNames(),e.each(t,function(t){o.bind(t)}),n.addView(n._hiddenInputView),l.addListeners({"key-monitor":"_onKey",copy:"_onCopy",cut:"_onCut",paste:"_onPaste","text-input":"_onTextInput"},n._hiddenInputView,n)},_onSetCellContent:function(t,e){var n=this,o=n.block,r=o.getCellById(t);if(!r)return void a.error("Not find cell! by id:",t);n.trigger("command","comp.SetTableCellContent",{table:n.block,cellRect:{row:r.row,col:r.col},content:e})},_onCellEditViewBlur:function(){},_onCellEditViewExit:function(){this._hiddenInputView.hideBehind()},_onKey:function(t,e){var n=this;n._keyHandlerManager.execWithKey(t,n,e)},_onCopy:function(t){var e=this;t.stopPropagation(),t.preventDefault(),e.trigger("copy",t)},_onCut:function(t){var e=this,n=e._getNoteRange();t.stopPropagation(),t.preventDefault(),e.trigger("cut",t),n.isSingleTableSelected()&&e._clearSelectCells()},_pasteBlobImg:function(t){var e,n,o,r=this;e=t.originalEvent.clipboardData.items,o=r._getRectOfNoteRange(),e&&1===e.length&&0===e[0].type.indexOf("image")&&o&&(n=e[0].getAsFile(),r.trigger("yne-blob-paste",{isImg:!0,data:n},function(t){t&&t.source&&r.trigger("command","comp.SetTableCellContent",{table:r.block,cellRect:{row:o.top,col:o.left},content:R.create({source:t.source})})}))},_onPaste:function(t){t.stopPropagation(),t.preventDefault();var e,n,o,r,i,s=this,a=s._isPasteAsText;return y.IS_PC?void s.trigger("yne-on-paste",a,t):(e=new I({event:t}),a?void((i=e.getData("text/plain"))&&s._pastePlain(i,a,t)):void((n=e.getData("text/yne-json"))&&s._pasteJSON(n,t)||(o=e.getData("text/yne-table-json"))&&s._pasteYTableJson(o,t)||(r=e.getData("text/html"))&&s._pasteHTML(r,t)||(i=e.getData("text/plain"))&&s._pastePlain(i,a,t)||s._pasteBlobImg(t)))},_pasteHTML:function(t,e){var n=this,o=E.parseHtml(t);return n.pasteBlockList(o,e)},_pasteJSON:function(t,e){var n=E.parseJSON(t);return this.pasteBlockList(n,e)},_pasteYTableJson:function(t,n){var o=this;if(e.isString(t))try{t=window.JSON.parse(t)}catch(t){return void a.error("parse ytable json  string error")}return o._pasteJSON([{blockType:A.TABLE,data:t}],n)},_pastePlain:function(t,e,n){var o=this,r=E.parsePlain(t,null,null,e);return o.pasteBlockList(r,n)},pasteBlockList:function(t,e){var n=this,o=n.block,r=[],i=[];return!(!t||!t.length)&&(new M(function(o){n.trigger("yne-pre-paste",{event:e,blockList:t},function(){o()})}).then(function(){1===t.length&&A.isTable(t[0])&&n.trigger("command","comp.InsertTableCells",{table:o,widths:t[0].colWidths,heights:t[0].rowHeights,cellsData:t[0].tableCells}),t.forEach(function(t){var e=O.blockToCell(t);e&&r.push(e)}),r.length>0&&(r.forEach(function(t){i.push([t])}),n.trigger("command","comp.InsertTableCells",{table:o,cellsData:i}))}),!0)},_clearSelectCells:function(){var t=this,e=t.block;t.trigger("command","comp.InsertTableCells",{table:e})},_onTextInput:function(t){var e,n,o,r,i=this,s=i._getRectOfNoteRange();if(!s)return void a.warn("Failed to show cellEditView",s);i.isLocked()||(e=i.block.getCell(s.top,s.left,{findMergePointIfNeeded:!0,withPosition:!0}))&&(n=e.cell,n&&n.isEmpty()?(o=n.getStylesForEmpty(),r=D.create(t,!1),r.setStyles(0,r.getLength(),o)):r=D.create(t,!1),i._cellEditView.showAndEdit({row:e.row,col:e.col,content:r}))},moveWithDirection:function(t,e){var n,o=this,r=o.block,i=o._getRectOfNoteRange(),s=1,a=1;if(i){if(r.isMergePoint(i.top,i.left)&&(n=r.getMergePointAttrAt(i.top,i.left),a=n.height,s=n.width),t===b.UP){if(i.top-a<0)return o.trigger("move-caret",!1,e);o._setRange({top:i.top-a,left:i.left,width:1,height:1})}if(t===b.DOWN){if(i.top+a+i.height>r.getRowCount())return o.trigger("move-caret",!0,e);o._setRange({top:i.top+a,left:i.left,width:1,height:1})}t===b.LEFT&&o._setRange({top:i.top,left:Math.max(i.left-s,0),width:1,height:1}),t===b.RIGHT&&o._setRange({top:i.top,left:Math.min(i.left+s,r.getColumnCount()-1),width:1,height:1})}},toggleInlineStyle:function(t){this.trigger("command","comp.SetTableCellInlineStyle",{toggle:t})},clearSelectedCells:function(){this._clearSelectCells()},enterEditMode:function(){},selectAll:function(t){t&&this.trigger("select-all")},render:function(){var t=this,e=t.el;t._rending=!0,t._removeSubViews(),t._renderTemplate(),t.colgroupEl=e.querySelector("colgroup"),t.wrapperEl=e.querySelector("."+t._wrapperElClassName),t.tableEl=e.querySelector("table"),t._tableLayoutEl=e.querySelector("."+t._layoutElClassName),t._tableLayoutInnerEl=e.querySelector("."+t._layoutInnerElClassName),t._setHeightByData(),t._renderCells(),t._addSubViews(),o.prototype.render.apply(t,arguments),t._rending=!1,t._triggerResize(),t._BindEvents()},addView:function(t){this._tableLayoutEl.appendChild(t.el),t.render()},addViewToInner:function(t){this._tableLayoutInnerEl.appendChild(t.el),t.render()},_renderTemplate:function(){var t=this;t.$el.html(t._template())},_BindEvents:function(){var t=this,e=t.el.querySelector(".bulb__macro-edit-button"),n=this.el.querySelector(".bulb__macro-delete-button");i(e).on("click",this._onEditButtonClicked.bind(this)),i(n).on("click",this._onDeleteButtonClicked.bind(this))},_onDeleteButtonClicked:function(){var t=this,e=t._getRectOfNoteRange();e&&!t.isLocked()&&t.trigger("command","comp.SetTableCellContent",{table:t.block,cellRect:{row:e.top,col:e.left},content:""})},_onEditButtonClicked:function(){var t=this,e=t.block,n=t._getRectOfNoteRange();if(n&&!t.isLocked()){var o=e.getCell(n.top,n.left,{findMergePointIfNeeded:!0,withPosition:!0}),r=o.cell,i=r.getContent(),s=this.editor.getMacroConfigManager().getEditDialog(i),l=this.editor.getMacroConfigManager().getMacroConfig(i.getMacroName());s?s.then(function(e){t.trigger("command","comp.SetTableCellContent",{table:t.block,cellRect:{row:n.top,col:n.left},content:L.create({name:i.getMacroName(),content:e,version:l.version,manager:i.getMacroConfigManager()})})}).catch(function(t){a.warn("edit macro data failed: "+t)}):a.log("click edit button of a macro: "+i.getId())}},_renderCells:function(){var t,e,n,o,r,i=this,s=i.block,l=i.tableEl,c=s.getRowCount(),u=s.getColumnCount(),p=l.querySelector("tbody"),d=[];for(o=0;o<c;o++){for(t=document.createElement("tr"),r=0;r<u;r++)e=s.getCell(o,r),e||a.error("No find cell! row, col, block",o,r,s),e.isMergedCell()||(e.isAttachmentCell()&&d.push({row:o,col:r}),t.appendChild(i._renderCell(o,r)));n=s.getRowHeight(o),t.style.height=n?n+"px":"",p.appendChild(t)}i._renderColumns(i.colgroupEl.querySelectorAll("col").length,u)},_loadCellImg:function(t,e){var n=this,o=t.querySelector("img");o&&i(o).load(function(){n._triggerResize(),e&&n._redrawRange()})},_createHighlightMark:function(){var t=this;t._clearHighlightMark(),e.each(t._OCRHighlightInfos,function(n){var o=i(t.getCellImageEl(n.cellId));if(null==o||0===o.length)return void a.error("Failed to get TableCell by ID:",o);var s=o.position(),l=o.width()/n.width;e.each(n.pos,function(e){var n=i(r.render("common","high_light_item",{top:s.top+e.top*l-1,left:s.left+e.left*l-2,height:(e.bottom-e.top)*l,width:(e.right-e.left)*l}));n.appendTo(t.wrapperEl),t._OCRHighlightItem.push(n)})})},clearHighlight:function(){this._OCRHighlightInfos=[],this._clearHighlightMark()},_clearHighlightMark:function(){e.each(this._OCRHighlightItem,function(t){t.remove()}),this._OCRHighlightItem=[]},_replaceBlankToSymbol:function(t){var n=t,o=function(t){!t||t.length<1||e.forEach(t,function(t){t.children&&t.children.length>0&&o(t.children),t.childNodes[0]&&3===t.childNodes[0].nodeType&&(t.innerHTML=t.innerHTML.replace(/ /g,"&nbsp;"))})};n&&o(n.children)},_renderCell:function(t,e,n){var o,r,s,l,c,u,p=this,d=p.block,h=d.getCell(t,e,{findMergePointIfNeeded:!0,withPosition:!0});if(h){switch(r=h.cell,s=n||document.createElement("td"),l=r.getContent(),c=r.getType(),s.setAttribute("data-cell-id",r.getCellId()),p._setMergeCell(s,r),p._setCellStyles(s,r.getBlockStyles()),c){case S.TEXT:u=l.toHtml({styleRules:p._getStyleRules()});break;case S.IMAGE:u=m.renderImage(l,d.getExtraInfo("pcResMap"));break;case S.ATTACHMENT:u=m.renderAttachment(l);break;case S.MACRO:u=m.renderMacro(l,p.editor),o=m.renderMacroBody(l,p.editor);break;default:a.warn("no cellType ")}return s.innerHTML=u,o&&o.then(function(t){var e=p.editor.getMacroConfigManager().getMacroStyles(l);i(s).find(".bulb__macro-body").empty().append(t),i(s).find(".bulb__macro-hover-body").css({left:i(s).find(".bulb__macro-body").width()}),p.$el.find(".bulb__macro").css(e),p._BindEvents()}).catch(function(t){a.warn("edit view generating failed: "+t)}),p._loadCellImg(s,n),p._replaceBlankToSymbol(s),n&&p._triggerResize(),s}},_getStyleRules:function(){var t=this._inlineStyleViewMapper;return{color:function(e){var n=e.color;return e.href!==N.getDefault("href")&&s.equals(e.color,"blue")?"#003884":null!=n&&t?t.valueToView("color",n):void 0},"font-family":function(e){var n,o=e["font-family"];return null!=o&&t&&(n=t.valueToView("font-family",o)),o!==n?n:x.getAllValueByFont(o)||o}}},_setMergeCell:function(t,e){if(e.isMergePoint()){var n=e.getMergePointAttr();n.width>0&&t.setAttribute("colspan",n.width),n.height>0&&t.setAttribute("rowspan",n.height)}},_reRenderCells:function(){var t=this,e=t.tableEl,n=e.querySelector("tbody");t._rending=!0,n.innerHTML="",t.colgroupEl.innerHTML="",t._renderCells(),t._rending=!1,t._triggerResize(),t._redrawRange()},_redrawRange:function(){var t=this,e=t._getRectOfNoteRange();t._setRange(e)},_onDownloadClick:function(t){var e,n,o,r=this,s=r.getCellElementByTarget(t.target),a=r.block;s&&(e=i(s).data("cellId"),(o=a.getCellById(e).cell)&&(n=o.getContent(),r.trigger("yne-download-attachment",n.getResource(),n.getFileName())))},_onClick:function(t){-1!==t.target.className.indexOf("bulb__attachment-download")&&this._onDownloadClick(t)},_onEnterLink:function(t){var e,n,o=this,r=i(t.target).closest("a").get(0),s=o.getCellElementByTarget(t.target),a=r.parentNode;e=i(s).data("cellId"),n=o.block.getCellById(e),!o.isOnCellEdit()&&n&&(a.innerText||"").trim()===(r.innerText||"").trim()&&(w.isNoteLinkUrl(r.href)||o.isCollabLocked()||!r||o.trigger("link-menu-show",{linkNode:r,block:o.block,range:T.create({block:o.block,type:T.TYPES.NORMAL,rect:{width:1,height:1,left:n.col,top:n.row}})}))},_onLeaveLink:function(){this.trigger("link-menu-hide")},_onMouseDown:function(t){var e=this;e.getCellElementByTarget(t)?this._handleDrag(t,c.DRAG_START,!0):e._setRange(T.TYPES.BLANK)},_onDblclick:function(){var t,e=this,n=e._getRectOfNoteRange();n&&!e.isLocked()&&(t=e.block.getCell(n.top,n.left,{findMergePointIfNeeded:!0,withPosition:!0}),e._cellEditView.showAndEdit(t))},_getTableRange:function(){var t,e=this,n=e._getNoteRange();if(n&&n.isInSingleBlock&&n.isInSingleBlock()&&(t=n.getStartBlockRange())&&t instanceof T&&t.block===e.block)return t},_getRectRange:function(){var t=this,e=t._getTableRange();if(e)return e.getAsRectRange()},_getRectOfNoteRange:function(){var t=this,e=t._getRectRange();return e&&e.getRect?e.getRect():null},_getNoteRange:function(){var t;return this.trigger("get-note-range",function(e){t=e}),t},_onDragStart:function(t){this._rectOnDragStart=null,this._handleDrag(t,c.DRAG_START)},_handleDrag:function(t,e,n){var o,r,s,l,u,p=this,d=p.getCellElementByTarget(t.target),h=t.shiftKey&&!t.ctrlKey&&!t.metaKey;if(o=i(d).data("cellId"),r=p.block.getCellById(o)){switch(l={width:1,height:1,left:r.col,top:r.row},e){case c.DRAG_START:if(h)u=p._getRectOfNoteRange(),p._rectOnDragStart=u,s=_.union(p._rectOnDragStart,l);else{if(n&&(u=p._getRectOfNoteRange(),_.contains(u,l)))return;s=p._rectOnDragStart=l}break;case c.DRAGGING:case c.DRAG_END:s=_.union(p._rectOnDragStart,l);break;default:a.error("unvalid drag type",e)}s&&p._setRange(s)}},_setRange:function(t){var e,n,o,r=this,i=T.TYPES.NORMAL;if(t)return t.width?o=t:i=t,e=T.create({block:r.block,type:i||T.TYPES.FIRST_CELL,rect:o}),n=new k({startRange:e,endRange:e}),r.trigger("set-range",n,!0,!0,!0),e},_onDragging:function(t){this._handleDrag(t,c.DRAGGING)},_onDragEnd:function(){this._handleDrag(event,c.DRAG_END),this._rectOnDragStart=null},_cancelEditMode:function(){this._cellEditView.hide()},_setCellStyles:function(t,e){var n;n=e.textAlign,t.style.textAlign="center"===n||"right"===n||"left"===n?n:"",n=e.verticalAlign,t.style.verticalAlign="top"===n||"middle"===n||"bottom"===n?n:"",n=t.style.whiteSpace,!0===e.wrap?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="nowrap",n!==t.style.whiteSpace&&this._triggerResize(),n=e.backColor,t.style.backgroundColor=n&&"inherit"!==n&&"transparent"!==n?n:""},_setRowHeight:function(t,e){var n=this,o=n._getRowElAt(t);o&&(o.style.height=e+"px",n._triggerResize())},_getRowElAt:function(t){var e=this,n=e.tableEl,o=n.tBodies[0];if(o)return o.rows[t]},getRowElHeight:function(t){var e=this._getRowElAt(t),n=0;return e?n=e.getBoundingClientRect().height:n},_renderColumns:function(t,n){if(!((t=t||0)>=n)){var o,r=this,i=r.block,s=i.getColumnCount(),a=r.colgroupEl,l=e.toArray(a.querySelectorAll("col"));for(n=n||s,o=t;o<n;++o)r._setColumnWidth(o,i.getColumnWidth(o));for(o=l.length-1;o>=s;--o)u(l[o])}},_setColumnWidth:function(t,e){var n=this,o=n._ensureColEl(t);o&&(o.style.width=e+"px",n._triggerResize())},_ensureColEl:function(t){var e,n=this,o=n._getColumnCount(),r=Math.max(t+1,o),i=n.colgroupEl,s=r-i.querySelectorAll("col").length,a=n._getColElAt(t);if(a)return a;for(e=0;e<s;++e)i.appendChild(document.createElement("col"));return n._getColElAt(t)},_getColumnCount:function(){var t=this.tableEl.rows[0];return t?t.cells.length:this.block.getColumnCount()},_getColElAt:function(t){if(!(t<0)){return this.colgroupEl.querySelectorAll("col")[t]}},getColElWidth:function(t){var e=this._getColElAt(t);return e?parseFloat(e.style.width):0},getCellElement:function(t){if(t&&t.getCellId&&(t=t.getCellId()),t)return this.$el.find('[data-cell-id="'+t+'"]:first').get(0)},getCellElementAt:function(t,e){var n=this,o=n.block.getCell(t,e,{findMergePointIfNeeded:!0});return n.getCellElement(o)},getCellTextElementAt:function(t,e){return this.getCellElementAt(t,e).querySelector(".bulb__table-cell-line > span")},getColumnIndex:function(t){var e=this,n=i(t).data("cellId"),o=e.block.getCellById(n);return o&&null!=o.col?o.col:null},getCellElementByTarget:function(t){if(t&&t.target&&(t=t.target),t)return i(t).closest("td").get(0)},getAbsoluteBoundingRectAt:function(t,e){var n=this,o=n.getBoundingRectAt(t,e),r=n._tableLayoutInnerEl.scrollLeft;if(o)return o.left-=r,o},getBoundingRectAt:function(t,e){var n=this.getCellElementAt(t,e);return this.getBoundingRect(n)},getBoundingRectByCell:function(t){var e=this,n=e.getCellElement(t);return e.getBoundingRect(n)},_triggerResize:function(){if(!this._rending){var t=this,e=t._tableLayoutEl,n=t._tableLayoutInnerEl,o=n.getBoundingClientRect().height;t._viewHeight!==o&&(t._viewHeight=o,e.style.height=o+"px",t.trigger("view-height-changed",t.cid)),t._createHighlightMark()}},getBoundingRect:function(t){if(t){var e=this,n=e.wrapperEl.getBoundingClientRect(),o=t.getBoundingClientRect();return{left:o.left-n.left,top:o.top-n.top,right:o.right-n.left,bottom:o.bottom-n.top,width:o.width,height:o.height}}},getEventBoundingRect:function(t){if(t){var e=this,n=e.wrapperEl.getBoundingClientRect();return{left:t.clientX-n.left,top:t.clientY-n.top}}},_onSetRowHeight:function(t,e){this._setCellsSize([{row:t,height:e}])},_onSetColWidth:function(t,e){this._setCellsSize([{col:t,width:e}])},_setCellsSize:function(t){this.trigger("command","comp.SetTableCellsSize",{table:this.block,sizes:t})},_onAttributeChanged:function(){this._reRenderCells()},_onRowHeightSet:function(t,e){this._setRowHeight(t,e)},_onColWidthSet:function(t,e){this._setColumnWidth(t,e)},_ensureRow:function(){},_onColInserted:function(){this._reRenderCells()},_onColDeleted:function(){this._reRenderCells()},_onRowInserted:function(){this._reRenderCells()},_onRowDeleted:function(){this._reRenderCells()},_onCellInlineStyleChange:function(t,e){var n=this.getCellElementAt(t,e);this._renderCell(t,e,n)},_onCellBlockStyleChange:function(t,e,n,o){var r=this.getCellElementAt(t,e);r&&this._setCellStyles(r,o)},_onCellMouseEnter:function(t){var e=this;e.trigger("cell-enter",t,e)},_onCellMouseLeave:function(t){var e=this;e.trigger("cell-leave",t,e)},_onCellContentChange:function(t){var e,n=this,o=n.block.getCellById(t);return o?(n._ensureRow(o.row),(e=n.getCellElement(t))?(n._renderCell(o.row,o.col,e),void n._triggerResize()):void n._reRenderCells()):void a.error("unvalid cell info",o)},getHiddenInputView:function(){return this._hiddenInputView},getCellEditView:function(){return this._cellEditView},focusOutTbody:function(){this._setRange(T.TYPES.BLANK)},_setHeightByData:function(){var t,e=this,n=e.block,o=n.getRowCount(),r=e._tableLayoutEl,i=0;for(t=0;t<o;t++)i+=n.getRowHeight(t);e._viewHeight=i,r.style.height=i+"px"},getCellImageEl:function(t){var e=this,n=e.getCellElement(t);if(n)return n.querySelector("img")},getImageDomMapByTableRange:function(t){var e,n=t.tableRange,o=t.selectAll,r=this,i=r.block,s={};if(o&&(n=T.create({type:T.TYPES.ALL,block:i})),n&&(e=n.getAsRectRange()))return e.forEachCell(function(t){var e,n,o=t.getCellId();t.isImageCell()&&(e=r.getCellImageEl(o))&&(n=t.getContent(),s[i.getId()+"-"+n.getResId()]||(s[i.getId()+"-"+n.getResId()]={img:e,source:n.getSource()}))}),s},isLocked:function(){var t;return this._rending||this.trigger("get-read-only-status",function(e){t=e}),this.block.isLocked()||this.block.isReadOnly()||this._isReadOnly||t},selectTable:function(t){var e=this;if(!e._selectionView)return a.error("No selectionView find!");if(t){if(e._getRectOfNoteRange())return;e._selectionView.draw(T.create({block:this.block,type:T.TYPES.ALL}))}else e._selectionView.draw()},onDrawRange:function(t){var e,n,o=this;if(!o._selectionView)return a.error("No selectionView find!");if(t&&!t.isInBlank()){if(o._selectionView.draw(t),!(e=t.getAsRectRange()))return;n=e.getRect(),o._hiddenInputView.focus(o.getAbsoluteBoundingRectAt(n.top,n.left))}else o._selectionView.draw()},convertToNativeRange:function(){var t=this,e=document.createRange(),n=t.$el.get(0);return e.setStart(n,0),e.setEnd(n,n.childNodes.length),e},parseNativeRange:function(t,e,n){var o,r,s,a,l,c=this,u=c.block,p=t.startContainer,d=t.endContainer;return t.collapsed||(r=c.getCellElementByTarget(d))&&(a=u.getCellById(i(r).data("cellId"))),o=c.getCellElementByTarget(p),o&&(s=u.getCellById(i(o).data("cellId"))),s?c._setRange({top:s.row,left:s.col,height:a?a.row-s.row:1,width:a?a.col-s.col:1}):n||v.isNodeInRange(c.wrapperEl,t)||v.isRangeInNode(c.el,t)?(l=new T({block:u,type:T.TYPES.ALL}),c._selectionView.draw(l),l):void 0},onHighlight:function(t,n,o){function r(t){for(var e,r=t.getLength(),i=n.ignoreCase?t.toString().toLowerCase():t.toString(),s=c.indexOf(i,0);-1!==s;)e=document.createRange(),e.setStart(u,s),e.setEnd(u,s+r),o(e),s=c.indexOf(i,s+r)}function i(o){c=o.textContent,c=n.ignoreCase?c.toLowerCase():c,u=o,e.each(t,r)}var s,a,l,c,u,p=this,d=p.block,h=d.getRowCount(),f=d.getColumnCount();for(p._OCRHighlightInfos=[],a=0;a<h;a++)for(l=0;l<f;l++)if(!d.isMergedCell(a,l))if(s=d.getCell(a,l),s.isImageCell())null!=n.images&&e.each(n.images,function(t){t.resID===s.getContent().getResId()&&(t.cellId=s.getCellId(),p._OCRHighlightInfos.push(t))});else{if(u=p.getCellTextElementAt(a,l),!s.isTextNoEmptyCell()||!u)continue;e.map(u.childNodes,i)}p._createHighlightMark()},editCellFromToolbar:function(t,e){return this._cellEditView.editFromToolbar(t,e)},isOnCellEdit:function(){var t=this,e=t._cellEditView,n=t._hiddenInputView;return e&&e.isOnEdit()||n&&n.isOnEdit()},_onCellEditViewEnter:function(t){t&&(t.blockId=this.block.getId()),this.trigger("cell-edit-view-enter",t)},setPasteAsText:function(t){this._isPasteAsText=t||!1}},{isRangeInCellEditArea:function(t){return d.isRangeIn(t)||h.isRangeIn(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(28),n(1)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){o.bindAll(this,"onMouseDown","onMouseMove","onMouseUp"),this.el=t.el,this.disableDocSelection=!0===t.disableDocSelection,this.document=this.el.ownerDocument,this._makeDraggable()},e.prototype._makeDraggable=function(){var t=this.el;t.addEventListener("mousedown",this.onMouseDown),this._setUserSelect(t,"none")},e.prototype._getUserSelect=function(t){return t.style.webkitUserSelect||t.style.mozUserSelect||t.style.msUserSelect||t.style.userSelect||""},e.prototype._setUserSelect=function(t,e){t.style.webkitUserSelect=e,t.style.mozUserSelect=e,t.style.msUserSelect=e,t.style.userSelect=e},e.prototype.onMouseDown=function(t){if(1===t.which){var n=this.el,o=this.document;n.setCapture&&n.setCapture(),o.addEventListener("mousemove",this.onMouseMove),o.addEventListener("mouseup",this.onMouseUp),this.disableDocSelection&&(this._backupDocUserSelect=this._getUserSelect(o.body),this._setUserSelect(o.body,"none")),this.trigger(e.DRAG_START,t)}},e.prototype.onMouseMove=function(t){1===t.which&&this.trigger(e.DRAGGING,t)},e.prototype.cancel=function(){var t=this.el,e=this.document;t.releaseCapture&&t.releaseCapture(),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseup",this.onMouseUp),this.disableDocSelection&&this._setUserSelect(e.body,this._backupDocUserSelect)},e.prototype.onMouseUp=function(t){1===t.which&&(this.cancel(),this.trigger(e.DRAG_END,t))},e.DRAG_START="drag-start",e.DRAGGING="dragging",e.DRAG_END="drag-end",e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(){function t(){}return t.contains=function(t,e){if(!t||!e)return!1;var n=t.left+t.width,o=t.top+t.height,r=e.left+e.width,i=e.top+e.height;return t.left<=e.left&&t.top<=e.top&&n>=r&&o>=i},t.union=function(t,e){if(t&&e){var n=Math.min(t.left,e.left),o=Math.min(t.top,e.top);return t={left:n,top:o,width:Math.max(t.left+t.width,e.left+e.width)-n,height:Math.max(t.top+t.height,e.top+e.height)-o}}},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o={bold:"bold",italic:"italic",strike:"strikeThrough",underline:"underline"};return{TOGGLE_INLINE_STYLES_CMD_MAP:o,INLINE_STYLES_CMD_MAP:e.extend({"back-color":"backColor",color:"foreColor","font-family":"fontName","font-size":"fontSize"},o)}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(8),o=n(111),r=n(33),i=n(45);return{_container:null,getUrlInfoBeforeRange:function(t,e){var n,o,s=this,a=t.commonAncestorContainer,l={textNodeArray:[],endIndex:-1};if(r.isRangeInNode(e,t))return s._container=e,s._isInLinkElement(a)?o={alreadyUrl:!0}:(i.isElement(a)?(n=s._findLastTextNode(a))&&(l.endIndex=n.length):l.endIndex=t.endOffset,o=s._iteratorOfTextNodeBefore(l,a),s._container=null,o)},_iteratorOfTextNodeBefore:function(t,e){var n,o=this;if(i.isText(e))n=e;else{if(!i.isElement(e))return;n=o._findLastTextNode(e)}if(n)return t.textNodeArray.unshift(n),o._parseTextNodeObject(t)||o._iteratorOfTextNodeBefore(t,o._findPreviousNode(n))},_findPreviousNode:function(t){var e=this,n=t.previousSibling;return n?e._isUnvalidElement(n)?null:n:(t=t.parentNode,t?e._findPreviousNode(t):null)},_findLastTextNode:function(t){var e,n,o,r=this;if(t){if(i.isText(t))return t;if(0===(o=t.childNodes.length))return t=r._findPreviousNode(t),r._findLastTextNode(t);for(n=o-1;n>=0;n--)return e=t.childNodes[n],r._findLastTextNode(e)}return null},_parseTextNodeObject:function(t){var e,n,r,i,s,a="",l=t.textNodeArray[0].nodeValue,c=0,u="",p=t.endIndex,d=t.textNodeArray,h=t.textNodeArray.length;for(i=0;i<h-1;i++)u+=d[i].nodeValue;if(u+=d[h-1].nodeValue.slice(0,p),(e=o.matchEnd(u))&&e.result){for(r=e.result.index,s=0;s<h-1;s++){if(r-=a.length,a.length<=r&&l.length>r){c=s;break}a+=d[s].nodeValue,l+=d[s+1].nodeValue}n={uri:e.fullURI,startNode:d[c],startOffset:r,endNode:d[h-1],endOffset:p}}return n},_isUnvalidElement:function(t){var n,o,r=this;return!i.isText(t)&&(!i.isElement(t)||!e.contains(r._container,t)||(n=t.currentStyle||window.getComputedStyle(t,""),o="A"===t.nodeName,"block"===n.display||o))},_isInLinkElement:function(t){var n=this;if(e.contains(n._container,t)){for(;t&&t!==n._container;){if("A"===t.nodeName)return!0;t=t.parentNode}return!1}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){var o,r;o=[n,e,n(277),n(77),n(906)],void 0!==(r=function(t,e,o,r,i){"use strict";function s(t){return!((new Date).getTime()-t-6e5>0)}function a(t){var e=(new Date).getTime(),n=l(t.appKey+e+t.appSecret);return new r(function(r,a){c.ajax({url:t.url,type:"get",dataType:"jsonp",data:{pkn:t.pkn,appKey:t.appKey,version:t.version,sdkVersion:t.sdkVersion,sign:n,salt:e},success:function(e){var n=(t.appKey+"0000000000000000").substring(0,16),l=i.AESDec(n,e.result);l=JSON.parse(l),0===Number(l.errorCode)&&s(l.timestamp)?r(o):a(l)},error:function(){a()}})})}var l=n(907),c=n(8);return a}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};o=[n,e,n(77),n(1),n(318),n(11),n(2),n(28),n(878),n(879),n(278),n(881),n(882),n(902)],void 0!==(r=function(t,e,o,r,a,l,c,u,p,d,h,f,g){"use strict";var m;return n(13).load(n(903),"sdk"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultBeheviour={preCopy:!0,prePaste:!0,preCut:!0},e}return i(e,t),e.convert=function(t,e){if(!e.from||!e.to)throw new Error("required parameter missingyou should pass an options that has props [from] and [to]");var n;switch(e.from){case"xml":n=c.Note.fromXml(t);break;case"json":n=c.Note.fromBulbJSON(t);break;case"html":n=c.Note.fromHtml(t);break;default:throw new Error("invalid options prop [from]")}switch(e.to){case"xml":return n.toXml();case"json":return n.toBulbJSON();case"html":return n.toHtml();case"renderHtml":return g.toRenderHtml(n.toHtml());default:throw new Error("invalid options prop [to]")}},e.prototype.initialize=function(t){this._options={pageType:l.PAGE_TYPE_A4,parentEl:t.el,render:!0,sessionType:0,viewMode:0,disableContextMenu:t.disableContextMenu,disableAttachDownload:t.disableAttachDownload,disableImageDownload:t.disableImageDownload,disableOpenLink:t.disableOpenLink,disableInsertLink:t.disableInsertLink,disableClipError:t.disableClipError,userInfo:t.userInfo||{},shareKey:t.shareKey,collabServer:t.collabServer||{},removeLocalImg:t.removeLocalImg||!1,isCollabEnabled:t.isCollabEnabled||!1,previewMode:t.previewMode||!1,toolbarRemove:t.toolbarRemove||[],toolbarParentEl:t.toolbarParentEl,toolbarItems:t.toolbarItems},(this._coreEditor=new a(this._options)).render(),this._bindEvents()},e.prototype.getContent=function(t){var e=this;if(void 0===t&&(t={}),t.async)switch(t.type){case"html":return new o(function(t,n){e._coreEditor.getHtmlContent(!0,function(e){t(e)})});case"json":return new o(function(t,n){var o=e._coreEditor.getNote().toBulbJSON();Object.defineProperty(o,"bulbVersion",{enumerable:!0,value:"1.3.8"}),t(o)});case"plain":return new o(function(t,n){t(e._coreEditor.getPlainContent())});case"renderHtml":return new o(function(t,n){e._coreEditor.getHtmlContent(!0,function(e){t(g.toRenderHtml(e))})});case"xml":default:return new o(function(t,n){e._coreEditor.getXmlContent(function(e){t(e)})})}else switch(t.type){case"html":return this._coreEditor.getHtmlContent(!0);case"json":var n=this._coreEditor.getNote().toBulbJSON();return Object.defineProperty(n,"bulbVersion",{enumerable:!0,value:"1.3.8"}),n;case"plain":return this._coreEditor.getPlainContent();case"renderHtml":return g.toRenderHtml(this._coreEditor.getHtmlContent(!0));case"xml":default:return this._coreEditor.getXmlContent()}},e.prototype.getResourceList=function(t){return this._coreEditor.getNote().getAllResourceInfo(null,t)},e.prototype.setContent=function(t,e){var n=this;void 0===e&&(e={});var i=r.defaults(this._options,{bgImageId:l.DEFAULT_BACKGROUND,disableBackground:!1,isCollabEnabled:!1,isAsync:!1});if(e.async)switch(e.type){case"json":return new o(function(e,o){n._coreEditor.setJSONContent(t,null,i,function(t){e()})});case"xml":default:return new o(function(e,o){n._coreEditor.setXmlContent(t,null,i,function(t){e()})})}else switch(e.type){case"json":return this._coreEditor.setJSONContent(t,null,i,null);case"xml":default:return this._coreEditor.setXmlContent(t,null,i,null)}},e.prototype.insertAttachment=function(t){t.src=t.src||" ",this._coreEditor.execCommand("comp.InsertAttachment",r.extend({retainStartBlock:t.retainSelection||!1},t))},e.prototype.insertImage=function(t){this._coreEditor.execCommand("comp.InsertImage",{retainStartBlock:t.retainSelection||!1,src:t.src})},e.prototype.insertMacro=function(t){this._coreEditor.execCommand("comp.AppendMacro",{retainStartBlock:t.retainSelection||!1,macroName:t.name,macroContent:t.content,macroVersion:t.version})},e.prototype.setReadOnly=function(t){this._coreEditor.setReadOnly(t),t?(this._coreEditorHeight=this._coreEditor.getNoteViewWrapper().height(),this._coreEditor.getNoteViewWrapper().height("auto")):this._coreEditor.getNoteViewWrapper().height(this._coreEditorHeight)},e.prototype.setWebAppInfo=function(t){this._coreEditor.setOuterAppInfo(t)},e.prototype.getToolbar=function(){return this._coreEditor.getToolbar()},e.prototype.showToolbar=function(t){var e=this.getToolbar();t?e.show():e.hide(),this._coreEditor.onResize()},e.prototype.registerMacroConfig=function(t){this._coreEditor.getMacroConfigManager().registerMacroConfig(t)},e.prototype.unregisterMacroConfig=function(t){this._coreEditor.getMacroConfigManager().unregisterMacroConfig(t)},e.prototype.scrollNoteToBlockViewByBlockId=function(t){this._coreEditor.getNoteView().scrollBlockViewIntoWrapper(t)},e.prototype.getBlockViewElementByBlockId=function(t){return this._coreEditor.getNoteView().getBlockViewById(t).el},e.prototype.addListener=function(t,e){var n=f.registerEventMap[t];this.defaultBeheviour[n]&&(this.defaultBeheviour[n]=!1),this.on(t,e)},e.prototype.destroy=function(){this._coreEditor.destroy()},e.prototype._bindEvents=function(){var t=this,e=this._coreEditor;r.each(p,function(n,o){var r="yne-"+o;e.bind(r,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(!e.isIdleTimeout()||"download-image"!==o&&"download-attachment"!==o)&&t.trigger.apply(t,[n].concat(r))})}),r.each(f.registerEventMap,function(n,o){var r="yne-"+o;e.bind(r,function(e,r){t.trigger(o,e,r),t.defaultBeheviour[n]&&"function"==typeof r&&r()})}),e.on("yne-download-attachment",function(e,n){if(t.trigger("before-download-attachment",{url:e,name:n}),!t._options.disableAttachDownload){var o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download",n),o.click()}}),e.on("yne-download-image",function(e){if(t.trigger("before-download-image",{url:e}),!t._options.disableImageDownload){var n=document.createElement("a");n.setAttribute("target","_blank"),n.setAttribute("href",e),n.setAttribute("download",""),n.click()}}),e.on("yne-before-insert-link",function(e,n){t.trigger("before-insert-link",e,function(t){n(t)})}),e.on("yne-insert-macro-clicked",function(e,n){t.trigger("insert-macro-clicked",e,function(t){n(t)})}),e.on("yne-open-link",function(e){t.trigger("before-open-link",{href:e}),t._options.disableOpenLink||window.open(e)}),e.on("yne-preview-image",function(e){var n=e[0],o=e[1];t.trigger("preview-image",{curIndex:n,items:o})}),e.on("yne-insert-photo",function(e){t.trigger("require-image",function(t){var n=t.src;n&&e(n)})});var n;e.on("yne-context-menu",function(e,o,r){var i=s({},e,{items:o.filter(function(t){return""!==t.label})});if(n&&n.destory(),t.trigger("before-context-menu",i,r),!t._options.disableContextMenu){var a=new d.default(i);a.on("item-click",function(t){r(t)}),a.open(),n=a}});var o=new h.default({});e.on("yne-clipboard-error",function(e,n){if(t.trigger("clipboard-error",e,n),!t._options.disableClipError){var r=null;"copy"===e?r="":"cut"===e?r="":"paste"===e?r="":"paste-as-text"===e&&(r=""),r&&o.alert({title:r+"",content:""+r}),n()}})},e}(u),m.version="1.3.8",m}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(13),n(28),n(1),n(282)],void 0!==(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(t){this._options=r.extend({},t),r.bindAll(this,"_onButtonClick")},e.prototype.alert=function(t){r.extend(this._options,t),this._render(),this.append(),this.trigger("open")},e.prototype.close=function(){this.remove(),this.trigger("close")},e.prototype.append=function(){this._bindEvents(),this._$el.appendTo(document.body)},e.prototype.remove=function(){this._unbindEvents(),this._$el.remove()},e.prototype.destory=function(){this.remove(),this._$el=null},e.prototype._render=function(){var t=this._options,e=t.title,o=t.content;this._$el=$(n.render("sdk","modal",{title:e,content:o}))},e.prototype._bindEvents=function(){var t=this._$el.find(".bulb__modal-button");t.on("click",this._onButtonClick),t.on("mousedown",this._onButtonMousedown)},e.prototype._unbindEvents=function(){var t=this._$el.find(".bulb__modal-button");t.off("click",this._onButtonClick),t.off("mousedown",this._onButtonMousedown)},e.prototype._onButtonMousedown=function(t){t.preventDefault()},e.prototype._onButtonClick=function(t){this.close()},e}(o);e.default=s}.apply(e,o))&&(t.exports=r)},function(t,e,n){(function(t,n){var o,r;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},s=i._,a=Array.prototype,l=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,u=a.push,p=a.slice,d=l.toString,h=l.hasOwnProperty,f=Array.isArray,g=Object.keys,m=Object.create,_=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};void 0===e||e.nodeType?i._=b:(void 0!==n&&!n.nodeType&&n.exports&&(e=n.exports=b),e._=b),b.VERSION="1.9.1";var y,v=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,o,r){return t.call(e,n,o,r)};case 4:return function(n,o,r,i){return t.call(e,n,o,r,i)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return b.iteratee!==y?b.iteratee(t,e):null==t?b.identity:b.isFunction(t)?v(t,e,n):b.isObject(t)&&!b.isArray(t)?b.matcher(t):b.property(t)};b.iteratee=y=function(t,e){return w(t,e,1/0)};var I=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),o=Array(n),r=0;r<n;r++)o[r]=arguments[r+e];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,arguments[0],o);case 2:return t.call(this,arguments[0],arguments[1],o)}var i=Array(e+1);for(r=0;r<e;r++)i[r]=arguments[r];return i[e]=o,t.apply(this,i)}},C=function(t){if(!b.isObject(t))return{};if(m)return m(t);_.prototype=t;var e=new _;return _.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},T=function(t,e){return null!=t&&h.call(t,e)},k=function(t,e){for(var n=e.length,o=0;o<n;o++){if(null==t)return;t=t[e[o]]}return n?t:void 0},S=Math.pow(2,53)-1,N=M("length"),x=function(t){var e=N(t);return"number"==typeof e&&e>=0&&e<=S};b.each=b.forEach=function(t,e,n){e=v(e,n);var o,r;if(x(t))for(o=0,r=t.length;o<r;o++)e(t[o],o,t);else{var i=b.keys(t);for(o=0,r=i.length;o<r;o++)e(t[i[o]],i[o],t)}return t},b.map=b.collect=function(t,e,n){e=w(e,n);for(var o=!x(t)&&b.keys(t),r=(o||t).length,i=Array(r),s=0;s<r;s++){var a=o?o[s]:s;i[s]=e(t[a],a,t)}return i};var A=function(t){var e=function(e,n,o,r){var i=!x(e)&&b.keys(e),s=(i||e).length,a=t>0?0:s-1;for(r||(o=e[i?i[a]:a],a+=t);a>=0&&a<s;a+=t){var l=i?i[a]:a;o=n(o,e[l],l,e)}return o};return function(t,n,o,r){var i=arguments.length>=3;return e(t,v(n,r,4),o,i)}};b.reduce=b.foldl=b.inject=A(1),b.reduceRight=b.foldr=A(-1),b.find=b.detect=function(t,e,n){var o=x(t)?b.findIndex:b.findKey,r=o(t,e,n);if(void 0!==r&&-1!==r)return t[r]},b.filter=b.select=function(t,e,n){var o=[];return e=w(e,n),b.each(t,function(t,n,r){e(t,n,r)&&o.push(t)}),o},b.reject=function(t,e,n){return b.filter(t,b.negate(w(e)),n)},b.every=b.all=function(t,e,n){e=w(e,n);for(var o=!x(t)&&b.keys(t),r=(o||t).length,i=0;i<r;i++){var s=o?o[i]:i;if(!e(t[s],s,t))return!1}return!0},b.some=b.any=function(t,e,n){e=w(e,n);for(var o=!x(t)&&b.keys(t),r=(o||t).length,i=0;i<r;i++){var s=o?o[i]:i;if(e(t[s],s,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,o){return x(t)||(t=b.values(t)),("number"!=typeof n||o)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=I(function(t,e,n){var o,r;return b.isFunction(e)?r=e:b.isArray(e)&&(o=e.slice(0,-1),e=e[e.length-1]),b.map(t,function(t){var i=r;if(!i){if(o&&o.length&&(t=k(t,o)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)})}),b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var o,r,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=x(t)?t:b.values(t);for(var a=0,l=t.length;a<l;a++)null!=(o=t[a])&&o>i&&(i=o)}else e=w(e,n),b.each(t,function(t,n,o){((r=e(t,n,o))>s||r===-1/0&&i===-1/0)&&(i=t,s=r)});return i},b.min=function(t,e,n){var o,r,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=x(t)?t:b.values(t);for(var a=0,l=t.length;a<l;a++)null!=(o=t[a])&&o<i&&(i=o)}else e=w(e,n),b.each(t,function(t,n,o){((r=e(t,n,o))<s||r===1/0&&i===1/0)&&(i=t,s=r)});return i},b.shuffle=function(t){return b.sample(t,1/0)},b.sample=function(t,e,n){if(null==e||n)return x(t)||(t=b.values(t)),t[b.random(t.length-1)];var o=x(t)?b.clone(t):b.values(t),r=N(o);e=Math.max(Math.min(e,r),0);for(var i=r-1,s=0;s<e;s++){var a=b.random(s,i),l=o[s];o[s]=o[a],o[a]=l}return o.slice(0,e)},b.sortBy=function(t,e,n){var o=0;return e=w(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:o++,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,o=e.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(n<o||void 0===o)return-1}return t.index-e.index}),"value")};var E=function(t,e){return function(n,o,r){var i=e?[[],[]]:{};return o=w(o,r),b.each(n,function(e,r){var s=o(e,r,n);t(i,e,s)}),i}};b.groupBy=E(function(t,e,n){T(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=E(function(t,e,n){t[n]=e}),b.countBy=E(function(t,e,n){T(t,n)?t[n]++:t[n]=1});var O=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;b.toArray=function(t){return t?b.isArray(t)?p.call(t):b.isString(t)?t.match(O):x(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:x(t)?t.length:b.keys(t).length},b.partition=E(function(t,e,n){t[n?0:1].push(e)},!0),b.first=b.head=b.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,Boolean)};var D=function(t,e,n,o){o=o||[];for(var r=o.length,i=0,s=N(t);i<s;i++){var a=t[i];if(x(a)&&(b.isArray(a)||b.isArguments(a)))if(e)for(var l=0,c=a.length;l<c;)o[r++]=a[l++];else D(a,e,n,o),r=o.length;else n||(o[r++]=a)}return o};b.flatten=function(t,e){return D(t,e,!1)},b.without=I(function(t,e){return b.difference(t,e)}),b.uniq=b.unique=function(t,e,n,o){b.isBoolean(e)||(o=n,n=e,e=!1),null!=n&&(n=w(n,o));for(var r=[],i=[],s=0,a=N(t);s<a;s++){var l=t[s],c=n?n(l,s,t):l;e&&!n?(s&&i===c||r.push(l),i=c):n?b.contains(i,c)||(i.push(c),r.push(l)):b.contains(r,l)||r.push(l)}return r},b.union=I(function(t){return b.uniq(D(t,!0,!0))}),b.intersection=function(t){for(var e=[],n=arguments.length,o=0,r=N(t);o<r;o++){var i=t[o];if(!b.contains(e,i)){var s;for(s=1;s<n&&b.contains(arguments[s],i);s++);s===n&&e.push(i)}}return e},b.difference=I(function(t,e){return e=D(e,!0,!0),b.filter(t,function(t){return!b.contains(e,t)})}),b.unzip=function(t){for(var e=t&&b.max(t,N).length||0,n=Array(e),o=0;o<e;o++)n[o]=b.pluck(t,o);return n},b.zip=I(b.unzip),b.object=function(t,e){for(var n={},o=0,r=N(t);o<r;o++)e?n[t[o]]=e[o]:n[t[o][0]]=t[o][1];return n};var L=function(t){return function(e,n,o){n=w(n,o);for(var r=N(e),i=t>0?0:r-1;i>=0&&i<r;i+=t)if(n(e[i],i,e))return i;return-1}};b.findIndex=L(1),b.findLastIndex=L(-1),b.sortedIndex=function(t,e,n,o){n=w(n,o,1);for(var r=n(e),i=0,s=N(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<r?i=a+1:s=a}return i};var R=function(t,e,n){return function(o,r,i){var s=0,a=N(o);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return i=n(o,r),o[i]===r?i:-1;if(r!==r)return i=e(p.call(o,s,a),b.isNaN),i>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(o[i]===r)return i;return-1}};b.indexOf=R(1,b.findIndex,b.sortedIndex),b.lastIndexOf=R(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var o=Math.max(Math.ceil((e-t)/n),0),r=Array(o),i=0;i<o;i++,t+=n)r[i]=t;return r},b.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],o=0,r=t.length;o<r;)n.push(p.call(t,o,o+=e));return n};var B=function(t,e,n,o,r){if(!(o instanceof e))return t.apply(n,r);var i=C(t.prototype),s=t.apply(i,r);return b.isObject(s)?s:i};b.bind=I(function(t,e,n){if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var o=I(function(r){return B(t,o,e,this,n.concat(r))});return o}),b.partial=I(function(t,e){var n=b.partial.placeholder,o=function(){for(var r=0,i=e.length,s=Array(i),a=0;a<i;a++)s[a]=e[a]===n?arguments[r++]:e[a];for(;r<arguments.length;)s.push(arguments[r++]);return B(t,o,this,this,s)};return o}),b.partial.placeholder=b,b.bindAll=I(function(t,e){e=D(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var o=e[n];t[o]=b.bind(t[o],t)}}),b.memoize=function(t,e){var n=function(o){var r=n.cache,i=""+(e?e.apply(this,arguments):o);return T(r,i)||(r[i]=t.apply(this,arguments)),r[i]};return n.cache={},n},b.delay=I(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var o,r,i,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:b.now(),o=null,s=t.apply(r,i),o||(r=i=null)},c=function(){var c=b.now();a||!1!==n.leading||(a=c);var u=e-(c-a);return r=this,i=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),a=c,s=t.apply(r,i),o||(r=i=null)):o||!1===n.trailing||(o=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(o),a=0,o=r=i=null},c},b.debounce=function(t,e,n){var o,r,i=function(e,n){o=null,n&&(r=t.apply(e,n))},s=I(function(s){if(o&&clearTimeout(o),n){var a=!o;o=setTimeout(i,e),a&&(r=t.apply(this,s))}else o=b.delay(i,e,this,s);return r});return s.cancel=function(){clearTimeout(o),o=null},s},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,o=t[e].apply(this,arguments);n--;)o=t[n].call(this,o);return o}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},b.once=b.partial(b.before,2),b.restArguments=I;var j=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(t,e){var n=P.length,o=t.constructor,r=b.isFunction(o)&&o.prototype||l,i="constructor";for(T(t,i)&&!b.contains(e,i)&&e.push(i);n--;)(i=P[n])in t&&t[i]!==r[i]&&!b.contains(e,i)&&e.push(i)};b.keys=function(t){if(!b.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)T(t,n)&&e.push(n);return j&&z(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return j&&z(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,o=Array(n),r=0;r<n;r++)o[r]=t[e[r]];return o},b.mapObject=function(t,e,n){e=w(e,n);for(var o=b.keys(t),r=o.length,i={},s=0;s<r;s++){var a=o[s];i[a]=e(t[a],a,t)}return i},b.pairs=function(t){for(var e=b.keys(t),n=e.length,o=Array(n),r=0;r<n;r++)o[r]=[e[r],t[e[r]]];return o},b.invert=function(t){for(var e={},n=b.keys(t),o=0,r=n.length;o<r;o++)e[t[n[o]]]=n[o];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()};var H=function(t,e){return function(n){var o=arguments.length;if(e&&(n=Object(n)),o<2||null==n)return n;for(var r=1;r<o;r++)for(var i=arguments[r],s=t(i),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=i[c])}return n}};b.extend=H(b.allKeys),b.extendOwn=b.assign=H(b.keys),b.findKey=function(t,e,n){e=w(e,n);for(var o,r=b.keys(t),i=0,s=r.length;i<s;i++)if(o=r[i],e(t[o],o,t))return o};var F=function(t,e,n){return e in n};b.pick=I(function(t,e){var n={},o=e[0];if(null==t)return n;b.isFunction(o)?(e.length>1&&(o=v(o,e[1])),e=b.allKeys(t)):(o=F,e=D(e,!1,!1),t=Object(t));for(var r=0,i=e.length;r<i;r++){var s=e[r],a=t[s];o(a,s,t)&&(n[s]=a)}return n}),b.omit=I(function(t,e){var n,o=e[0];return b.isFunction(o)?(o=b.negate(o),e.length>1&&(n=e[1])):(e=b.map(D(e,!1,!1),String),o=function(t,n){return!b.contains(e,n)}),b.pick(t,o,n)}),b.defaults=H(b.allKeys,!0),b.create=function(t,e){var n=C(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),o=n.length;if(null==t)return!o;for(var r=Object(t),i=0;i<o;i++){var s=n[i];if(e[s]!==r[s]||!(s in r))return!1}return!0};var G,U;G=function(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&U(t,e,n,o)},U=function(t,e,n,o){t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var r=d.call(t);if(r!==d.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e)}var i="[object Array]"===r;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],o=o||[];for(var l=n.length;l--;)if(n[l]===t)return o[l]===e;if(n.push(t),o.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!G(t[l],e[l],n,o))return!1}else{var u,p=b.keys(t);if(l=p.length,b.keys(e).length!==l)return!1;for(;l--;)if(u=p[l],!T(e,u)||!G(t[u],e[u],n,o))return!1}return n.pop(),o.pop(),!0},b.isEqual=function(t,e){return G(t,e)},b.isEmpty=function(t){return null==t||(x(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=f||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return T(t,"callee")});var V=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof V&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return!b.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&isNaN(t)},b.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){if(!b.isArray(e))return T(t,e);for(var n=e.length,o=0;o<n;o++){var r=e[o];if(null==t||!h.call(t,r))return!1;t=t[r]}return!!n},b.noConflict=function(){return i._=s,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=function(t){return b.isArray(t)?function(e){return k(e,t)}:M(t)},b.propertyOf=function(t){return null==t?function(){}:function(e){return b.isArray(e)?k(t,e):t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var o=Array(Math.max(0,t));e=v(e,n,1);for(var r=0;r<t;r++)o[r]=e(r);return o},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=b.invert(Y),J=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",o=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,o.test(t)?t.replace(r,e):t}};b.escape=J(Y),b.unescape=J(W),b.result=function(t,e,n){b.isArray(e)||(e=[e]);var o=e.length;if(!o)return b.isFunction(n)?n.call(t):n;for(var r=0;r<o;r++){var i=null==t?void 0:t[e[r]];void 0===i&&(i=n,r=o),t=b.isFunction(i)?i.call(t):i}return t};var Z=0;b.uniqueId=function(t){var e=++Z+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Q=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,K=function(t){return"\\"+$[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var o=RegExp([(e.escape||Q).source,(e.interpolate||Q).source,(e.evaluate||Q).source].join("|")+"|$","g"),r=0,i="__p+='";t.replace(o,function(e,n,o,s,a){return i+=t.slice(r,a).replace(X,K),r=a+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?i+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";var s;try{s=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var a=function(t){return s.call(this,t,b)};return a.source="function("+(e.variable||"obj")+"){\n"+i+"}",a},b.chain=function(t){var e=b(t);return e._chain=!0,e};var q=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){return b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),q(this,n.apply(b,t))}}),b},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],q(this,n)}}),b.each(["concat","join","slice"],function(t){var e=a[t];b.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return String(this._wrapped)},o=[],void 0!==(r=function(){return b}.apply(e,o))&&(n.exports=r)}()}).call(e,n(43),n(280)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var o,r;/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){function s(t){var e=!!t&&"length"in t&&t.length,n=lt.type(t);return"function"!==n&&!lt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t,e,n){if(lt.isFunction(e))return lt.grep(t,function(t,o){return!!e.call(t,o,t)!==n});if(e.nodeType)return lt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(bt.test(e))return lt.filter(e,t,n);e=lt.filter(e,t)}return lt.grep(t,function(t){return ot.call(e,t)>-1!==n})}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var e={};return lt.each(t.match(Ct)||[],function(t,n){e[n]=!0}),e}function u(){q.removeEventListener("DOMContentLoaded",u),n.removeEventListener("load",u),lt.ready()}function p(){this.expando=lt.expando+p.uid++}function d(t,e,n){var o;if(void 0===n&&1===t.nodeType)if(o="data-"+e.replace(At,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(o))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:xt.test(n)?lt.parseJSON(n):n)}catch(t){}Nt.set(t,e,n)}else n=void 0;return n}function h(t,e,n,o){var r,i=1,s=20,a=o?function(){return o.cur()}:function(){return lt.css(t,e,"")},l=a(),c=n&&n[3]||(lt.cssNumber[e]?"":"px"),u=(lt.cssNumber[e]||"px"!==c&&+l)&&Ot.exec(lt.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{i=i||".5",u/=i,lt.style(t,e,u+c)}while(i!==(i=a()/l)&&1!==i&&--s)}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],o&&(o.unit=c,o.start=u,o.end=r)),r}function f(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&lt.nodeName(t,e)?lt.merge([t],n):n}function g(t,e){for(var n=0,o=t.length;n<o;n++)St.set(t[n],"globalEval",!e||St.get(e[n],"globalEval"))}function m(t,e,n,o,r){for(var i,s,a,l,c,u,p=e.createDocumentFragment(),d=[],h=0,m=t.length;h<m;h++)if((i=t[h])||0===i)if("object"===lt.type(i))lt.merge(d,i.nodeType?[i]:i);else if(zt.test(i)){for(s=s||p.appendChild(e.createElement("div")),a=(Bt.exec(i)||["",""])[1].toLowerCase(),l=Pt[a]||Pt._default,s.innerHTML=l[1]+lt.htmlPrefilter(i)+l[2],u=l[0];u--;)s=s.lastChild;lt.merge(d,s.childNodes),s=p.firstChild,s.textContent=""}else d.push(e.createTextNode(i));for(p.textContent="",h=0;i=d[h++];)if(o&&lt.inArray(i,o)>-1)r&&r.push(i);else if(c=lt.contains(i.ownerDocument,i),s=f(p.appendChild(i),"script"),c&&g(s),n)for(u=0;i=s[u++];)jt.test(i.type||"")&&n.push(i);return p}function _(){return!0}function b(){return!1}function y(){try{return q.activeElement}catch(t){}}function v(t,e,n,o,r,i){var s,a;if("object"==typeof e){"string"!=typeof n&&(o=o||n,n=void 0);for(a in e)v(t,a,n,o,e[a],i);return t}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=b;else if(!r)return t;return 1===i&&(s=r,r=function(t){return lt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=lt.guid++)),t.each(function(){lt.event.add(this,e,r,o,n)})}function w(t,e){return lt.nodeName(t,"table")&&lt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function I(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function C(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function M(t,e){var n,o,r,i,s,a,l,c;if(1===e.nodeType){if(St.hasData(t)&&(i=St.access(t),s=St.set(e,i),c=i.events)){delete s.handle,s.events={};for(r in c)for(n=0,o=c[r].length;n<o;n++)lt.event.add(e,r,c[r][n])}Nt.hasData(t)&&(a=Nt.access(t),l=lt.extend({},a),Nt.set(e,l))}}function T(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Rt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function k(t,e,n,o){e=et.apply([],e);var r,i,s,a,l,c,u=0,p=t.length,d=p-1,h=e[0],g=lt.isFunction(h);if(g||p>1&&"string"==typeof h&&!at.checkClone&&Yt.test(h))return t.each(function(r){var i=t.eq(r);g&&(e[0]=h.call(this,r,i.html())),k(i,e,n,o)});if(p&&(r=m(e,t[0].ownerDocument,!1,t,o),i=r.firstChild,1===r.childNodes.length&&(r=i),i||o)){for(s=lt.map(f(r,"script"),I),a=s.length;u<p;u++)l=r,u!==d&&(l=lt.clone(l,!0,!0),a&&lt.merge(s,f(l,"script"))),n.call(t[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,lt.map(s,C),u=0;u<a;u++)l=s[u],jt.test(l.type||"")&&!St.access(l,"globalEval")&&lt.contains(c,l)&&(l.src?lt._evalUrl&&lt._evalUrl(l.src):lt.globalEval(l.textContent.replace(Jt,"")))}return t}function S(t,e,n){for(var o,r=e?lt.filter(e,t):t,i=0;null!=(o=r[i]);i++)n||1!==o.nodeType||lt.cleanData(f(o)),o.parentNode&&(n&&lt.contains(o.ownerDocument,o)&&g(f(o,"script")),o.parentNode.removeChild(o));return t}function N(t,e){var n=lt(e.createElement(t)).appendTo(e.body),o=lt.css(n[0],"display");return n.detach(),o}function x(t){var e=q,n=Qt[t];return n||(n=N(t,e),"none"!==n&&n||(Zt=(Zt||lt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Zt[0].contentDocument,e.write(),e.close(),n=N(t,e),Zt.detach()),Qt[t]=n),n}function A(t,e,n){var o,r,i,s,a=t.style;return n=n||Kt(t),s=n?n.getPropertyValue(e)||n[e]:void 0,""!==s&&void 0!==s||lt.contains(t.ownerDocument,t)||(s=lt.style(t,e)),n&&!at.pixelMarginRight()&&Xt.test(s)&&$t.test(e)&&(o=a.width,r=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=o,a.minWidth=r,a.maxWidth=i),void 0!==s?s+"":s}function E(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function O(t){if(t in ie)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=re.length;n--;)if((t=re[n]+e)in ie)return t}function D(t,e,n){var o=Ot.exec(e);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):e}function L(t,e,n,o,r){for(var i=n===(o?"border":"content")?4:"width"===e?1:0,s=0;i<4;i+=2)"margin"===n&&(s+=lt.css(t,n+Dt[i],!0,r)),o?("content"===n&&(s-=lt.css(t,"padding"+Dt[i],!0,r)),"margin"!==n&&(s-=lt.css(t,"border"+Dt[i]+"Width",!0,r))):(s+=lt.css(t,"padding"+Dt[i],!0,r),"padding"!==n&&(s+=lt.css(t,"border"+Dt[i]+"Width",!0,r)));return s}function R(t,e,n){var o=!0,r="width"===e?t.offsetWidth:t.offsetHeight,i=Kt(t),s="border-box"===lt.css(t,"boxSizing",!1,i);if(r<=0||null==r){if(r=A(t,e,i),(r<0||null==r)&&(r=t.style[e]),Xt.test(r))return r;o=s&&(at.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+L(t,e,n||(s?"border":"content"),o,i)+"px"}function B(t,e){for(var n,o,r,i=[],s=0,a=t.length;s<a;s++)o=t[s],o.style&&(i[s]=St.get(o,"olddisplay"),n=o.style.display,e?(i[s]||"none"!==n||(o.style.display=""),""===o.style.display&&Lt(o)&&(i[s]=St.access(o,"olddisplay",x(o.nodeName)))):(r=Lt(o),"none"===n&&r||St.set(o,"olddisplay",r?n:lt.css(o,"display"))));for(s=0;s<a;s++)o=t[s],o.style&&(e&&"none"!==o.style.display&&""!==o.style.display||(o.style.display=e?i[s]||"":"none"));return t}function j(t,e,n,o,r){return new j.prototype.init(t,e,n,o,r)}function P(){return n.setTimeout(function(){se=void 0}),se=lt.now()}function z(t,e){var n,o=0,r={height:t};for(e=e?1:0;o<4;o+=2-e)n=Dt[o],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function H(t,e,n){for(var o,r=(U.tweeners[e]||[]).concat(U.tweeners["*"]),i=0,s=r.length;i<s;i++)if(o=r[i].call(n,e,t))return o}function F(t,e,n){var o,r,i,s,a,l,c,u=this,p={},d=t.style,h=t.nodeType&&Lt(t),f=St.get(t,"fxshow");n.queue||(a=lt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,lt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=lt.css(t,"display"),"inline"===("none"===c?St.get(t,"olddisplay")||x(t.nodeName):c)&&"none"===lt.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(o in e)if(r=e[o],le.exec(r)){if(delete e[o],i=i||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!f||void 0===f[o])continue;h=!0}p[o]=f&&f[o]||lt.style(t,o)}else c=void 0;if(lt.isEmptyObject(p))"inline"===("none"===c?x(t.nodeName):c)&&(d.display=c);else{f?"hidden"in f&&(h=f.hidden):f=St.access(t,"fxshow",{}),i&&(f.hidden=!h),h?lt(t).show():u.done(function(){lt(t).hide()}),u.done(function(){var e;St.remove(t,"fxshow");for(e in p)lt.style(t,e,p[e])});for(o in p)s=H(h?f[o]:0,o,u),o in f||(f[o]=s.start,h&&(s.end=s.start,s.start="width"===o||"height"===o?1:0))}}function G(t,e){var n,o,r,i,s;for(n in t)if(o=lt.camelCase(n),r=e[o],i=t[n],lt.isArray(i)&&(r=i[1],i=t[n]=i[0]),n!==o&&(t[o]=i,delete t[n]),(s=lt.cssHooks[o])&&"expand"in s){i=s.expand(i),delete t[o];for(n in i)n in t||(t[n]=i[n],e[n]=r)}else e[o]=r}function U(t,e,n){var o,r,i=0,s=U.prefilters.length,a=lt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=se||P(),n=Math.max(0,c.startTime+c.duration-e),o=n/c.duration||0,i=1-o,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(i);return a.notifyWith(t,[c,i,n]),i<1&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:lt.extend({},e),opts:lt.extend(!0,{specialEasing:{},easing:lt.easing._default},n),originalProperties:e,originalOptions:n,startTime:se||P(),duration:n.duration,tweens:[],createTween:function(e,n){var o=lt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(o),o},stop:function(e){var n=0,o=e?c.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(G(u,c.opts.specialEasing);i<s;i++)if(o=U.prefilters[i].call(c,t,u,c.opts))return lt.isFunction(o.stop)&&(lt._queueHooks(c.elem,c.opts.queue).stop=lt.proxy(o.stop,o)),o;return lt.map(u,H,c),lt.isFunction(c.opts.start)&&c.opts.start.call(t,c),lt.fx.timer(lt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function V(t){return t.getAttribute&&t.getAttribute("class")||""}function Y(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var o,r=0,i=e.toLowerCase().match(Ct)||[];if(lt.isFunction(n))for(;o=i[r++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(n)):(t[o]=t[o]||[]).push(n)}}function W(t,e,n,o){function r(a){var l;return i[a]=!0,lt.each(t[a]||[],function(t,a){var c=a(e,n,o);return"string"!=typeof c||s||i[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var i={},s=t===Ne;return r(e.dataTypes[0])||!i["*"]&&r("*")}function J(t,e){var n,o,r=lt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:o||(o={}))[n]=e[n]);return o&&lt.extend(!0,t,o),t}function Z(t,e,n){for(var o,r,i,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in n)i=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){i=r;break}s||(s=r)}i=i||s}if(i)return i!==l[0]&&l.unshift(i),n[i]}function Q(t,e,n,o){var r,i,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(i=u.shift();i;)if(t.responseFields[i]&&(n[t.responseFields[i]]=e),!l&&o&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(r in c)if(a=r.split(" "),a[1]===i&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(i=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+i}}}return{state:"success",data:e}}function $(t,e,n,o){var r;if(lt.isArray(e))lt.each(e,function(e,r){n||Oe.test(t)?o(t,r):$(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,o)});else if(n||"object"!==lt.type(e))o(t,e);else for(r in e)$(t+"["+r+"]",e[r],n,o)}function X(t){return lt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var K=[],q=n.document,tt=K.slice,et=K.concat,nt=K.push,ot=K.indexOf,rt={},it=rt.toString,st=rt.hasOwnProperty,at={},lt=function(t,e){return new lt.fn.init(t,e)},ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ut=/^-ms-/,pt=/-([\da-z])/gi,dt=function(t,e){return e.toUpperCase()};lt.fn=lt.prototype={jquery:"2.2.4",constructor:lt,selector:"",length:0,toArray:function(){return tt.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:tt.call(this)},pushStack:function(t){var e=lt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return lt.each(this,t)},map:function(t){return this.pushStack(lt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:nt,sort:K.sort,splice:K.splice},lt.extend=lt.fn.extend=function(){var t,e,n,o,r,i,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||lt.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],o=t[e],s!==o&&(c&&o&&(lt.isPlainObject(o)||(r=lt.isArray(o)))?(r?(r=!1,i=n&&lt.isArray(n)?n:[]):i=n&&lt.isPlainObject(n)?n:{},s[e]=lt.extend(c,i,o)):void 0!==o&&(s[e]=o));return s},lt.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===lt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!lt.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==lt.type(t)||t.nodeType||lt.isWindow(t))return!1;if(t.constructor&&!st.call(t,"constructor")&&!st.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||st.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?rt[it.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=lt.trim(t))&&(1===t.indexOf("use strict")?(e=q.createElement("script"),e.text=t,q.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ut,"ms-").replace(pt,dt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,o=0;if(s(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ct,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?lt.merge(n,"string"==typeof t?[t]:t):nt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ot.call(e,t,n)},merge:function(t,e){for(var n=+e.length,o=0,r=t.length;o<n;o++)t[r++]=e[o];return t.length=r,t},grep:function(t,e,n){for(var o=[],r=0,i=t.length,s=!n;r<i;r++)!e(t[r],r)!==s&&o.push(t[r]);return o},map:function(t,e,n){var o,r,i=0,a=[];if(s(t))for(o=t.length;i<o;i++)null!=(r=e(t[i],i,n))&&a.push(r);else for(i in t)null!=(r=e(t[i],i,n))&&a.push(r);return et.apply([],a)},guid:1,proxy:function(t,e){var n,o,r;if("string"==typeof e&&(n=t[e],e=t,t=n),lt.isFunction(t))return o=tt.call(arguments,2),r=function(){return t.apply(e||this,o.concat(tt.call(arguments)))},r.guid=t.guid=t.guid||lt.guid++,r},now:Date.now,support:at}),"function"==typeof Symbol&&(lt.fn[Symbol.iterator]=K[Symbol.iterator]),lt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){rt["[object "+e+"]"]=e.toLowerCase()});var ht=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){function e(t,e,n,o){var r,i,s,a,c,p,d,h,f=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!o&&((e?e.ownerDocument||e:P)!==A&&x(e),e=e||A,O)){if(11!==g&&(p=gt.exec(t)))if(r=p[1]){if(9===g){if(!(s=e.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(f&&(s=f.getElementById(r))&&B(e,s)&&s.id===r)return n.push(s),n}else{if(p[2])return $.apply(n,e.getElementsByTagName(t)),n;if((r=p[3])&&y.getElementsByClassName&&e.getElementsByClassName)return $.apply(n,e.getElementsByClassName(r)),n}if(y.qsa&&!U[t+" "]&&(!D||!D.test(t))){if(1!==g)f=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(_t,"\\$&"):e.setAttribute("id",a=j),d=C(t),i=d.length,c=ut.test(a)?"#"+a:"[id='"+a+"']";i--;)d[i]=c+" "+u(d[i]);h=d.join(","),f=mt.test(t)&&l(e.parentNode)||e}if(h)try{return $.apply(n,f.querySelectorAll(h)),n}catch(t){}finally{a===j&&e.removeAttribute("id")}}}return T(t.replace(it,"$1"),e,n,o)}function n(){function t(n,o){return e.push(n+" ")>v.cacheLength&&delete t[e.shift()],t[n+" "]=o}var e=[];return t}function o(t){return t[j]=!0,t}function r(t){var e=A.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function i(t,e){for(var n=t.split("|"),o=n.length;o--;)v.attrHandle[n[o]]=e}function s(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return o(function(e){return e=+e,o(function(n,o){for(var r,i=t([],n.length,e),s=i.length;s--;)n[r=i[s]]&&(n[r]=!(o[r]=n[r]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function u(t){for(var e=0,n=t.length,o="";e<n;e++)o+=t[e].value;return o}function p(t,e,n){var o=e.dir,r=n&&"parentNode"===o,i=H++;return e.first?function(e,n,i){for(;e=e[o];)if(1===e.nodeType||r)return t(e,n,i)}:function(e,n,s){var a,l,c,u=[z,i];if(s){for(;e=e[o];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[o];)if(1===e.nodeType||r){if(c=e[j]||(e[j]={}),l=c[e.uniqueID]||(c[e.uniqueID]={}),(a=l[o])&&a[0]===z&&a[1]===i)return u[2]=a[2];if(l[o]=u,u[2]=t(e,n,s))return!0}}}function d(t){return t.length>1?function(e,n,o){for(var r=t.length;r--;)if(!t[r](e,n,o))return!1;return!0}:t[0]}function h(t,n,o){for(var r=0,i=n.length;r<i;r++)e(t,n[r],o);return o}function f(t,e,n,o,r){for(var i,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(i=t[a])&&(n&&!n(i,o,r)||(s.push(i),c&&e.push(a)));return s}function g(t,e,n,r,i,s){return r&&!r[j]&&(r=g(r)),i&&!i[j]&&(i=g(i,s)),o(function(o,s,a,l){var c,u,p,d=[],g=[],m=s.length,_=o||h(e||"*",a.nodeType?[a]:a,[]),b=!t||!o&&e?_:f(_,d,t,a,l),y=n?i||(o?t:m||r)?[]:s:b;if(n&&n(b,y,a,l),r)for(c=f(y,g),r(c,[],a,l),u=c.length;u--;)(p=c[u])&&(y[g[u]]=!(b[g[u]]=p));if(o){if(i||t){if(i){for(c=[],u=y.length;u--;)(p=y[u])&&c.push(b[u]=p);i(null,y=[],c,l)}for(u=y.length;u--;)(p=y[u])&&(c=i?K(o,p):d[u])>-1&&(o[c]=!(s[c]=p))}}else y=f(y===s?y.splice(m,y.length):y),i?i(null,s,y,l):$.apply(s,y)})}function m(t){for(var e,n,o,r=t.length,i=v.relative[t[0].type],s=i||v.relative[" "],a=i?1:0,l=p(function(t){return t===e},s,!0),c=p(function(t){return K(e,t)>-1},s,!0),h=[function(t,n,o){var r=!i&&(o||n!==k)||((e=n).nodeType?l(t,n,o):c(t,n,o));return e=null,r}];a<r;a++)if(n=v.relative[t[a].type])h=[p(d(h),n)];else{if(n=v.filter[t[a].type].apply(null,t[a].matches),n[j]){for(o=++a;o<r&&!v.relative[t[o].type];o++);return g(a>1&&d(h),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(it,"$1"),n,a<o&&m(t.slice(a,o)),o<r&&m(t=t.slice(o)),o<r&&u(t))}h.push(n)}return d(h)}function _(t,n){var r=n.length>0,i=t.length>0,s=function(o,s,a,l,c){var u,p,d,h=0,g="0",m=o&&[],_=[],b=k,y=o||i&&v.find.TAG("*",c),w=z+=null==b?1:Math.random()||.1,I=y.length;for(c&&(k=s===A||s||c);g!==I&&null!=(u=y[g]);g++){if(i&&u){for(p=0,s||u.ownerDocument===A||(x(u),a=!O);d=t[p++];)if(d(u,s||A,a)){l.push(u);break}c&&(z=w)}r&&((u=!d&&u)&&h--,o&&m.push(u))}if(h+=g,r&&g!==h){for(p=0;d=n[p++];)d(m,_,s,a);if(o){if(h>0)for(;g--;)m[g]||_[g]||(_[g]=Z.call(l));_=f(_)}$.apply(l,_),c&&!o&&_.length>0&&h+n.length>1&&e.uniqueSort(l)}return c&&(z=w,k=b),m};return r?o(s):s}var b,y,v,w,I,C,M,T,k,S,N,x,A,E,O,D,L,R,B,j="sizzle"+1*new Date,P=t.document,z=0,H=0,F=n(),G=n(),U=n(),V=function(t,e){return t===e&&(N=!0),0},Y=1<<31,W={}.hasOwnProperty,J=[],Z=J.pop,Q=J.push,$=J.push,X=J.slice,K=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",ot=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",rt=new RegExp(tt+"+","g"),it=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(ot),ut=new RegExp("^"+et+"$"),pt={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ht=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,_t=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,n){var o="0x"+e-65536;return o!==o||n?e:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)},vt=function(){x()};try{$.apply(J=X.call(P.childNodes),P.childNodes),J[P.childNodes.length].nodeType}catch(t){$={apply:J.length?function(t,e){Q.apply(t,X.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}y=e.support={},I=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},x=e.setDocument=function(t){var e,n,o=t?t.ownerDocument||t:P;return o!==A&&9===o.nodeType&&o.documentElement?(A=o,E=A.documentElement,O=!I(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",vt,!1):n.attachEvent&&n.attachEvent("onunload",vt)),y.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),y.getElementsByTagName=r(function(t){return t.appendChild(A.createComment("")),!t.getElementsByTagName("*").length}),y.getElementsByClassName=ft.test(A.getElementsByClassName),y.getById=r(function(t){return E.appendChild(t).id=j,!A.getElementsByName||!A.getElementsByName(j).length}),y.getById?(v.find.ID=function(t,e){if(void 0!==e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}},v.filter.ID=function(t){var e=t.replace(bt,yt);return function(t){return t.getAttribute("id")===e}}):(delete v.find.ID,v.filter.ID=function(t){var e=t.replace(bt,yt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),v.find.TAG=y.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):y.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,o=[],r=0,i=e.getElementsByTagName(t);if("*"===t){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},v.find.CLASS=y.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&O)return e.getElementsByClassName(t)},L=[],D=[],(y.qsa=ft.test(A.querySelectorAll))&&(r(function(t){E.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+tt+"*(?:value|"+q+")"),t.querySelectorAll("[id~="+j+"-]").length||D.push("~="),t.querySelectorAll(":checked").length||D.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||D.push(".#.+[+~]")}),r(function(t){var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(y.matchesSelector=ft.test(R=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r(function(t){y.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),L.push("!=",ot)}),D=D.length&&new RegExp(D.join("|")),L=L.length&&new RegExp(L.join("|")),e=ft.test(E.compareDocumentPosition),B=e||ft.test(E.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!y.sortDetached&&e.compareDocumentPosition(t)===n?t===A||t.ownerDocument===P&&B(P,t)?-1:e===A||e.ownerDocument===P&&B(P,e)?1:S?K(S,t)-K(S,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,o=0,r=t.parentNode,i=e.parentNode,a=[t],l=[e];if(!r||!i)return t===A?-1:e===A?1:r?-1:i?1:S?K(S,t)-K(S,e):0;if(r===i)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[o]===l[o];)o++;return o?s(a[o],l[o]):a[o]===P?-1:l[o]===P?1:0},A):A},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==A&&x(t),n=n.replace(lt,"='$1']"),y.matchesSelector&&O&&!U[n+" "]&&(!L||!L.test(n))&&(!D||!D.test(n)))try{var o=R.call(t,n);if(o||y.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(t){}return e(n,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&x(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&x(t);var n=v.attrHandle[e.toLowerCase()],o=n&&W.call(v.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==o?o:y.attributes||!O?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],o=0,r=0;if(N=!y.detectDuplicates,S=!y.sortStable&&t.slice(0),t.sort(V),N){for(;e=t[r++];)e===t[r]&&(o=n.push(r));for(;o--;)t.splice(n[o],1)}return S=null,t},w=e.getText=function(t){var e,n="",o=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=w(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[o++];)n+=w(e);return n},v=e.selectors={cacheLength:50,createPseudo:o,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=F[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&F(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,o){return function(r){var i=e.attr(r,t);return null==i?"!="===n:!n||(i+="","="===n?i===o:"!="===n?i!==o:"^="===n?o&&0===i.indexOf(o):"*="===n?o&&i.indexOf(o)>-1:"$="===n?o&&i.slice(-o.length)===o:"~="===n?(" "+i.replace(rt," ")+" ").indexOf(o)>-1:"|="===n&&(i===o||i.slice(0,o.length+1)===o+"-"))}},CHILD:function(t,e,n,o,r){var i="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===o&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,p,d,h,f,g=i!==s?"nextSibling":"previousSibling",m=e.parentNode,_=a&&e.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(m){if(i){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&b){for(d=m,p=d[j]||(d[j]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),c=u[t]||[],h=c[0]===z&&c[1],y=h&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(y=h=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[z,h,y];break}}else if(b&&(d=e,p=d[j]||(d[j]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),c=u[t]||[],h=c[0]===z&&c[1],y=h),!1===y)for(;(d=++h&&d&&d[g]||(y=h=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++y||(b&&(p=d[j]||(d[j]={}),u=p[d.uniqueID]||(p[d.uniqueID]={}),u[t]=[z,y]),d!==e)););return(y-=r)===o||y%o==0&&y/o>=0}}},PSEUDO:function(t,n){var r,i=v.pseudos[t]||v.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[j]?i(n):i.length>1?(r=[t,t,"",n],v.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,e){for(var o,r=i(t,n),s=r.length;s--;)o=K(t,r[s]),t[o]=!(e[o]=r[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:o(function(t){var e=[],n=[],r=M(t.replace(it,"$1"));return r[j]?o(function(t,e,n,o){for(var i,s=r(t,null,o,[]),a=t.length;a--;)(i=s[a])&&(t[a]=!(e[a]=i))}):function(t,o,i){return e[0]=t,r(e,null,i,n),e[0]=null,!n.pop()}}),has:o(function(t){return function(n){return e(t,n).length>0}}),contains:o(function(t){return t=t.replace(bt,yt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:o(function(t){return ut.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,yt).toLowerCase(),function(e){var n;do{if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===E},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!v.pseudos.empty(t)},header:function(t){return ht.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,n){return[n<0?n+e:n]}),even:a(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:a(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:a(function(t,e,n){for(var o=n<0?n+e:n;--o>=0;)t.push(o);return t}),gt:a(function(t,e,n){for(var o=n<0?n+e:n;++o<e;)t.push(o);return t})}},v.pseudos.nth=v.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})v.pseudos[b]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(b);return c.prototype=v.filters=v.pseudos,v.setFilters=new c,C=e.tokenize=function(t,n){var o,r,i,s,a,l,c,u=G[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=v.preFilter;a;){o&&!(r=st.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),o=!1,(r=at.exec(a))&&(o=r.shift(),i.push({value:o,type:r[0].replace(it," ")}),a=a.slice(o.length));for(s in v.filter)!(r=pt[s].exec(a))||c[s]&&!(r=c[s](r))||(o=r.shift(),i.push({value:o,type:s,matches:r}),a=a.slice(o.length));if(!o)break}return n?a.length:a?e.error(t):G(t,l).slice(0)},M=e.compile=function(t,e){var n,o=[],r=[],i=U[t+" "];if(!i){for(e||(e=C(t)),n=e.length;n--;)i=m(e[n]),i[j]?o.push(i):r.push(i);i=U(t,_(r,o)),i.selector=t}return i},T=e.select=function(t,e,n,o){var r,i,s,a,c,p="function"==typeof t&&t,d=!o&&C(t=p.selector||t);if(n=n||[],1===d.length){if(i=d[0]=d[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&y.getById&&9===e.nodeType&&O&&v.relative[i[1].type]){if(!(e=(v.find.ID(s.matches[0].replace(bt,yt),e)||[])[0]))return n;p&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(r=pt.needsContext.test(t)?0:i.length;r--&&(s=i[r],!v.relative[a=s.type]);)if((c=v.find[a])&&(o=c(s.matches[0].replace(bt,yt),mt.test(i[0].type)&&l(e.parentNode)||e))){if(i.splice(r,1),!(t=o.length&&u(i)))return $.apply(n,o),n;break}}return(p||M(t,d))(o,e,!O,n,!e||mt.test(t)&&l(e.parentNode)||e),n},y.sortStable=j.split("").sort(V).join("")===j,y.detectDuplicates=!!N,x(),y.sortDetached=r(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||i("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),y.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||i("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||i(q,function(t,e,n){var o;if(!n)return!0===t[e]?e.toLowerCase():(o=t.getAttributeNode(e))&&o.specified?o.value:null}),e}(n);lt.find=ht,lt.expr=ht.selectors,lt.expr[":"]=lt.expr.pseudos,lt.uniqueSort=lt.unique=ht.uniqueSort,lt.text=ht.getText,lt.isXMLDoc=ht.isXML,lt.contains=ht.contains;var ft=function(t,e,n){for(var o=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&lt(t).is(n))break;o.push(t)}return o},gt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},mt=lt.expr.match.needsContext,_t=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,bt=/^.[^:#\[\.,]*$/;lt.filter=function(t,e,n){var o=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?lt.find.matchesSelector(o,t)?[o]:[]:lt.find.matches(t,lt.grep(e,function(t){return 1===t.nodeType}))},lt.fn.extend({find:function(t){var e,n=this.length,o=[],r=this;if("string"!=typeof t)return this.pushStack(lt(t).filter(function(){for(e=0;e<n;e++)if(lt.contains(r[e],this))return!0}));for(e=0;e<n;e++)lt.find(t,r[e],o);return o=this.pushStack(n>1?lt.unique(o):o),o.selector=this.selector?this.selector+" "+t:t,o},filter:function(t){return this.pushStack(a(this,t||[],!1))},not:function(t){return this.pushStack(a(this,t||[],!0))},is:function(t){return!!a(this,"string"==typeof t&&mt.test(t)?lt(t):t||[],!1).length}});var yt,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(lt.fn.init=function(t,e,n){var o,r;if(!t)return this;if(n=n||yt,"string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:vt.exec(t))||!o[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof lt?e[0]:e,lt.merge(this,lt.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:q,!0)),_t.test(o[1])&&lt.isPlainObject(e))for(o in e)lt.isFunction(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return r=q.getElementById(o[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):lt.isFunction(t)?void 0!==n.ready?n.ready(t):t(lt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),lt.makeArray(t,this))}).prototype=lt.fn,yt=lt(q);var wt=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};lt.fn.extend({has:function(t){var e=lt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(lt.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,o=0,r=this.length,i=[],s=mt.test(t)||"string"!=typeof t?lt(t,e||this.context):0;o<r;o++)for(n=this[o];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&lt.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(i.length>1?lt.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?ot.call(lt(t),this[0]):ot.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(lt.uniqueSort(lt.merge(this.get(),lt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),lt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ft(t,"parentNode")},parentsUntil:function(t,e,n){return ft(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return ft(t,"nextSibling")},prevAll:function(t){return ft(t,"previousSibling")},nextUntil:function(t,e,n){return ft(t,"nextSibling",n)},prevUntil:function(t,e,n){return ft(t,"previousSibling",n)},siblings:function(t){return gt((t.parentNode||{}).firstChild,t)},children:function(t){return gt(t.firstChild)},contents:function(t){return t.contentDocument||lt.merge([],t.childNodes)}},function(t,e){lt.fn[t]=function(n,o){var r=lt.map(this,e,n);return"Until"!==t.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=lt.filter(o,r)),this.length>1&&(It[t]||lt.uniqueSort(r),wt.test(t)&&r.reverse()),this.pushStack(r)}});var Ct=/\S+/g;lt.Callbacks=function(t){t="string"==typeof t?c(t):lt.extend({},t);var e,n,o,r,i=[],s=[],a=-1,l=function(){for(r=t.once,o=e=!0;s.length;a=-1)for(n=s.shift();++a<i.length;)!1===i[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=i.length,n=!1);t.memory||(n=!1),e=!1,r&&(i=n?[]:"")},u={add:function(){return i&&(n&&!e&&(a=i.length-1,s.push(n)),function e(n){lt.each(n,function(n,o){lt.isFunction(o)?t.unique&&u.has(o)||i.push(o):o&&o.length&&"string"!==lt.type(o)&&e(o)})}(arguments),n&&!e&&l()),this},remove:function(){return lt.each(arguments,function(t,e){for(var n;(n=lt.inArray(e,i,n))>-1;)i.splice(n,1),n<=a&&a--}),this},has:function(t){return t?lt.inArray(t,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return r=s=[],i=n="",this},disabled:function(){return!i},lock:function(){return r=s=[],n||(i=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},lt.extend({Deferred:function(t){var e=[["resolve","done",lt.Callbacks("once memory"),"resolved"],["reject","fail",lt.Callbacks("once memory"),"rejected"],["notify","progress",lt.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return lt.Deferred(function(n){lt.each(e,function(e,i){var s=lt.isFunction(t[e])&&t[e];r[i[1]](function(){var t=s&&s.apply(this,arguments);t&&lt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===o?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?lt.extend(t,o):o}},r={};return o.pipe=o.then,lt.each(e,function(t,i){var s=i[2],a=i[3];o[i[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[i[0]]=function(){return r[i[0]+"With"](this===r?o:this,arguments),this},r[i[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,o,r=0,i=tt.call(arguments),s=i.length,a=1!==s||t&&lt.isFunction(t.promise)?s:0,l=1===a?t:lt.Deferred(),c=function(t,n,o){return function(r){n[t]=this,o[t]=arguments.length>1?tt.call(arguments):r,o===e?l.notifyWith(n,o):--a||l.resolveWith(n,o)}};if(s>1)for(e=new Array(s),n=new Array(s),o=new Array(s);r<s;r++)i[r]&&lt.isFunction(i[r].promise)?i[r].promise().progress(c(r,n,e)).done(c(r,o,i)).fail(l.reject):--a;return a||l.resolveWith(o,i),l.promise()}});var Mt;lt.fn.ready=function(t){return lt.ready.promise().done(t),this},lt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?lt.readyWait++:lt.ready(!0)},ready:function(t){(!0===t?--lt.readyWait:lt.isReady)||(lt.isReady=!0,!0!==t&&--lt.readyWait>0||(Mt.resolveWith(q,[lt]),lt.fn.triggerHandler&&(lt(q).triggerHandler("ready"),lt(q).off("ready"))))}}),lt.ready.promise=function(t){return Mt||(Mt=lt.Deferred(),"complete"===q.readyState||"loading"!==q.readyState&&!q.documentElement.doScroll?n.setTimeout(lt.ready):(q.addEventListener("DOMContentLoaded",u),n.addEventListener("load",u))),Mt.promise(t)},lt.ready.promise();var Tt=function(t,e,n,o,r,i,s){var a=0,l=t.length,c=null==n;if("object"===lt.type(n)){r=!0;for(a in n)Tt(t,e,a,n[a],!0,i,s)}else if(void 0!==o&&(r=!0,lt.isFunction(o)||(s=!0),c&&(s?(e.call(t,o),e=null):(c=e,e=function(t,e,n){return c.call(lt(t),n)})),e))for(;a<l;a++)e(t[a],n,s?o:o.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):i},kt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};p.uid=1,p.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!kt(t))return{};var e=t[this.expando];return e||(e={},kt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var o,r=this.cache(t);if("string"==typeof e)r[e]=n;else for(o in e)r[o]=e[o];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var o;return void 0===e||e&&"string"==typeof e&&void 0===n?(o=this.get(t,e),void 0!==o?o:this.get(t,lt.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,o,r,i=t[this.expando];if(void 0!==i){if(void 0===e)this.register(t);else{lt.isArray(e)?o=e.concat(e.map(lt.camelCase)):(r=lt.camelCase(e),e in i?o=[e,r]:(o=r,o=o in i?[o]:o.match(Ct)||[])),n=o.length;for(;n--;)delete i[o[n]]}(void 0===e||lt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!lt.isEmptyObject(e)}};var St=new p,Nt=new p,xt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,At=/[A-Z]/g;lt.extend({hasData:function(t){return Nt.hasData(t)||St.hasData(t)},data:function(t,e,n){return Nt.access(t,e,n)},removeData:function(t,e){Nt.remove(t,e)},_data:function(t,e,n){return St.access(t,e,n)},_removeData:function(t,e){St.remove(t,e)}}),lt.fn.extend({data:function(t,e){var n,o,r,i=this[0],s=i&&i.attributes;if(void 0===t){if(this.length&&(r=Nt.get(i),1===i.nodeType&&!St.get(i,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(o=s[n].name,0===o.indexOf("data-")&&(o=lt.camelCase(o.slice(5)),d(i,o,r[o])));St.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Nt.set(this,t)}):Tt(this,function(e){var n,o;if(i&&void 0===e){if(void 0!==(n=Nt.get(i,t)||Nt.get(i,t.replace(At,"-$&").toLowerCase())))return n;if(o=lt.camelCase(t),void 0!==(n=Nt.get(i,o)))return n;if(void 0!==(n=d(i,o,void 0)))return n}else o=lt.camelCase(t),this.each(function(){var n=Nt.get(this,o);Nt.set(this,o,e),t.indexOf("-")>-1&&void 0!==n&&Nt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Nt.remove(this,t)})}}),lt.extend({queue:function(t,e,n){var o;if(t)return e=(e||"fx")+"queue",o=St.get(t,e),n&&(!o||lt.isArray(n)?o=St.access(t,e,lt.makeArray(n)):o.push(n)),o||[]},dequeue:function(t,e){e=e||"fx";var n=lt.queue(t,e),o=n.length,r=n.shift(),i=lt._queueHooks(t,e),s=function(){lt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===e&&n.unshift("inprogress"),delete i.stop,r.call(t,s,i)),!o&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return St.get(t,n)||St.access(t,n,{empty:lt.Callbacks("once memory").add(function(){St.remove(t,[e+"queue",n])})})}}),lt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?lt.queue(this[0],t):void 0===e?this:this.each(function(){var n=lt.queue(this,t,e);lt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&lt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){lt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,o=1,r=lt.Deferred(),i=this,s=this.length,a=function(){--o||r.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=St.get(i[s],t+"queueHooks"))&&n.empty&&(o++,n.empty.add(a));return a(),r.promise(e)}});var Et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ot=new RegExp("^(?:([+-])=|)("+Et+")([a-z%]*)$","i"),Dt=["Top","Right","Bottom","Left"],Lt=function(t,e){return t=e||t,"none"===lt.css(t,"display")||!lt.contains(t.ownerDocument,t)},Rt=/^(?:checkbox|radio)$/i,Bt=/<([\w:-]+)/,jt=/^$|\/(?:java|ecma)script/i,Pt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pt.optgroup=Pt.option,Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td;var zt=/<|&#?\w+;/;!function(){var t=q.createDocumentFragment(),e=t.appendChild(q.createElement("div")),n=q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),at.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",at.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ht=/^key/,Ft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Gt=/^([^.]*)(?:\.(.+)|)/;lt.event={global:{},add:function(t,e,n,o,r){var i,s,a,l,c,u,p,d,h,f,g,m=St.get(t);if(m)for(n.handler&&(i=n,n=i.handler,r=i.selector),n.guid||(n.guid=lt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==lt&&lt.event.triggered!==e.type?lt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Ct)||[""],c=e.length;c--;)a=Gt.exec(e[c])||[],h=g=a[1],f=(a[2]||"").split(".").sort(),h&&(p=lt.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,p=lt.event.special[h]||{},u=lt.extend({type:h,origType:g,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&lt.expr.match.needsContext.test(r),namespace:f.join(".")},i),(d=l[h])||(d=l[h]=[],d.delegateCount=0,p.setup&&!1!==p.setup.call(t,o,f,s)||t.addEventListener&&t.addEventListener(h,s)),p.add&&(p.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),lt.event.global[h]=!0)},remove:function(t,e,n,o,r){var i,s,a,l,c,u,p,d,h,f,g,m=St.hasData(t)&&St.get(t);if(m&&(l=m.events)){for(e=(e||"").match(Ct)||[""],c=e.length;c--;)if(a=Gt.exec(e[c])||[],h=g=a[1],f=(a[2]||"").split(".").sort(),h){for(p=lt.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,d=l[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=d.length;i--;)u=d[i],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||o&&o!==u.selector&&("**"!==o||!u.selector)||(d.splice(i,1),u.selector&&d.delegateCount--,p.remove&&p.remove.call(t,u));s&&!d.length&&(p.teardown&&!1!==p.teardown.call(t,f,m.handle)||lt.removeEvent(t,h,m.handle),delete l[h])}else for(h in l)lt.event.remove(t,h+e[c],n,o,!0);lt.isEmptyObject(l)&&St.remove(t,"handle events")}},dispatch:function(t){t=lt.event.fix(t);var e,n,o,r,i,s=[],a=tt.call(arguments),l=(St.get(this,"events")||{})[t.type]||[],c=lt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=lt.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(i.namespace)||(t.handleObj=i,t.data=i.data,void 0!==(o=((lt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(t.result=o)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,o,r,i,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],n=0;n<a;n++)i=e[n],r=i.selector+" ",void 0===o[r]&&(o[r]=i.needsContext?lt(r,this).index(l)>-1:lt.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,o,r,i=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||q,o=n.documentElement,r=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),t.which||void 0===i||(t.which=1&i?1:2&i?3:4&i?2:0),t}},fix:function(t){if(t[lt.expando])return t;var e,n,o,r=t.type,i=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ft.test(r)?this.mouseHooks:Ht.test(r)?this.keyHooks:{}),o=s.props?this.props.concat(s.props):this.props,t=new lt.Event(i),e=o.length;e--;)n=o[e],t[n]=i[n];return t.target||(t.target=q),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,i):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==y()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===y()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&lt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return lt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},lt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},lt.Event=function(t,e){if(!(this instanceof lt.Event))return new lt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?_:b):this.type=t,e&&lt.extend(this,e),this.timeStamp=t&&t.timeStamp||lt.now(),this[lt.expando]=!0},lt.Event.prototype={constructor:lt.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=_,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=_,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=_,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},lt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){lt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,o=this,r=t.relatedTarget,i=t.handleObj;return r&&(r===o||lt.contains(o,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),lt.fn.extend({on:function(t,e,n,o){return v(this,t,e,n,o)},one:function(t,e,n,o){return v(this,t,e,n,o,1)},off:function(t,e,n){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,lt(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=b),this.each(function(){lt.event.remove(this,t,n,e)})}});var Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Vt=/<script|<style|<link/i,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^true\/(.*)/,Jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;lt.extend({htmlPrefilter:function(t){return t.replace(Ut,"<$1></$2>")},clone:function(t,e,n){var o,r,i,s,a=t.cloneNode(!0),l=lt.contains(t.ownerDocument,t);if(!(at.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||lt.isXMLDoc(t)))for(s=f(a),i=f(t),o=0,r=i.length;o<r;o++)T(i[o],s[o]);if(e)if(n)for(i=i||f(t),s=s||f(a),o=0,r=i.length;o<r;o++)M(i[o],s[o]);else M(t,a);return s=f(a,"script"),s.length>0&&g(s,!l&&f(t,"script")),a},cleanData:function(t){for(var e,n,o,r=lt.event.special,i=0;void 0!==(n=t[i]);i++)if(kt(n)){if(e=n[St.expando]){if(e.events)for(o in e.events)r[o]?lt.event.remove(n,o):lt.removeEvent(n,o,e.handle);n[St.expando]=void 0}n[Nt.expando]&&(n[Nt.expando]=void 0)}}}),lt.fn.extend({domManip:k,detach:function(t){return S(this,t,!0)},remove:function(t){return S(this,t)},text:function(t){return Tt(this,function(t){return void 0===t?lt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){w(this,t).appendChild(t)}})},prepend:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(lt.cleanData(f(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return lt.clone(this,t,e)})},html:function(t){return Tt(this,function(t){var e=this[0]||{},n=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Vt.test(t)&&!Pt[(Bt.exec(t)||["",""])[1].toLowerCase()]){t=lt.htmlPrefilter(t);try{for(;n<o;n++)e=this[n]||{},1===e.nodeType&&(lt.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return k(this,arguments,function(e){var n=this.parentNode;lt.inArray(this,t)<0&&(lt.cleanData(f(this)),n&&n.replaceChild(e,this))},t)}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){lt.fn[t]=function(t){for(var n,o=[],r=lt(t),i=r.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),lt(r[s])[e](n),nt.apply(o,n.get());return this.pushStack(o)}});var Zt,Qt={HTML:"block",BODY:"block"},$t=/^margin/,Xt=new RegExp("^("+Et+")(?!px)[a-z%]+$","i"),Kt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},qt=function(t,e,n,o){var r,i,s={};for(i in e)s[i]=t.style[i],t.style[i]=e[i];r=n.apply(t,o||[]);for(i in e)t.style[i]=s[i];return r},te=q.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",te.appendChild(s);var t=n.getComputedStyle(a);e="1%"!==t.top,i="2px"===t.marginLeft,o="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,te.removeChild(s)}var e,o,r,i,s=q.createElement("div"),a=q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",at.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),lt.extend(at,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==o&&t(),o},pixelMarginRight:function(){return null==o&&t(),r},reliableMarginLeft:function(){return null==o&&t(),i},reliableMarginRight:function(){var t,e=a.appendChild(q.createElement("div"));return e.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",a.style.width="1px",te.appendChild(s),t=!parseFloat(n.getComputedStyle(e).marginRight),te.removeChild(s),a.removeChild(e),t}}))}();var ee=/^(none|table(?!-c[ea]).+)/,ne={position:"absolute",visibility:"hidden",display:"block"},oe={letterSpacing:"0",fontWeight:"400"},re=["Webkit","O","Moz","ms"],ie=q.createElement("div").style;lt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=A(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,i,s,a=lt.camelCase(e),l=t.style;if(e=lt.cssProps[a]||(lt.cssProps[a]=O(a)||a),s=lt.cssHooks[e]||lt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,o))?r:l[e];i=typeof n,"string"===i&&(r=Ot.exec(n))&&r[1]&&(n=h(t,e,r),i="number"),null!=n&&n===n&&("number"===i&&(n+=r&&r[3]||(lt.cssNumber[a]?"":"px")),at.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,o))||(l[e]=n))}},css:function(t,e,n,o){var r,i,s,a=lt.camelCase(e);return e=lt.cssProps[a]||(lt.cssProps[a]=O(a)||a),s=lt.cssHooks[e]||lt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=A(t,e,o)),"normal"===r&&e in oe&&(r=oe[e]),""===n||n?(i=parseFloat(r),!0===n||isFinite(i)?i||0:r):r}}),lt.each(["height","width"],function(t,e){lt.cssHooks[e]={get:function(t,n,o){if(n)return ee.test(lt.css(t,"display"))&&0===t.offsetWidth?qt(t,ne,function(){return R(t,e,o)}):R(t,e,o)},set:function(t,n,o){var r,i=o&&Kt(t),s=o&&L(t,e,o,"border-box"===lt.css(t,"boxSizing",!1,i),i);return s&&(r=Ot.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=lt.css(t,e)),D(t,n,s)}}}),lt.cssHooks.marginLeft=E(at.reliableMarginLeft,function(t,e){if(e)return(parseFloat(A(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),lt.cssHooks.marginRight=E(at.reliableMarginRight,function(t,e){if(e)return qt(t,{display:"inline-block"},A,[t,"marginRight"])}),lt.each({margin:"",padding:"",border:"Width"},function(t,e){lt.cssHooks[t+e]={expand:function(n){for(var o=0,r={},i="string"==typeof n?n.split(" "):[n];o<4;o++)r[t+Dt[o]+e]=i[o]||i[o-2]||i[0];return r}},$t.test(t)||(lt.cssHooks[t+e].set=D)}),lt.fn.extend({css:function(t,e){return Tt(this,function(t,e,n){var o,r,i={},s=0;if(lt.isArray(e)){for(o=Kt(t),r=e.length;s<r;s++)i[e[s]]=lt.css(t,e[s],!1,o);return i}return void 0!==n?lt.style(t,e,n):lt.css(t,e)},t,e,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Lt(this)?lt(this).show():lt(this).hide()})}}),lt.Tween=j,j.prototype={constructor:j,init:function(t,e,n,o,r,i){this.elem=t,this.prop=n,this.easing=r||lt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=i||(lt.cssNumber[n]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,n=j.propHooks[this.prop];return this.options.duration?this.pos=e=lt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=lt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){lt.fx.step[t.prop]?lt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[lt.cssProps[t.prop]]&&!lt.cssHooks[t.prop]?t.elem[t.prop]=t.now:lt.style(t.elem,t.prop,t.now+t.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},lt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},lt.fx=j.prototype.init,lt.fx.step={};var se,ae,le=/^(?:toggle|show|hide)$/,ce=/queueHooks$/;lt.Animation=lt.extend(U,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return h(n.elem,t,Ot.exec(e),n),n}]},tweener:function(t,e){lt.isFunction(t)?(e=t,t=["*"]):t=t.match(Ct);for(var n,o=0,r=t.length;o<r;o++)n=t[o],U.tweeners[n]=U.tweeners[n]||[],U.tweeners[n].unshift(e)},prefilters:[F],prefilter:function(t,e){e?U.prefilters.unshift(t):U.prefilters.push(t)}}),lt.speed=function(t,e,n){var o=t&&"object"==typeof t?lt.extend({},t):{complete:n||!n&&e||lt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!lt.isFunction(e)&&e};return o.duration=lt.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in lt.fx.speeds?lt.fx.speeds[o.duration]:lt.fx.speeds._default,null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){lt.isFunction(o.old)&&o.old.call(this),o.queue&&lt.dequeue(this,o.queue)},o},lt.fn.extend({fadeTo:function(t,e,n,o){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:e},t,n,o)},animate:function(t,e,n,o){var r=lt.isEmptyObject(t),i=lt.speed(e,n,o),s=function(){var e=U(this,lt.extend({},t),i);(r||St.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(t,e,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",i=lt.timers,s=St.get(this);if(r)s[r]&&s[r].stop&&o(s[r]);else for(r in s)s[r]&&s[r].stop&&ce.test(r)&&o(s[r]);for(r=i.length;r--;)i[r].elem!==this||null!=t&&i[r].queue!==t||(i[r].anim.stop(n),e=!1,i.splice(r,1));!e&&n||lt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=St.get(this),o=n[t+"queue"],r=n[t+"queueHooks"],i=lt.timers,s=o?o.length:0;for(n.finish=!0,lt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<s;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete n.finish})}}),lt.each(["toggle","show","hide"],function(t,e){var n=lt.fn[e];lt.fn[e]=function(t,o,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(z(e,!0),t,o,r)}}),lt.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){lt.fn[t]=function(t,n,o){return this.animate(e,t,n,o)}}),lt.timers=[],lt.fx.tick=function(){var t,e=0,n=lt.timers;for(se=lt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||lt.fx.stop(),se=void 0},lt.fx.timer=function(t){lt.timers.push(t),t()?lt.fx.start():lt.timers.pop()},lt.fx.interval=13,lt.fx.start=function(){ae||(ae=n.setInterval(lt.fx.tick,lt.fx.interval))},lt.fx.stop=function(){n.clearInterval(ae),ae=null},lt.fx.speeds={slow:600,fast:200,_default:400},lt.fn.delay=function(t,e){return t=lt.fx?lt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,o){var r=n.setTimeout(e,t);o.stop=function(){n.clearTimeout(r)}})},function(){var t=q.createElement("input"),e=q.createElement("select"),n=e.appendChild(q.createElement("option"));t.type="checkbox",at.checkOn=""!==t.value,at.optSelected=n.selected,e.disabled=!0,at.optDisabled=!n.disabled,t=q.createElement("input"),t.value="t",t.type="radio",at.radioValue="t"===t.value}();var ue,pe=lt.expr.attrHandle;lt.fn.extend({attr:function(t,e){return Tt(this,lt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){lt.removeAttr(this,t)})}}),lt.extend({attr:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?lt.prop(t,e,n):(1===i&&lt.isXMLDoc(t)||(e=e.toLowerCase(),r=lt.attrHooks[e]||(lt.expr.match.bool.test(e)?ue:void 0)),void 0!==n?null===n?void lt.removeAttr(t,e):r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(o=r.get(t,e))?o:(o=lt.find.attr(t,e),null==o?void 0:o))},attrHooks:{type:{set:function(t,e){if(!at.radioValue&&"radio"===e&&lt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,o,r=0,i=e&&e.match(Ct);if(i&&1===t.nodeType)for(;n=i[r++];)o=lt.propFix[n]||n,lt.expr.match.bool.test(n)&&(t[o]=!1),t.removeAttribute(n)}}),ue={set:function(t,e,n){return!1===e?lt.removeAttr(t,n):t.setAttribute(n,n),n}},lt.each(lt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=pe[e]||lt.find.attr;pe[e]=function(t,e,o){var r,i;return o||(i=pe[e],pe[e]=r,r=null!=n(t,e,o)?e.toLowerCase():null,pe[e]=i),r}});var de=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;lt.fn.extend({prop:function(t,e){return Tt(this,lt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[lt.propFix[t]||t]})}}),lt.extend({prop:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&lt.isXMLDoc(t)||(e=lt.propFix[e]||e,r=lt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:t[e]=n:r&&"get"in r&&null!==(o=r.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=lt.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),at.optSelected||(lt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),lt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){lt.propFix[this.toLowerCase()]=this});var fe=/[\t\r\n\f]/g;lt.fn.extend({addClass:function(t){var e,n,o,r,i,s,a,l=0;if(lt.isFunction(t))return this.each(function(e){lt(this).addClass(t.call(this,e,V(this)))});if("string"==typeof t&&t)for(e=t.match(Ct)||[];n=this[l++];)if(r=V(n),o=1===n.nodeType&&(" "+r+" ").replace(fe," ")){for(s=0;i=e[s++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");a=lt.trim(o),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,o,r,i,s,a,l=0;if(lt.isFunction(t))return this.each(function(e){lt(this).removeClass(t.call(this,e,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Ct)||[];n=this[l++];)if(r=V(n),o=1===n.nodeType&&(" "+r+" ").replace(fe," ")){for(s=0;i=e[s++];)for(;o.indexOf(" "+i+" ")>-1;)o=o.replace(" "+i+" "," ");a=lt.trim(o),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):lt.isFunction(t)?this.each(function(n){lt(this).toggleClass(t.call(this,n,V(this),e),e)}):this.each(function(){var e,o,r,i;if("string"===n)for(o=0,r=lt(this),i=t.match(Ct)||[];e=i[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=V(this),e&&St.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":St.get(this,"__className__")||""))})},hasClass:function(t){var e,n,o=0;for(e=" "+t+" ";n=this[o++];)if(1===n.nodeType&&(" "+V(n)+" ").replace(fe," ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g,me=/[\x20\t\r\n\f]+/g;lt.fn.extend({val:function(t){var e,n,o,r=this[0];{if(arguments.length)return o=lt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=o?t.call(this,n,lt(this).val()):t,null==r?r="":"number"==typeof r?r+="":lt.isArray(r)&&(r=lt.map(r,function(t){return null==t?"":t+""})),(e=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return(e=lt.valHooks[r.type]||lt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ge,""):null==n?"":n)}}}),lt.extend({valHooks:{option:{get:function(t){var e=lt.find.attr(t,"value");return null!=e?e:lt.trim(lt.text(t)).replace(me," ")}},select:{get:function(t){for(var e,n,o=t.options,r=t.selectedIndex,i="select-one"===t.type||r<0,s=i?null:[],a=i?r+1:o.length,l=r<0?a:i?r:0;l<a;l++)if(n=o[l],(n.selected||l===r)&&(at.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!lt.nodeName(n.parentNode,"optgroup"))){if(e=lt(n).val(),i)return e;s.push(e)}return s},set:function(t,e){for(var n,o,r=t.options,i=lt.makeArray(e),s=r.length;s--;)o=r[s],(o.selected=lt.inArray(lt.valHooks.option.get(o),i)>-1)&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),lt.each(["radio","checkbox"],function(){lt.valHooks[this]={set:function(t,e){if(lt.isArray(e))return t.checked=lt.inArray(lt(t).val(),e)>-1}},at.checkOn||(lt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var _e=/^(?:focusinfocus|focusoutblur)$/;lt.extend(lt.event,{trigger:function(t,e,o,r){var i,s,a,l,c,u,p,d=[o||q],h=st.call(t,"type")?t.type:t,f=st.call(t,"namespace")?t.namespace.split("."):[];if(s=a=o=o||q,3!==o.nodeType&&8!==o.nodeType&&!_e.test(h+lt.event.triggered)&&(h.indexOf(".")>-1&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[lt.expando]?t:new lt.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:lt.makeArray(e,[t]),p=lt.event.special[h]||{},r||!p.trigger||!1!==p.trigger.apply(o,e))){if(!r&&!p.noBubble&&!lt.isWindow(o)){for(l=p.delegateType||h,_e.test(l+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(o.ownerDocument||q)&&d.push(a.defaultView||a.parentWindow||n)}for(i=0;(s=d[i++])&&!t.isPropagationStopped();)t.type=i>1?l:p.bindType||h,u=(St.get(s,"events")||{})[t.type]&&St.get(s,"handle"),u&&u.apply(s,e),(u=c&&s[c])&&u.apply&&kt(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=h,r||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(d.pop(),e)||!kt(o)||c&&lt.isFunction(o[h])&&!lt.isWindow(o)&&(a=o[c],a&&(o[c]=null),lt.event.triggered=h,o[h](),lt.event.triggered=void 0,a&&(o[c]=a)),t.result}},simulate:function(t,e,n){var o=lt.extend(new lt.Event,n,{type:t,isSimulated:!0});lt.event.trigger(o,null,e)}}),lt.fn.extend({trigger:function(t,e){return this.each(function(){lt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return lt.event.trigger(t,e,n,!0)}}),lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){lt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),lt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),at.focusin="onfocusin"in n,at.focusin||lt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){lt.event.simulate(e,t.target,lt.event.fix(t))};lt.event.special[e]={setup:function(){var o=this.ownerDocument||this,r=St.access(o,e);r||o.addEventListener(t,n,!0),St.access(o,e,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this,r=St.access(o,e)-1;r?St.access(o,e,r):(o.removeEventListener(t,n,!0),St.remove(o,e))}}});var be=n.location,ye=lt.now(),ve=/\?/;lt.parseJSON=function(t){return JSON.parse(t+"")},lt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||lt.error("Invalid XML: "+t),e};var we=/#.*$/,Ie=/([?&])_=[^&]*/,Ce=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Te=/^(?:GET|HEAD)$/,ke=/^\/\//,Se={},Ne={},xe="*/".concat("*"),Ae=q.createElement("a");Ae.href=be.href,lt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:Me.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":lt.parseJSON,"text xml":lt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?J(J(t,lt.ajaxSettings),e):J(lt.ajaxSettings,t)},ajaxPrefilter:Y(Se),ajaxTransport:Y(Ne),ajax:function(t,e){function o(t,e,o,a){var c,p,b,y,w,C=e;2!==v&&(v=2,l&&n.clearTimeout(l),r=void 0,s=a||"",I.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(y=Z(d,I,o)),y=Q(d,y,I,c),c?(d.ifModified&&(w=I.getResponseHeader("Last-Modified"),w&&(lt.lastModified[i]=w),(w=I.getResponseHeader("etag"))&&(lt.etag[i]=w)),204===t||"HEAD"===d.type?C="nocontent":304===t?C="notmodified":(C=y.state,p=y.data,b=y.error,c=!b)):(b=C,!t&&C||(C="error",t<0&&(t=0))),I.status=t,I.statusText=(e||C)+"",c?g.resolveWith(h,[p,C,I]):g.rejectWith(h,[I,C,b]),I.statusCode(_),_=void 0,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[I,d,c?p:b]),m.fireWith(h,[I,C]),u&&(f.trigger("ajaxComplete",[I,d]),--lt.active||lt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,s,a,l,c,u,p,d=lt.ajaxSetup({},e),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?lt(h):lt.event,g=lt.Deferred(),m=lt.Callbacks("once memory"),_=d.statusCode||{},b={},y={},v=0,w="canceled",I={readyState:0,getResponseHeader:function(t){var e;if(2===v){if(!a)for(a={};e=Ce.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return v||(t=y[n]=y[n]||t,b[t]=e),this},overrideMimeType:function(t){return v||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(v<2)for(e in t)_[e]=[_[e],t[e]];else I.always(t[I.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),o(0,e),this}};if(g.promise(I).complete=m.add,I.success=I.done,I.error=I.fail,d.url=((t||d.url||be.href)+"").replace(we,"").replace(ke,be.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=lt.trim(d.dataType||"*").toLowerCase().match(Ct)||[""],null==d.crossDomain){c=q.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Ae.protocol+"//"+Ae.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=lt.param(d.data,d.traditional)),W(Se,d,e,I),2===v)return I;u=lt.event&&d.global,u&&0==lt.active++&&lt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Te.test(d.type),i=d.url,d.hasContent||(d.data&&(i=d.url+=(ve.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ie.test(i)?i.replace(Ie,"$1_="+ye++):i+(ve.test(i)?"&":"?")+"_="+ye++)),d.ifModified&&(lt.lastModified[i]&&I.setRequestHeader("If-Modified-Since",lt.lastModified[i]),lt.etag[i]&&I.setRequestHeader("If-None-Match",lt.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&I.setRequestHeader("Content-Type",d.contentType),I.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+xe+"; q=0.01":""):d.accepts["*"]);for(p in d.headers)I.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,I,d)||2===v))return I.abort();w="abort";for(p in{success:1,error:1,complete:1})I[p](d[p]);if(r=W(Ne,d,e,I)){if(I.readyState=1,u&&f.trigger("ajaxSend",[I,d]),2===v)return I;d.async&&d.timeout>0&&(l=n.setTimeout(function(){I.abort("timeout")},d.timeout));try{v=1,r.send(b,o)}catch(t){if(!(v<2))throw t;o(-1,t)}}else o(-1,"No Transport");return I},getJSON:function(t,e,n){return lt.get(t,e,n,"json")},getScript:function(t,e){return lt.get(t,void 0,e,"script")}}),lt.each(["get","post"],function(t,e){lt[e]=function(t,n,o,r){return lt.isFunction(n)&&(r=r||o,o=n,n=void 0),lt.ajax(lt.extend({url:t,type:e,dataType:r,data:n,success:o},lt.isPlainObject(t)&&t))}}),lt._evalUrl=function(t){return lt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},lt.fn.extend({wrapAll:function(t){var e;return lt.isFunction(t)?this.each(function(e){lt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=lt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return lt.isFunction(t)?this.each(function(e){lt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=lt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=lt.isFunction(t);return this.each(function(n){lt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){lt.nodeName(this,"body")||lt(this).replaceWith(this.childNodes)}).end()}}),lt.expr.filters.hidden=function(t){return!lt.expr.filters.visible(t)},lt.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ee=/%20/g,Oe=/\[\]$/,De=/\r?\n/g,Le=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;lt.param=function(t,e){var n,o=[],r=function(t,e){e=lt.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=lt.ajaxSettings&&lt.ajaxSettings.traditional),lt.isArray(t)||t.jquery&&!lt.isPlainObject(t))lt.each(t,function(){r(this.name,this.value)});else for(n in t)$(n,t[n],e,r);return o.join("&").replace(Ee,"+")},lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=lt.prop(this,"elements");return t?lt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!lt(this).is(":disabled")&&Re.test(this.nodeName)&&!Le.test(t)&&(this.checked||!Rt.test(t))}).map(function(t,e){var n=lt(this).val();return null==n?null:lt.isArray(n)?lt.map(n,function(t){return{name:e.name,value:t.replace(De,"\r\n")}}):{name:e.name,value:n.replace(De,"\r\n")}}).get()}}),lt.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Be={0:200,1223:204},je=lt.ajaxSettings.xhr();at.cors=!!je&&"withCredentials"in je,at.ajax=je=!!je,lt.ajaxTransport(function(t){var e,o;if(at.cors||je&&!t.crossDomain)return{send:function(r,i){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=o=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(Be[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),o=a.onerror=e("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){e&&o()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),lt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return lt.globalEval(t),t}}}),lt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),lt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(o,r){e=lt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Pe=[],ze=/(=)\?(?=&|$)|\?\?/;lt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||lt.expando+"_"+ye++;return this[t]=!0,t}}),lt.ajaxPrefilter("json jsonp",function(t,e,o){var r,i,s,a=!1!==t.jsonp&&(ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=lt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ze,"$1"+r):!1!==t.jsonp&&(t.url+=(ve.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||lt.error(r+" was not called"),s[0]},t.dataTypes[0]="json",i=n[r],n[r]=function(){s=arguments},o.always(function(){void 0===i?lt(n).removeProp(r):n[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,Pe.push(r)),s&&lt.isFunction(i)&&i(s[0]),s=i=void 0}),"script"}),lt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||q;var o=_t.exec(t),r=!n&&[];return o?[e.createElement(o[1])]:(o=m([t],e,r),r&&r.length&&lt(r).remove(),lt.merge([],o.childNodes))};var He=lt.fn.load;lt.fn.load=function(t,e,n){if("string"!=typeof t&&He)return He.apply(this,arguments);var o,r,i,s=this,a=t.indexOf(" ");return a>-1&&(o=lt.trim(t.slice(a)),t=t.slice(0,a)),lt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&lt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){i=arguments,s.html(o?lt("<div>").append(lt.parseHTML(t)).find(o):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,i||[t.responseText,e,t])})}),this},lt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){lt.fn[e]=function(t){return this.on(e,t)}}),lt.expr.filters.animated=function(t){return lt.grep(lt.timers,function(e){return t===e.elem}).length},lt.offset={setOffset:function(t,e,n){var o,r,i,s,a,l,c,u=lt.css(t,"position"),p=lt(t),d={};"static"===u&&(t.style.position="relative"),a=p.offset(),i=lt.css(t,"top"),l=lt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(i+l).indexOf("auto")>-1,c?(o=p.position(),s=o.top,r=o.left):(s=parseFloat(i)||0,r=parseFloat(l)||0),lt.isFunction(e)&&(e=e.call(t,n,lt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):p.css(d)}},lt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){lt.offset.setOffset(this,t,e)});var e,n,o=this[0],r={top:0,left:0},i=o&&o.ownerDocument;if(i)return e=i.documentElement,lt.contains(e,o)?(r=o.getBoundingClientRect(),n=X(i),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r},position:function(){if(this[0]){var t,e,n=this[0],o={top:0,left:0};return"fixed"===lt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),lt.nodeName(t[0],"html")||(o=t.offset()),o.top+=lt.css(t[0],"borderTopWidth",!0),o.left+=lt.css(t[0],"borderLeftWidth",!0)),{top:e.top-o.top-lt.css(n,"marginTop",!0),left:e.left-o.left-lt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===lt.css(t,"position");)t=t.offsetParent;return t||te})}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;lt.fn[t]=function(o){return Tt(this,function(t,o,r){var i=X(t);if(void 0===r)return i?i[e]:t[o];i?i.scrollTo(n?i.pageXOffset:r,n?r:i.pageYOffset):t[o]=r},t,o,arguments.length)}}),lt.each(["top","left"],function(t,e){lt.cssHooks[e]=E(at.pixelPosition,function(t,n){if(n)return n=A(t,e),Xt.test(n)?lt(t).position()[e]+"px":n})}),lt.each({Height:"height",Width:"width"},function(t,e){lt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,o){lt.fn[o]=function(o,r){var i=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===r?"margin":"border");return Tt(this,function(e,n,o){var r;return lt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?lt.css(e,n,s):lt.style(e,n,o,s)},e,i?o:void 0,i,null)}})}),lt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,o){return this.on(e,t,n,o)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),lt.fn.andSelf=lt.fn.addBack,o=[],void 0!==(r=function(){return lt}.apply(e,o))&&(t.exports=r);var Fe=n.jQuery,Ge=n.$;return lt.noConflict=function(t){return n.$===lt&&(n.$=Ge),t&&n.jQuery===lt&&(n.jQuery=Fe),lt},i||(n.jQuery=n.$=lt),lt})},function(t,e){t.exports={modal:"bulb__modal","modal-mask":"bulb__modal-mask","modal-container":"bulb__modal-container","modal-header":"bulb__modal-header","modal-body":"bulb__modal-body","modal-footer":"bulb__modal-footer","modal-button":"bulb__modal-button"}},function(t,e){},function(t,e,n){"use strict";var o=n(285)(!0);n(138)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var o=n(102),r=n(103);t.exports=function(t){return function(e,n){var i,s,a=String(r(e)),l=o(n),c=a.length;return l<0||l>=c?t?"":void 0:(i=a.charCodeAt(l),i<55296||i>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):i:t?a.slice(l,l+2):s-56320+(i-55296<<10)+65536)}}},function(t,e,n){t.exports=!n(63)&&!n(140)(function(){return 7!=Object.defineProperty(n(105)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var o=n(62);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=n(55)},function(t,e,n){"use strict";var o=n(290),r=n(141),i=n(108),s={};n(55)(s,n(31)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o(s,{next:r(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var o=n(49),r=n(291),i=n(145),s=n(107)("IE_PROTO"),a=function(){},l=function(){var t,e=n(105)("iframe"),o=i.length;for(e.style.display="none",n(146).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;o--;)delete l.prototype[i[o]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=o(t),n=new a,a.prototype=null,n[s]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var o=n(80),r=n(49),i=n(292);t.exports=n(63)?Object.defineProperties:function(t,e){r(t);for(var n,s=i(e),a=s.length,l=0;a>l;)o.f(t,n=s[l++],e[n]);return t}},function(t,e,n){var o=n(293),r=n(145);t.exports=Object.keys||function(t){return o(t,r)}},function(t,e,n){var o=n(81),r=n(106),i=n(295)(!1),s=n(107)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),l=0,c=[];for(n in a)n!=s&&o(a,n)&&c.push(n);for(;e.length>l;)o(a,n=e[l++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var o=n(82);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e,n){var o=n(106),r=n(142),i=n(296);t.exports=function(t){return function(e,n,s){var a,l=o(e),c=r(l.length),u=i(s,c);if(t&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var o=n(102),r=Math.max,i=Math.min;t.exports=function(t,e){return t=o(t),t<0?r(t+e,0):i(t,e)}},function(t,e,n){var o=n(81),r=n(298),i=n(107)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),o(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var o=n(103);t.exports=function(t){return Object(o(t))}},function(t,e,n){n(300);for(var o=n(30),r=n(55),i=n(64),s=n(31)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],u=o[c],p=u&&u.prototype;p&&!p[s]&&r(p,s,c),i[c]=i.Array}},function(t,e,n){"use strict";var o=n(301),r=n(302),i=n(64),s=n(106);t.exports=n(138)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var o,r,i,s,a=n(104),l=n(30),c=n(78),u=n(147),p=n(139),d=n(62),h=n(79),f=n(304),g=n(305),m=n(309),_=n(148).set,b=n(311)(),y=n(149),v=n(312),w=n(313),I=n(314),C=l.TypeError,M=l.process,T=M&&M.versions,k=T&&T.v8||"",S=l.Promise,N="process"==u(M),x=function(){},A=r=y.f,E=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(31)("species")]=function(t){t(x,x)};return(N||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e&&0!==k.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),O=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var o=t._v,r=1==t._s,i=0;n.length>i;)!function(e){var n,i,s,a=r?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(r||(2==t._h&&B(t),t._h=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),s=!0)),n===e.promise?c(C("Promise-chain cycle")):(i=O(n))?i.call(n,l,c):l(n)):c(o)}catch(t){u&&!s&&u.exit(),c(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&L(t)})}},L=function(t){_.call(l,function(){var e,n,o,r=t._v,i=R(t);if(i&&(e=v(function(){N?M.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(o=l.console)&&o.error&&o.error("Unhandled promise rejection",r)}),t._h=N||R(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){_.call(l,function(){var e;N?M.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},j=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},P=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw C("Promise can't be resolved itself");(e=O(t))?b(function(){var o={_w:n,_d:!1};try{e.call(t,c(P,o,1),c(j,o,1))}catch(t){j.call(o,t)}}):(n._v=t,n._s=1,D(n,!1))}catch(t){j.call({_w:n,_d:!1},t)}}};E||(S=function(t){f(this,S,"Promise","_h"),h(t),o.call(this);try{t(c(P,this,1),c(j,this,1))}catch(t){j.call(this,t)}},o=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},o.prototype=n(315)(S.prototype,{then:function(t,e){var n=A(m(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=N?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new o;this.promise=t,this.resolve=c(P,t,1),this.reject=c(j,t,1)},y.f=A=function(t){return t===S||t===s?new i(t):r(t)}),p(p.G+p.W+p.F*!E,{Promise:S}),n(108)(S,"Promise"),n(316)("Promise"),s=n(54).Promise,p(p.S+p.F*!E,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),p(p.S+p.F*(a||!E),"Promise",{resolve:function(t){return I(a&&this===s?S:this,t)}}),p(p.S+p.F*!(E&&n(317)(function(t){S.all(t).catch(x)})),"Promise",{all:function(t){var e=this,n=A(e),o=n.resolve,r=n.reject,i=v(function(){var n=[],i=0,s=1;g(t,!1,function(t){var a=i++,l=!1;n.push(void 0),s++,e.resolve(t).then(function(t){l||(l=!0,n[a]=t,--s||o(n))},r)}),--s||o(n)});return i.e&&r(i.v),n.promise},race:function(t){var e=this,n=A(e),o=n.reject,r=v(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,o)})});return r.e&&o(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,o){if(!(t instanceof e)||void 0!==o&&o in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var o=n(78),r=n(306),i=n(307),s=n(49),a=n(142),l=n(308),c={},u={},e=t.exports=function(t,e,n,p,d){var h,f,g,m,_=d?function(){return t}:l(t),b=o(n,p,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(i(_)){for(h=a(t.length);h>y;y++)if((m=e?b(s(f=t[y])[0],f[1]):b(t[y]))===c||m===u)return m}else for(g=_.call(t);!(f=g.next()).done;)if((m=r(g,b,f.value,e))===c||m===u)return m};e.BREAK=c,e.RETURN=u},function(t,e,n){var o=n(49);t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},function(t,e,n){var o=n(64),r=n(31)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[r]===t)}},function(t,e,n){var o=n(147),r=n(31)("iterator"),i=n(64);t.exports=n(54).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[o(t)]}},function(t,e,n){var o=n(49),r=n(79),i=n(31)("species");t.exports=function(t,e){var n,s=o(t).constructor;return void 0===s||void 0==(n=o(s)[i])?e:r(n)}},function(t,e){t.exports=function(t,e,n){var o=void 0===n;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var o=n(30),r=n(148).set,i=o.MutationObserver||o.WebKitMutationObserver,s=o.process,a=o.Promise,l="process"==n(82)(s);t.exports=function(){var t,e,n,c=function(){var o,r;for(l&&(o=s.domain)&&o.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,o&&o.enter()};if(l)n=function(){s.nextTick(c)};else if(!i||o.navigator&&o.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);n=function(){u.then(c)}}else n=function(){r.call(o,c)};else{var p=!0,d=document.createTextNode("");new i(c).observe(d,{characterData:!0}),n=function(){d.data=p=!p}}return function(o){var r={fn:o,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var o=n(30),r=o.navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var o=n(49),r=n(62),i=n(149);t.exports=function(t,e){if(o(t),r(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var o=n(55);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:o(t,r,e[r]);return t}},function(t,e,n){"use strict";var o=n(30),r=n(54),i=n(80),s=n(63),a=n(31)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:o[t];s&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var o=n(31)("iterator"),r=!1;try{var i=[7][o]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],s=i[o]();s.next=function(){return{done:n=!0}},i[o]=function(){return s},t(i)}catch(t){}return n}},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(11),n(320),n(321),n(322),n(359),n(433),n(731),n(35),n(132),n(58),n(732),n(733),n(319),n(4),n(734),n(757),n(759),n(799),n(802),n(860),n(114),n(2),n(861),n(862)],void 0!==(r=function(t,e,o,r,s,a,l,c,u,p,d,h,f,g,m,_,b,y,v,w,I,C,M,T,k){"use strict";n(13).load(n(863),"web");var S;return function(t){t[t.JSON=0]="JSON",t[t.XML=1]="XML",t[t.HTML=2]="HTML"}(S||(S={})),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.callMacNativeApi=function(t,e){return v.callNativeApi(t,e)},e.prototype.canRemoveFormat=function(){return this.controller.canRemoveFormat()},e.prototype.getNoteViewWrapper=function(){return this.$noteViewWrapper},e.prototype.getNoteViewFrame=function(){return this.$noteViewFrame},e.prototype.getMacroConfigManager=function(){return this.macroConfigManager},e.prototype.initNoteViewWrapper=function(){var t=this,e=$(t.editorProps.parentEl);t.$noteViewWrapper||(t.$noteViewWrapper=$('<div class="bulb__note-view-wrapper"></div>'),t.$noteViewFrame=$('<div class="bulb__note-view-frame"></div>'),t.$noteViewWrapper.append(t.$noteViewFrame),e.append(t.$noteViewWrapper),t.progressTracker=new M({}),null!=t.noteView&&t.noteView.setOptions({noteviewFrame:t.getNoteViewFrame(),noteviewWrapper:t.getNoteViewWrapper()})),t._updateNoteViewWrapperSize(),function(){var n,o,r,i=window.devicePixelRatio;n=function(){var s=!1;o!==e.width()&&(s=!0,o=e.width()),r!==e.height()&&(s=!0,r=e.height()),i!==window.devicePixelRatio&&(s=!0,i=window.devicePixelRatio),s&&t.onResize(),t.timeoutID=setTimeout(n,500)},t.timeoutID=setTimeout(n,500)}()},e.prototype.insertNoteLink=function(t,e){if(t&&e){var n,o,r=f.fillAsUrl(t);n=new k.RichText({text:e}),o=n.getLength(),n.setStyles(0,o,{color:"rgb(0, 56, 132)",href:r,underline:!0}),this.insertText(n,!1)}},e.prototype.insertText=function(t,e){this.controller.insertText(t,e)},e.prototype.isLegacyHost=function(){var t=!0;return null!=this.getEditorProps().webVersion&&(t=!1),t},e.prototype.isSameList=function(t){return this.controller.isSameList(t)},e.prototype.onResize=function(){this._updateNoteViewWrapperSize(),this.noteView.trigger("resize")},e.prototype.render=function(){var t=this,e=t.noteView,n=t.editorProps.toolbarParentEl||t.editorProps.parentEl;e&&(t.toolbar.render(),$(n).append(t.toolbar.$el),t.toolbar.shrink(),t.initNoteViewWrapper(),t.$noteViewFrame.append(e.$el),t.$noteViewWrapper.append(t.linkView.$el),e.setOptions({pageType:t.editorProps.pageType}),t.setViewMode(t.editorProps.viewMode,!0,!1),e.render(),t.$noteViewWrapper.append(t.imgTitleInput.$el))},e.prototype.reset=function(){t.prototype.reset.call(this),this.toolbar.$el.find(".bulb__button-undo").removeClass("bulb__active"),this.toolbar.$el.find(".bulb__button-redo").removeClass("bulb__active"),this.toolbar&&(this.toolbar.reset(),this.toolbar.isRendered&&T.trigger())},e.prototype.setDefaultFont=function(t,e){var n=k.FontMaps.getFontFirstValue(t),o=p.getAsArray();n&&(this.defaultFontName=n),o.indexOf(e)>-1&&(this.defaultFontSize=e),this.note&&this.note.isEmptyContent()&&this.useDefaultFontAsEditingStyle()},e.prototype.setHtmlContent=function(t,e,n,o){this._setContent(S.HTML,t,e,n,o)},e.prototype.setXmlContent=function(t,e,n,o){this._setContent(S.XML,t,e,n,o)},e.prototype.setJSONContent=function(t,e,n,o){this._setContent(S.JSON,t,e,n,o)},e.prototype.showToolbar=function(){this.toolbar&&this.toolbar.isRendered&&T.trigger()},e.prototype.updateFormatPainterCursorUI=function(t){this.noteView.updateFormatPainterCursorUI(t)},e.prototype.useDefaultFontAsEditingStyle=function(){this.controller.setDefaultFont(this.defaultFontName,this.defaultFontSize)},e.prototype.destroy=function(){this.timeoutID&&clearTimeout(this.timeoutID),this.controller&&this.controller.destroy(),this.noteView&&this.noteView.destroy(),this.toolbar&&this.toolbar.destroy(),this.contextMenu&&this.contextMenu.destroy(),this.linkView&&this.linkView.destroy(),this.imgTitleInput&&this.imgTitleInput.editor&&(this.imgTitleInput.editor=null),this.colorpicker&&this.colorpicker.destroy(),this.macroConfigManager&&this.macroConfigManager.unregisterMacroConfig(),this.editorProps&&(this.editorProps.parentEl=null,this.editorProps.toolbarParentEl=null)},e.prototype.bindEventsForController=function(){if(!this.controller)return void b.warn("no controller!");t.prototype.bindEventsForController.call(this),d.bubble(["yne-selection-change","yne-editing-state-change","yne-replace-image","yne-replace-attachment","yne-open-link","yne-download-attachment","yne-download-image","yne-preview-image","yne-pre-copy","yne-pre-paste","yne-pre-cut","contextmenu","yne-show-words","yne-save-content","yne-blob-paste","yne-get-image-url","yne-need-paste","yne-require-innerlink"],this.controller,this),d.bubble({find:"yne-find"},this.controller,this)},e.prototype.initialize=function(e){var n=this;n.editorProps=e||{},n.editorProps.theme=n.editorProps.theme||"",$(n.editorProps.parentEl).addClass("bulb__editor").html(""),n.editorProps.toolbarParentEl&&$(n.editorProps.toolbarParentEl).html(""),n.editorProps.theme&&$(n.editorProps.parentEl).addClass("bulb__"+n.editorProps.theme),h.setUseConvert(n.editorProps.useHttpsConvert),o.bindAll(n,"_updateNoteViewWrapperSize","onResize"),n.note=k.Note.createBlank(!0),n.macroConfigManager=new u.default,n.noteView=new C({editor:n,inlineStyleViewMapper:I,note:n.note}),n.linkView=new _({editor:n}),n.imgTitleInput=new m({editor:n}),n.controller=new c({editor:n,imgTitleInput:n.imgTitleInput,note:n.note,noteView:n.noteView,removeLocalImg:n.editorProps.removeLocalImg}),n.toolbar=new w({editor:n,userSetItems:e.toolbarItems}),n._initContextMenu(),n._addEventListenerOnNoteView(),t.prototype.initialize.call(this,e),n.colorpicker=new g({editor:n}),$(n.editorProps.parentEl).append(n.colorpicker.$el),d.bubble(["color-picker-show"],n,n.colorpicker)},e.prototype.updateContainerBackground=function(t){var e=this.noteView.$el;return this.currentBackground!==t&&(t&&t!==r.DEFAULT_BACKGROUND?(e.css("background-image",'url("'+t+'")'),this.currentBackground=t):(e.css("background-image",""),this.currentBackground=r.DEFAULT_BACKGROUND),!0)},e.prototype._addEventListenerOnNoteView=function(){this.noteView.on("blur",this._onBlur.bind(this)),this.noteView.on("focus",this._onFocus.bind(this))},e.prototype._initContextMenu=function(){var t,e,n=this;if(!n.contextMenu&&(t=n.contextMenu=new s({editor:n}),e=o.map(y,function(t){return t()}),t.addItems(e),n.on("contextmenu",function(e){var o=a(n);t.onContextMenu(e,o)}),b.DEBUG)){if(function(){var t=(window.ynote||{}).toString();return t&&t.indexOf("ObjCRuntimeObject")>-1}())return;n.on("yne-context-menu",function(t,e,n){var r,i,s=[];o.each(e,function(t){if(!t.isHidden){if(2===t.type)return void s.push("------------------");var e=t.isDisabled?"[":" ",n=t.isDisabled?"]":" ";s.push(e+t.index+". "+t.label+n)}}),r="context-menu: \n"+s.join("\n"),(i=window.prompt(r))&&(i=parseInt(i,10),isNaN(i)||n(i))})}},e.prototype._onBlur=function(){var t=this.controller.noteSelection;this.oldRangeWhenBlur=t.getRange()},e.prototype._onFocus=function(){var t=this.controller.noteSelection;this.oldRangeWhenBlur&&t.setRange(this.oldRangeWhenBlur)},e.prototype._setContent=function(t,e,n,r,i){var s=this,a=!0===r.isAsync,l=function(t){t.isAsync=a,s.updateContentSetProgress(t),t.percent>=1&&(s.makeReadOnly(!!s.noteProps.isReadOnly),null!=i&&i({resultCode:1}))};switch(s.reset(),s.contentLoading=!0,s.updateContentSetProgress({percent:0,message:"",isAsync:a}),null==r?s.noteProps=s.options||{}:(s.noteProps={},o.extend(s.noteProps,r)),s.controller.setOptions({note:s.note}),s.noteView.setOptions({isNoteSet:!0,note:s.note,pageType:s.editorProps.pageType,previewMode:s.editorProps.previewMode}),s.setViewMode(s.editorProps.viewMode,!0,!1),s.setBackground(s.noteProps.bgImageId),s.noteProps.isReadOnly||!s.isLegacyHost()&&!s.isCollabEnabled()||s.makeReadOnly(!0),s.controller.setDefaultFont(s.noteProps.defaultFontName,s.noteProps.defaultFontSize),s.noteView.render(),s.updateContentSetProgress({percent:.05,isAsync:a}),t){case S.XML:k.Note.fromXml(e,s.note,n,{progressCallBack:l,isAsync:a});break;case S.HTML:null==k.Note.fromHtml(e,s.note,n,{progressCallBack:l,isAsync:a})&&(k.Note.createBlank(!0,s.note),l({percent:1}));break;case S.JSON:null==k.Note.fromBulbJSON(e,s.note,n,{progressCallBack:l,isAsync:a})&&(k.Note.createBlank(!0,s.note),l({percent:1}));break;default:throw new Error("setContent [type] is invalid")}!0!==s.noteProps.isReadOnly&&!1!==s.noteProps.isReadOnly?s.setReadOnly(s.editorProps.previewMode):s.setReadOnly(s.noteProps.isReadOnly),s.notSetContent=!1},e.prototype._updateNoteViewWrapperSize=function(){if(!this.editorProps||!this.editorProps.previewMode){var t,e=this.$noteViewWrapper,n=$(this.editorProps.parentEl),o="none"!==this.toolbar.$el.css("display")?this.toolbar.$el.outerHeight():0;e&&(t=$(e),t.height(n.height()-o-t.outerHeight()+t.height()))}},e}(l)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(1),r=n(8),i=n(13),s=n(65),a=n(17),l=n(109),c=n(2),u=c.BlockTypes,p=c.NoteRange;return e.View.extend({className:"bulb__link-view",templateName:"link_view",zoom:1,events:{"click .bulb__link-confirm-button":"onConfirmButtonClick","click .bulb__link-modify-button":"onModifyButtonClick","click .bulb__link-remove-button":"onRemoveButtonClick","keydown .bulb__link-input":"onKeyDown","click a[href]":"_onAnchorClick",mousedown:"onMouseDown",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},initialize:function(t){var e=this;e.editor=t.editor,e.on("link-menu-show",e.timeoutToShowMenu),e.on("link-menu-hide",e.timeoutToHideMenu),e.bindDocumentEvents(),e.modifyMode=!1,e.on("locked-change",e.recalPosition),r(window).on("resize",e.recalPosition.bind(e))},render:function(){var t,e=this,n=e.$el;t=i.render("common",e.templateName,{link:l.safeHref(e.link),isReadOnly:e.editor.isReadOnly()}),n.html(t),e.menuPreviewLink=n.find(".bulb__hover-menu-show-link"),e.menuModifyLink=n.find(".bulb__hover-menu-modify-link"),e.input=n.find(".bulb__link-input"),e.hideModifyMenu()},bindDocumentEvents:function(){var t=this;o.bindAll(t,"onDocumentMouseDown"),r(document).on("mousedown",t.onDocumentMouseDown)},onKeyDown:function(t){var e=this;t.stopPropagation(),s.isMatch("enter",t.keyCode)&&(t.preventDefault(),e.onConfirmButtonClick())},onDocumentMouseDown:function(){this.fadeOutMenu()},onMouseDown:function(t){t.stopPropagation()},onConfirmButtonClick:function(){var t=this,e=t.range,n=l.safeHref(r(t.input).val());if(n===t.link)return void t.fadeOutMenu();window.focus(),n&&t.editor.execCommand("comp.InsertLink",{src:n,range:e}),t.fadeOutMenu()},onRemoveButtonClick:function(){var t=this,e=t.range,n={href:"",color:"#393939",underline:!1};u.isCatalogue(t.block)?t.editor.execCommand("atom.SetCatalogueHref",{range:e,block:t.block,href:null}):t.editor.execCommand("comp.ApplyStyles",{range:e,inlineStyles:n}),t.fadeOutMenu()},onModifyButtonClick:function(){var t=this,e=t.editor.getEditorProps(),n=t.editor.note,r=t.range.getDataAsPlain(n),i={text:r,url:t.link};t.hidePreviewMenu(),e.disableInsertLink||t.showModifyMenu(),t.editor.trigger("yne-before-insert-link",i,function(e){var n,r=e.url,i=e.text;o.isString(r)&&(n=l.safeHref(r.trim()))&&t.editor.execCommand("comp.InsertLink",{src:n,text:i,range:t.range})})},showMenu:function(t){var e=this,n=t.range.clone(),o=t.linkNode.href;if(u.isCatalogue(t.block)&&(o=t.block.getViewHref()),!e.modifyMode&&o){var r=new RegExp("^note://");o.match(r)||(e.hideTimerId&&(clearTimeout(e.hideTimerId),e.hideTimerId=null),e.link&&e.hideMenu(),e.linkNode=t.linkNode,e.link=o,e.block=t.block,e.blockId=t.block.getId(),e.range=new p({startRange:n,endRange:n}),e.render(),e.showPreviewMenu())}},recalPosition:function(){var t=this;t.link&&t.modifyMode&&t.setPosition()},setPosition:function(){var t,e,n,i,s,l,c,u,p,d,h,f,g,m=this,_=m.linkNode,b=m.editor.noteView,y=m.editor.getNoteViewWrapper(),v=this.editor.getNoteViewWrapper(),w=a.IS_PC?this.editor.getNoteViewFrame().offset():this.editor.noteView.$el.offset();t=r(_).offset(),t.left=t.left-v.offset().left+v.scrollLeft()/m.zoom,t.top=t.top-w.top,e=t.top+r(_).outerHeight(),n=t.left+r(_).outerWidth()/2,c=t.left,h=m.$el.find(".bulb__hover-menu-before"),s=r(h[0]).outerWidth()/2,l=r(h[0]).outerHeight(),u=e+l,n-c-s<15&&(c=n-15-s),p=m.modifyMode?m.$el.find(".bulb__hover-menu-modify-link .bulb__hover-menu-body").outerWidth():m.$el.find(".bulb__hover-menu-show-link .bulb__hover-menu-body").outerWidth(),d=b.$el.outerWidth()-30,y.hasClass("bulb__read-mode")&&(d+=parseInt(y.find(".bulb__note-view-frame").css("margin-left"))),c+p>d&&(c=d-p),i=n-c-s,f=r(_).outerHeight(),g=parseFloat(r(_).css("line-height")),f>g&&(c=t.left-15-s,i=15),m.$el.css("left",c),m.$el.css("top",u),o.each(h,function(t){r(t).css("left",i)})},setZoom:function(t){var e=this;e.zoom=t,e.$el.css("zoom",e.zoom)},showPreviewMenu:function(){var t=this,e=t.menuPreviewLink;t.setPosition(),r(e).show()},hidePreviewMenu:function(){var t=this,e=t.menuPreviewLink;r(e).hide()},fadeOutPreviewMenu:function(){var t=this,e=t.menuPreviewLink;r(e).fadeOut()},showModifyMenu:function(){var t=this,e=t.menuModifyLink;t.modifyMode=!0,t.editor.controller.lockBlockById(t.blockId),t.setPosition(),r(e).show()},hideModifyMenu:function(){var t=this,e=t.menuModifyLink;r(e).hide(),t.modifyMode=!1},fadeOutModifyMenu:function(){var t=this,e=t.menuModifyLink;r(e).fadeOut(),t.modifyMode=!1},hideMenu:function(){var t=this;t.stay||(t.hideModifyMenu(),t.hidePreviewMenu(),t.link=null)},fadeOutMenu:function(){var t=this;t.fadeOutModifyMenu(),t.fadeOutPreviewMenu(),t.link=null,t.linkNode=null,t.hideTimerId=null,t.blockId=null,t.block=null,t.showTimerId&&(clearTimeout(t.showTimerId),t.showTimerId=null)},onMouseEnter:function(t){var e=this;t.stopPropagation(),e.hideTimerId&&(clearTimeout(e.hideTimerId),e.hideTimerId=null)},onMouseLeave:function(){this.trigger("link-menu-hide")},timeoutToHideMenu:function(){var t=this;t.modifyMode||t.hideTimerId||(t.hideTimerId=setTimeout(function(){t.fadeOutMenu()},100))},timeoutToShowMenu:function(t){var e=this;e.showTimerId||(e.showTimerId=setTimeout(function(){e.showMenu(t)},500))},_onAnchorClick:function(t){var e,n=t.currentTarget;t.preventDefault(),(e=n&&n.getAttribute("href"))&&this.editor.trigger("yne-open-link",e)},destroy:function(){this.editor&&(this.editor=null),this.options&&this.options.editor&&(this.options.editor=null),r(document).off("mousedown")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(29),n(4),n(15)],void 0!==(r=function(t,e,n,o,r,s){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.filterItems=function(t){var o=!1,r=[];return n.each(t,function(t){var i=t;switch(t&&t.simplify&&(i=t.simplify()),i.type){case s.TYPE.SPLIT:o||(o=!0,r.push(i));break;case s.TYPE.SUBMENU:i.isHidden||(o=!1,i=n.extend({},i,{items:e.filterItems(i.items)}),r.push(i));break;default:i.isHidden||(o=!1,r.push(i))}}),r},e.prototype.addItems=function(t){this.items=this.items.concat(t),n.each(t,this.prepareItem.bind(this))},e.prototype.onContextMenu=function(t,o){var r,i=this,s={left:t.pageX,top:t.pageY};i.resetAll(),n.invoke(i.items,"checkStatus",t,o||{}),r=e.filterItems(i.items),i.editor.trigger("yne-context-menu",s,r,function(t){i.select(t),i.resetAll()})},e.prototype.prepareItem=function(t){var e=this,o=t.keyHandlerName;t.index=e.indexArray.length,t.editor=e.editor,o&&!e.editor.getController().hasKeyHandler(o)&&r.error("The keyHandlerName ["+o+"] of ContextMenuItem ["+t.name+"] does not exist!"),e.indexArray.push(t),t.type===s.TYPE.SUBMENU&&n.each(t.items,e.prepareItem.bind(e))},e.prototype.resetAll=function(){var t;n.map(this.items,function(e){if((t=e.reset)&&n.isFunction(t))return t.apply(e)})},e.prototype.select=function(t){var e=this.indexArray[t];if(e&&!e.items&&e.select)return e.select()},e.prototype.destroy=function(){this.editor&&(this.editor=null),this.options&&this.options.editor&&(this.options.editor=null),this.items.forEach(function(t){t&&t.editor&&(t.editor=null)})},e.prototype.initialize=function(t){this.editor=t.editor,this.items=[],this.indexArray=[]},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(150),r=n(8),i=n(2),s=i.BlockTypes,a=function(t,e){return t=r.trim(t||""),e=r.trim(e||""),!(!t||!e)&&(t===e||(o.startsWith(e,t)||o.endsWith(e,t)||o.startsWith(t,e)||o.endsWith(t,e)))},l={imageBlock:function(t,e,n){var o,r,i=t.getNoteRange();i&&i.isInSingleBlock()&&(o=i.getStartBlockRange(),r=o.block,s.isImage(r)&&(n.imgBlock=r,n.isImgAttachBlock=!0))},attachmentBlock:function(t,e,n){var o,r,i=t.getNoteRange();i&&i.isInSingleBlock()&&(o=i.getStartBlockRange(),r=o.block,s.isAttachment(r)&&(n.attachmentBlock=r,n.isImgAttachBlock=!0))},macroBlock:function(t,e,n){var o,r,i=t.getNoteRange();i&&i.isInSingleBlock()&&(o=i.getStartBlockRange(),r=o.block,s.isMacro(r)&&(n.macroBlock=r,n.isMacroBlock=!0))},tableBlock:function(t,n,o){var r,i,a,l,c=t.getNoteRange();if(c&&c.isInSingleBlock()&&(i=c.getStartBlockRange(),l=i.block,s.isTable(l))){if(!(a=i.getAsRectRange()))return;if(r={},a.onlyMergePointAndCell()&&(r.onlyMergePointAndCell=!0),a.isOnlyCell()){var u=a.getFirstCell().cell;e.extend(r,{cell:u,type:u.getType()})}o.tableInfo=r}},hrefInfo:function(t,e,n){var o,i,s,l,c,u,p,d,h,f=e.target,g=r(f);g.is(".bulb__block-view a *")&&(o=function(t,e){if(t&&t.parentNode)for(var n=t.parentNode;n;){if(n.webkitMatchesSelector&&n.webkitMatchesSelector(e))return n;n=n.parentNode}}(f,"a"))&&(i=document.createRange(),i.selectNodeContents(o),s=this.noteView.convertToNoteRange(i),i.detach(),s&&s.isInSingleBlock()&&(l=s.getStartBlockRange(),c=l.block,c&&c.getCommonInlineStyle&&(u=c.getCommonInlineStyle("href",l)),u&&(p=l.getDataAsPlain(),d=a(u,p),d&&(h=c.getCommonInlineStyles(l)),n.hrefInfo={noteRange:s,href:u,hrefAsLinkText:d,commonStyles:h})))},isRangeCollapsed:function(t,e,n){var o=t.getNoteRange();o&&(n.isRangeCollapsed=o.isCollapsed())}};return function(t){var n={};return e.each(l,function(e){e(t,event,n)}),n}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(323),n(50),n(11),n(35),n(17),n(151),n(4),n(338),n(2)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d){"use strict";return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isSessionInitDone=!1,e}return i(e,t),e.prototype.buildCollabProperties=function(){var t={};return null!=this.collabEngine?t=this.collabEngine.buildCollabProperties(null):t.coreEditor=this,t.isCollabEnabled=this.isCollabEnabled(),t},e.prototype.buildCollabSession=function(t,e){var n=this,o=t.collabServer,r=t.userInfo;null!=this.collabEngine&&(this.collabEngine.closeCollabSession(null,null),this.collabEngine=null),this._initCollabEngine(),t.collabServer=o.address,t.useWSS=!!o.useWSS,t.nickname=r.nickname,t.userId=r.userId,t.portraitUrl=r.portraitUrl,this.collabEngine.buildCollabSession(t,function(t){1===t.resultCode&&n.trigger("yne-session-built",t.isCollabStarted),e(t)})},e.prototype.canRemoveFormat=function(){throw new Error("should be overridden.")},e.prototype.closeCollabSession=function(t,e){null!=this.collabEngine&&this.collabEngine.closeCollabSession(t,e),this.collabEngine=null},e.prototype.getCollabId=function(){if(null!=this.collabEngine)return this.collabEngine.getCollabId()},e.prototype.getLastNotOwnExecCmd=function(){if(null!=this.collabEngine)return this.collabEngine.getLastNotOwnExecCmd()},e.prototype.getModifiers=function(t,e){return null!=this.collabEngine?this.collabEngine.getModifiers(t,e):{status:s.ERRORID_COLLAB_ENGINE_NULL}},e.prototype.getCollabContent=function(t,e){var n={status:0,resultCode:0},o=this;return null!=this.collabEngine?(e&&(this.isReadOnly()||this.makeReadOnly(!0),this.noteView.removeNote()),this.isContentLoading()?this.getCollabContentTimer=setTimeout(function(){o.getCollabContent(t,!1)},1e3):(n=this.collabEngine.getCollabContent(t),n.status=n.resultCode),n):{status:s.ERRORID_COLLAB_ENGINE_NULL}},e.prototype.hasCachedDataCmd=function(){return null!=this.collabEngine&&this.collabEngine.hasCachedDataCmd()},e.prototype.isLastOwnDataCmdExecuted=function(){if(null!=this.collabEngine)return this.collabEngine.isLastOwnDataCmdExecuted()},e.prototype.isValidLocalDataCmd=function(t){if(null!=this.collabEngine)return this.collabEngine.isValidLocalDataCmd(t)},e.prototype.noteSetNotification=function(){var t=this;null!=this.collabEngine&&this.collabEngine.sendContentSetInfo(this.note.getFileVersion(),function(e){e.result===s.CJSON_INITIALIZE_DONE&&(t.isSessionInitDone=!0),t.trigger("yne-session-initialized",e.result,e)})},e.prototype.pushLocalDataCommand=function(t,e){null!=this.collabEngine&&this.collabEngine.pushLocalDataCommand(t,e)},e.prototype.saveNotification=function(t,e){null!=this.collabEngine&&this.collabEngine.saveNotification(t,e)},e.prototype.sendBlockLockInfo=function(t){null!=this.collabEngine&&this.collabEngine.sendOwnLockInfo(t)},e.prototype.sendCachedDataCommand=function(){null!=this.collabEngine&&this.collabEngine.sendCachedDataCmd(!1)},e.prototype.updateUserInfo=function(t){var e=this.getEditorProps();null!=t&&(n.extend(e.userInfo,t),null!=this.collabEngine&&this.collabEngine.updateSessionInfos(t))},e.prototype.applyCollabCmdRedoUndo=function(t){this.controller.cmdManager.applyCollabCmdRedoUndo(t)},e.prototype.buildNoteRangeFromJSON=function(t){return d.RangeUtil.buildNoteRangeFromJSON(t,this.note)},e.prototype.createDataCommand=function(t,e){return this.controller.createCmd(t,e)},e.prototype.dropRedoCmd=function(){this.controller.cmdManager.dropRedoCmd()},e.prototype.dropUndoCmds=function(t,e,n){this.controller.cmdManager.dropUndoCmds(t,e,n)},e.prototype.getClientId=function(){return this.clientId},e.prototype.getDefaultNoteRange=function(){return this.controller.defaultNoteRange()},e.prototype.getInnerBlocksWithEdge=function(t){var e,n,o;return t&&d.HeaderFooterRange.isHeaderFooterRange(t.getStartBlockRange())?[t.getStartBlockRange().block]:(d.NoteRange.isNoteRange(t)&&(e=t.getStartBlockRange().block,n=t.getEndBlockRange().block,o=this.note.getInterBlocks(e,n,!0)),o)},e.prototype.getNextBlockById=function(t){var e=null,n=this.getBlockById(t);return n&&(e=this.note.getNextBlock(n)),e},e.prototype.getNoteVersion=function(){return this.note?this.note.getFileVersion():null},e.prototype.getPreBlockById=function(t){var e=null,n=this.getBlockById(t);return n&&(e=this.note.getPreBlock(n)),e},e.prototype.isListItem=function(t){return d.BlockTypes.isListItem(t)},e.prototype.isNoteValidForCollab=function(){return this.controller.note.isValidForCollab()},e.prototype.isReadyForEdit=function(){return!0===this.isSessionInitDone},e.prototype.isContentLoading=function(){return!0===this.contentLoading},e.prototype.isTable=function(t){return d.BlockTypes.isTable(t)},e.prototype.isTodo=function(t){return d.BlockTypes.isTodo(t)},e.prototype.reset=function(){null!=this.getCollabContentTimer&&clearTimeout(this.getCollabContentTimer),t.prototype.reset.call(this)},e.prototype.setNoteVersion=function(t){this.note.setFileVersion(t),this.trigger("yne-note-version-change",t)},e.prototype.buildBlockRangeFromJSON=function(t){var e,n;return t&&t.blockId?(e=t.blockId,(n=this.getBlockById(e))?d.BlockRangeUtil.createRangeByBlock({block:n,end:t.endPosition,rect:t.simpleValue1,start:t.startPosition,type:t.simpleValue2}):void 0):void u.error("The blockRangeJSON.blockId is not valid!")},e.prototype.buildInnerCommandFromJSON=function(t,e){var o=t[s.CJSON_ACTION],r={};return r.collabProperties=n.clone(e.collabProperties),r.collabProperties.cmdJSON=t,this.createDataCommand(o,r)},e.prototype.getBlockById=function(t){return this.note.getBlockById(t)},e.prototype.getEditorProps=function(){return this.editorProps},e.prototype.getNoteProps=function(){return this.noteProps},e.prototype.getNote=function(){return this.note},e.prototype.getNoteView=function(){return this.noteView},e.prototype.isCollabEnabled=function(){return!(null==this.noteProps||!this.noteProps.isCollabEnabled)},e.prototype.isIdleTimeout=function(){return this.idleTimeout},e.prototype.isMyOwnLockedBlock=function(t){var e,n=!1,o=this._getMyOwnBlockId();return null!=t&&null!=o&&""!==o&&(d.NoteRange.isNoteRange(t)&&t.isInSingleBlock()?e=t.getStartBlockRange().getBlockId():d.BlockRangeUtil.isBlockRange(t)&&(e=t.getBlockId()),e&&e===o&&!this.isTable(this.getBlockById(e))&&(n=!0)),n},e.prototype.render=function(){t.prototype.render.call(this),this.isCollabEnabled()||this.updateNoteViewVisibility(!0)},e.prototype.setIdleTimeout=function(t){t&&(this.noteView.render(),this.setReadOnly(!0)),this.idleTimeout=t},e.prototype.setOuterAppInfo=function(t){this.outerAppInfo=t},e.prototype.getOuterAppInfo=function(){return this.outerAppInfo},e.prototype.updateEditorOptions=function(t){var e=this;if(e.options||(e.options=t?n.clone(t):{}),t)for(var o in t)t.hasOwnProperty(o)&&("shareKey"===o&&e.options[o]!==t[o]&&(e.idleTimeout=!1),e.options[o]=t[o]);e.options.isCollabEnabled=c.parseToBoolean(e.options.isCollabEnabled,!0),e.options.isCollabEnabled||(e.idleTimeout=!1),e.options.hideAttendeeHint=c.parseToBoolean(e.options.hideAttendeeHint,!1),e.options.disableBackground=c.parseToBoolean(e.options.disableBackground,!1),e.options.useWSS=c.parseToBoolean(e.options.useWSS,!1),e.options.pageType=c.parseToPageType(e.options.pageType),e.options.sessionId||(e.options.sessionId=e.clientId),e.options.readOnly=c.parseToBoolean(e.options.readOnly,!1),e.options.hasOriginFile=c.parseToBoolean(e.options.hasOriginFile,!1),n.extend(e.editorProps,e.options)},e.prototype.notifyErrorToHost=function(t){this.trigger("yne-useraction-failed",t)},e.prototype.onDocSelectionChange=function(){},e.prototype.recoverFromIdleTimeout=function(){var t;this.idleTimeout&&this.isCollabEnabled()&&(t={code:0,customCode:8e3,shareKey:this.getCollabId()},this.trigger("yne-session-closed",t))},e.prototype.testSendMsgToCollabServer=function(t){null!=this.collabEngine&&this.collabEngine.sendMessageToCollabServer(t)},e.prototype.bindEventsForController=function(){var t=this,e=this.controller;e.on("command-exec",function(e,n){if(!e||!e.name)return void u.error("The command is not valid",e);t.isCollabEnabled()?(n=n||{},n.collabProperties=n.collabProperties||{},n.collabProperties.finalNoteVersion&&t.setNoteVersion(n.collabProperties.finalNoteVersion),e&&e.effected&&(!n.collabProperties.isCollabCmd||n.collabProperties.isCollabCmd&&n.collabProperties.isOwnCmd&&!n.collabProperties.isLocalExecutedCmd)&&(t.contentChanged=!0,t.trigger("yne-content-change"))):e&&e.effected?(t.contentChanged=!0,t.trigger("yne-content-change")):u.warn("The command has no effected",e)}),a.bubble(["redo-stack-change","undo-stack-change","selectstart","mouse-down","command-exec","esc","yne-clipboard-status","yne-clipboard-error","yne-get-clipboard","yne-clipboard-set","color-picker-show","yne-user-action-collection","cell-edit-view-enter","cell-edit-view-exit","cell-edit-view-history-change"],e,this)},e.prototype._getMyOwnBlockId=function(){var t=this.collabEngine.getMyOwnBlockIds();return null!=t&&t.length>0?t[0]:null},e.prototype._initCollabEngine=function(){var t=this;t.idleTimeout=!1,t.isSessionInitDone=!1,t.collabEngine=new o.default(t,n,u),t.collabEngine.on(r.default.WS_CLOSED,function(e){8e3===e.customCode&&l.IS_PC?t.setIdleTimeout(!0):t.trigger("yne-session-closed",e)}),t.collabEngine.on(r.default.DATACMD_FAILURE,function(e){t.trigger("yne-useraction-failed",e.message)}),t.collabEngine.on(r.default.DATACMD_SUCCESS,function(e){t.trigger("yne-datacommand-success",e.rawCollabJSON)}),t.collabEngine.on(r.default.LOCK_LOCKED,function(e){var n,o=e.sessionProps;null!=o&&null!=o.lockedBlkIds&&o.lockedBlkIds.length>0&&(n=o.lockedBlkIds[0],t._lockBlock(n,o))}),t.collabEngine.on(r.default.LOCK_RELEASED,function(e){t._unlockBlock(e.unlockedBlockId)}),t.collabEngine.on(r.default.SESSION_CHNAGED,function(e){null!=e&&e.length>0&&n.each(e,function(e){e.propUpdated&&null!=e.nickname&&null!=e.lockedBlkIds&&e.lockedBlkIds.length>0&&e.sessionId!==t.clientId&&(e.lockUpdated=!0,t._lockBlock(e.lockedBlkIds[0],e))}),t.trigger("yne-collabsession-change",e)})},e.prototype._lockBlock=function(t,e){var n=this.note,o=this.getBlockById(t);null==o||this.isTable(o)||n.lockBlock(t,e)},e.prototype._unlockBlock=function(t){this.note.unlockBlock(t)},e}(p)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(324),n(332),n(32),n(50),n(333),n(36),n(334),n(56)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g,m,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var b=function(){},y=function(t){function e(e,i,d){var h=t.call(this)||this;if(h.localCmdPerSec=0,null==i)throw new Error("Missing underscorejs");if(null==d)throw new Error("Missing logger instance");return g.ExternalLibs.setUnderscore(i),g.ExternalLibs.setLogger(d),h.isLocalCmdTooFast=!1,h.coreEditor=e,h.clientId=h.coreEditor.getClientId(),h.keyTranslator=new a.CollabKeyTranslator,h.collabPropsHandler=new o.CmdCollabPropsHandler(h.clientId,h.keyTranslator,h.coreEditor),h.wsClient=new m.WebSocketClient(h.collabPropsHandler),h.cmdMergeHandler=new r.CmdMergeHandler,h.nondataCmdHandler=new u.NonDataCmdHandler(h.wsClient),h.sessionHandler=new l.CollabSessionHandler(h.clientId,h.nondataCmdHandler),h.blockLockHandler=new n.BlockLockHandler(h.clientId,h.sessionHandler,h.nondataCmdHandler),h.conflictHandler=new s.CollabConfilctHandler(h.coreEditor,h.blockLockHandler),h.redoundoHandler=new p.RedoUndoHandler(h.coreEditor),h.dataCmdHandler=new c.DataCmdHandler(h.coreEditor,h.blockLockHandler,h.conflictHandler,h.redoundoHandler,h.cmdMergeHandler,h.keyTranslator,h.wsClient),h._createEventEmitter(),h}return i(e,t),e.prototype.buildCollabProperties=function(t){return this.collabPropsHandler.buildCollabProperties(t)},e.prototype.buildCollabSession=function(t,e){var n,o,r=this,i={resultCode:_.CustomResultCode.NO_ERROR};t.sessionId=this.clientId,e=e||b,null!=this.callbackBuildCollabSession&&(i.resultCode=_.CustomResultCode.STOP_CALL,i.message="StopPreviousCall",this.callbackBuildCollabSession(i)),this.callbackBuildCollabSession=function(t){clearTimeout(r.timeoutBuildCollabSession),r.wsClient.off(h.default.SESSION_INIT_BUILT,n),r.wsClient.off(h.default.WS_CLOSED,o),e(t)};try{o=function(t){r.callbackBuildCollabSession(t)},this.wsClient.once(h.default.WS_CLOSED,o),n=function(t){r.callbackBuildCollabSession(t)},this.nondataCmdHandler.once(h.default.SESSION_INIT_BUILT,n),this.wsClient.connect(t),this.timeoutBuildCollabSession=setTimeout(function(){var t={resultCode:_.CustomResultCode.TIME_OUT};t.message="TimeOut",r.callbackBuildCollabSession(t)},5e3)}catch(t){i.resultCode=_.CustomResultCode.EXCEPTION,i.message=t.message||t,this.callbackBuildCollabSession(i)}},e.prototype.closeCollabSession=function(t,e,n){var o={resultCode:_.CustomResultCode.NO_ERROR};n=n||b;try{this.wsClient.close(t,e),this.blockLockHandler.destroy(),this.blockLockHandler=null,this.collabPropsHandler.destroy(),this.collabPropsHandler=null,this.conflictHandler.destroy(),this.conflictHandler=null,this.cmdMergeHandler.destroy(),this.cmdMergeHandler=null,this.dataCmdHandler.destroy(),this.dataCmdHandler=null,this.nondataCmdHandler.destroy(),this.nondataCmdHandler=null,this.redoundoHandler.destroy(),this.redoundoHandler=null,this.sessionHandler.destroy(),this.sessionHandler=null}catch(t){o.resultCode=_.CustomResultCode.EXCEPTION,o.message=t.message||t}n(o)},e.prototype.isLastOwnDataCmdExecuted=function(){return this.dataCmdHandler.isLastOwnCmdExecuted()},e.prototype.sendContentSetInfo=function(t,e){var n=this,o={collabId:this.wsClient.getCollabId(),isReadOnly:this.wsClient.isReadOnlySession(),nickname:this.wsClient.getNickname(),result:f.ConstValueInJSON.SESSION_INIT_DONE,resultCode:_.CustomResultCode.NO_ERROR,sessionId:this.wsClient.getSessionId(),userId:this.wsClient.getUserId()},r={};e=e||b,null!=this.callbackSendContentSetInfo&&(o.resultCode=_.CustomResultCode.STOP_CALL,o.message="StopPreviousCall",this.callbackSendContentSetInfo(o)),this.callbackSendContentSetInfo=function(t){clearTimeout(n.timeoutSendContentSetInfo),n.nondataCmdHandler.off(h.default.SESSION_INIT_DONE,n.callbackSendContentSetInfo),e(t)},this.coreEditor.isNoteValidForCollab()?(r.noteVersion=t,this.nondataCmdHandler.once(h.default.SESSION_INIT_DONE,this.callbackSendContentSetInfo),this.nondataCmdHandler.sendCollabNonDataCommand(_.CmdNames.NONDATACMD_CLINTPONG,r),this.timeoutSendContentSetInfo=setTimeout(function(){o.resultCode=_.CustomResultCode.TIME_OUT,null!=n.callbackSendContentSetInfo&&n.callbackSendContentSetInfo(o)},5e3)):(o.result=f.ConstValueInJSON.SESSION_INIT_INVALID,this.callbackSendContentSetInfo(o))},e.prototype.getCollabContent=function(t){var e=this,n={resultCode:0},o=function(n){n.resultCode===_.CustomResultCode.NO_ERROR&&(n.version=e.coreEditor.getNoteVersion(),n.content=e.coreEditor.getXmlContent(),n.sessionCount=e.sessionHandler.getSessionCount()),null!=e.callbackGetCollabContent&&e.dataCmdHandler.off(h.default.DATACMD_NO_PENDING,e.callbackGetCollabContent),e.callbackGetCollabContent=null,clearTimeout(e.timeoutGetCollabContent),t(n)};return t=t||b,this.coreEditor.isContentLoading()?(n.resultCode=0,o(n)):this.dataCmdHandler.hasPendingCmds()?this.wsClient.isOpened()?(n.resultCode=0,null==this.callbackGetCollabContent&&(this.callbackGetCollabContent=function(t){null==t&&(t={resultCode:_.CustomResultCode.NO_ERROR}),o(t)},this.dataCmdHandler.once(h.default.DATACMD_NO_PENDING,this.callbackGetCollabContent),this.timeoutGetCollabContent=setTimeout(function(){n.resultCode=_.CustomResultCode.TIME_OUT,n.message="TimeOut",null!=e.callbackGetCollabContent&&e.callbackGetCollabContent(n)},6e4))):(n.resultCode=_.WSCustomCode.COLLAB_SESSION_CLOSED,o(n)):(n.resultCode=_.CustomResultCode.NO_ERROR,o(n)),n},e.prototype.getModifiers=function(t,e){var n=this,o={status:0,resultCode:_.CustomResultCode.NO_ERROR};return e=e||b,null!=this.callbackGetModifiers&&(o.resultCode=_.CustomResultCode.STOP_CALL,o.status=2,o.message="StopPreviousCall",this.callbackGetModifiers(o)),this.callbackGetModifiers=function(t){n.nondataCmdHandler.off(h.default.NONDATACMD_MODIFIERS_RESULT,n.callbackGetModifiers),n.callbackGetModifiers=null,clearTimeout(n.timeoutGetModifiers),e(t)},o=this.nondataCmdHandler.getModifiers(t),0!==o.status?(e(o),o):(this.nondataCmdHandler.once(h.default.NONDATACMD_MODIFIERS_RESULT,this.callbackGetModifiers),this.timeoutGetModifiers=setTimeout(function(){null!=n.callbackGetModifiers&&(o.resultCode=_.CustomResultCode.TIME_OUT,o.status=2,o.message="TimeOut",n.callbackGetModifiers(o))},5e3),o)},e.prototype.saveNotification=function(t,e){var n={};n.noteVersion=t,n.isHistorySave=!!e,this.nondataCmdHandler.sendCollabNonDataCommand(_.CmdNames.NONDATACMD_NOTESAVE,n)},e.prototype.getLastNotOwnExecCmd=function(){return this.dataCmdHandler.getLastNotOwnExecCmd()},e.prototype.getMyOwnBlockIds=function(){return this.blockLockHandler.getOwnBlockIds()},e.prototype.sendOwnLockInfo=function(t){var e={};e.lockedBlockId=t,e.sessionId=this.clientId,this.nondataCmdHandler.sendCollabNonDataCommand(_.CmdNames.NONDATACMD_COLLABINFO,e)},e.prototype.sendCachedDataCmd=function(t){this.dataCmdHandler.sendCachedDataCommand(t)},e.prototype.hasCachedDataCmd=function(){return this.dataCmdHandler.hasPendingCmds()},e.prototype.pushLocalDataCommand=function(t,n){var o=_.CustomResultCode.NO_ERROR;return o=this.dataCmdHandler.pushLocalDataCommand(t,n),o===_.CustomResultCode.NO_ERROR&&1===this.dataCmdHandler.getCachedCmdCount()&&(this._checkCommandSendDelay(),this._updateCmdSpeed(!0)),o===_.CustomResultCode.NO_ERROR&&t.isLocalExecutedCmd&&++this.localCmdPerSec>e.LACAL_CMD_SPEED_LIMITATION&&(this.isLocalCmdTooFast=!0),o},e.prototype.isValidLocalDataCmd=function(t){var e=!0,n={closeSession:!1,resultCode:_.CustomResultCode.NO_ERROR};return e&&(e=this._isLocalCommandTooFast()),e&&!1===t.isReadyToApply&&(n.message="",n.resultCode=_.DataCmdFailureCode.LOCAL_NOT_READY_APPLY,this.emit(h.default.DATACMD_FAILURE,n),e=!1),e&&!this.wsClient.isOpened()&&(n.resultCode=_.WSCustomCode.SESSION_NOT_OPENED,n.message="",this.emit(h.default.DATACMD_FAILURE,n),e=!1),e&&!this.coreEditor.isNoteValidForCollab()&&(n.resultCode=_.DataCmdFailureCode.LOCAL_INVALID_FOR_COLLAB,n.message="",this.emit(h.default.DATACMD_FAILURE,n),e=!1),e&&!t&&(n.message="",n.resultCode=_.DataCmdFailureCode.LOCAL_EMPTY_CMD,this.emit(h.default.DATACMD_FAILURE,n),e=!1),!e||t.isCollabRedo||t.isCollabUndo||(e=!this._isLocalCommandConflict(t)),e&&(t.isCollabRedo||t.isCollabUndo)&&!1===(e=this.redoundoHandler.ValidateLocalRedoUndo(t))&&(n.message="",n.resultCode=_.DataCmdFailureCode.LOCAL_DIRTY_BLOCKS,this.emit(h.default.DATACMD_FAILURE,n)),e},e.prototype.updateSessionInfos=function(t){this.nondataCmdHandler.sendCollabNonDataCommand(_.CmdNames.NONDATACMD_COLLABINFO,t)},e.prototype.sendMessageToCollabServer=function(t){this.wsClient.send(t)},e.prototype.getCollabId=function(){return this.wsClient.getCollabId()},e.prototype._sendDataCmdFailedMessage=function(t,e){var n={};n.errToClose=e,n.dataCmdErrorCode=t.toString(),this.nondataCmdHandler.sendCollabNonDataCommand(_.CmdNames.NONDATACMD_DATACMDFAILED,n)},e.prototype._createEventEmitter=function(){var t=this;t.wsClient.on(h.default.WS_CLOSED,function(e){t.emit(h.default.WS_CLOSED,e)}),t.nondataCmdHandler.on(h.default.SESSION_INIT_BUILT,function(e){t.emit(h.default.SESSION_INIT_BUILT,e)}),t.nondataCmdHandler.on(h.default.SESSION_INIT_DONE,function(e){t.emit(h.default.SESSION_INIT_DONE,e)}),t.sessionHandler.on(h.default.SESSION_CHNAGED,function(e){g.underscoreInst.each(e,function(e){if(e.propUpdated){var n=t.blockLockHandler.getLockedBlockIdsBy(e.sessionId);null!=n&&n.length>0&&(e.lockedBlkIds=n)}}),t.emit(h.default.SESSION_CHNAGED,e)}),t.blockLockHandler.on(h.default.LOCK_LOCKED,function(e){var n;e.sessionProps&&e.sessionProps.lockedBlkIds&&e.sessionProps.lockedBlkIds.length>0&&(n=e.sessionProps.lockedBlkIds[0]),null!=n&&(e.sessionId===t.wsClient.getSessionId()?t.sendOwnLockInfo(n):t.emit(h.default.LOCK_LOCKED,e))}),t.blockLockHandler.on(h.default.LOCK_RELEASED,function(e){e.sessionId!==t.wsClient.getSessionId()&&t.emit(h.default.LOCK_RELEASED,e)}),t.dataCmdHandler.on(h.default.DATACMD_FAILURE,function(e){t._sendDataCmdFailedMessage(e.resultCode,e.closeSession),t.emit(h.default.DATACMD_FAILURE,e)}),t.dataCmdHandler.on(h.default.DATACMD_SUCCESS,function(e){t.emit(h.default.DATACMD_SUCCESS,e)})},e.prototype._checkCommandSendDelay=function(){!this.isLocalCmdTooFast&&null!=this.dataCmdHandler&&this.dataCmdHandler.getCmdDelay()>e.MAX_CMD_DELAY_MILLIS?this.wsClient.close(_.WSCustomCode.FAILED_SEND_LOCAL_CMD,"ExceedMaxSendDelay"):null!=this.dataCmdHandler&&this.dataCmdHandler.getCachedCmdCount()>0&&this.wsClient.isOpened()&&window.setTimeout(this._checkCommandSendDelay.bind(this),e.MAX_CMD_DELAY_MILLIS)},e.prototype._isLocalCommandConflict=function(t){var e=!1,n=t.getStartingRange(),o=t.getCollabProps();if(n&&(e=this.conflictHandler.isNoteRangeConflict(n,t.name,o))){var r={closeSession:o.errorToClose,message:o.dataCmdError,resultCode:o.errorCode};this.emit(h.default.DATACMD_FAILURE,r)}return e},e.prototype._isLocalCommandTooFast=function(){var t=!0,e=this.dataCmdHandler.getCachedCmdCount();if(this.isLocalCmdTooFast&&e>0){t=!1,e=this.dataCmdHandler.getCachedCmdCount();var n={closeSession:!1,message:""+e,resultCode:_.DataCmdFailureCode.LOCAL_CMD_TOO_FAST};this.emit(h.default.DATACMD_FAILURE,n),this.sendCachedDataCmd(!1)}return t},e.prototype._updateCmdSpeed=function(t){var n,o=0;null!=this.dataCmdHandler&&(o=this.dataCmdHandler.getCachedCmdCount()),t&&(this.isLocalCmdTooFast=!1),o>0?(n=o/e.LACAL_CMD_SPEED_LIMITATION,n<1&&(n=1),this.localCmdPerSec=0,this.wsClient.isOpened()&&window.setTimeout(this._updateCmdSpeed.bind(this,!1),1e3*n)):this.isLocalCmdTooFast=!1},e.LACAL_CMD_SPEED_LIMITATION=20,e.MAX_CMD_DELAY_MILLIS=4e3,e}(d.YEvent);e.default=y}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(56),n(36),n(110),n(32),n(50)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var n=t.call(this)||this;if(n.retryIntervalMilliSec=1e3,n.retryMaxCount=2,null==e)throw new Error("wsClient should NOT be null");return n.wsClient=e,n.callbackWSOnMessage=n._execCollabNondataCommand.bind(n),n.wsClient.on(a.default.WS_MESSAGE,n.callbackWSOnMessage),n}return i(e,t),e.prototype._queueCollabCmdJSON=function(t){var e;return e=this._sendCollabJSON(t),e&&(t.sendingToCollabServerMillis=Date.now(),t.retryRemainedCount=this.retryMaxCount,this.retriableCmdsQueue.push(t),null==this.retryCollabJSONDispatcher&&(this.retryCollabJSONDispatcher=setTimeout(this._handleCollabJSONRetry.bind(this),this.retryIntervalMilliSec))),e},e.prototype.destroy=function(){this.wsClient.off(a.default.WS_MESSAGE,this.callbackWSOnMessage),this.wsClient=null,this.removeAllListeners(null)},e.prototype.getModifiers=function(t){return this.wsClient.isOpened()?this.modifiers&&1===this.modifiers.status&&this.modifiers.endVersion===t||(this.modifiers={resultCode:n.CustomResultCode.NO_ERROR,status:0},this._requestModifiers(t)||(this.modifiers.status=2)):this.modifiers={resultCode:n.WSCustomCode.SESSION_NOT_OPENED,status:2},this.modifiers},e.prototype.sendCollabNonDataCommand=function(t,e){var o,r=!0;return o=this._buildCollabCmdJSON(t,e),t===n.CmdNames.NONDATACMD_GETMODIFIERS?this._isModifiersReqeustSent(e.endNoteVersion)||(this._clearRetryQueueByAction(t),r=this._queueCollabCmdJSON(o)):r=t===n.CmdNames.NONDATACMD_COLLABINFO||t===n.CmdNames.NONDATACMD_NOTESAVE?this._queueCollabCmdJSON(o):this._sendCollabJSON(o),r},e.prototype._execCollabNondataCommand=function(t){var e,o=t.collabCmdsJSON,r=t.collabProps,i=r.cmdSessionId;if(null!=o.nondataCmds){switch(e=o.nondataCmds[0],e.action){case n.CmdNames.NONDATACMD_BLOCKSELECTION:break;case n.CmdNames.NONDATACMD_COLLABCLOSE:var s={resultCode:n.CustomResultCode.NO_ERROR,sessionId:i};this.emit(a.default.SESSION_QUIT,s);break;case n.CmdNames.NONDATACMD_COLLABINFO:this._handleCollabInfo(e,r);break;case n.CmdNames.NONDATACMD_SESSIONINITIALIZED:var l={collabId:this.wsClient.getCollabId(),collabVersion:e.collabVersion,isReadOnly:this.wsClient.isReadOnlySession(),nickname:this.wsClient.getNickname(),result:e.initResult,resultCode:1,sessionId:this.wsClient.getSessionId(),userId:this.wsClient.getUserId()};this.emit(a.default.SESSION_INIT_DONE,l);break;case n.CmdNames.NONDATACMD_LOCKRELEASE:var c={resultCode:n.CustomResultCode.NO_ERROR,sessionId:i,unlockedBlockId:null};this.emit(a.default.LOCK_RELEASED,c);break;case n.CmdNames.NONDATACMD_SEVERPING:this._handleServerPing(e);break;case n.CmdNames.NONDATACMD_GETMODIFIERS:this._handleModifiers(e);break;case n.CmdNames.NONDATACMD_NOTESAVE:this._handleNoteSave(e);break;default:throw new Error("unknown nondata cmd:"+e.action)}this._removeFromRetryQueue(e.cmdId)}},e.prototype._requestModifiers=function(t){var e={};return e.endNoteVersion=t,this.sendCollabNonDataCommand(n.CmdNames.NONDATACMD_GETMODIFIERS,e)},e.prototype._handleCollabJSONRetry=function(){var t,e,r=this,i=!1;o.underscoreInst.each(this.retriableCmdsQueue,function(s){if(!0===i||null==r.wsClient||!1===r.wsClient.isOpened())return void(i=!0);(t=Date.now()-s.sendingToCollabServerMillis)>r.retryIntervalMilliSec&&(e=s.retryRemainedCount,e>0?(delete s.sendingToCollabServerMillis,delete s.retryRemainedCount,r._sendCollabJSON(s),s.sendingToCollabServerMillis=Date.now(),s.retryRemainedCount=e-1):(o.loggerInst.error("NondataCmd-Send Failed after retry:",s),r.wsClient&&r.wsClient.isOpened()&&r.wsClient.close(n.WSCustomCode.FAILED_RECEIVE_COLLAB_CMD,n.WSCustomCode[n.WSCustomCode.FAILED_RECEIVE_COLLAB_CMD]),i=!0))}),i&&(this.retriableCmdsQueue=[]),this.retriableCmdsQueue.length>0?this.retryCollabJSONDispatcher=setTimeout(this._handleCollabJSONRetry.bind(this),this.retryIntervalMilliSec):(clearTimeout(this.retryCollabJSONDispatcher),this.retryCollabJSONDispatcher=null)},e.prototype._sendCollabJSON=function(t){return null!=t&&this.wsClient.send(JSON.stringify(t)),!0},e.prototype._isModifiersReqeustSent=function(t){var e,r;return o.underscoreInst.some(this.retriableCmdsQueue,function(o){return e=o.nondataCmds[0],e.action===n.CmdNames.NONDATACMD_GETMODIFIERS&&e.endVersion===t&&(r=!0,!0)}),r},e.prototype._buildCollabCmdJSON=function(t,e){var o,i=[],s={};switch(o={action:t,cmdId:r.Utils.newGUID()},i.push(o),s.nondataCmds=i,t){case n.CmdNames.NONDATACMD_BLOCKSELECTION:o.blockId=e.selectedBlockId;break;case n.CmdNames.NONDATACMD_COLLABINFO:var a={sessionId:e.sessionId};void 0!==e.nickname&&(a.nickname=e.nickname),void 0!==e.lockedBlockId&&(a.lockedBlkIds=[],a.lockedBlkIds.push(e.lockedBlockId)),void 0!==e.portraitUrl&&(a.portraitUrl=e.portraitUrl),this._buildSessionInfoJSON(o,a);break;case n.CmdNames.NONDATACMD_DATACMDFAILED:o.dataCmdError=e.dataCmdErrorCode,o.errToClose=!!e.errToClose;break;case n.CmdNames.NONDATACMD_CLINTPONG:o.versionUpdate=e.noteVersion;break;case n.CmdNames.NONDATACMD_GETMODIFIERS:o.endVersion=e.endNoteVersion;break;case n.CmdNames.NONDATACMD_NOTESAVE:o.versionUpdate=e.noteVersion,o.isHistorySave=e.isHistorySave;break;default:throw s=null,new Error("Unsupported NondataCmd:"+t)}return s},e.prototype._buildSessionInfoJSON=function(t,e){var n={sessionId:e.sessionId};null!=e.nickname&&(n.nickname=e.nickname),null!=e.portraitUrl&&(n.portraitUrl=e.portraitUrl),null!=e.lockedBlkIds&&e.lockedBlkIds.length>0&&(n.lockedBlkId=e.lockedBlkIds[0]),t.sessionProp=[],t.sessionProp.push(n)},e.prototype._handleCollabInfo=function(t,e){var n=t.sessionProp,r=[];o.underscoreInst.each(n,function(t){var n={sessionId:null};null!=t.lockedBlkId&&(n.lockedBlkIds=[t.lockedBlkId],delete t.lockedBlkId),o.underscoreInst.extend(n,t),null==n.sessionId&&(n.sessionId=e.cmdSessionId),r.push(n)}),this.emit(a.default.SESSION_CHNAGED,r)},e.prototype._handleServerPing=function(t){if(null!=t.collabNoteReady){var e={isCollabStarted:t.collabNoteReady,resultCode:n.CustomResultCode.NO_ERROR,sessionId:this.wsClient.getSessionId()};this.emit(a.default.SESSION_INIT_BUILT,e)}},e.prototype._handleModifiers=function(t){var e=this;this.modifiers.status=1,this.modifiers.startVersion=t.startVersion,this.modifiers.endVersion=t.endVersion,this.modifiers.modifiers=[],o.underscoreInst.each(t.modifiers,function(t){var n={userId:t.userId};e.modifiers.modifiers.push(n)}),this._clearRetryQueueByAction(n.CmdNames.NONDATACMD_GETMODIFIERS),this.emit(a.default.NONDATACMD_MODIFIERS_RESULT,this.modifiers)},e.prototype._clearRetryQueueByAction=function(t){var e;this.retriableCmdsQueue=o.underscoreInst.reject(this.retriableCmdsQueue,function(n){return e=n.nondataCmds[0],e.action===t})||[]},e.prototype._removeFromRetryQueue=function(t){var e;this.retriableCmdsQueue=o.underscoreInst.reject(this.retriableCmdsQueue,function(n){return e=n.nondataCmds[0],e.cmdId===t})||[]},e.prototype._handleNoteSave=function(t){},e}(s.YEvent);e.NonDataCmdHandler=l}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(36),n(32),n(50),n(56)],void 0!==(r=function(t,e,n,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n,o){var i=t.call(this)||this;if(null==e)throw new Error("ownSID cannot be null in BlockLockHandler");return i.lockedBlocksMap={},i.sessionId=e,i.sessionHandler=n,i.nonDataCmdHandler=o,i.sessionHandler.on(r.default.SESSION_LOCK_UPDATE,i._onSessionLockChanged.bind(i)),i.sessionHandler.on(r.default.SESSION_QUIT,i._onSessionQuit.bind(i)),i.nonDataCmdHandler.on(r.default.LOCK_RELEASED,function(t){i._releaseLockOf(t.sessionId)}),i}return i(e,t),e.prototype.destroy=function(){this.lockedBlocksMap=null,this.sessionHandler=null,this.nonDataCmdHandler=null,this.removeAllListeners(null)},e.prototype.isBlockLockedBy=function(t,e){var n,o=!1;return null!=t&&null!=e&&null!=(n=this.lockedBlocksMap[t])&&n===e&&(o=!0),o},e.prototype.getOwnBlockIds=function(){var t=this,e=[];return n.underscoreInst.each(this.lockedBlocksMap,function(n,o){n===t.sessionId&&e.push(o)}),e},e.prototype.getLockedBlockIdsBy=function(t){var e=[];return n.underscoreInst.each(this.lockedBlocksMap,function(n,o){t===n&&e.push(o)}),e},e.prototype.updateLockByDataCmd=function(t){var e,n=t.getCollabProps();if(null!=(e=t.isCollabUndo?t.getStartingRange():t.getEndingRange())){var o=e.getEndBlockRange();if(null!=o){var r=o.block.getId();if(null!=r&&(this._releaseLockOf(n.cmdSessionId),null==this.lockedBlocksMap[r])){var i=this.sessionHandler.getSessionPropertiesBy(n.cmdSessionId);null!=i&&(i.lockedBlkIds=[r],this._lockBlock(i))}}}},e.prototype._releaseLockOf=function(t){var e=this,o=[];n.underscoreInst.each(this.lockedBlocksMap,function(e,n){e===t&&o.push(n)}),n.underscoreInst.each(o,function(n){e._unlockBlock(n,t)})},e.prototype._onSessionQuit=function(t){this._releaseLockOf(t.sessionId)},e.prototype._onSessionLockChanged=function(t){var e=this,o=!1;n.underscoreInst.each(t,function(t){o=!1,null!=t.lockedBlkIds&&t.lockedBlkIds.length>0&&(n.underscoreInst.some(t.lockedBlkIds,function(n){return e.lockedBlocksMap[n]!==t.sessionId&&(o=!0),o}),o&&(e._releaseLockOf(t.sessionId),e._lockBlock(t)))})},e.prototype._unlockBlock=function(t,e){delete this.lockedBlocksMap[t];var n={resultCode:s.CustomResultCode.NO_ERROR,sessionId:e,unlockedBlockId:t};this.emit(r.default.LOCK_RELEASED,n)},e.prototype._lockBlock=function(t){var e=this,o={resultCode:1,sessionId:t.sessionId,sessionProps:t},i=!1;n.underscoreInst.each(t.lockedBlkIds,function(n){e.lockedBlocksMap[n]!==t.sessionId&&(e.lockedBlocksMap[n]=t.sessionId,i=!0)}),i&&this.emit(r.default.LOCK_LOCKED,o)},e}(o.YEvent);e.BlockLockHandler=a}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(32)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,o){var r=t.call(this)||this;return r.clientId=e,r.collabKeyTranslator=n,r.coreEditor=o,r}return i(e,t),e.prototype.destroy=function(){this.removeAllListeners(null)},e.prototype.buildCollabProperties=function(t){var e,n,o,r,i={coreEditor:this.coreEditor,isCollabEnabled:this.coreEditor.isCollabEnabled()};return t?(i.cmdSessionId=t.sessionId,e=i.cmdSessionId===this.clientId,i.isOwnCmd=e,i.finalNoteVersion=parseInt(t.finalVersion,10),i.ownerName=t.cmdOwner,i.isCollabEnabled=!0,i.isCollabCmd=!0,i.isServerCmd=!1,n=t.collabCmds,n.nondataCmds?r=n.nondataCmds[0]:(this.collabKeyTranslator.decode(n),o=n.dataCommands[0]),null!=r?i.isServerCmd=!0===r.isServerCmd:null!=o&&(i.isLocalExecutedCmd=!0===o.isLocalExecutedCmd,i.cmdId=o.cmdId)):i.cmdSessionId=this.clientId,i},e}(n.YEvent);e.CmdCollabPropsHandler=o}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(36),n(32)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.destroy=function(){this.removeAllListeners(null)},e.prototype.mergeLocalCommands=function(t){var e,o,r=null,i=0;if(t&&t.length>0)if(1===t.length)r=t[0];else{for(r=t.shift();t.length>0&&(e=t[0],r.canBeMerged(e));)r.mergeLocalCmd(e),t.shift(),i++;i>0&&t[0]&&t[0].isCollabUndo&&(o=n.underscoreInst.clone(r),o.isLocalExecutedCmd=t[0].isLocalExecutedCmd,o.setCollabUndo(!0),o.setCollabRedo(!1),t[0]=o),t.unshift(r)}},e}(o.YEvent);e.CmdMergeHandler=r}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(32),n(2),n(56),n(36)],void 0!==(r=function(t,e,n,o,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){var o=t.call(this)||this;return o.coreEditor=e,o.lockHandler=n,o}return i(e,t),e.prototype.destroy=function(){this.lockHandler=null,this.removeAllListeners(null)},e.prototype.isConflictWithOwnLockedBlock=function(t,e,n){var o,i,a,l,c=this.lockHandler.getOwnBlockIds(),u=!1;return null!=c&&c.length>0&&(l=c[0]),"comp.AppendBlank"!==e&&l&&(o=this.coreEditor.getBlockById(l),o&&!this.coreEditor.isTable(o)&&(i=this.coreEditor.getInnerBlocksWithEdge(t),i&&0!==i.length?s.underscoreInst.some(i,function(t){return t.getId()===l&&(n.collabProperties.dataCmdError="",n.collabProperties.errorToClose=!!n.collabProperties.isLocalExecutedCmd,n.collabProperties.errorCode=r.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED,u=!0),u}):s.loggerInst.warn("Failed to get the blocks from range",t)),u||null==n.dropRange||null==n.dropRange.block||(a=n.dropRange.block.getId())&&(u=a===l)&&(n.collabProperties.dataCmdError="",n.collabProperties.errorToClose=!!n.collabProperties.isLocalExecutedCmd,n.collabProperties.errorCode=r.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED)),u},e.prototype.isNoteRangeConflict=function(t,e,n){var o,i,a,l,c,u=this,p=!1;return i=n.cmdSessionId,c=!n.isCollabCmd||n.isOwnCmd,"comp.AppendBlank"!==e&&"ManagerAdapter"!==e&&(o=this.coreEditor.getInnerBlocksWithEdge(t),o&&0!==o.length?(s.underscoreInst.some(o,function(t){return t.isLocked()&&(p=c||!u.lockHandler.isBlockLockedBy(t.getId(),i))&&(n.dataCmdError="",n.isCollabCmd?(n.errorToClose=!!n.isLocalExecutedCmd,n.errorCode=r.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED):n.errorCode=r.DataCmdFailureCode.LOCAL_TARGET_BLOCK_LOCKED),p}),p||(p=this._isConflictWithNeighborBlock(e,t,n))):(n.dataCmdError="",n.isCollabCmd?(n.errorToClose=!0,n.errorCode=r.DataCmdFailureCode.COLLAB_BLOCKS_MISSING):n.errorCode=r.DataCmdFailureCode.LOCAL_BLOCKS_MISSING,p=!0),p||null==n.cmdJSON||null==n.cmdJSON.dropRange||(a=n.cmdJSON.dropRange.blockId,a&&(l=this.coreEditor.getBlockById(a)),l&&l.isLocked()&&(p=c||!this.lockHandler.isBlockLockedBy(a,i)))),p},e.prototype._isConflictWithNeighborBlock=function(t,e,n){var i,a,l,c,u=n.cmdSessionId,p=!1;if(!e)return s.loggerInst.warn("_isConflictWithNeighborBlock:noteRange should not be null"),!1;switch(i=e.getStartBlockRange(),a=!n.isCollabCmd||n.isOwnCmd,t){case"comp.KeyBackspace":i&&o.BlockTypes.isTextBlock(i.block)&&0===i.start&&!this.coreEditor.isTodo(i.block)&&(l=this.coreEditor.getPreBlockById(i.getBlockId()))&&e.isCollapsed()&&!this.coreEditor.isListItem(i.block)&&0===i.block.getBlockStyle("text-indent")&&l.isLocked()&&(p=a||!this.lockHandler.isBlockLockedBy(l.getId(),u))&&(n.dataCmdError="",n.isCollabCmd?(n.errorToClose=!0,n.errorCode=r.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED):n.errorCode=r.DataCmdFailureCode.LOCAL_TARGET_BLOCK_LOCKED);break;case"comp.KeyDelete":e.isCollapsed()&&o.BlockTypes.isTextBlock(i.block)&&i.end===i.block.getLength(!1)&&(c=this.coreEditor.getNextBlockById(i.getBlockId()))&&c.isLocked()&&(p=a||!this.lockHandler.isBlockLockedBy(c.getId(),u))&&(n.dataCmdError="",n.isCollabCmd?(n.errorToClose=!0,n.errorCode=r.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED):n.errorCode=r.DataCmdFailureCode.LOCAL_TARGET_BLOCK_LOCKED)}return p},e}(n.YEvent);e.CollabConfilctHandler=a}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(36),n(32)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.KEY_MAP_DECODE={a:{key:"sessionId",type:0},b:{key:"finalVersion",type:0},c:{key:"cmdOwner",type:0},d:{key:"collabCmds",type:1},e:{key:"dataCommands",type:1},f:{key:"action",type:0},g:{key:"cmdId",type:0},h:{key:"nondataCmds",type:1},i:{key:"updateVersion",type:0},j:{key:"startNoteRange",type:1},k:{key:"startBlockRange",type:1},l:{key:"rangeType",type:0},m:{key:"startPosition",type:0},n:{key:"endPosition",type:0},o:{key:"isInSingleBlock",type:0},p:{key:"cmdNoteVersion",type:0},q:{key:"isLocalExecutedCmd",type:0},r:{key:"skipBlockLocking",type:0},s:{key:"blockId",type:0},t:{key:"richText",type:0},u:{key:"newBlkId",type:0},v:{key:"inlineStyles",type:0},w:{key:"blockStyles",type:0},x:{key:"newStartBlkId",type:0},y:{key:"newEndBlkId",type:0},z:{key:"dropRange",type:1},0:{key:"colNums",type:0},1:{key:"rowNums",type:0},2:{key:"simpleValue1",type:0},3:{key:"src",type:0},4:{key:"simpleValue2",type:0},5:{key:"recogLink",type:0},6:{key:"attachRes",type:0},7:{key:"fileName",type:0},8:{key:"fileLen",type:0},9:{key:"innerCmds",type:1},A:{key:"affectedBlockIds",type:0},B:{key:"endNoteRange",type:1},C:{key:"isCollabUndo",type:0},D:{key:"preBlockId",type:0},E:{key:"deletedBlocks",type:0},F:{key:"insertedBlocks",type:0},G:{key:"isCollabRedo",type:0},H:{key:"resIds",type:0},J:{key:"dataBefore",type:0},K:{key:"dataAfter",type:0},L:{key:"endBlockRange",type:1},N:{key:"blockIds",type:0},O:{key:"styleNameValues",type:0},P:{key:"oldStyleNameValues",type:0},Q:{key:"abstractSimpleValue1",type:0},R:{key:"indentStep",type:0},S:{key:"listId",type:0},T:{key:"listType",type:0},U:{key:"abstractSimpleValue2",type:0},V:{key:"oldLevels",type:0},W:{key:"newLevels",type:0},X:{key:"listItemIds",type:0},Y:{key:"headerFooterInfo",type:0}},e._assembleEncodeMap(),e}return i(e,t),e.prototype.destroy=function(){},e.prototype.decode=function(t){var e,o,r=this;if(!1===this.isValidKeyMap)return void n.loggerInst.error("KeyMap is not valid, skip decode.");if(n.underscoreInst.isArray(t))return void n.underscoreInst.each(t,function(t){r.decode(t)});if(null!==t&&"object"==typeof t){e=n.underscoreInst.keys(t);for(var i=0,s=e;i<s.length;i++){var a=s[i];t.hasOwnProperty(a)&&(a in this.KEY_MAP_DECODE&&(o=this.KEY_MAP_DECODE[a].key,t[o]=t[a],delete t[a],null!==t[o]&&"object"==typeof t[o]&&1===this.KEY_MAP_DECODE[a].type&&this.decode(t[o])))}}},e.prototype.encode=function(t){var e,o,r=this;if(!1===this.isValidKeyMap)return void n.loggerInst.error("KeyMap is not valid, skip encode.");if(n.underscoreInst.isArray(t))return void n.underscoreInst.each(t,function(t){r.encode(t)});if(null!==t&&"object"==typeof t){e=n.underscoreInst.keys(t);for(var i=0,s=e;i<s.length;i++){var a=s[i];t.hasOwnProperty(a)&&(a in this.KEY_MAP_ENCODE?(o=this.KEY_MAP_ENCODE[a].key,t[o]=t[a],delete t[a],null!==t[o]&&"object"==typeof t[o]&&1===this.KEY_MAP_ENCODE[a].type&&this.encode(t[o])):n.loggerInst.error('Key - "',a,'" does NOT exist in COLLAB_MAP_ENCODE!'))}}},e.prototype._assembleEncodeMap=function(){var t,e;this.isValidKeyMap=!0,this.KEY_MAP_ENCODE={};for(e in this.KEY_MAP_DECODE)if(this.KEY_MAP_DECODE.hasOwnProperty(e)){if(t=this.KEY_MAP_DECODE[e].key,n.underscoreInst.has(this.KEY_MAP_DECODE,t)){this.isValidKeyMap=!1,n.loggerInst.error("original JSON key is conflict with encoded key, please rename it",t);break}if(n.underscoreInst.has(this.KEY_MAP_ENCODE,t)){this.isValidKeyMap=!1,n.loggerInst.error("original JSON key is duplicated, please rename them",t);break}this.KEY_MAP_ENCODE[t]={},this.KEY_MAP_ENCODE[t].key=e,this.KEY_MAP_ENCODE[t].type=this.KEY_MAP_DECODE[e].type}},e}(o.YEvent);e.CollabKeyTranslator=r}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(36),n(32),n(50)],void 0!==(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n){var o=t.call(this)||this;return o.sessionsMap={},o.nondataCmdHandler=n,o.nondataCmdHandler.on(r.default.SESSION_CHNAGED,o._onSessionChanged.bind(o)),o.nondataCmdHandler.on(r.default.SESSION_QUIT,o._onSessionQuit.bind(o)),o}return i(e,t),e.prototype.destroy=function(){this.sessionsMap=null,this.removeAllListeners(null)},e.prototype.getSessionCount=function(){return n.underscoreInst.size(this.sessionsMap)},e.prototype.getSessionPropertiesBy=function(t){var e=this.sessionsMap[t];if(e)return n.underscoreInst.clone(e)},e.prototype._onSessionChanged=function(t){var e,o,i=this,s=[],a=[],l=!1;t.length>0&&(n.underscoreInst.each(this.sessionsMap,function(t){t.propUpdated=!1,s.push(t)}),n.underscoreInst.each(t,function(t){if(null==i.sessionsMap[t.sessionId]&&(i.sessionsMap[t.sessionId]={sessionId:t.sessionId},s.push(i.sessionsMap[t.sessionId]),l=!0),o=t.lockedBlkIds,delete t.lockedBlkIds,e=i.sessionsMap[t.sessionId],e.propUpdated=!1,n.underscoreInst.each(Object.keys(t),function(n){e[n]!==t[n]&&(e[n]=t[n],e.propUpdated=!0,l=!0)}),null!=o&&o.length>0){var r={lockedBlkIds:o,sessionId:t.sessionId};n.underscoreInst.defaults(r,e),a.push(r)}}),l&&this.emit(r.default.SESSION_CHNAGED,s),a.length>0&&this.emit(r.default.SESSION_LOCK_UPDATE,a))},e.prototype._onSessionQuit=function(t){var e=[];delete this.sessionsMap[t.sessionId],this.emit(r.default.SESSION_QUIT,t),n.underscoreInst.each(this.sessionsMap,function(t){t.propUpdated=!1,e.push(t)}),this.emit(r.default.SESSION_CHNAGED,e)},e}(o.YEvent);e.CollabSessionHandler=s}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(36),n(110),n(32),n(50),n(56)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e,n,o,r,i,a,l){var c=t.call(this)||this;return c.regularCmdSendIntervalMS=2e3,c.pendingSentCmdsQueue=[],c.coreEditor=e,c.blockLockHandler=n,c.conflictHandler=o,c.redoundoHandler=r,c.cmdMergeHandler=i,c.keyTranslator=a,c.wsClient=l,c.callbackWSOnMessage=c._execCollabDataCommand.bind(c),c.wsClient.on(s.default.WS_MESSAGE,c.callbackWSOnMessage),c}return i(e,t),e.prototype.destroy=function(){this.wsClient.off(s.default.WS_MESSAGE,this.callbackWSOnMessage),this.wsClient=null,this.removeAllListeners(null),this.pendingSentCmdsQueue=[]},e.prototype.getLastNotOwnExecCmd=function(){return this.lastNotOwnExecCmd},e.prototype.hasPendingCmds=function(){return this.pendingSentCmdsQueue&&this.pendingSentCmdsQueue.length>0},e.prototype.isLastOwnCmdExecuted=function(){var t=!0;return this.pendingSentCmdsQueue.length>0&&(t=this.pendingSentCmdsQueue[0].isLocalExecutedCmd),t},e.prototype.getCachedCmdCount=function(){return this.pendingSentCmdsQueue.length},e.prototype.getCmdDelay=function(){var t=this.pendingSentCmdsQueue[0],e=0;return null!=t&&null!=t.sendingToCollabServerMillis&&(e=Date.now()-t.sendingToCollabServerMillis),e},e.prototype.pushLocalDataCommand=function(t,e){var n=a.CustomResultCode.NO_ERROR;return t.isLocalExecutedCmd||0!==this.pendingSentCmdsQueue.length||(n=this._sendCollabDataCommand(t,!1)),!e&&t.isLocalExecutedCmd&&0===this.pendingSentCmdsQueue.length&&this.sendCachedDataCommand(!0),n===a.CustomResultCode.NO_ERROR&&(this.pendingSentCmdsQueue.push(t),!this.pendingSentCmdsQueue[0].sendingToCollabServerMillis&&(e||this.pendingSentCmdsQueue.length>1&&!t.isLocalExecutedCmd)&&(n=this.sendCachedDataCommand(!1))),!0===t.isLocalExecutedCmd&&this.blockLockHandler.updateLockByDataCmd(t),n},e.prototype.sendCachedDataCommand=function(t){var e=a.CustomResultCode.NO_ERROR;return t?this.cmdSendingTimer=setTimeout(this._dispatchCachedDataCommand.bind(this),this.regularCmdSendIntervalMS):(clearTimeout(this.cmdSendingTimer),e=this._dispatchCachedDataCommand()),e},e.prototype._execCollabDataCommand=function(t){var e,n=t.collabCmdsJSON,o=t.collabProps,r={collabProperties:o};try{if(this.keyTranslator.decode(n),null==n.dataCommands)return null;if(null!=this.lastCmdId&&this.lastCmdId===o.cmdId)return null;null!=o.cmdId&&(this.lastCmdId=o.cmdId);var i=n.dataCommands[0],a=i.action,l=this.coreEditor.getDefaultNoteRange(),c=!1,u=!1,p=void 0,d=void 0,h=void 0;p=this.coreEditor.getNoteRange(),r.collabProperties.cmdJSON=i,c=this._validateCollabDataCmd(n,r),c&&(e=this._executeDataCommand(a,r)),!r.collabProperties.isOwnCmd&&"comp.DeleteNoteRange"===a&&r.range.isInSingleBlock()&&p.isInSingleBlock()&&(h=r.range.getStartBlockRange().block,d=p.getStartBlockRange().block,this.coreEditor.isTable(h)&&d.getId()===h.getId()&&(u=!0)),u&&l&&this.coreEditor.setNoteRange(l),this._postCollabDataCmdExecution(e,r)}finally{this.pendingSentCmdsQueue.length>0?this.sendCachedDataCommand(!1):this.emit(s.default.DATACMD_NO_PENDING)}return e},e.prototype._dispatchCachedDataCommand=function(){for(var t,e;this.pendingSentCmdsQueue.length>0&&(t=this.pendingSentCmdsQueue[0],this.cmdMergeHandler.mergeLocalCommands(this.pendingSentCmdsQueue),(e=this._sendCollabDataCommand(t,!0))!==a.CustomResultCode.NO_ERROR)&&!t.isLocalExecutedCmd;)n.loggerInst.warn("skip failed-sent command and try next",t),this.pendingSentCmdsQueue.shift();return e},e.prototype._sendCollabDataCommand=function(t,e){var o,r,i,l=[],c={},u=null;if(e){if(t.sendingToCollabServerMillis)return n.loggerInst.warn("current cmd has been sent",t),a.CustomResultCode.NO_ERROR;if(!t.isLocalExecutedCmd&&!t.isCollabRedo&&!t.isCollabUndo){if(r=this._updateLocalCmdStartRange(t),!t.isValidStartNoteRange())return this.emit(s.default.DATACMD_FAILURE,a.DataCmdFailureCode.LOCAL_INVALID_STARTRANGE),a.DataCmdFailureCode.LOCAL_INVALID_STARTRANGE;if(r&&this.conflictHandler.isNoteRangeConflict(r,t.name,t.getCollabProps()))return t.getCollabProps().errorCode}}if(u=t.toCollabJSON())l[0]=u,c.dataCommands=l,this.keyTranslator.encode(c),o=JSON.stringify(c),(i=this.wsClient.send(o))===a.CustomResultCode.NO_ERROR&&(t.sendingToCollabServerMillis=Date.now());else{i=a.DataCmdFailureCode.LOCAL_INVALID_CMDJSON;var p={closeSession:t.isLocalExecutedCmd,message:"",resultCode:i};this.emit(s.default.DATACMD_FAILURE,p)}return i===a.CustomResultCode.NO_ERROR&&t.isLocalExecutedCmd&&this._setLastOwnExecutedCmd(t),i},e.prototype._updateLocalCmdStartRange=function(t){var e;return this.lastOwnExecCmd&&!this.lastOwnExecCmd.isLocalExecutedCmd&&null!=(e=this.lastOwnExecCmd.getEndingRange())&&t.setStartingRange(e),e},e.prototype._postCollabDataCmdExecution=function(t,e){var o,r=e.collabProperties.isLocalExecutedCmd,i=e.collabProperties.isOwnCmd;if(i&&(o=this.pendingSentCmdsQueue.shift()),e.collabProperties.dataCmdError){n.loggerInst.error(e.collabProperties.dataCmdError),t&&(t.effected||r)&&(e.collabProperties.errorToClose=!0);var l={closeSession:e.collabProperties.errorToClose,message:e.collabProperties.dataCmdError,resultCode:e.collabProperties.errorCode};return i&&this.emit(s.default.DATACMD_FAILURE,l),void(null==t&&this.coreEditor.setNoteVersion(e.collabProperties.finalNoteVersion))}if(!t)return void n.loggerInst.error("execCommand should NOT be null when no dataCmdError");if(i&&this.coreEditor.isReadyForEdit()&&(t.sendingToCollabServerMillis=null,o.sendingToCollabServerMillis=null),t.setCmdFinalNoteVersion(this.coreEditor.getNoteVersion()),!i&&t.effected&&(this.redoundoHandler.pushNotOwnExecCmd(t),this.lastNotOwnExecCmd=t),i){var c={rawCollabJSON:e.collabProperties.rawWSMessage,resultCode:a.CustomResultCode.NO_ERROR};this.emit(s.default.DATACMD_SUCCESS,c),r||this._setLastOwnExecutedCmd(t)}this.blockLockHandler.updateLockByDataCmd(t)},e.prototype._setLastOwnExecutedCmd=function(t){this.lastOwnExecCmd=t},e.prototype._executeDataCommand=function(t,e){var n=e.collabProperties.cmdJSON,o=n.isCollabUndo,r=n.isCollabRedo;return o||r?this.redoundoHandler.applyCollabRedoUndo(t,e):this.coreEditor.execCommand(t,e)},e.prototype._validateCollabDataCmd=function(t,e){var n,r=e.collabProperties,i=r.cmdJSON,s=this.coreEditor.getNoteVersion(),l=r.finalNoteVersion,c=!this.coreEditor.isReadyForEdit(),u=r.isLocalExecutedCmd,p=i.startNoteRange,d=!0;return c?0===l&&(d=!1):o.Utils.isCmdVersionMatchNoteVersion(l,s)?u||(n=this.coreEditor.buildNoteRangeFromJSON(p),r.isOwnCmd||(d=!this.conflictHandler.isConflictWithOwnLockedBlock(n,i.action,e)),d&&(i.isCollabUndo||i.isCollabRedo?(d=this.redoundoHandler.ValidateCollabRedoUndo(i.affectedBlockIds,i.cmdNoteVersion))||(r.errorToClose=!0,r.errorCode=a.DataCmdFailureCode.COLLAB_DIRTY_BLOCKS,r.dataCmdError=""):d=!this.conflictHandler.isNoteRangeConflict(n,i.action,r))):(d=!1,r.errorToClose=!0,r.errorCode=a.DataCmdFailureCode.COLLAB_NOTEVERSION_MISMATCH,r.dataCmdError=":("+s+"/"+l+")"),d},e}(r.YEvent);e.DataCmdHandler=l}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(36),n(32)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.coreEditor=e,n.executedNotOwnCmdQueue=[],n}return i(e,t),e.prototype.destroy=function(){this.removeAllListeners(null)},e.prototype.applyCollabRedoUndo=function(t,e){var n,o=e.collabProperties.cmdJSON,r=o.isCollabUndo,i=o.isCollabRedo;return r?(e.collabProperties.isCollabUndo=!0,e.collabProperties.isCollabRedo=!1):i&&(e.collabProperties.isCollabUndo=!1,e.collabProperties.isCollabRedo=!0),n=this.coreEditor.createDataCommand(t,e),n&&(n.isOriginalCmd=!0,this.coreEditor.applyCollabCmdRedoUndo(n)),n},e.prototype.pushNotOwnExecCmd=function(t){this.executedNotOwnCmdQueue.push(t)},e.prototype.ValidateLocalRedoUndo=function(t){var e,o=!0,r=!1;return t.isCollabUndo?e=this.lastValidUndoCmd:t.isCollabRedo&&(e=this.lastValidRedoCmd),o&&((o=!this._isConflicted(t.getAffectedBlockIds(),t.getCmdFinalNoteVersion()))||(r=!0)),o&&e&&e.cmdId===t.cmdId&&(o=!1,n.loggerInst.warn("skip duplicated redo/undo command")),o?t.isCollabRedo?(this.lastValidRedoCmd=t,this.lastValidUndoCmd=null):t.isCollabUndo&&(this.lastValidUndoCmd=t,this.lastValidRedoCmd=null):(n.loggerInst.warn("Skip invalid Redo/Undo"),r&&(n.loggerInst.warn("Drop invalid Redo/Undo"),t.isCollabRedo?this.coreEditor.dropRedoCmd():t.isCollabUndo&&this.coreEditor.dropUndoCmds(null,null,null))),o},e.prototype.ValidateCollabRedoUndo=function(t,e){return!this._isConflicted(t,e)},e.prototype._isConflicted=function(t,e){var o,r,i=this,s=!1;return r=n.underscoreInst.filter(this.executedNotOwnCmdQueue,function(t){return t.getCmdFinalNoteVersion()>e}),r=r||[],r.length>0&&n.underscoreInst.some(r,function(e){if(i._isNoteRangeOverlap(t,e.getAffectedBlockIds()))return s=!0,o=e.getCollabProps(),n.loggerInst.log("Conflict: data has been edited by "+o.ownerName),!0}),s},e.prototype._isNoteRangeOverlap=function(t,e){var o=!1;return t&&t.length>0&&e&&e.length>0&&n.underscoreInst.some(t,function(t){return n.underscoreInst.some(e,function(e){return t===e&&(o=!0),o}),o}),o},e}(o.YEvent);e.RedoUndoHandler=r}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.SESSION_INIT_DONE="done",t.SESSION_INIT_COLLABSTARTED="collabStarted",t.SESSION_INIT_TIMEOUT="timeout",t.SESSION_INIT_INVALID="notValidForCollab",t}();e.ConstValueInJSON=n}.apply(e,o))&&(t.exports=r)},function(t,e,n){(function(o){var r,i,s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();r=[n,e,n(56),n(36),n(110),n(32),n(50)],void 0!==(i=function(t,e,r,i,a,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u,p={BUILDVERSION:"buildVersion",COLLABID:"collabId",NICKNAME:"nickname",NOTEVERSION:"noteVersion",PORTRAIT:"portraitUrl",RECONNECT:"reconnect",SESSIONID:"sessionId",SESSIONTYPE:"sessionType",USERID:"userId"};!function(t){t[t.normal=0]="normal",t[t.readonly=1]="readonly",t[t.owner=2]="owner"}(u||(u={}));var d=function(t){function e(e){var r=t.call(this)||this;if("undefined"==typeof window&&void 0!==o){o.WebSocket=n(335).w3cwebsocket}return r.collabPropsHandler=e,r}return s(e,t),e.prototype.connect=function(t){var e,n=t.useWSS?"wss":"ws";if("undefined"==typeof WebSocket)throw new Error("There is NO WebSocket type in Context.");if(null==t.collabServer)throw new Error("Param of options.collabServer should not be null");if(null==t.shareKey)throw new Error("Param of options.shareKey should not be null");if(null==t.nickname)throw new Error("Param of options.nickname should not be null");if(null==t.portraitUrl)throw new Error("Param of options.portraitUrl should not be null");if(null==t.userId)throw new Error("Param of options.userId should not be null");if(null==t.sessionId)throw new Error("Param of options.sessionId should not be null");if(null==t.sessionType)throw new Error("Param of options.sessionType should not be null");if(null==t.buildVersion)throw new Error("Param of options.buildVersion should not be null");e=n+"://"+t.collabServer+"?"+p.COLLABID+"="+t.shareKey+"&"+p.NICKNAME+"="+t.nickname+"&"+p.PORTRAIT+"="+t.portraitUrl+"&"+p.USERID+"="+t.userId+"&"+p.SESSIONTYPE+"="+t.sessionType+"&"+p.SESSIONID+"="+t.sessionId+"&"+p.BUILDVERSION+"="+t.buildVersion,this.sessionOptions=t,this.wsInst=new WebSocket(e),this.wsInst.onopen=this._onOpen.bind(this),this.wsInst.onclose=this._onClose.bind(this),this.wsInst.onmessage=this._onMessage.bind(this),this.wsInst.onerror=this._onError.bind(this)},e.prototype.getSessionId=function(){return this.sessionOptions.sessionId},e.prototype.getNickname=function(){return this.sessionOptions.nickname},e.prototype.getPortraitUrl=function(){return this.sessionOptions.portraitUrl},e.prototype.getUserId=function(){return this.sessionOptions.userId},e.prototype.getCollabId=function(){return this.sessionOptions.shareKey},e.prototype.isReadOnlySession=function(){return this.sessionOptions.sessionType===u.readonly},e.prototype.isOpened=function(){return null!=this.wsInst&&this.wsInst.readyState===this.wsInst.OPEN},e.prototype.send=function(t){var e,n=r.CustomResultCode.NO_ERROR;return e=2*t.length/1024,a.Utils.isMessageTooLarge(e)?n=r.WSCustomCode.MESSAGE_TOO_BIG:this.wsInst&&this.wsInst.readyState===WebSocket.OPEN?this.wsInst.send(t):n=r.WSCustomCode.SESSION_NOT_OPENED,n},e.prototype.close=function(t,e){this.wsInst&&this.wsInst.readyState===WebSocket.OPEN&&(this.wsInst.onopen=null,this.wsInst.onclose=null,this.wsInst.onmessage=null,this.wsInst.onerror=null,this.wsInst.close(t,e),t!==r.WSCustomCode.CLOSED_BY_HOST&&this.emit(c.default.WS_CLOSED,this._assembleSessionError(t,t)))},e.prototype.sendDataCmdErrorCode=function(t){this.send(t.toString())},e.prototype._onOpen=function(t){var e={resultCode:r.CustomResultCode.NO_ERROR};this.emit(c.default.WS_OPENED,e)},e.prototype._onClose=function(t){this.emit(c.default.WS_CLOSED,this._assembleSessionError(t.code,parseInt(t.reason,10)))},e.prototype._onMessage=function(t){try{if(null!=t.data&&""!==t.data){var e=JSON.parse(t.data),n=this.collabPropsHandler.buildCollabProperties(e);n.rawWSMessage=t.data;var o={collabCmdsJSON:e.collabCmds,collabProps:n,resultCode:r.CustomResultCode.NO_ERROR};this.emit(c.default.WS_MESSAGE,o)}}catch(t){i.loggerInst.error("Exception in WebSocketClient._onMessage:",t)}},e.prototype._onError=function(t){i.loggerInst.error("WebSocketClient:",t)},e.prototype._assembleSessionError=function(t,e){var n;switch(i.underscoreInst.isNaN(e)&&(e=1006===t?r.WSCustomCode.COLLAB_SERVER_UNREACHABLE:1005===t?r.WSCustomCode.COLLAB_SERVER_SHUTDOWN:1001===t?r.WSCustomCode.COLLAB_SESSION_CLOSED:t),e){case 2e3:n="";break;case 2001:n="";break;case 2002:n="session";break;case 2003:n="";break;case 3e3:n="";break;case 3001:n="";break;case 3003:n="";break;case 3004:n="";break;case 3005:n="";break;case 3006:n="";break;case 3007:n="";break;case 3008:n="";break;case 4001:n="";break;case 4002:n="";break;case 8e3:n="";break;case 9e3:n="";break;case 9003:n="";break;case 9004:n="session";break;case 9100:n="";break;case 9101:n="";break;case 9102:n="";break;case 9103:n="";break;default:n=""}return{code:t,customCode:e,reason:n,resultCode:t,shareKey:this.sessionOptions.shareKey}},e}(l.YEvent);e.WebSocketClient=d}.apply(e,r))&&(t.exports=i)}).call(e,n(43))},function(t,e,n){function o(t,e){return e?new i(t,e):new i(t)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket,s=n(336);i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(o,t,{get:function(){return i[t]}})}),t.exports={w3cwebsocket:i?o:null,version:s}},function(t,e,n){t.exports=n(337).version},function(t,e){t.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <brian@worlize.com> (https://www.worlize.com/)",contributors:["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.26",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.10.0"},dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.0.1"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(3),n(11),n(35),n(17),n(151),n(28),n(4),n(339),n(2)],void 0!==(r=function(t,e,o,r,s,a,l,c,u,p,d,h){"use strict";return n(13).load(n(340),"common"),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentBackground=s.DEFAULT_BACKGROUND,e}return i(e,t),e.prototype.canUndo=function(){return this.controller.canUndo()},e.prototype.canRedo=function(){return this.controller.canRedo()},e.prototype.clearHighlight=function(){this.note&&this.note.highlight([""]),this.note.clearHighlight()},e.prototype.countWords=function(t){var e=this.getNoteRange();return this.note.countWords(e,t)},e.prototype.execCommandByToolbar=function(t,e){var n,o,r=this.getNoteRange(),i=this.getTableOnCellEdit(r);i&&(n=this.noteView.getBlockViewByBlock(i))&&n.editCellFromToolbar&&(o=n.editCellFromToolbar(t,e)),o||("undo"===t?this.undo():"redo"===t?this.redo():this.execCommand(t,e))},e.prototype.execCommand=function(t,e){return this.controller.execCommand(t,e)},e.prototype.focus=function(){this.noteView.$el.focus()},e.prototype.getController=function(){return this.controller},e.prototype.getHtmlContent=function(t,e,n){var o;if(null!=this.getHtmlContentTimer&&(clearTimeout(this.getHtmlContentTimer),this.getHtmlContentTimer=null),!this.contentLoading||null==e)return o=this.note.toHtml(null,!0===t),null!=e&&e({status:1,content:o}),o;n&&(this.isReadOnly()||this.makeReadOnly(!0),this.noteView.removeNote()),this.getHtmlContentTimer=setTimeout(this.getHtmlContent.bind(this,t,e,n),100)},e.prototype.getNoteRange=function(){return this.controller.getNoteRange()},e.prototype.getPlainContent=function(){return this.note.toPlain()},e.prototype.getSchemaVersion=function(){return this.note.getSchemaVersion()},e.prototype.getToolbar=function(){return this.toolbar},e.prototype.getXmlContent=function(t,e){var n;if(null!=this.getXmlContentTimer&&(clearTimeout(this.getXmlContentTimer),this.getXmlContentTimer=null),!this.contentLoading||null==t)return n=this.note.toXml(),null!=t&&t({status:1,content:n}),n;e&&(this.isReadOnly()||this.makeReadOnly(!0),this.noteView.removeNote()),this.getXmlContentTimer=setTimeout(this.getXmlContent.bind(this,t,e),100)},e.prototype.hasHandWriteBlock=function(){return this.note.hasHandWriteBlock()},e.prototype.highlight=function(t,e){this.note&&this.note.highlight(t,e)},e.prototype.insertImage=function(t){return this.controller.insertImage(t)},e.prototype.insertAttachment=function(t){return this.controller.insertAttachment(t)},e.prototype.isNotSetContent=function(){return this.notSetContent},e.prototype.isReadOnly=function(){return this.controller.isReadOnly()},e.prototype.nextHighlight=function(){this.note&&this.note.nextHighlight()},e.prototype.preHighlight=function(){this.note&&this.note.preHighlight()},e.prototype.querySelectionInlineStyle=function(t){return this.controller.querySelectionInlineStyle(t)},e.prototype.querySelectionBlockStyle=function(t){return this.controller.querySelectionBlockStyle(t)},e.prototype.querySelectionInlineStyles=function(){return this.controller.querySelectionInlineStyles()},e.prototype.querySelectionBlockStyles=function(){return this.controller.querySelectionBlockStyles()},e.prototype.redo=function(){return this.controller.redo()},e.prototype.render=function(){null!=this.noteProps&&(this.noteProps.sessionType?(this.noteProps.sessionType=parseInt(this.noteProps.sessionType,10),1===this.noteProps.sessionType?this.setReadOnly(!0):this.setReadOnly(!1)):this.noteProps.readOnly?this.setReadOnly(!0):this.setReadOnly(!1))},e.prototype.rerenderNoteView=function(){this.noteView.render()},e.prototype.resetEditingInlineStates=function(){return this.controller.resetEditingInlineStates()},e.prototype.reset=function(){var t=this.getNoteViewWrapper();this.controller&&this.controller.reset(),this.noteView&&this.noteView.reset(),this.note&&this.note.reset(),d.reset(),this.notSetContent=!0,t&&this.noteView.isInPageMode()&&t.find(".bulb__page-break").remove(),null!=this.getHtmlContentTimer&&(clearTimeout(this.getHtmlContentTimer),this.getHtmlContentTimer=null),null!=this.getXmlContentTimer&&(clearTimeout(this.getXmlContentTimer),this.getXmlContentTimer=null),this.contentChanged=!1,this.contentLoading=!1,this.currentBackground=s.DEFAULT_BACKGROUND},e.prototype.resetFont=function(){h.Rich2HtmlConvertor.resetCssRules(),h.SupportedInlineStyles.reset(),this.noteView.reRenderTextBlockView()},e.prototype.selectAll=function(){return this.controller.selectAll()},e.prototype.setAllBackgrounds=function(t,e){this.trigger("set-all-backgrounds",o.clone(t),e),this.currentBackground=s.DEFAULT_BACKGROUND},e.prototype.setBackground=function(t){var e=this.currentBackground;this.updateContainerBackground(t)&&this.trigger("set-background",e,t)},e.prototype.setFont=function(t,e){if(t||e){var n,o={};t&&(n=h.SupportedInlineStyles.getDefault("font-size"),o["font-size"]=function(e){var o=e["font-size"];if(null!=o)return Math.round(t*o/n)+"px"},h.Rich2HtmlConvertor.setCssRules(o)),e&&(h.SupportedInlineStyles.setDefault("font-family",e),h.Rich2HtmlConvertor.resetInlineStyleDefaultForHtml("font-family")),this.noteView.reRenderTextBlockView()}},e.prototype.setNoteRange=function(t){this.controller.noteSelection.setRange(t)},e.prototype.setPasteAsText=function(t){this.controller.setPasteAsText(t)},e.prototype.setReadOnly=function(t){t=!!t,this.noteProps.isReadOnly=t,this.makeReadOnly(t)},e.prototype.setViewMode=function(t,e,n){t=l.IS_PC?c.parseToNumber(t,1):c.parseToNumber(t,0),this.updateEditorProps({viewMode:t}),l.IS_PC&&(1===t?$(this.getNoteViewWrapper()).toggleClass("read-mode",!0):$(this.getNoteViewWrapper()).toggleClass("read-mode",!1)),this.noteView.setViewMode(t,!this.isNotSetContent()),!0===e&&this.trigger("view-mode-change",t),!0===n&&this.trigger("yne-view-mode-change",t),this.controller.resizeSpecialBlock()},e.prototype.undo=function(){return this.controller.undo()},e.prototype.updateBackground=function(t){var e=this.currentBackground;this.updateContainerBackground(t)&&(e||(e=s.DEFAULT_BACKGROUND),this.trigger("yne-background-changed",e,t))},e.prototype.updateEditorProps=function(t){null==this.editorProps&&(this.editorProps={}),o.extend(this.editorProps,t),o.extend(this.options,t)},e.prototype.updateNoteViewVisibility=function(t){t?this.noteView.$el.css("visibility","visible"):this.noteView.$el.css("visibility","hidden")},e.prototype.initialize=function(t){var e=this;this.clientId=r.newGUID(),this.notSetContent=!0,this.bindEventsForController(),this.on("background-failed-update",function(t,n){null!=n&&e.updateContainerBackground(n),0===t&&e.trigger("yne-background-failed-update",t)}),this.contentChanged=!1,this.contentLoading=!1},e.prototype.makeReadOnly=function(t){this.controller.setReadOnly(t),l.IS_PC?t?this.toolbar.toggleToolbar(!1):this.toolbar.toggleToolbar(!0):t?this.toolbar.disable():this.toolbar.enable()},e.prototype.bindEventsForController=function(){var t=this,e=this.controller;e.on("command-exec",function(e,n){if(!e||!e.name)return void p.error("The command is not valid",e);e&&e.effected?(t.contentChanged=!0,t.trigger("yne-content-change")):p.warn("The command has no effected",e)}),a.bubble(["redo-stack-change","undo-stack-change","selectstart","mouse-down","command-exec","esc","yne-clipboard-status","yne-clipboard-error","yne-get-clipboard","yne-clipboard-set","color-picker-show","yne-user-action-collection","cell-edit-view-enter","cell-edit-view-exit","cell-edit-view-history-change"],e,this)},e.prototype.updateContentSetProgress=function(t){var e=this;!0===e.contentLoading&&(t.isAsync&&e.progressTracker.updateContentSetProgress(t),o.isNumber(t.percent)&&t.percent>=1&&(e.isLegacyHost()&&!e.noteProps.isReadOnly&&e.makeReadOnly(!1),e.contentLoading=!1))},e.prototype.getTableOnCellEdit=function(t){var e,n=t&&t.isSingleTableSelected();if(n)return e=t.getStartBlockRange(),e&&e.isOnCellEdit&&e.isOnCellEdit()?e.block:void 0},e}(u)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(1),n(2)],void 0!==(r=function(t,e,n,o){"use strict";return function(){function t(){}return t.add=function(e){e&&!o.SupportedInlineStyles.isSupport(e)&&(n.contains(t.unknownInlineStyleNames,e)||t.unknownInlineStyleNames.push(e))},t.get=function(){return t.unknownInlineStyleNames},t.reset=function(){t.unknownInlineStyleNames=[]},t.unknownInlineStyleNames=[],t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./attachment-view-attachment-container.jst":341,"./catalogue_view.jst":342,"./color_picker.jst":343,"./handwrite-view-container.jst":344,"./header-footer.jst":345,"./high_light_item.jst":346,"./high_light_item_image.jst":347,"./image-title-input.jst":348,"./image-view-image-container.jst":349,"./link_view.jst":350,"./list_item_view.jst":351,"./macro_view.jst":352,"./page_break_view.jst":353,"./paragraph_view.jst":354,"./table_cell_edit.jst":355,"./table_cell_resize.jst":356,"./table_view.jst":357,"./todo.jst":358};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=340},function(t,e){t.exports='<div class="bulb__attachment-container" title="<%- title %>">\n    <div class="bulb__attachment-icon bulb__svg-common <%- name %>"></div>\n    <div class="bulb__attachment-title">\n        <p class="bulb__attachment-title-name"><%- fileName %></p>\n        <p class="bulb__attachment-title-type"><%- fileType %></p>\n    </div>\n    <div class="bulb__attachment-size"><%= size %></div>\n    <div class="bulb__attachment-download bulb__svg-common"></div>\n    <div class="bulb__attachment-mask" draggable="<%-!!draggable%>">\n        <div class="bulb__attachment-icon bulb__svg-common <%- name %>"></div>\n        <div class="bulb__attachment-title">\n            <p class="bulb__attachment-title-name"><%- fileName %></p>\n            <p class="bulb__attachment-title-type"><%- fileType %></p>\n        </div>\n        <div class="bulb__attachment-size"><%= size %></div>\n        <div class="bulb__attachment-download bulb__svg-common"></div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__catalogue-header cannot-edit">\n    <div class="bulb__catalogue-refresh" title="">\n        <i class="bulb__svg-common bulb__svg--catalogue-refresh"></i>\n    </div>\n    <div class="bulb__catalogue-delete" title="">\n        <i class="bulb__svg-common bulb__svg--catalogue_remove"></i>\n    </div>\n</div>\n<div class="bulb__para-text"></div>\n'},function(t,e){t.exports='<div class="bulb__color-picker-panel" tabindex="0">\n    <div class="bulb__color-picker-panel-inner">\n        <div class="bulb__color-picker-panel-board">\n            <div class="bulb__color-picker-panel-board-hsv" style="background-color: rgb(255, 0, 0);">\n                <div class="bulb__color-picker-panel-board-value"></div>\n                <div class="bulb__color-picker-panel-board-saturation"></div>\n            </div>\n            <span style="left: 126px; top: 93.5px;"></span>\n        </div>\n        <div class="bulb__color-picker-panel-wrap">\n            <div class="bulb__color-picker-panel-wrap-ribbon">\n                <div class="bulb__color-picker-panel-ribbon">\n                    <span style="left: 0%;"></span>\n                </div>\n            </div>\n            <div class="bulb__color-picker-panel-wrap-alpha">\n                <div class="bulb__color-picker-panel-alpha">\n                    <div class="bulb__color-picker-panel-alpha-bg" style="background: linear-gradient(to right, rgba(57, 57, 57, 0), rgb(57, 57, 57));"></div>\n                    <span style="left: 100%;"></span>\n                </div>\n            </div>\n            <div class="bulb__color-picker-panel-wrap-preview">\n                <div class="bulb__color-picker-panel-preview">\n                    <span style="background-color: rgb(57, 57, 57); opacity: 1;"></span>\n                </div>\n            </div>\n        </div>\n        <div class="bulb__color-picker-panel-wrap" style="height: 40px; margin-top: 6px;">\n            <div class="bulb__color-picker-panel-params">\n                <div class="bulb__color-picker-panel-params-input">\n                    <input type="text" class="bulb__color-picker-panel-params-hex" maxlength="6" value="393939">\n                    <input type="number" value="57">\n                    <input type="number" value="57">\n                    <input type="number" value="57">\n                    <input type="number" value="100">\n                </div>\n                <div class="bulb__color-picker-panel-params-lable">\n                    <label class="bulb__color-picker-panel-params-lable-hex">HEX</label>\n                    <label class="bulb__color-picker-panel-params-lable-number">R</label>\n                    <label class="bulb__color-picker-panel-params-lable-number">G</label>\n                    <label class="bulb__color-picker-panel-params-lable-number">B</label>\n                    <label class="bulb__color-picker-panel-params-lable-alpha">A</label>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>'},function(t,e){t.exports='<div class="bulb__handwrite-container">\n    <img  src="<%= src %>"/>\n</div>\n<p class="bulb__handwrite-copy-hack">select me</p>'},function(t,e){t.exports="<div class=\"bulb__header-footer-input\" contenteditable=\"<%= readonly ? 'false' : 'true' %>\"></div>"},function(t,e){t.exports='<div class="bulb__high-light-item" style="left: <%= left %>px; top: <%= top %>px; height: <%= height %>px; width: <%= width %>px;"></div>'},function(t,e){t.exports='<div class="bulb__high-light-item-image" style="left: <%= left %>px; top: <%= top %>px; height: <%= height %>px; width: <%= width %>px;"></div>'},function(t,e){t.exports='<div class="bulb__image-title-input" contenteditable="true" \n    style="position: absolute; left: <%- left %>px; top: <%- top %>px; width: <%- width%>px; text-align: <%- textAlign%>; min-height: <%- height%>px;"><%- title %></div>\n<div class="bulb__image-title-placeholder" \n    style="position: absolute; left: <%- left %>px; top: <%- top %>px; width: <%- width%>px; text-align: <%- textAlign%>; min-height: <%- height%>px;">\n    \n</div>'},function(t,e){t.exports='<div class="bulb__image-container">\n    <img <% if (width || height) { %> class="bulb__filter-blur" <% } %> src="<%= src %>"\n        <% if (width && height) { %> style="width: <%- width%>px; height: <%- height%>px;"\n        <% } else if (width) { %> style="width: <%- width%>px; height: auto;"<% } %>/>\n    <div class="bulb__resize-handle" data-corner="0"></div>\n    <div class="bulb__resize-handle" data-corner="1"></div>\n    <div class="bulb__resize-handle" data-corner="2"></div>\n    <div class="bulb__resize-handle" data-corner="3"></div>\n    <div class="bulb__menu-wrapper">\n        <div class="bulb__yne-button-group">\n            <div class="bulb__yne-button-item bulb__yne-last" data-button-name="menu" title="">\n                <span class="bulb__yne-button bulb__svg-common"></span>\n                <span class="bulb__yne-arrow-down bulb__svg-common"></span>\n            </div>\n            <div class="bulb__yne-clear"></div>\n        </div>\n        <ul class="bulb__yne-popup-menu">\n            <li class="bulb__yne-popup-item" data-cm-name="image-title"><span></span></li>\n            <li class="bulb__yne-popup-item" data-cm-name="float-left"><span></span></li>\n            <li class="bulb__yne-popup-item" data-cm-name="float-right"><span></span></li>\n            <li class="bulb__yne-popup-item" data-cm-name="clear-float"><span></span></li>\n            <li class="bulb__yne-popup-item" data-cm-name="clear-resize"><span></span></li>\n            <% if (hasOCR) {%>\n                <li class="bulb__yne-popup-item" data-cm-name="image-ocr"><span>OCR</span></li>\n            <% } %>\n            <li class="bulb__yne-popup-item bulb__yne-popup-split"></li>\n            <li class="bulb__yne-popup-item" data-cm-name="delete"><span></span></li>\n            <li class="bulb__yne-popup-item" data-cm-name="download"><span></span></li>\n        </ul>\n    </div>\n</div>\n<div class="bulb__image-title"></div>\n<div class="bulb__image-split"></div>\n<p class="bulb__image-copy-hack">select me</p>\n'},function(t,e){t.exports='<div class="bulb__hover-menu bulb__hover-menu-show-link">\n    <div class="bulb__hover-menu-before"></div>\n    <div class="bulb__hover-menu-body">\n        <a href="<%= link%>" target=\'_blank\'><span><%= link%></span></a>\n        <% if (!isReadOnly) { %>\n            <div class="bulb__link-button">\n                <span class="bulb__link-modify-button"></span>\n                <span class="bulb__link-split">|</span>\n                <span class="bulb__link-remove-button"></span>\n            </div>\n        <% } %>\n    </div>\n</div>\n<div class="bulb__hover-menu bulb__hover-menu-modify-link">\n    <div class="bulb__hover-menu-before"></div>\n    <div class="bulb__hover-menu-body">\n        <span class="bulb__link-label"></span>\n        <input class="bulb__link-input" type="text" name="link" value="<%= link%>" />\n        <div class="bulb__link-confirm-button">\n            <span class="bulb__link-button-text"></span>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<% if (isOrdered) { %>\n    <ol class="bulb__li-box"><li><div class="bulb__para-text"></div></li></ol>\n<% } else { %>\n    <ul class="bulb__li-box"><li><div class="bulb__para-text"></div></li></ul>\n<% } %>'},function(t,e){t.exports='\n<div class="bulb__macro">\n    <div class="bulb__macro-body" draggable="true">\n        <div class="bulb__default-macro-body">\n            <div class="bulb__default-macro-text">\n            <i class="bulb__default-img bulb__combo-value bulb__svg--macro-error  bulb__svg-common"></i>\n            \n            </div>\n\n        </div>\n    </div>\n    <% if (!isReadOnly) { %>\n     <div class="bulb__macro-hover-body">\n        <ul class="bulb__menu">\n            <li class="bulb__menu-item bulb__macro-edit-button"></span>\n            <li class="bulb__menu-item bulb__macro-delete-button"></span>\n        </ul>\n     </div>\n<% } %>\n\n</div>\n'},function(t,e){t.exports='<div class="bulb__page-break">\r\n    <span class="bulb__spanMark bulb__topSpan"></span>\r\n    <span class="bulb__spanMark bulb__middleSpan"></span>\r\n    <span class="bulb__spanMark bulb__bottomSpan"></span>\r\n</div>\r\n'},function(t,e){t.exports='<div class="bulb__para-text"></div>'},function(t,e){t.exports='<div class="bulb__cell-edit-box" contenteditable="true"></div>'},function(t,e){t.exports='<div class="bulb__resize-up"></div>\n<div class="bulb__resize-right"></div>\n<div class="bulb__resize-down"></div>\n<div class="bulb__resize-left"></div>\n'},function(t,e){t.exports='<div class="bulb__table-layout">\n    <div class="bulb__table-layout-inner" contentEditable="false">\n        <div class="bulb__table-wrapper">\n            <table>\n                <colgroup></colgroup>\n                <tbody></tbody>   \n            </table>\n            <div class="bulb__row-resize-line"></div>\n            <div class="bulb__col-resize-line"></div>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__todo-content">\n    <label class="bulb__todo-mark" contenteditable="false">\n        <span class="bulb__todo-inner"></span>\n    </label>\n    <div class="bulb__todo-input bulb__para-text">\n    </div>\n</div>\n'},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(1),n(150),n(3),n(33),n(404),n(35),n(17),n(28),n(4),n(360),n(405),n(11),n(7),n(406),n(160),n(161),n(2),n(77),n(408)],void 0!==(r=function(t,e,n,o,r,s,a,l,c,u,p,d,h,f,g,m,_,b,y,v){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.addDragHint=function(t,e){var n,o,r=this,i=r.getRangeByPoint(t,e),s=r.noteView,a=s.parseNativeRange(i)[0];return r.getNoteRange()?(n=r.getNoteRange().getStartBlockRange())&&a?!(a.block===n.block&&a.start>=n.start&&a.start<n.end)&&(r.lastDragOver?o=r.lastDragSpace.parentNode.removeChild(r.lastDragSpace):(o=document.createElement("span"),o.id="drop-hint",r.lastDragOver={}),r.lastDragOver.x=t,r.lastDragOver.y=e,r.lastDragSpace=o,void i.insertNode(o)):(p.error("addDragHint:startRange and dragRange should not be null",n,a),!1):(p.error("addDragHint:Failed to get NoteRange"),!1)},e.prototype.canRemoveFormat=function(){var t=this,e=t.getNoteRange();return e&&!e.isCollapsed()},e.prototype.canUndo=function(){return this.cmdManager.canUndo()},e.prototype.canRedo=function(){return this.cmdManager.canRedo()},e.prototype.createCmd=function(t,e){return this._createCmd(t,e)},e.prototype.defaultNoteRange=function(){var t,e,n=this,o=n.note;if(o&&(t=o.getBlockAt(0)))return e=y.BlockRangeUtil.createRangeByBlock({allContent:!1,block:t,collapseToStart:!0}),new y.NoteRange({endRange:e,startRange:e})},e.prototype.execBackTab=function(){var t=this;t.execCommand("comp.KeyTab",{inlineStyles:t.editingInlineStates,withShiftKey:!0})},e.prototype.execCommand=function(t,e){var o,i,s=this;return e=n.defaults(e||{},{collabProperties:s.editor.buildCollabProperties()}),i=e.collabProperties.isCollabCmd,s.isReadOnly()&&!i?void s.editor.notifyErrorToHost(f.INVALIDACTION_EDIT_READ_ONLY):(e.isOriginalCmd=!0,!(o=s._createCmd(t,e))||o.cmdError?void p.error("Failed to create/initialize command:"+t):r.isInlineStateSetCommand(o)?void n.each(e.inlineStyles,function(t,e){s.setEditingInlineState(e,t)}):s.isCollabEnabled()?(o.isOriginalCmd=!0,i?s._executeCollabCmd(o,e):s._handleLocalCmdInCollabMode(o,e),e.collabProperties.dataCmdError&&p.error(e.collabProperties.dataCmdError),o):s._executeLocalCmd(o,e))},e.prototype.execCmdByShortCut=function(t,e){this.editor.execCommandByToolbar(t,e)},e.prototype.execDeleteBackward=function(t){var e,n,o=this;if(t=t||o.getNoteRange(),e=t.getStartBlockRange(),n=e.block,!t)return void p.error("noteRange not found");y.BlockTypes.isHeading(n)&&t.isCollapsed()&&e.isCollapsed()&&0===e.start?o.resetEditingInlineStates():o._updateDeleteInlineStates(o.queryBackwardFirstInlineStyles(t)),o.execCommand("comp.KeyBackspace",{inlineStyles:o.editingInlineStates})},e.prototype.execDeleteForward=function(){var t=this,e=t.getNoteRange();if(!e)return void p.error("noteRange not found");t._updateDeleteInlineStates(t.queryForwardFirstInlineStyles(e)),t.execCommand("comp.KeyDelete")},e.prototype.execDeleteToEnd=function(){var t,e,n=this,o=n.getNoteRange();if(o){if(!o.isCollapsed())return n._onDeleteSelection();t=o.clone(!0),e=o.getEndBlockRange(),e.expandToEnd(),n.execDeleteBackward(t)}},e.prototype.execInsertDate=function(){var t,e=this,n=new Date,r=function(t){return o.pad(t,2,"0","left")};t=" "+n.getFullYear()+"/"+r(n.getMonth()+1)+"/"+r(n.getDate())+" "+r(n.getHours())+":"+r(n.getMinutes())+" ",e.insertText(t,!1)},e.prototype.execKeyHandler=function(t){var e=this;e.keyHandlerManager.execWithName(t,e,{})},e.prototype.getDefaultFont=function(){return this.defaultFont},e.prototype.getEditingInlineState=function(t){var e=this,n=e.editingInlineStates||{};return t?n[t]:n},e.prototype.getNextCaretBlockRange=function(){var t,e,n,o=this,r=o.getNoteRange(),i=r.getStartBlockRange(),s=i.block;return y.BlockTypes.isTextOrTableBlock(s)||(t=o._getNextCaretBlock(s))&&(e=y.BlockRangeUtil.createRangeByBlock({allContent:!1,block:t,collapseToStart:!0}),n=new y.NoteRange({endRange:e,startRange:e}),o.noteSelection.setRange(n)),n},e.prototype.getNoteRange=function(){var t=this,e=t.noteSelection.getRange();return e||(e=t.defaultNoteRange()),e},e.prototype.getRangeByPoint=function(t,e){var n,o;return n=document.caretRangeFromPoint(t,e),o=document.createRange(),o.setStart(n.startContainer,n.startOffset),o},e.prototype.hasKeyHandler=function(t){return this.keyHandlerManager.hasHandler(t)},e.prototype.innerGoto=function(t){var e,n;if(e=document.getElementById(t),this.pageViewManager&&!e&&(this.pageViewManager.activePageByBlockId(t),e=document.getElementById(t)),!e)return p.warn("No find the block!");window.location.hash="#"+t,n=document.createRange(),n.setStart(e.lastChild,1),n.setEnd(e.lastChild,1),s.setRange(n,window),window.location.hash=""},e.prototype.insertAttachment=function(t){var e,n=this,o=n.getNoteRange();if(t)switch(t.src=t.src||" ",e=t.resource&&t.fileName?"attachment":"image",n.noteSelection.setRange(o),e){case"attachment":n.execCommand("comp.InsertAttachment",{fileLength:t.fileLength,fileName:t.fileName,resource:t.resource,src:t.src});break;case"image":n.insertImage(t.src)}},e.prototype.insertImage=function(t){var e=this,n=e.getNoteRange();t&&(e.noteSelection.setRange(n),e.execCommand("comp.InsertImage",{src:t}))},e.prototype.insertText=function(t,e){var o,r,i=this,s=y.SupportedInlineStyles.getAllDefault();t instanceof y.RichText?o=t:(r=i.editingInlineStates,o=new y.RichText({text:t}),n.isEqual(s,r)||o.setStyles(0,o.getLength(),r)),i.execCommand("comp.KeyTextInput",{recogLink:e,text:o})},e.prototype.isCollabEnabled=function(){return null!=this.editor&&this.editor.isCollabEnabled&&this.editor.isCollabEnabled()},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.isSameList=function(t){var e=this,n=e.note,o=e.getNoteRange();return!!o&&n.isSameList(o,t)},e.prototype.isValidNoteRange=function(t){var e=this,n=function(t){var n;return!(!t||!t.block)&&(n=t.block,e.note.getBlockIndex(n)>-1)};return!!t&&(e.isValidHeaderFooterRange(t)||n(t.getStartBlockRange())&&n(t.getEndBlockRange()))},e.prototype.isValidHeaderFooterRange=function(t){var e=this.note,o=t.getStartBlockRange(),r=t.getEndBlockRange();return n.all([o,r],function(t){if(!t||!t.block)return!1;var n=t.block;return e.getHeaderFooter(!0)===n||e.getHeaderFooter(!1)===n})},e.prototype.moveCaretWithDirection=function(t,e){this._onMoveCaretWithDirection(t,e)},e.prototype.lockBlockById=function(t){this.isCollabEnabled()&&this._sendBlockLockInfo(t)},e.prototype.onCommand=function(t,e){this.execCommand(t,e)},e.prototype.onUpdateSelection=function(t,e){this.noteSelection.setRange(t,y.SelectionChangeEvent.createCommandTypeEvent(e))},e.prototype.onPaste=function(t){var e,n,o,r,i,s,a,l=this;if(t.preventDefault(),c.IS_MAC)return void l._pasteForMac();if(e=new _({event:t}),l.isPasteAsText)return a=e.getData("text/plain"),void l._pastePlain(a,l.isPasteAsText);if(n=e.getData("text/yne-json"),o=e.getData("text/yne-image-json"),i=e.getData("text/yne-note-id"),!(n&&l._pasteJSON(n,o,i,t)||(r=e.getData("text/yne-table-json"))&&l.pasteYTableJson(r,t)||(s=e.getData("text/html"))&&l._pasteHTML(s,t))){if(a=e.getData("text/plain"))return void l._pastePlain(a,l.isPasteAsText,t);l._pasteBlobImg(t)}},e.prototype.pasteForTable=function(t){var e,n=this.getNoteRange(),o=n.getStartBlockRange(),r=n.getEndBlockRange(),i=o.block,s=r.block,a=this.noteView;return!(!y.BlockTypes.isTable(i)||i.getId()!==s.getId())&&(!(!(e=a.getBlockViewByBlock(i))||!e.pasteBlockList)&&e.pasteBlockList(t))},e.prototype.queryBackwardFirstInlineStyles=function(t){var e,n,o,r,i;return(t=t||this.getNoteRange())?(e=t.getStartBlockRange(),n=e.block,y.BlockTypes.isTextBlock(n)?n.isEmptyContent()?n.getInlineStylesForEmpty()||y.SupportedInlineStyles.getAllDefault():(r=e.start,i=n.getLength(),(t.isCollapsed()||r>=i)&&(r=r>0?r-1:0),o=n.getTextStylesAtIndex(r),this._omitLinkStylesIfNeeded(o,t)):void 0):void p.warn("noteRange is null")},e.prototype.queryForwardFirstInlineStyles=function(t){var e,n,o,r,i;return(t=t||this.getNoteRange())?(e=t.getEndBlockRange(),n=e.block,y.BlockTypes.isTextBlock(n)?n.isEmptyContent()?n.getInlineStylesForEmpty()||y.SupportedInlineStyles.getAllDefault():(r=e.end,i=n.getLength(),(!t.isCollapsed()||r>=i)&&(r=r>0?r-1:0),o=n.getTextStylesAtIndex(r),this._omitLinkStylesIfNeeded(o,t)):void 0):void p.error("noteRange is null")},e.prototype.querySelectionInlineStyle=function(t,e){var n=this,o=n.note;return e=e||n.getNoteRange(),e?o.getCommonInlineStyle(e,t):void p.warn("noteRange not found")},e.prototype.querySelectionBlockStyle=function(t,e){var n=this,o=n.note;return e=e||n.getNoteRange(),e?o.getRangeBlockStyle(e,t):void p.warn("noteRange not found")},e.prototype.querySelectionInlineStyles=function(t){var e,o,r,i,s=this,a={},l=y.SupportedInlineStyles.getStyleNames();return(t=t||s.getNoteRange())?(e=t.getStartBlockRange(),t.isSingleTableSelected()&&e.isOnCellEdit()&&(o=e.block,r=s.noteView.getBlockViewByBlock(o))?(i=r.getCellEditView(),a=i.queryInlineStylesForBulb()):(n.each(l,function(e){a[e]=s.querySelectionInlineStyle(e,t)}),a)):void p.warn("noteRange not found")},e.prototype.querySelectionBlockStyles=function(t){var e,o,r=this,i={};return(t=t||r.getNoteRange())?(e=y.SupportedBlockStyles.getAllStyleNames(),o=y.SupportedTableBlockStyles.getAllStyleNames(),e=e.concat(o),n.each(e,function(e){i[e]=r.querySelectionBlockStyle(e,t)}),i):void p.warn("noteRange not found")},e.prototype.redo=function(){var t=this,e=t.cmdManager;if(!t.isCollabEnabled())return e.redo();var n={collabProperties:{coreEditor:t.editor,isCollabRedo:!0}};return this._redoUndoLocalCmdInCollabMode(n)},e.prototype.removeDragHint=function(){var t;this.lastDragSpace&&this.lastDragSpace.parentNode&&(t=this.lastDragSpace.parentNode,t.removeChild(this.lastDragSpace)),this.lastDragOver=this.lastDragSpace=null},e.prototype.removeShortCut=function(t){var e=this.keyHandlerManager;e&&e.unbind(t)},e.prototype.reset=function(){var t=this;t.cmdManager&&t.cmdManager.reset(),t.noteSelection&&t.noteSelection.reset(),t.resetEditingInlineStates(),t.readOnly=!1,t.defaultFont=null},e.prototype.resetEditingInlineStates=function(){var t=this,e=y.SupportedInlineStyles.getAllDefault();t.setEditingInlineStates(null),t.trigger("yne-editing-state-change",e)},e.prototype.resizeSpecialBlock=function(){var t=this,e=t.note;n.each(e.blocks,function(t){(y.BlockTypes.isTable(t)||y.BlockTypes.isImage(t))&&t.trigger("view-resize")})},e.prototype.selectAll=function(){return this.noteView.onSelectAll()},e.prototype.setDefaultFont=function(t,e){this.defaultFont=this.defaultFont||{},t&&(this.defaultFont["font-family"]=t,this.setEditingInlineState("font-family",t)),e&&(this.defaultFont["font-size"]=e,this.setEditingInlineState("font-size",e))},e.prototype.setEditingInlineState=function(t,e){var n=this,o={};n.isReadOnly()||(n.editingInlineStates||(n.editingInlineStates={}),n.editingInlineStates[t]=e,o[t]=e,n.trigger("yne-editing-state-change",o),n.isLinkStylesChanged=n._isLinkStyles(t))},e.prototype.setEditingInlineStates=function(t){var e=this;e.editingInlineStates=t,e.isLinkStylesChanged=!1},e.prototype.setOptions=function(t){var e,n=this;n.reset(),n.readOnly=t.isReadOnly,e=n.note=t.note,l.bubble(["color-picker-show","yne-user-action-collection"],e,n,!0),l.addListeners({"get-block-view":"_onGetBlockView","get-default-set-font":"_onGetDefaultSetFont"},e,n,!0)},e.prototype.setPasteAsText=function(t){this.isPasteAsText=t},e.prototype.setReadOnly=function(t){var e=this;t=!!t,e.isReadOnly()!==t&&(e.readOnly=t,n.each(["note"],function(n){var o=e[n];o&&o.setReadOnly&&o.setReadOnly(t)}))},e.prototype.toggleInlineStyle=function(t){var e,n=this,o=n.getNoteRange(),r={};if(!o)return void p.warn("noteRange not found");o.isCollapsed()?e=!n.editingInlineStates[t]:(e=n.querySelectionInlineStyle(t),e=!0!==e),r[t]=e,n.execCommand("comp.ApplyStyles",{inlineStyles:r})},e.prototype.undo=function(){var t=this,e=t.cmdManager;if(!t.isCollabEnabled())return e.undo();var n={collabProperties:{coreEditor:t.editor,isCollabUndo:!0}};return this._redoUndoLocalCmdInCollabMode(n)},e.prototype.updateShortCut=function(t,e){var n=this.keyHandlerManager;n&&n.updateKey(t,e)},e.prototype.zoomInEditor=function(){this.editor.setZoomPercent(1)},e.prototype.zoomOutEditor=function(){this.editor.setZoomPercent(-1)},e.prototype.zoomEditor=function(){this.editor.zoomEditor(1,!0)},e.prototype.destroy=function(){this.off(),this.editor&&(this.editor=null),this.options&&this.options.editor&&(this.options.editor=null),this.cmdFactory.destroy(),this.cmdManager.destroy(),this.noteSelection.off(),this.note.off()},e.prototype.getRangeData=function(t){var e=this,n=e.note,o={"text/yne-json":t.getDataAsJSON(n),"text/html":'<meta charset="utf-8">'+t.getDataAsHtml(n),"text/plain":t.getDataAsPlain(n),"text/yne-note-id":n.getNoteId()},r=e._getImgDomInRange(t);o["text/yne-image-json"]=e._getImageDataAsJson(r),e._addYneTableData(n,t,o);var i=e.editor.getOuterAppInfo();return i&&(o["text/yne-app-info"]=i),o},e.prototype.initialize=function(t){var e=this,n=t.noteView;e.cmdManager=new h(t),e.cmdFactory=new d(t),e.removeLocalImg=t.removeLocalImg||!1,e.setOptions(t),e.noteView=n,e.noteSelection=new m({noteView:e.noteView}),e._initKeyHandlerManager(t.keyHandlerNames),e.editor=t.editor,e.imgTitleInput=t.imgTitleInput,e._bindEvents()},e.prototype.pasteYTableJson=function(t,e){var o=this;if(n.isString(t))try{t=JSON.parse(t)}catch(t){return void p.error("parse ytable json  string error")}return o._pasteJSON([{blockType:y.BlockTypes.TABLE,data:t}],"","",e)},e.prototype._addYneTableData=function(t,e,n){if(e.isSingleTableSelected()){var o=e.getStartBlockRange(),r=o.getDataAsJSON(!0);r&&(n["text/yne-table-json"]=JSON.stringify(r))}},e.prototype._bindEvents=function(){var t=this,e=t.cmdManager,n=t.noteView;l.addListeners({"update-selection":"onUpdateSelection","command-exec":"_onCommandExec"},e,t),l.bubble(["redo-stack-change","undo-stack-change"],e,t),l.addListeners({"selection-change":"_onSelectionChange"},t.noteSelection,t),l.bubble({contextmenu:!0,selectstart:!0,"mouse-down":!0,"yne-replace-image":!0,"yne-replace-attachment":!0,"yne-download-image":!0,"yne-preview-image":!0,"yne-download-attachment":!0,"yne-pre-copy":!0,"yne-pre-paste":!0,"yne-pre-cut":!0,"yne-open-image":!0,"yne-open-attachment":!0,"yne-on-paste":!0,"yne-blob-paste":!0,"open-link":"yne-open-link","cell-edit-view-exit":!0,"cell-edit-view-history-change":!0,"yne-image-ocr":!0},n,t),l.bubble(["link-menu-hide","locked-change"],n,t.editor.linkView),l.addListeners({"delete-selection":"_onDeleteSelection","text-input":"_onTextInput","key-pressed":"_onKey",command:"onCommand",copy:"_onCopy",cut:"_onCut",paste:"onPaste",dragstart:"_onDragStart",dragover:"_onDragOver",drop:"_onDrop",dragend:"_onDragEnd","note-append-blankparagraph":"_onAppendBlankParagraph",onCompositionStart:"_onCompositionStart","inner-goto":"innerGoto","header-footer-view-text-change":"_onHeaderFooterViewTextChange","backup-drag-range":"_onBackupDragRange","get-note-range":"_onGetNoteRange","move-caret":"_onMoveCaretWithDirection","global-redo":"redo","global-undo":"undo","cell-edit-view-enter":"_onEnterTableEdit","cell-edit-view-selection-change":"_onCellEditViewSelectionChange","cell-edit-view-command-executed":"_onCellEditViewSelectionChange","save-content":"_onSaveContent"},n,t),n.on("get-editing-styles",function(e){e(t.editingInlineStates)}),t.editor&&t.editor.onDocSelectionChange&&t.noteSelection.on("doc-change-selection",t.editor.onDocSelectionChange,t.editor),n.on("yne-click",function(){t.editor.recoverFromIdleTimeout(),t.trigger("yne-click")}),n.on("link-menu-show",function(e){t.editor.linkView.trigger("link-menu-show",e)}),n.on("get-image-items",t._getImgItems),t.imgTitleInput&&l.bubble(["img-title-edit-start","img-title-edit-end","img-title-edit-focus","img-title-edit-exit","img-title-edit-update","locked-change"],n,t.imgTitleInput)},e.prototype._createCmd=function(t,e){var n=this,o=n.cmdFactory;return e.range||r.isCollabCommand(e)||(e.range=n.getNoteRange()||y.NoteRange.createMock()),o.create(t,n.note,e)},e.prototype._executeCollabCmd=function(t,e){var n,o=this,r=o.getNoteRange();!1===(n=o.cmdManager.exec(t,r,e))&&e.collabProperties.isOwnCmd&&o.editor.notifyErrorToHost(f.INVALIDACTION_FAILED_COLLABCMD)},e.prototype._executeLocalCmd=function(t,e){var n,o=this;if(!t||!1!==t.isReadyToApply)return n=o.getNoteRange(),o.cmdManager.exec(t,n,e)},e.prototype._getImgDomInRange=function(t){var e,o,r,i,s=this,a=s.note,l=s.noteView,c=t.getStartBlockRange(),u=t.getEndBlockRange(),p=a.getBlockIndex(c.block),d=a.getBlockIndex(u.block),h={};for(e=p;e<=d;e++)o=null,r=a.getBlockAt(e),y.BlockTypes.isImage(r)&&(i=l.blockViews[e].getImgElement(),h[r.getId()]={img:i,source:r.getSource()}),y.BlockTypes.isTable(r)&&(e===p&&(o=c),e===d&&(o=u),n.extend(h,l.blockViews[e].getImageDomMapByTableRange({selectAll:!o,tableRange:o})));return h},e.prototype._getImageDataAsJson=function(t){var e=a.getBase64Data(t);return JSON.stringify(e)},e.prototype._getNextCaretBlock=function(t){for(var e=this.note.getNextBlock(t);e&&(!this._isCaretBlock(e)||e.isLocked());)e=this.note.getNextBlock(e);return e},e.prototype._getImgItems=function(t){var e=this,o=e.note.blocks,r=[],i=0;n.each(o,function(e){if(e&&y.BlockTypes.isImage(e)){var n=e.getSource().replace(location.protocol+"//"+location.host,"");t===e&&(i=r.length),r.push({index:r.length,name:e.getTitle(),preSrc:n,src:n})}}),e.trigger("yne-preview-image",[i,r])},e.prototype._getPreCaretBlock=function(t){for(var e=this.note.getPreBlock(t);e&&(!this._isCaretBlock(e)||e.isLocked());)e=this.note.getPreBlock(e);return e},e.prototype._getUploadData=function(t,e,o){var r,i=0,s=[],l={},u={};if(!(n.isEmpty(t)||n.isEmpty(e)&&n.isEmpty(o)))return r=a.setBlockIds(o,t),n.each(t,function(t,e){t.base64&&(s.push({id:i,url:e,blob:a.base64ToBlob(t.base64),isGroup:c.isFromWebGroup(e)}),l[i]=t.imgBlockIds,i++)}),n.each(e,function(t){var e=t.getSource(),o=t.getResource(),r=e+"_"+o,a=t.getId();n.isUndefined(u[r])?(u[r]=i,l[i]=[a],s.push({id:i,source:e,resource:t.getResource(),isGroup:c.isFromWebGroup(e)}),i++):l[u[r]].push(a)}),{data:s,map:l,replaceImgList:r}},e.prototype._handleLocalCmdInCollabMode=function(t,e){var n,o,r,i=this,s=!0,a=!0;if(n=i.getNoteRange(),t.setCmdOriginalNoteVersion(i.note.getFileVersion()),!i.editor.isValidLocalDataCmd(t))return void p.warn("skip invalid local command");o=i.noteView.isOnComposition&&"comp.KeyBackspace"===t.name,r=t.isSingleBlockAffected()&&i.editor.isMyOwnLockedBlock(e.range)&&i.editor.isLastOwnDataCmdExecuted(),o||r?(s=i.cmdManager.exec(t,n,e),!1===s?(a=!1,i.editor.notifyErrorToHost(f.INVALIDACTION_FAILED_LOCALCMD)):t.effected?t.isLocalExecutedCmd=!0:a=!1):t.isLocalExecutedCmd=!1,a?i.editor.pushLocalDataCommand(t,o):p.warn("NotReadyToSend:",t)},e.prototype._initKeyHandlerManager=function(t){var e=this,o=e.keyHandlerManager=new g({});o.on("bind-key",function(t){var n=e.noteView;n&&n.bindKey(t)}),o.on("unbind-key",function(t){var n=e.noteView;n&&n.unbindKey(t)}),t=t||o.getAvailableHandlerNames(),n.each(t,function(t){o.bind(t)})},e.prototype._isCaretBlock=function(t){return y.BlockTypes.isTextBlock(t)||y.BlockTypes.isImage(t)||y.BlockTypes.isAttachment(t)||y.BlockTypes.isTable(t)||y.BlockTypes.isMacro(t)},e.prototype._isLinkStyles=function(t){return n.contains(["color","underline"],t)},e.prototype._isPartlyOverlapWithAnchor=function(t){var e,n,o,r,i,s,a;return!(!t||!t.isInSingleBlock())&&(e=t.getStartBlockRange(),(n=e.block)instanceof y.Paragraph&&(o=e.start,r=e.end,o===r?(o>0&&(s=n.getTextStyle("href",o-1,o)[0]),o<n.getLength()&&(a=n.getTextStyle("href",o,o+1)[0]),(s||a)&&s!==a):(i=n.getCommonInlineStyle("href",{end:r,start:o}))&&i===f.INTERM))},e.prototype._onMoveCaretWithDirection=function(t,e){var n,o,r,i,s,a,l,c=this;(n=c.getNoteRange())&&(n.canDrawedByNative()||(r=n.getStartBlockRange(),o=r.block,(y.BlockTypes.isImage(o)||y.BlockTypes.isAttachment(o)||y.BlockTypes.isTable(o)||y.BlockTypes.isHr(o)||y.BlockTypes.isUnknown(o)||y.BlockTypes.isHandWrite(o)||y.BlockTypes.isMacro(o))&&(t?(i=c._getNextCaretBlock(o),s=!0):(i=c._getPreCaretBlock(o),s=!1),i?(a=y.BlockRangeUtil.createRangeByBlock({allContent:!1,block:i,collapseToStart:s}),l=new y.NoteRange({endRange:a,startRange:a}),c.noteSelection.setRange(l),e&&e.preventDefault()):t&&c.noteView.focusLastBlankLine())))},e.prototype._notifyEditingStatesChange=function(){var t,e,o,r=this,i=r.getNoteRange(),s=r.editingInlineStates||{},a=!1;!r.isReadOnly()&&i&&(t=i.getStartBlockRange(),i.isInSingleBlock()&&y.BlockTypes.isTextBlock(t.block)&&t.block.getLength()<t.start&&(a=!0),(a||s&&i.isCollapsed())&&(!i.isSingleTableSelected()||t.getAsRectRange())||(s=r.querySelectionInlineStyles(i)||{}),o=n.clone(s),e=i.clone(!0),e.collapse(!0),n.each(["font-family","font-size"],function(t){var n;s[t]===f.INTERM&&(n=r.querySelectionInlineStyle(t,e),s[t]=n)}),s.heading=null,r.trigger("yne-editing-state-change",s,o))},e.prototype._onAppendBlankParagraph=function(){this.execCommand("comp.AppendBlank")},e.prototype._onCellEditViewSelectionChange=function(){var t,e,n=this,o=n.getNoteRange(),r=o.getStartBlockRange(),i=r.block,s=n.noteView.getBlockViewByBlock(i);s&&(t=s.getCellEditView(),e=t.queryInlineStylesForBulb(),n.trigger("yne-editing-state-change",e))},e.prototype._onCommandExec=function(t,e){this.trigger("command-exec",t,e)},e.prototype._onCompositionStart=function(t){var e,o,r=this,i=r.getNoteRange(),s=[],a=!1;if(!i)return void p.error("_onCompositionStart:noteRange should not be null");if(r.isCollabEnabled()){if(o=r.note.getInterBlocks(i.getStartBlockRange().block,i.getEndBlockRange().block,!0),n.each(o,function(t){var e=r.noteView.getBlockViewByBlock(t);s.push(e),e.isCollabLocked()&&(a=!0)}),t(a,s),a)return;e=i.getStartBlockRange(),e&&i.isInSingleBlock()&&y.BlockTypes.isTextBlock(e.block)&&!r.editor.isMyOwnLockedBlock(e)&&(r.editor.sendCachedDataCommand(),r._sendBlockLockInfo(e.block.getId()))}},e.prototype._omitLinkStylesIfNeeded=function(t,e){return t&&t.href&&this._isPartlyOverlapWithAnchor(e)&&(t.href=void 0,this.isLinkStylesChanged||(t.color="#393939",t.underline=!1)),t},e.prototype._onCut=function(t){var e=this,n=e.getNoteRange();t.preventDefault(),e.trigger("yne-pre-cut",t,function(){e._setClipboardByRange(n,t),!n||n.isCollapsed()||n.isSingleTableSelected()||e.execCommand("comp.DeleteNoteRange",{range:n})})},e.prototype._onCopy=function(t){var e=this,n=e.getNoteRange();p.DEBUG&&(p.profile("on-copy"),p.time("on-copy")),t.preventDefault(),e.trigger("yne-pre-copy",t,function(){e._setClipboardByRange(n,t),p.DEBUG&&(p.timeEnd("on-copy"),p.profileEnd("on-copy"))})},e.prototype._onDeleteSelection=function(){var t=this,e=t.getNoteRange();e&&!e.isCollapsed()&&t.execDeleteBackward(e)},e.prototype._onGetDefaultSetFont=function(t){t(this.getDefaultFont())},e.prototype._onKey=function(t,e){var n=this,o=n.noteView,r=n.keyHandlerManager;o&&(o.directionKeyJustMoved=!1),r.execWithKey(t,n,e)},e.prototype._onBackupDragRange=function(){var t=this.getNoteRange();t&&!t.isCollapsed()&&(this.dragTextRange=t)},e.prototype._onDragStart=function(t,e){var n,o,r,i=this;n=y.BlockTypes.isTextBlock(e)?i.dragTextRange:i.getNoteRange(),i.startNoteRange=n,n&&!n.isCollapsed()&&(r=new b({event:t}),o={"text/html":n.getDataAsHtml(i.note),"text/plain":n.getDataAsPlain(i.note),"text/yne-json":n.getDataAsJSON(i.note)},r.setDataMap(o),r.clearData("text/uri-list"),r.setProperty("effectAllowed","move"))},e.prototype._onDragOver=function(t,e){var o=this,r=t.clientX,i=t.clientY,s=t.dataTransfer.types;if(!n.contains(s,"text/yne-json"))return n.contains(s,"Files")&&(t.preventDefault(),t.stopPropagation()),!0;if(t.preventDefault(),t.stopPropagation(),!this.lastDragOver||o.lastDragOver.x!==r||o.lastDragOver.y!==i){if(!y.BlockTypes.isTextBlock(e)&&!y.BlockTypes.isListItem(e))return t.dataTransfer.dropEffect="none",void o.removeDragHint();t.dataTransfer.dropEffect="move",!1===o.addDragHint(r,i)&&(t.dataTransfer.dropEffect="none")}},e.prototype._onDrop=function(t){var e,o,i,s,a=this,l=t.dataTransfer,c=l.types,u=a.noteView,p=a.getRangeByPoint(t.clientX,t.clientY);t.preventDefault(),t.stopPropagation(),n.contains(c,"text/yne-json")&&(e=l.getData("text/yne-json"),o=y.Parser.parseJSON(e),n.map(o,function(t){t.setId(r.newGUID())}),i=u.parseNativeRange(p),(s=i[0])&&s.isCollapsed()&&u.trigger("command","comp.DragBlocks",{blocks:o,dropRange:s,range:a.startNoteRange})),n.contains(c,"Files")&&a.noteSelection.setRange(p),a.removeDragHint()},e.prototype._onDragEnd=function(){this.removeDragHint()},e.prototype._onHeaderFooterViewTextChange=function(t,e){this.onCommand("comp.SetHeaderFooter",{content:t,headerFooter:e,range:y.NoteRange.createForHeaderFooter(e)})},e.prototype._onGetNoteRange=function(t){t(this.getNoteRange())},e.prototype._onGetBlockView=function(t,e){var n=this,o=n.noteView;o&&e(o.getBlockViewByBlock(t))},e.prototype._onEnterTableEdit=function(t){t.blockId&&(this.editor.sendCachedDataCommand(),this._sendBlockLockInfo(t.blockId)),this.trigger("cell-edit-view-enter",t)},e.prototype._onSaveContent=function(){this.trigger("yne-save-content")},e.prototype._onSelectionChange=function(t){var e=this;e.lastDeleteInlineStates?(e.setEditingInlineStates(e.lastDeleteInlineStates),e.lastDeleteInlineStates=null):e._shouldKeepEditingStates(t)||e._updateEditingStates(),e._notifyEditingStatesChange(),e.trigger("yne-selection-change")},e.prototype._onTextInput=function(t){this.insertText(t,!1)},e.prototype._pasteBlobImg=function(t){var e,n,o=this;(e=t.originalEvent.clipboardData.items)&&1===e.length&&0===e[0].type.indexOf("image")&&(n=e[0].getAsFile(),o.trigger("yne-blob-paste",{data:n,isImg:!0},function(t){t&&t.source&&o.insertImage(t.source)}))},e.prototype._pasteForMac=function(){var t,e,o,r,i,s,a,l=this,c=l.editor,u=window.ynote;return u&&u.macClipboardData||p.error("YNote does not exist!"),l.isPasteAsText?(t=c.callMacNativeApi("macClipboardData",["text/plain"]),void l._pastePlain(t,l.isPasteAsText)):(e=c.callMacNativeApi("macClipboardData",["text/yne-table-json"]))&&l.pasteYTableJson(e)||(o=c.callMacNativeApi("macClipboardData",["text/yne-json"]),r=c.callMacNativeApi("macClipboardData",["text/yne-image-json"]),i=c.callMacNativeApi("macClipboardData",["text/yne-note-id"]),o&&l._pasteJSON(o,r,i)||(s=c.callMacNativeApi("macClipboardData",["text/html"]))&&l._pasteHTML(s))?void 0:(a=c.callMacNativeApi("macClipboardData",["image"]))?(a=JSON.parse(a),void n.each(a,function(t){l.insertImage(t)})):(t=c.callMacNativeApi("macClipboardData",["text/plain"]),t?void l._pastePlain(t,l.isPasteAsText):void 0)},e.prototype._pasteJSON=function(t,e,o,i){var s,l,c=this,u={},p=a.parseImageJson(e),d=y.Parser.parseJSON(t),h=[],f=[],g={},m={};return n.each(d,function(t){y.BlockTypes.isHeading(t)&&(g[t.getId()]=t)}),n.each(d,function(t){var e,n;y.BlockTypes.isCatalogue(t)?(e=g[t.getHref()])&&(t.setIndent(e.getLevel()-1),n=r.newGUID(),m[n]=!0,e.setId(n),t.setHref(n)):y.BlockTypes.isHeading(t)||(t.setId(r.newGUID()),y.BlockTypes.isListItem(t)?(s=t.getListId(),u[s]||(u[s]=y.ListItem.getOrCreateListById(c.note.getAllBlocks(),s,t.getListType())),t.setOwnerList(u[s])):y.BlockTypes.isAttachment(t)?h.push(t):y.BlockTypes.isImage(t)&&f.push(t))}),n.each(g,function(t){m[t.getId()]||t.setId(r.newGUID())}),c.note.isSameNote(o)||(l=c._uploadImageData(p||{},h,f)),c._pasteBlockList(d,l,i)},e.prototype._pasteHTML=function(t,e){var o=this,i={},s={},a=y.Parser.parseHtml(t);return n.each(a,function(t){y.BlockTypes.isHeading(t)&&(i[t.getId()]=t)}),n.each(a,function(t){var e,n;y.BlockTypes.isCatalogue(t)&&(e=i[t.getHref()])&&(t.setIndent(e.getLevel()-1),n=r.newGUID(),s[n]=!0,e.setId(n),t.setHref(n))}),n.each(i,function(t){s[t.getId()]||t.setId(r.newGUID())}),o._pasteBlockList(a,[],e)},e.prototype._pastePlain=function(t,e,n){var o,r,i,s=this,a=s.getNoteRange();return e&&(r=s.querySelectionInlineStyles(a),i=s.querySelectionBlockStyles(a)),o=y.Parser.parsePlain(t,r,i,e),s._pasteBlockList(o,[],n)},e.prototype._pasteBlockList=function(t,e,o){var r,i=this;if(t&&t.length&&(!0===i.removeLocalImg&&(t=n.filter(t,function(t){var o=/^(http:\/\/|https:\/\/|\/\/)/i,r=/^data:.+;base64/i;if(y.BlockTypes.isImage(t)&&-1===n.indexOf(e||[],t)){var i=t.getSource();return o.test(i)||r.test(i)}return!y.BlockTypes.isAttachment(t)||o.test(t.getResource())})),t&&t.length))return new v(function(e){i.trigger("yne-pre-paste",{event:o,blockList:t},function(){e()})}).then(function(){r=i.editingInlineStates,i.editingInlineStates=null,i.execCommand("comp.InsertBlocks",{blocks:t}),i.editingInlineStates=r}),!0},e.prototype._redoUndoLocalCmdInCollabMode=function(t){var e,o=this;return t.collabProperties.isCollabUndo?e=o.cmdManager.getUndoCmd():t.collabProperties.isCollabRedo&&(e=o.cmdManager.getRedoCmd()),e?(e=n.clone(e),e.setCmdOriginalNoteVersion(o.note.getFileVersion()),e.isLocalExecutedCmd=!1,t.collabProperties.isCollabUndo?(e.setCollabUndo(!0),e.setCollabRedo(!1)):t.collabProperties.isCollabRedo&&(e.setCollabRedo(!0),e.setCollabUndo(!1)),o.editor.isValidLocalDataCmd(e)?void(r.isInlineStateSetCommand(e)||o.editor.pushLocalDataCommand(e,!0)):void p.warn("skip invalid redo/undo local command")):void p.warn("skip empty redo/undo local command")},e.prototype._setClipboardByRange=function(t,e){var n,o,r,i=this;t&&!t.isCollapsed()&&(n=i.getRangeData(t),r=new _({event:e}),r.setDataMap(n),o=t.isInSingleBlock()&&y.BlockTypes.isAttachment((t.getStartBlockRange()||{}).block),i.trigger("yne-clipboard-set",o))},e.prototype._sendBlockLockInfo=function(t){var e=this;e.editor.hasCachedDataCmd()?window.setTimeout(e._sendBlockLockInfo.bind(e,t),100):e.editor.sendBlockLockInfo(t)},e.prototype._shouldKeepEditingStates=function(t){var e,o,r,i={do:["key.Space","key.Enter","comp.ApplyStyles","comp.IndentOutdent","comp.InsertAttachment","comp.InsertHorizontalRule","comp.InsertImage","comp.InsertList","comp.InsertTable","comp.KeyTab","comp.KeyTextInput"],redo:["comp.ApplyStyles","comp.IndentOutdent","comp.InsertList"],undo:["comp.ApplyStyles","comp.IndentOutdent","comp.InsertList"]};return!!(t&&t.isCommandType&&t.isCommandType())&&(e=t.getData()||{},o=e.cmdType,r=e.cmdName,n.contains(i[o],r))},e.prototype._updateDeleteInlineStates=function(t){t&&t.href&&(t=null),this.lastDeleteInlineStates=t},e.prototype._updateEditingStates=function(){var t=this,e=t.getNoteRange(),n=t.queryBackwardFirstInlineStyles(e);t.setEditingInlineStates(n)},e.prototype._uploadImageData=function(t,e,o){if(!(n.isEmpty(t)||n.isEmpty(e)&&n.isEmpty(t.data))){var r,i,s=this,a=[],l={},c=t.data,u=s.note,p=s.editor;if(r=s._getUploadData(c,e,o))return a=r.data,l=r.map,i=r.replaceImgList,p.trigger("yne-upload-image",{data:a,isImg:!0},function(t){setTimeout(function(){var e=[],o=[];n.each(t,function(t,r){n.each(l[r],function(r){var i=u.getBlockById(r);i&&(e.push(i),y.BlockTypes.isImage(i)?o.push(n.defaults(t,{source:i.getSource()||"uploadfail"})):y.BlockTypes.isAttachment(i)&&o.push(n.defaults(t,{resource:i.getResource(),source:i.getSource()})))})}),e.length>0&&(s.execCommand("comp.ReplaceResource",{ignoreUndoRedo:!0,resProps:o,resources:e}),n.each(e,function(t){t.trigger("content-change")}))})},function(){n.each(n.union(e,i),function(t){t.setFakeLoading(!0)})}),i}},e}(u)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(29),o=n(4),r=n(5),i=n(2).NoteRange,s=n(3);return n(361),e.extend({_editor:null,initialize:function(t){this._editor=t.editor},create:function(t,e,n){var a,l=null;if(n.collabProperties=n.collabProperties||{},t+="",a=r.get(t)){if(l=new a({note:e,args:n}),!this._editor.isCollabEnabled())return l.isSimple||l.setStartingRange(n.range),l;if(n.collabProperties.dataCmdError)return o.error(n.collabProperties.dataCmdError),null;if(l.isSimple)return l;!s.isCollabCommand(n)&&l.isOriginalCmd&&(i.isNoteRange(n.range)?l.setStartingRange(n.range):(n.collabProperties.dataCmdError="original cmd args.range should be noteRange",l=null))}else o.warn("No class for `"+t+"` command");return l},destroy:function(){this._editor&&(this._editor=null),this.options&&this.options.editor&&(this.options.editor=null)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(152),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(376),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(389),n(390),n(391),n(392),n(394),n(395),n(397),n(399),n(400),n(401),n(402),n(403)}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(24),a=n(2).RangeUtil,l=n(3);return e=o.extend({name:"comp.AppendBlank",_cmdArgs:null,_note:null,_newBlkId:null,_preBlkId:null,_preBlock:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},l.isCollabCommand(t._cmdArgs)||(t._newBlkId=l.newGUID(),t._preBlock=t._note.getLastBlock(),t._preBlock&&(t._preBlkId=t._preBlock.getId())),e.__super__.initialize.apply(t,arguments)},apply:function(){var t,e,n=this;return t=i.createNewParagraph(n._preBlock,n._newBlkId,""),i.setBlockStyleByPreBlock(t,n._preBlock),!1!==n.executeAtomicCommand(new s({note:n._note,newBlks:[t],preBlk:n._preBlock}))&&(e=a.buildNoteRangeFromParagraph(t,0,0),n.setEndingRange(e),!0)},fromCollabJSON:function(){var t=this,n=t.options.args.collabProperties.cmdJSON;n&&(t._newBlkId=n.newBlkId,n.preBlkId&&(t._preBlock=t._note.getBlockById(n.preBlkId))),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t,n=this;return n.rangeIsRequired=!1,n.resetAffectedBlockIds(),t=e.__super__.toCollabJSON.apply(n),t.newBlkId=n._newBlkId,n._preBlkId&&(t.preBlkId=n._preBlkId),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(1),a=n(16),l=n(3);return e=o.extend({name:"comp.ApplyStyles",_note:null,_cmdArgs:null,_blockStyleNameValues:null,_inlineStyleNameValues:null,initialize:function(){var t,n=this;if(n._note=n.options.note,n._cmdArgs=n.options.args,t=n._cmdArgs.range,e.__super__.initialize.apply(n),!l.isCollabCommand(n._cmdArgs)){if(!t)return i.error("note range should NOT be null:",n.name),void(n.isReadyToApply=!1);n._blockStyleNameValues=n._cmdArgs.blockStyles,n._inlineStyleNameValues=n._cmdArgs.inlineStyles}},apply:function(){var t=this,e=t._cmdArgs.range;return!a.setStylesOnNoteRange(t,t._note,e,s.clone(t._blockStyleNameValues),s.clone(t._inlineStyleNameValues))&&(t.setEndingRange(e),!0)},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;n&&(n.blockStyles&&(t._blockStyleNameValues=n.blockStyles),n.inlineStyles&&(t._inlineStyleNameValues=n.inlineStyles)),e.__super__.fromCollabJSON.apply(t)},isInlineStateSet:function(){var t=this,e=t._cmdArgs.range,n=!1;return e&&e.isCollapsed()&&(!t._blockStyleNameValues||s.isEmpty(t._blockStyleNameValues))&&t._inlineStyleNameValues&&!s.isEmpty(t._inlineStyleNameValues)&&(n=!0),n},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n&&(t._blockStyleNameValues&&!s.isEmpty(t._blockStyleNameValues)&&(n.blockStyles=t._blockStyleNameValues),t._inlineStyleNameValues&&!s.isEmpty(t._inlineStyleNameValues)&&(n.inlineStyles=t._inlineStyleNameValues)),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(157),r=n(5),i=n(4),s=n(3);return e=o.extend({name:"comp.DeleteNoteRange",_cmdArgs:null,_note:null,initialize:function(){var t,n=this;if(n._note=n.options.note,n._cmdArgs=n.options.args,e.__super__.initialize.apply(n),!s.isCollabCommand(n._cmdArgs)){if(!(t=n._cmdArgs.range))return n.isReadyToApply=!1,void i.error("note range should NOT be null",this.name);if(t.isCollapsed()&&!n._cmdArgs.isTableDelete)return n.isReadyToApply=!1,i.error("should NOT trigger the cmd when NoteRange is collapsed",t),!1}},isSingleBlockAffected:function(){var t,n,o=this,r=o._args.range,i=e.__super__.isSingleBlockAffected.apply(o),s=0;return i&&r&&r.isCollapsed()&&(n=r.getStartBlockRange(),t=n.block,s=n.start,o._note.getNextBlock(t)&&s===t.getEndOffset()&&(i=!1)),i}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(1),a=n(16),l=n(24),c=n(51),u=n(44),p=n(26),d=n(3),h=n(2),f=h.BlockTypes,g=h.BlockRangeUtil,m=h.BlockUtils,_=h.NoteRange;return e=o.extend({name:"comp.DragBlocks",_note:null,_cmdArgs:null,_dropBlockRange:null,_insertedBlocks:null,_newEndBlankParaId:null,_insertedBlocksJSON:null,initialize:function(){var t,n=this;if(n._note=n.options.note,n._cmdArgs=n.options.args,e.__super__.initialize.apply(n),!d.isCollabCommand(n._cmdArgs)){if(!(t=n._cmdArgs.range))return i.error(n.name+":note range should NOT be null"),void(n.isReadyToApply=!1);if(n._dropBlockRange=n._cmdArgs.dropRange,n._insertedBlocks=[],n._insertedBlocksJSON=[],s.each(n._cmdArgs.blocks,function(t){n._insertedBlocks.push(t),n._insertedBlocksJSON.push(t.toCollabJSON())}),n._newEndBlankParaId=d.newGUID(),!(n._dropBlockRange&&n._dropBlockRange.block&&f.isTextBlock(n._dropBlockRange.block)&&n._dropBlockRange.isCollapsed()))return n.isReadyToApply=!1,void i.error("drag destination should be a single pos in text block",n._dropBlockRange);if(n._isDropRangeInStartNoteRange(n._dropBlockRange))return n.isReadyToApply=!1,void i.error("dropBlockRange should not be in the startNoteRange",t,n._dropBlockRange)}},apply:function(){var t,e=this;return t=g.createRangeByBlock({block:e._dropBlockRange.block,start:e._dropBlockRange.start,end:e._dropBlockRange.end}),t=e._handleStartNoteRangeData(t),e._insertDraggedData(t),!0},_handleStartNoteRangeData:function(t){var e,n,o,r,i,l,u,d=this,h=d._cmdArgs.range,g=[];return e=h.getStartBlockRange(),n=e.block,o=h.getEndBlockRange(),r=o.block,u=d._isFullSelectionInTextBlock(e),h.isCollapsed()||a.deleteSelectedContent(d,d._note,h),h.isInMultiBlock()?(f.isTextBlock(n)&&!n.isEmpty()||(g.push(n),n=null),f.isTextBlock(r)&&!r.isEmpty()||(g.push(r),r=null),s.isEmpty(g)&&(t.block.getId()===r.getId()&&(t=d._rebuildDropRangeWhenNoteRangeMerge(e,o,t)),d.executeAtomicCommand(new c({block:n,start:n.getLength(),text:r.getText()})),g.push(r)),d.executeAtomicCommand(new p({note:d._note,blocks:g}))):f.isTextBlock(n)?u&&(i=d._note.getPreBlock(n),l=d._note.getNextBlock(n),(!(f.isImage(i)||f.isImage(l)||f.isAttachment(i)||f.isAttachment(l)||f.isTable(i)||f.isTable(l))||f.isMacro(i)||f.isMacro(l))&&(d.executeAtomicCommand(new p({note:d._note,blocks:[n]})),n=null)):(a.replaceBlockWithParagraph(d,d._note,n,""),n=null),t},_insertDraggedData:function(t){var e,n,o,r,i,d,h=this,m=h._cmdArgs.range,b=h._insertedBlocks[0],y=s.last(h._insertedBlocks),v=t.block;e=m.getStartBlockRange(),e.block.getId(),n=m.getEndBlockRange(),n.block.getId(),h._tuneDropBlockRange(t,e,n),!f.isTextBlock(b)||f.isHeading(b)||v.isEmpty()?(i=g.createRangeByBlock({block:h._insertedBlocks[0]}),d=i):(h._insertedBlocks.shift(),h.executeAtomicCommand(new c({block:t.block,start:t.start,text:b.getText()})),i=g.createRangeByBlock({block:t.block,start:t.start,end:t.start+b.getLength()}),d=i,t.start+=b.getLength(),t.end=t.start),s.isEmpty(h._insertedBlocks)||(o=t.block.sliceText(t.start,t.block.getLength()),m.isInMultiBlock()&&(d=f.isTextBlock(y)?g.createRangeByBlock({block:y,start:0,end:y.getLength()}):g.createRangeByBlock({block:y})),0===t.start?(v=h._note.getPreBlock(t.block),f.isTextBlock(y)?(y.append(o),h.executeAtomicCommand(new p({note:h._note,blocks:[t.block]}))):0===t.block.getLength()&&h.executeAtomicCommand(new p({note:h._note,blocks:[t.block]}))):t.start<t.block.getLength()&&(h.executeAtomicCommand(new u({block:t.block,start:t.start,end:t.block.getLength()})),f.isTextBlock(y)?y.append(o):(r=f.isListItem(t.block)?a.createNewListItem(t.block,h._newEndBlankParaId,o):f.isHeading(t.block)?a.createNewHeading(t.block,h._newEndBlankParaId,o,t.block.getLevel()):f.isTodo(t.block)?a.createNewTodo(t.block,{id:h._newEndBlankParaId,text:o,checked:t.block.getChecked()}):a.createNewParagraph(t.block,h._newEndBlankParaId,o),h._insertedBlocks.push(r),m.isInMultiBlock()&&(d=g.createRangeByBlock({block:r,start:0,end:0})))),h.executeAtomicCommand(new l({note:h._note,newBlks:h._insertedBlocks,preBlk:v}))),h.setEndingRange(_.create({startRange:i,endRange:d}))},_isDropRangeInStartNoteRange:function(t){var e,n=this,o=n._cmdArgs.range,r=o.getStartBlockRange(),i=o.getEndBlockRange(),a=t,l=a.block.getId(),c=!1;return l===r.block.getId()&&a.start>=r.start&&a.start<=r.end&&(c=!0),!c&&o.isInMultiBlock()&&(l===i.block.getId()&&a.start>=i.start&&a.start<=i.end?c=!0:(e=n._note.getInterBlocks(r.block,i.block),s.some(e,function(t){return l===t.getId()&&(c=!0),c}))),c},_isFullSelectionInTextBlock:function(t){var e=!1,n=0;return f.isTextBlock(t.block)&&(n=t.block.getLength()),n>0&&0===t.start&&t.end===n&&(e=!0),e},_rebuildDropRangeWhenNoteRangeMerge:function(t,e,n){var o;return o=n.start+t.start-e.end,g.createRangeByBlock({block:t.block,start:o,end:o})},_tuneDropBlockRange:function(t,e,n){var o=e.block.getId(),r=n.block.getId();t.block.getId()===o&&t.start>e.end&&(t.start-=e.end-e.start,t.end-=t.start),o!==r&&t.block.getId()===r&&t.start>n.end&&(t.start-=n.end-n.start,t.end-=t.start)},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON,r=n.collabProperties.coreEditor;e.__super__.fromCollabJSON.apply(t),o&&(t._newEndBlankParaId=o.newEndBlkId,t._dropBlockRange=r.buildBlockRangeFromJSON(o.dropRange),t._insertedBlocks=[],s.each(o.insertedBlocks,function(e){t._insertedBlocks.push(m.buildBlockFromCollabJSON(e,r))}))},isSingleBlockAffected:function(){var t=this,e=t._cmdArgs.range,n=e.getStartBlockRange();return!(!e.isInSingleBlock()||t._dropBlockRange.block.getId()!==n.block.getId())},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n&&(n.newEndBlkId=t._newEndBlankParaId,n.dropRange=t._dropBlockRange.toCollabJSON(),n.insertedBlocks=t._insertedBlocksJSON),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(11),a=n(1),l=n(4),c=n(3);return e=o.extend({name:"comp.FormatPainter",_cmdArgs:null,_note:null,_inlineStyles:null,_blockStyles:null,initialize:function(){var t,n=this;if(n._note=n.options.note,n._cmdArgs=n.options.args||{},t=n._cmdArgs.range,e.__super__.initialize.apply(n,arguments),!c.isCollabCommand(n._cmdArgs)){if(!t)return l.error(n.name+":note range should NOT be null"),void(n.isReadyToApply=!1);n._inlineStyles=n._cmdArgs.data.inlineStyles,n._blockStyles=n._cmdArgs.data.blockStyles}},apply:function(){var t=this,e=t._cmdArgs.range,n={},o={};return!!e.isCollapsed()||(a.each(t._inlineStyles,function(t,e){"href"!==e&&t!==s.INTERM&&null!==t&&void 0!==t&&(n[e]=t)}),a.each(t._blockStyles,function(t,e){t!==s.INTERM&&null!==t&&void 0!==t&&(o[e]=t)}),a.isEmpty(o)&&a.isEmpty(n)||(i.resetAllStyles(t,t._note,e),i.setStylesOnNoteRange(t,t._note,e,o,n)),t.setEndingRange(e),!0)},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;n&&(t._inlineStyles=n.inlineStyles,t._blockStyles=n.blockStyles),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t.inlineStyles=n._inlineStyles,t.blockStyles=n._blockStyles,t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(2).BlockTypes,s=n(16),a=n(4),l=n(84),c=n(3);return e=o.extend({name:"comp.IndentOutdent",_cmdArgs:null,_note:null,_indentStep:null,initialize:function(){var t,n,o,r=this;if(r._note=r.options.note,r._cmdArgs=r.options.args||{},e.__super__.initialize.apply(r,arguments),!c.isCollabCommand(r._cmdArgs)){if(t=r._cmdArgs.range,r._indentStep=r._cmdArgs.indentStep,!t||!t.canDrawedByNative())return a.error(r.name+":note range should NOT be null or cannot be Drawed by native"),void(r.isReadyToApply=!1);if(n=t.getStartBlockRange(),o=n.block,t.isInSingleBlock()&&!i.isTextBlock(o))return void(r.isReadyToApply=!1)}},apply:function(){var t,e,n,o,r,a=this,c=a._cmdArgs.range;return t=c.getStartBlockRange(),e=t.block,n=c.getEndBlockRange(),o=n.block,c.isInMultiBlock()?(r=a._note.getInterBlocks(e,o,!0),s.isInSameList(r)?a._isFirstListItem(r[0])?s.updateBlocksIndentLevel(a,r[0].getOwnerList().getItems(),a._indentStep):a.executeAtomicCommand(new l({listItems:r,deltaLevel:a._indentStep})):s.updateBlocksIndentLevel(a,r,a._indentStep),a.setEndingRange(c),!0):(i.isListItem(e)?a._isFirstListItem(e)?s.updateBlocksIndentLevel(a,e.getOwnerList().getItems(),a._indentStep):a.executeAtomicCommand(new l({listItems:[e],deltaLevel:a._indentStep})):s.updateBlocksIndentLevel(a,[e],a._indentStep),a.setEndingRange(c),!0)},_isFirstListItem:function(t){return 1===t.getLevel()&&1===t.getIndex()},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;n&&(t._indentStep=n.indentStep),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.indentStep=n._indentStep),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(57),r=n(5),i=n(24),s=n(52),a=n(3),l=n(2),c=l.BlockTypes,u=l.Attachment,p=l.AttachmentResource;return e=o.extend({name:"comp.InsertAttachment",_cmdArgs:null,_note:null,_attachBlkId:null,_attachSrc:null,_attachRes:null,_attachFileName:null,_attchFileLen:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),a.isCollabCommand(t._cmdArgs)||(t._attachBlkId=a.newGUID(),t._attachSrc=t._cmdArgs.src,t._attachRes=t._cmdArgs.resource,t._attachFileName=t._cmdArgs.fileName,t._attchFileLen=t._cmdArgs.fileLength)},insertResource:function(t,e,n){var o,r=this,s=r._cmdArgs.range,a=[];return c.isTable(t)&&s.isSingleTableSelected()?r._insertAttachmentInTable(t):(o=new u({source:r._attachSrc,resource:r._attachRes,fileName:r._attachFileName,fileLength:r._attchFileLen}),e&&a.push(e),a.push(o),n&&a.push(n),o.setId(r._attachBlkId),r.executeAtomicCommand(new i({note:r._note,newBlks:a,preBlk:t})),o)},_insertAttachmentInTable:function(t){var e,n=this,o=n._cmdArgs.range,r=o.getStartBlockRange(),i=r.getAsRectRange();if(i)return e=i.getFirstCellRect(),n.executeAtomicCommand(new s({table:t,cellRect:e,content:new p({source:n._attachSrc,resource:n._attachRes,fileName:n._attachFileName,fileLength:n._attchFileLen})})),t},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._attachBlkId=n.newBlkId,t._attachSrc=n.src,t._attachRes=n.attachRes,t._attachFileName=n.fileName,t._attchFileLen=n.fileLen)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newBlkId=n._attachBlkId,t.src=n._attachSrc,t.attachRes=n._attachRes,t.fileName=n._attachFileName,t.fileLen=n._attchFileLen),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(1),a=n(16),l=n(24),c=n(51),u=n(26),p=n(44),d=n(3),h=n(2),f=h.BlockTypes,g=h.NoteRange,m=h.BlockRangeUtil,_=h.BlockUtils,b=h.RichText;return e=o.extend({name:"comp.InsertBlocks",_note:null,_cmdArgs:null,_insertedBlocks:null,_newEndBlankParaId:null,_insertedBlocksJSON:null,initialize:function(){var t=this;if(t._note=t.options.note,t._cmdArgs=t.options.args,e.__super__.initialize.apply(t),!d.isCollabCommand(t._cmdArgs)){if(!t._cmdArgs.range)return i.error(t.name+":note range should NOT be null"),void(t.isReadyToApply=!1);t._insertedBlocks=[],t._insertedBlocksJSON=[],s.each(t._cmdArgs.blocks,function(e){t._insertedBlocks.push(e),t._insertedBlocksJSON.push(e.toCollabJSON())}),t._newEndBlankParaId=d.newGUID()}},apply:function(){var t,e,n,o=this,r=o._note,i=o._cmdArgs.range,l=s.last(o._insertedBlocks);return o._getCollabRequiredData(o._insertedBlocks),f.isTextBlock(l)?e=m.createRangeByBlock({block:l,start:l.getLength(),end:l.getLength()}):(n=r.getNextBlock(o.startingRange.getEndBlockRange().block),f.isTextBlock(n)&&(e=m.createRangeByBlock({block:n,start:n.getLength(),end:n.getLength()}))),i.isCollapsed()||a.deleteSelectedContent(o,o._note,i),t=i.isInMultiBlock()?o._handleMultiBlockSelection(e):o._handleSingleBlockSelection(e),o.setEndingRange(t),!0},_handleMultiBlockSelection:function(t){var e=this,n=e._cmdArgs.range,o=n.getStartBlockRange(),r=o.block,i=n.getEndBlockRange(),s=i.block,a=e._insertedBlocks[0];return 1===e._insertedBlocks.length&&f.isTextBlock(a)&&f.isTextBlock(r)&&f.isTextBlock(s)?(e._insertedBlocks.shift(),t=m.createRangeByBlock({block:r,start:r.getLength()+a.getLength(),end:r.getLength()+a.getLength()}),a.append(s.getText()),e.executeAtomicCommand(new u({note:e._note,blocks:[s]})),e.executeAtomicCommand(new c({block:r,start:r.getLength(),text:a.getText()}))):t=e._insertBlocksBetweenStartEndBlock(o,i,t),g.create({startRange:t,endRange:t})},_getCollabRequiredData:function(t){var e=this,n=[];t&&t.length>0&&s.each(t,function(t){n.push(t.getId())}),n.push(e._newEndBlankParaId),e.pushAffectedBlockIds(n)},_handleSingleBlockSelection:function(t){var e,n=this,o=n._cmdArgs.range,r=o.getStartBlockRange(),i=r.block;return e=f.isTextBlock(i)?n._handleSingleTextStartBlock(i,t):n._handleSingleNonTextStartBlock(i,t),s.isEmpty(n._insertedBlocks)||(e.needToRebuildLIs&&n._rebuildListItems(n._insertedBlocks,e.refBlockForInsert,e.deltaLevel),n.executeAtomicCommand(new l({note:n._note,newBlks:n._insertedBlocks,preBlk:e.refBlockForInsert}))),g.create({startRange:e.newEndBlockRange,endRange:e.newEndBlockRange})},_handleSingleNonTextStartBlock:function(t,e){var n=this,o=n._insertedBlocks[0],r=s.last(n._insertedBlocks),i=n._note.getPreBlock(t),l=n._note.getNextBlock(t),c={};return c.refBlockForInsert=i,c.newEndBlockRange=e,c.needToRebuildLIs=!1,n.executeAtomicCommand(new u({note:n._note,blocks:[t]})),f.isTextBlock(o)||f.isTextBlock(i)||n._insertedBlocks.unshift(a.createNewParagraph(t,t.getId(),"")),f.isTextBlock(r)||f.isTextBlock(l)||(n._insertedBlocks.push(a.createNewParagraph(t,n._newEndBlankParaId,"")),c.newEndBlockRange=m.createRangeByBlock({block:s.last(n._insertedBlocks),start:0,end:0})),c},_handleSingleTextStartBlock:function(t,e){var n,o=this,r=o._cmdArgs.range,i=r.getStartBlockRange(),a=o._note.getPreBlock(t),l=o._note.getNextBlock(t),d=o._insertedBlocks[0],h=s.last(o._insertedBlocks),g="",_=1===o._insertedBlocks.length,y={};return y.refBlockForInsert=t,y.newEndBlockRange=e,y.needToRebuildLIs=!1,y.deltaLevel=0,i.start<t.getLength()&&(g=t.sliceText(i.start,t.getLength())),_&&f.isTextBlock(d)||(f.isTextBlock(h)?(n=g instanceof b?g:b.createBlank(),h.append(n),o.executeAtomicCommand(new p({block:t,start:i.start,end:t.getLength()}))):""===g&&f.isTextBlock(l)?y.newEndBlockRange=m.createRangeByBlock({block:l,start:0,end:0}):(o._insertedBlocks.push(o._buildNewBlockFromStartBlock(t,o._newEndBlankParaId,g)),y.newEndBlockRange=m.createRangeByBlock({block:s.last(o._insertedBlocks),start:0,end:0}),o.executeAtomicCommand(new p({block:t,start:i.start,end:t.getLength()})))),f.isTextBlock(d)?t.getLength()>0||f.isListItem(t)||!f.isListItem(d)&&!f.isHeading(d)&&!f.isCatalogue(d)&&!f.isTodo(d)&&!f.isQuote(d)?(o._insertedBlocks.shift(),_&&(y.newEndBlockRange=m.createRangeByBlock({block:t,start:i.start+d.getLength(),end:i.start+d.getLength()})),o.executeAtomicCommand(new c({block:t,start:i.start,text:d.getText()})),f.isListItem(t)&&f.isListItem(o._insertedBlocks[0])&&(y.needToRebuildLIs=!0,f.isListItem(d)&&(y.deltaLevel=o._insertedBlocks[0].getLevel()-d.getLevel()))):(y.refBlockForInsert=a,o.executeAtomicCommand(new u({note:o._note,blocks:[t]})),f.isListItem(a)&&f.isListItem(d)&&(y.needToRebuildLIs=!0,y.deltaLevel=1-a.getLevel())):0===t.getLength()&&f.isTextBlock(a)&&(y.refBlockForInsert=a,o.executeAtomicCommand(new u({note:o._note,blocks:[t]}))),y},_buildNewBlockFromStartBlock:function(t,e,n){return f.isHeading(t)?a.createNewHeading(t,e,n,t.getLevel()):f.isCatalogue(t)?a.createNewCatalogue(t,{paraId:e,text:n,href:t.getHref()}):f.isListItem(t)?a.createNewListItem(t,e,n):f.isTodo(t)?a.createNewTodo(t,{id:e,text:n,checked:t.getChecked()}):f.isQuote(t)?a.createNewQuote(t,{id:e,text:n}):a.createNewParagraph(t,e,n)},_insertBlocksBetweenStartEndBlock:function(t,e,n){var o=this,r=t.block,i=e.block,l=o._note.getPreBlock(r),p=o._note.getNextBlock(i),d=o._insertedBlocks[0],h=s.last(o._insertedBlocks),g=r,_=[],b=0;return f.isTextBlock(i)?f.isTextBlock(h)?(_.push(i),h.append(i.getText())):f.isTextBlock(h)||(n=m.createRangeByBlock({block:i,start:0,end:0})):(_.push(i),f.isTextBlock(p)||f.isTextBlock(h)?f.isTextBlock(h)||(n=m.createRangeByBlock({block:p,start:0,end:0})):(o._insertedBlocks.push(a.createNewParagraph(i,i.getId(),"")),n=m.createRangeByBlock({block:s.last(o._insertedBlocks),start:0,end:0}))),f.isTextBlock(r)?f.isTextBlock(d)?r.getLength()>0||f.isListItem(r)||!f.isListItem(d)?(o._insertedBlocks.shift(),o.executeAtomicCommand(new c({block:r,start:r.getLength(),text:d.getText()})),f.isListItem(d)&&f.isListItem(o._insertedBlocks[0])&&(b=o._insertedBlocks[0].getLevel()-d.getLevel())):(g=l,o.executeAtomicCommand(new u({note:o._note,blocks:[r]}))):0===r.getLength()&&f.isTextBlock(l)&&(g=l,o.executeAtomicCommand(new u({note:o._note,blocks:[r]}))):(_.push(r),g=l,f.isTextBlock(l)||f.isTextBlock(d)||o._insertedBlocks.unshift(a.createNewParagraph(r,r.getId(),""))),s.isEmpty(_)||o.executeAtomicCommand(new u({note:o._note,blocks:_})),o._insertedRemainedBlocks(g,b),n},_insertedRemainedBlocks:function(t,e){var n=this;s.isEmpty(n._insertedBlocks)||(f.isListItem(n._insertedBlocks[0])&&f.isListItem(t)&&n._rebuildListItems(n._insertedBlocks,t,e),n.executeAtomicCommand(new l({note:n._note,newBlks:n._insertedBlocks,preBlk:t})))},_rebuildListItems:function(t,e,n){var o,r,i=t[0],a=0;isNaN(n)&&(n=0),r=i.listId,o=e.getOwnerList(),a=e.getLevel()-i.getLevel()+n,s.chain(t).groupBy(function(t){if(f.isListItem(t))return t.listId}).each(function(t,e){t.length>0&&e===r&&s.each(t,function(t){0!==a&&t.setLevel(t.getLevel()+a),t.setOwnerList(o)})})},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON,r=n.collabProperties.coreEditor;e.__super__.fromCollabJSON.apply(t),o&&(t._newEndBlankParaId=o.newEndBlkId,t._insertedBlocks=[],s.each(o.insertedBlocks,function(e){t._insertedBlocks.push(_.buildBlockFromCollabJSON(e,r))}))},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n&&(n.newEndBlkId=t._newEndBlankParaId,n.insertedBlocks=t._insertedBlocksJSON),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(57),i=n(5),s=n(11),a=n(16),l=n(24),c=n(3),u=n(2),p=u.Catalogue,d=u.Catalogues;return e=r.extend({name:"comp.InsertCatalogue",_cmdArgs:null,_note:null,_blkId:null,_ownerId:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),t._initBlocks()},_initBlocks:function(){var t,e,n=this,r=n._note,i=r.blocks,l=[],u=[];n._ownerId=n._ownerId||c.newGUID(),e=new d({id:n._ownerId}),o.each(i,function(t){a.isForCatalogueBlock(t)&&l.push(t)}),n._catalogueIds=n._catalogueIds||[],o.each(l,function(o,r){t=new p({indent:o.getLevel()-1,text:o.getText().toString().trim(),href:o.getId(),ownerList:e}),u.push(t),n._catalogueIds[r]?t.setId(n._catalogueIds[r]):n._catalogueIds[r]=t.getId()}),0===l.length&&(t=new p({indent:0,text:s.INSERT_BLANK_CATALOGUE_TEXT,ownerList:e}),u.push(t),n._catalogueIds[0]?t.setId(n._catalogueIds[0]):n._catalogueIds[0]=t.getId()),n._newCatalogues=u},insertResource:function(t,e,n){var o=this,r=o._newCatalogues,i=r[r.length-1];return r.length<1?t:(e&&r.unshift(e),n&&r.push(n),o.executeAtomicCommand(new l({note:o._note,newBlks:r,preBlk:t})),i)},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._ownerId=n.listId,t._catalogueIds=n.blockIds)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.listId=n._ownerId,t.blockIds=n._catalogueIds),t}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(16),i=n(5),s=n(3),a=n(2),l=a.NoteRange,c=a.BlockRangeUtil,u=a.BlockTypes;return e=o.extend({name:"comp.InsertHeading",_cmdArgs:null,_note:null,_blkId:null,_level:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},t._level=t._cmdArgs.level,e.__super__.initialize.apply(t,arguments),s.isCollabCommand(t._cmdArgs)||(t._blkId=s.newGUID())},apply:function(){var t,e,n,o=this,i=o._cmdArgs.range,s=i.getStartBlockRange(),a=i.getEndBlockRange(),p=s.block,d=a.block;if(i.isInMultiBlock())n=o._note.getInterBlocks(p,d,!0),n.forEach(function(r,i){return 0===i?void(t=o._helpSetBlock(r)):i===n.length-1?void(e=o._helpSetBlock(r)):void o._helpSetBlock(r)}),o.setEndingRange(new l({startRange:c.createRangeByBlock({block:t,start:s.start,end:s.end}),endRange:c.createRangeByBlock({block:e,start:a.start,end:a.end})}));else{if(!u.isTextBlock(d))return!1;e=o._helpSetBlock(d),r.setTextBlockAsEndingRange(o,e,a.start,a.end)}},_helpSetBlock:function(t){var e=this;return u.isTextBlock(t)?"default"===e._level||u.isHeading(t)&&t.getLevel()===e._level?r.replaceBlockWithParagraph(e,e._note,t,t.getText(),!0):r.replaceBlockWithHeading(e,e._note,t,t.getText(),e._level):t},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._blkId=n.blockId,t._level=n.listType)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.blockId=n._blkId,t.listType=n._level),t}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(57),r=n(5),i=n(2).Hr,s=n(24),a=n(3);return e=o.extend({name:"comp.InsertHorizontalRule",_cmdArgs:null,_note:null,_hLineBlkId:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),a.isCollabCommand(t._cmdArgs)||(t._hLineBlkId=a.newGUID())},insertResource:function(t,e,n){var o,r=this,a=[];return o=new i,o.setId(r._hLineBlkId),e&&a.push(e),a.push(o),n&&a.push(n),r.executeAtomicCommand(new s({note:r._note,newBlks:a,preBlk:t})),o},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._hLineBlkId=n.newBlkId)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newBlkId=n._hLineBlkId),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(57),r=n(5),i=n(24),s=n(52),a=n(3),l=n(2),c=l.BlockTypes,u=l.ImageResource,p=l.Image;return e=o.extend({name:"comp.InsertImage",_cmdArgs:null,_note:null,_imgBlkId:null,_imgSrc:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),a.isCollabCommand(t._cmdArgs)||(t._imgBlkId=a.newGUID(),t._imgSrc=t._cmdArgs.src)},insertResource:function(t,e,n){var o,r=this,s=r._cmdArgs.range,a=[];return c.isTable(t)&&s.isSingleTableSelected()?r._insertImageInTable(t):(o=new p({source:r._imgSrc}),e&&a.push(e),a.push(o),n&&a.push(n),o.setId(r._imgBlkId),r.executeAtomicCommand(new i({note:r._note,newBlks:a,preBlk:t})),o)},_insertImageInTable:function(t){var e,n=this,o=n._cmdArgs.range,r=o.getStartBlockRange(),i=r.getAsRectRange();if(i)return e=i.getFirstCellRect(),n.executeAtomicCommand(new s({table:t,cellRect:e,content:new u({source:n._imgSrc})})),t},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._imgBlkId=n.newBlkId,t._imgSrc=n.src)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newBlkId=n._imgBlkId,t.src=n._imgSrc),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(4),a=n(1),l=n(66),c=n(51),u=n(112),p=n(375),d=n(52),h=n(3),f=n(2),g=f.RichText,m=f.BlockTypes;return e=o.extend({name:"comp.InsertLink",_cmdArgs:null,_note:null,_linkSrc:null,initialize:function(){var t,n,o,r=this;if(r._note=r.options.note,r._cmdArgs=r.options.args,e.__super__.initialize.apply(r,arguments),!h.isCollabCommand(r._cmdArgs)){if(t=r._cmdArgs.range,n=t.getStartBlockRange(),o=n.block,!r._cmdArgs.src)return void(r.isReadyToApply=!1);if(!m.isTable(o)){if(!t||!t.canDrawedByNative())return s.error(r.name+":note range should NOT be null or cannot be Drawed by native"),void(r.isReadyToApply=!1);if(t.isInMultiBlock()||!m.isTextBlock(o))return r.isReadyToApply=!1,void s.error("Cannot be executed in multi-selected blocks or non-text blocks:",r.name)}r._linkSrc=l.completeUrl(r._cmdArgs.src||""),r._linkStyles=r._cmdArgs.styles||{}}},apply:function(){var t,e,n,o,r=this,l=r._cmdArgs.range,d=l.getDataAsPlain(r._note),h=a.extend(r._linkStyles,{color:"#003884",underline:!0,href:r._linkSrc}),f=r._cmdArgs.text;return(t=l.getStartBlockRange())?(e=t.block,m.isTable(e)?(r._setTableBlock(h,f,l),void r.setEndingRange(l)):m.isCatalogue(e)?(0===e.getLength()?(n=new g({text:f||r._linkSrc}),o=n.getLength(),r.executeAtomicCommand(new c({block:e,start:t.start,text:n})),r.executeAtomicCommand(new p({block:e,href:r._linkSrc})),i.setTextBlockAsEndingRange(r,e,o,o)):(r.executeAtomicCommand(new p({block:e,href:r._linkSrc})),r.setEndingRange(l)),!0):(t.isCollapsed()?r._insertNewLink(t,f,h):f&&f!==d?(i.deleteSelectedContent(r,r._note,l),r._insertNewLink(t,f,h)):(h.href=r._linkSrc,r.executeAtomicCommand(new u({blocks:[e],styleNameValues:h,start:t.start,end:t.end})),r.setEndingRange(l)),!0)):(s.error(r.name+":startBlockRange should not be null"),!1)},_insertNewLink:function(t,e,n){var o,r=this,s=new g({text:e||r._linkSrc}),l=s.getLength(),u=t.block;s.setStyle(0,l,"href",r._linkSrc),a.each(n,function(t,e){s.setStyle(0,l,e,t)}),o=t.start+l,r.executeAtomicCommand(new c({block:u,start:t.start,text:s})),i.setTextBlockAsEndingRange(r,u,o,o)},_setTableBlock:function(t,e,n){var o=this,r=o._linkSrc,i=n.getStartBlockRange(),s=i.block,a=i.getAsRectRange();a&&a.forEach(function(n,i){var a,l,c,u,p;c=s.getCell(n,i),c.isMergedCell()||(a=c.getContent(n,i),!e&&c.isTextNoEmptyCell()&&(l=a.toRichText(),p=l.getLength()),p=p||e.length||r.length,u=l||new g({text:e||r}),u.setStyles(0,p,t),o.executeAtomicCommand(new d({table:s,content:u,cellRect:{row:n,col:i}})))})},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),o&&(t._linkSrc=o.src,t._linkStyles=o.inlineStyles)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n&&(n.src=t._linkSrc,n.inlineStyles=t._linkStyles),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(3);return e=o.extend({name:"atom.SetCatalogueHref",_href:null,_block:null,_oldHref:null,initialize:function(){var t=this,n=t.options,o=n.args;i.isCollabCommand(o)||(t._block=n.block||o.block,t._href=n.href||o.href),e.__super__.initialize.apply(t,arguments)},apply:function(){var t=this,e=t._href,n=t._block;n.setHref&&(t._oldHref=n.getHref(),n.setHref(e))},doUnapply:function(){var t=this;t._block.setHref(t._oldHref)},getEndingRange:function(){return this.options.args.range},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._block=t.getBlockById(i.blockId),n._href=i.styleNameValues,n._oldHref=i.oldStyleNameValues)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.blockId=n._block.getId(),t.styleNameValues=n._href,t.oldStyleNameValues=n._oldHref),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(4),a=n(1),l=n(2),c=l.BlockTypes,u=l.List,p=l.ListItem,d=l.NoteRange,h=l.BlockRangeUtil,f=n(26),g=n(24),m=n(377),_=n(3);return e=o.extend({name:"comp.InsertList",_cmdArgs:null,_note:null,_listType:null,_listId:null,initialize:function(){var t,n,o=this;if(o._note=o.options.note,o._cmdArgs=o.options.args,t=o._cmdArgs.range,e.__super__.initialize.apply(o,arguments),!_.isCollabCommand(o._cmdArgs)){if(!t)return o.isReadyToApply=!1,void s.error(o.name+":note range should NOT be null");if(n=t.getStartBlockRange().block,t.isInSingleBlock()&&!c.isTextBlock(n))return o.isReadyToApply=!1,void s.error("Single Block must be text block:",o.name,t);if(t.isInSingleBlock()&&c.isListItem(n)&&a.some(n.getOwnerList().getItems(),function(t){return t.isLocked()}))return void(o.isReadyToApply=!1);o._listType=o._cmdArgs.type,o._listId=_.newGUID()}},apply:function(){var t=this;return t._cmdArgs.range.isInSingleBlock()?t._handleSingleBlockSelection():t._handleMultiBlockSelection(),!0},_handleMultiBlockSelection:function(){var t,e,n,o,r,s,l,m,_=this,b=_._cmdArgs.range,y=b.getStartBlockRange(),v=y.block,w=_._note.getPreBlock(v),I=b.getEndBlockRange(),C=I.block,M=_._note.getInterBlocks(v,C,!0),T=[],k=!0;for(o=0;o<M.length;++o)if(t=M[o],c.isListItem(t)){if(e=t.getOwnerList(),n&&n.getId()!==e.getId()){k=!1;break}n=e}else if(c.isTextBlock(t)){k=!1;break}k&&n.getType()===_._listType?a.each(M,function(t){var e=t;c.isTextBlock(t)&&(e=i.createNewParagraph(t,t.getId(),t.getText()),"getLevel"in t&&t.getLevel()&&e.setBlockStyle("indent",t.getLevel()-1)),T.push(e)}):(s=c.isListItem(w)&&w.getType()===_._listType?w.getOwnerList():new u({type:_._listType,listId:_._listId}),a.each(M,function(t){t.resetLockState(),c.isTextBlock(t)?c.isListItem(t)?(r=new p({id:t.getId(),level:t.getLevel(),list:s,text:t.getText()}),T.push(r),r.setBlockStyles(t.getBlockStyles())):(r=new p({id:t.getId(),level:1,list:s,text:t.getText()}),r.setBlockStyles(t.getBlockStyles()),l=r.getBlockStyle("indent")||0,m=r.getBlockStyle("text-indent")||0,0!==l&&(r.setLevel(l+r.getLevel()),r.setBlockStyle("indent",0)),0!==m&&(r.setLevel(m+r.getLevel()),r.setBlockStyle("text-indent",0)),T.push(r)):T.push(t)})),a.isEmpty(T)||(_.executeAtomicCommand(new f({note:_._note,blocks:M})),_.executeAtomicCommand(new g({note:_._note,newBlks:T,preBlk:w})),c.isTextBlock(y.block)&&(y=h.createRangeByBlock({block:T[0],start:y.start,end:y.end})),I=T.length>1&&c.isTextBlock(I.block)?h.createRangeByBlock({block:a.last(T),start:I.start,end:I.end}):y,b=d.create({startRange:y,endRange:I})),_.setEndingRange(b)},_handleSingleBlockSelection:function(){var t,e,n,o,r=this,s=r._cmdArgs.range,a=s.getStartBlockRange(),l=a.block;c.isListItem(l)?(n=l.getOwnerList(),n.getType()!==r._listType?(r.executeAtomicCommand(new m({lists:[n],isToggle:!0})),r.setEndingRange(s)):(o=i.replaceBlockWithParagraph(r,r._note,l,l.getText()),i.setTextBlockAsEndingRange(r,o,o.getLength(),o.getLength()))):(t=r._note.getPreBlock(l),e=r._note.getNextBlock(l),t&&c.isListItem(t)&&t.getOwnerList().getType()===r._listType?o=i.replaceBlockWithListItem(r,r._note,t,l,l.getText(),t):e&&c.isListItem(e)&&e.getOwnerList().getType()===r._listType?o=i.replaceBlockWithListItem(r,r._note,e,l,l.getText(),t):(n=new u({type:r._listType,listId:r._listId}),o=new p({id:l.getId(),level:1,list:n,text:l.getText()}),o.setBlockStyles(l.getBlockStyles()),r.executeAtomicCommand(new f({note:r._note,blocks:[l]})),r.executeAtomicCommand(new g({note:r._note,newBlks:[o],preBlk:t}))),i.setTextBlockAsEndingRange(r,o,o.getLength(),o.getLength()))},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),o&&(t._listId=o.listId,t._listType=o.listType)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n&&(n.listId=t._listId,n.listType=t._listType),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(1),s=n(3),a=n(2),l=a.List,c=a.BlockTypes;return e=o.extend({name:"atom.SetListType",_lists:null,_newTypes:null,_oldTypes:null,initialize:function(){var t=this,n=t.options,o=n.args;e.__super__.initialize.apply(t),s.isCollabCommand(o)||(t._lists=n.lists,t._newTypes={},n.newType?i.each(t._lists,function(e,o){t._newTypes[o]=n.newType}):n.isToggle&&i.each(t._lists,function(e,n){t._newTypes[n]=e.isOrdered()?l.UNORDERED:l.ORDERED}))},apply:function(){var t=this;return t._oldTypes={},i.each(t._newTypes,function(e,n){t._oldTypes[n]=t._lists[n].getType(),e!==t._lists[n].getType()&&t._lists[n].setType(e)}),!0},doUnapply:function(){var t=this;return i.each(t._oldTypes,function(e,n){t._lists[n].getType()!==e&&t._lists[n].setType(e)}),!0},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties.cmdJSON;r&&(t=o.collabProperties.coreEditor.getNote(),r.dataBefore&&(n._oldTypes=r.dataBefore),n._newTypes=r.dataAfter,n._lists=n._getListByIds(t,r.listId)),e.__super__.fromCollabJSON.apply(n)},toCollabJSON:function(){var t=this,n=[],o=e.__super__.toCollabJSON.apply(t);return t._oldTypes&&(o.dataBefore=t._oldTypes),o.dataAfter=t._newTypes,i.each(t._lists,function(t){n.push(t.getId())}),o.listId=n,o},_getListByIds:function(t,e){var n=[];return i.some(t.getAllBlocks(),function(t){return c.isListItem(t)&&t.getOwnerList()&&i.contains(e,t.getOwnerList().getId())&&n.push(t.getOwnerList()),n.length===e.length}),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(57),r=n(5),i=n(24),s=n(3),a=n(2),l=a.Table,c=a.ConstantConfig;return e=o.extend({name:"comp.InsertTable",_cmdArgs:null,_note:null,_tableBlkId:null,_columnNums:null,_rowNums:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),s.isCollabCommand(t._cmdArgs)||(t._tableBlkId=s.newGUID(),t.skipBlockLocking=!0,t._columnNums=1,t._rowNums=1,t._cmdArgs.cols&&(t._columnNums=t._cmdArgs.cols),t._cmdArgs.rows&&(t._rowNums=t._cmdArgs.rows))},insertResource:function(t,e,n){var o,r=this,s=[];return o=l.createBlankTable(r._columnNums,r._rowNums,r._tableBlkId,c.DEFAULT_TABLE_WIDTH),e&&s.push(e),s.push(o),n&&s.push(n),r.executeAtomicCommand(new i({note:r._note,newBlks:s,preBlk:t})),o},_initArray:function(t,e){for(var n=[];t--;)n[t]=e;return n},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._tableBlkId=n.newBlkId,t._columnNums=n.colNums,t._rowNums=n.rowNums)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newBlkId=n._tableBlkId,t.colNums=n._columnNums,t.rowNums=n._rowNums),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(24),s=n(26),a=n(3),l=n(16),c=n(2),u=c.BlockTypes,p=c.BlockRangeUtil,d=c.NoteRange;return e=o.extend({name:"comp.InsertTodo",_cmdArgs:null,_note:null,_todoBlkId:null,_checked:!1,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),a.isCollabCommand(t._cmdArgs)||(t._todoBlkId=a.newGUID(),t._checked=t._cmdArgs.checked)},apply:function(){var t,e,n,o,r=this,i=r._cmdArgs.range,s=i.getStartBlockRange(),a=i.getEndBlockRange(),c=s.block,h=a.block;i.isInMultiBlock()?(o=r._note.getInterBlocks(c,h,!0),n=o.every(function(t){return u.isTodo(t)||!u.isTextBlock(t)}),o.forEach(function(i,s){return 0===s?void(t=r._helpSetBlock(i,n)):s===o.length-1?void(e=r._helpSetBlock(i,n)):void r._helpSetBlock(i,n)}),s=p.createRangeByBlock({block:t,start:s.start,end:s.end}),a=p.createRangeByBlock({block:e,start:a.start,end:a.end}),i=d.create({startRange:s,endRange:a}),r.setEndingRange(i)):(e=r._helpSetBlock(h,!0),l.setTextBlockAsEndingRange(r,e,a.start,a.end))},_helpSetBlock:function(t,e){var n,o,r=this,a=r._note,c=t.getId();return u.isTodo(t)?e&&(n=l.replaceBlockWithParagraph(r,r._note,t,t.getText())):u.isTextBlock(t)&&(o=a.getPreBlock(t),n=l.createNewTodo(t,{id:c,text:t.getText(),checked:r._checked}),r.executeAtomicCommand(new s({note:a,blocks:[t]})),r.executeAtomicCommand(new i({note:a,newBlks:[n],preBlk:o}))),n},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._todoBlkId=n.newBlkId,t._checked=n.simpleValue1)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newBlkId=n._todoBlkId,t.simpleValue1=n._checked),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(24),s=n(26),a=n(3),l=n(16),c=n(2),u=c.BlockRangeUtil,p=c.NoteRange,d=c.BlockTypes;return e=o.extend({name:"comp.InsertQuote",_cmdArgs:null,_note:null,_quoteBlkId:null,_checked:!1,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},e.__super__.initialize.apply(t,arguments),a.isCollabCommand(t._cmdArgs)||(t._quoteBlkId=a.newGUID())},apply:function(){var t,e,n,o,r=this,i=r._cmdArgs.range,s=i.getStartBlockRange(),a=i.getEndBlockRange(),c=s.block,h=a.block;i.isInMultiBlock()?(o=r._note.getInterBlocks(c,h,!0),n=o.every(function(t){return d.isQuote(t)}),o.forEach(function(i,s){return 0===s?void(t=r._helpSetBlock(i,n)):s===o.length-1?void(e=r._helpSetBlock(i,n)):void r._helpSetBlock(i,n)}),s=u.createRangeByBlock({block:t,start:s.start,end:s.end}),a=u.createRangeByBlock({block:e,start:a.start,end:a.end}),i=p.create({startRange:s,endRange:a}),r.setEndingRange(i)):(e=r._helpSetBlock(h,!0),l.setTextBlockAsEndingRange(r,e,a.start,a.end))},_helpSetBlock:function(t,e){var n,o,r=this,a=r._note,c=t.getId();return d.isQuote(t)?e&&(n=l.replaceBlockWithParagraph(r,r._note,t,t.getText())):d.isTextBlock(t)&&(o=a.getPreBlock(t),n=l.createNewQuote(t,{id:c,text:t.getText(),checked:r._checked}),r.executeAtomicCommand(new s({note:a,blocks:[t]})),r.executeAtomicCommand(new i({note:a,newBlks:[n],preBlk:o}))),n},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._quoteBlkId=n.newBlkId)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.newBlkId=n._quoteBlkId),t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(16),a=n(26),l=n(44),c=n(51),u=n(155),p=n(84),d=n(66),h=n(3),f=n(2),g=f.RangeUtil,m=f.BlockTypes;return e=o.extend({name:"comp.KeyBackspace",_cmdArgs:null,_note:null,initialize:function(){var t,n,o,r=this;if(r._note=r.options.note,r._cmdArgs=r.options.args,e.__super__.initialize.apply(r),!h.isCollabCommand(r._cmdArgs)){if(t=r._cmdArgs.range,n=t.getStartBlockRange(),o=n.block,!t)return r.isReadyToApply=!1,void i.error(r.name+":note range should NOT be null");if(t.isInSingleBlock()&&m.isTable(o))return r.isReadyToApply=!1,void i.error("should NOT trigger the cmd when in Table.")}},apply:function(){var t,e,n,o,r,i,l,u,p=this,d=p._cmdArgs.range,h=[];return t=d.getStartBlockRange(),e=t.block,e,n=d.getEndBlockRange(),o=n.block,r=o,i=p._note.getPreBlock(e),u=m.isParagraphCluster(i)?i.getTextStylesAtIndex(i.getEndOffset()-1):p._cmdArgs.inlineStyles,d.isCollapsed()||s.deleteSelectedContent(p,p._note,d),d.isCollapsed()&&m.isTextBlock(e)?0===t.start?p._deleteAtTextBlockStart(i,e,u):p._deleteAtTextBlockMiddle(e,t.start):d.isInSingleBlock()&&m.isTextBlock(e)?(s.setTextBlockAsEndingRange(p,e,t.start,t.start),!0):(m.isTextBlock(e)||(i&&!m.isTable(i)?(h.push(e),r=i,m.isTextBlock(i)&&(l=i.getLength())):(r=s.replaceBlockWithParagraph(p,p._note,e,""),l=0)),d.isInMultiBlock(o)&&(m.isTextBlock(o)?m.isTextBlock(e)?(p.executeAtomicCommand(new c({block:e,start:e.getLength(),text:o.getText()})),h.push(o),l=t.start,r=e):(l=0,r=o):h.push(o)),h.length>0&&p.executeAtomicCommand(new a({note:p._note,blocks:h})),m.isTextBlock(r)?s.setTextBlockAsEndingRange(p,r,l,l):p.setEndingRange(g.buildNoteRangeFromNonTextBlock(r)),!0)},_deleteAtTextBlockStart:function(t,e,n){var o,r,i,l=this;return m.isListItem(e)?(e.getIndex()>0&&e.getLevel()>1?l.executeAtomicCommand(new p({listItems:[e],newLevel:e.getLevel()-1})):e=s.replaceBlockWithParagraph(l,l._note,e,e.getText(),n),s.setTextBlockAsEndingRange(l,e,0,0),!0):m.isTodo(e)?(e=s.replaceBlockWithParagraph(l,l._note,e,e.getText(),n),s.setTextBlockAsEndingRange(l,e,0,0),!0):(r=e.getBlockStyle("text-indent"))&&r>0?(l.executeAtomicCommand(new u({blocks:[e],styleNameValues:{"text-indent":r-1}})),s.setTextBlockAsEndingRange(l,e,0,0),!0):(o=e.getBlockStyle("indent"))&&o>0?(l.executeAtomicCommand(new u({blocks:[e],styleNameValues:{indent:o-1}})),s.setTextBlockAsEndingRange(l,e,0,0),!0):t?m.isTextBlock(t)?(i=t.getLength(),l.executeAtomicCommand(new c({block:t,start:t.getLength(),text:e.getText()})),l.executeAtomicCommand(new a({note:l._note,blocks:[e]})),s.setTextBlockAsEndingRange(l,t,i,i),!0):(m.isHr(t)?(l.executeAtomicCommand(new a({note:l._note,blocks:[t]})),s.setTextBlockAsEndingRange(l,e,0,0)):l.setEndingRange(g.buildNoteRangeFromNonTextBlock(t)),!0):(s.setTextBlockAsEndingRange(l,e,0,0),!0)},_deleteAtTextBlockMiddle:function(t,e){var n=this;if(d.isAtHrefBorder(t,e,!0))return void n._deleteHrefAtCursorPos(t,e);n.executeAtomicCommand(new l({block:t,start:e-1,end:e})),s.setTextBlockAsEndingRange(n,t,e-1,e-1)},_deleteHrefAtCursorPos:function(t,e){var n,o=this;-1!==(n=d.findHrefBorder(t,e,!0))&&s.deleteHref(o,t,n,e)},isSingleBlockAffected:function(){var t,n=this,o=n._args.range,r=e.__super__.isSingleBlockAffected.apply(n),i=0;return r&&o.isCollapsed()&&(t=o.getStartBlockRange(),i=t.start,n._note.getPreBlock(t.block)&&0===i&&(r=!1)),r}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(157),r=n(5),i=n(4),s=n(2).BlockTypes,a=n(3);return e=o.extend({name:"comp.KeyDelete",_cmdArgs:null,_note:null,initialize:function(){var t,n,o,r,l,c=this;if(c._note=c.options.note,c._cmdArgs=c.options.args,e.__super__.initialize.apply(c),!a.isCollabCommand(c._cmdArgs)){if(t=c._cmdArgs.range,n=t.getStartBlockRange(),r=n.block,o=t.getEndBlockRange(),l=o.block,!t)return c.isReadyToApply=!1,void i.error(c.name+":note range should NOT be null");if(t.isInSingleBlock()&&s.isTable(r))return c.isReadyToApply=!1,void i.error("should NOT trigger the cmd when in Table.");if(t.isInSingleBlock()&&s.isTextBlock(r)&&t.isCollapsed()&&n.start===r.getLength()&&!c._note.getNextBlock(r))return c.isReadyToApply=!1,void i.warn("do NOT support the command at the end of note:",c.name);s.isTextBlock(l)&&o.end===l.getLength()&&s.isCatalogue(c._note.getNextBlock(l))&&(c.isReadyToApply=!1,i.warn("do NOT support when next is Catalogue block."))}},isSingleBlockAffected:function(){var t,n,o=this,r=o._args.range,i=e.__super__.isSingleBlockAffected.apply(o),s=0;return i&&r.isCollapsed()&&(n=r.getStartBlockRange(),t=n.block,s=n.start,o._note.getNextBlock(t)&&s===t.getEndOffset()&&(i=!1)),i},isValidStartNoteRange:function(){var t,e,n=this,o=!0;return t=n.getStartingRange(),t&&t.isInSingleBlock()&&(e=t.getStartBlockRange().block,s.isTable(e)&&(o=!1)),o}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(1),a=n(2).BlockTypes,l=n(16),c=n(24),u=n(44),p=n(26),d=n(84),h=n(66),f=n(3);return e=o.extend({name:"comp.KeyEnter",_note:null,_cmdArgs:null,_newBlkId:null,initialize:function(){var t,n,o,r=this;if(r._note=r.options.note,r._cmdArgs=r.options.args,e.__super__.initialize.apply(r),!f.isCollabCommand(r._cmdArgs)){if(t=r._cmdArgs.range,n=t.getStartBlockRange(),o=n.block,!t)return r.isReadyToApply=!1,void i.error(r.name+":note range should NOT be null");if(t.isInSingleBlock()&&a.isTable(o))return r.isReadyToApply=!1,void i.error("should NOT trigger the cmd when in Table.");r._newBlkId=f.newGUID()}},apply:function(){var t,e,n,o,r,i,c,p=this,d=p._cmdArgs.range,f=!1,g=[];return t=d.getStartBlockRange(),e=t.block,i=e,n=d.getEndBlockRange(),o=n.block,c=o,d.isCollapsed()||l.deleteSelectedContent(p,p._note,d),a.isTextBlock(e)&&(a.isCatalogue(e)||(i=l.createNewParagraph(e,e.getId(),e.getText()),h.isAtHrefBorder(i,t.start,!0)&&l.deleteHref(p,i,0,e.getLength())),l.recogLink(p,e,0,e.getLength())),d.isInMultiBlock()?(a.isTextBlock(e)||(i=l.replaceBlockWithParagraph(p,p._note,e,"")),a.isTextBlock(o)||(c=l.replaceBlockWithParagraph(p,p._note,o,"")),a.isListItem(i)?c=p._replaceBlockWithListItem(c,i,c.getText()):a.isTextBlock(i)&&a.isListItem(c)&&(c=l.replaceBlockWithParagraph(p,p._note,c,c.getText())),l.setTextBlockAsEndingRange(p,c,0,0),!0):(a.isTextBlock(e)?(r=e.sliceText(t.start,e.getLength()),p.executeAtomicCommand(new u({block:e,start:t.start,end:e.getLength()}))):i=l.replaceBlockWithParagraph(p,p._note,e,""),a.isListItem(e)?e.isEmpty()&&0===r.getLength()?(i=p._reduceListItemLevel(e),c=i):(c=p._insertListItem(e,p._newBlkId,r),f=!0):(c=a.isHeading(e)?r.toString().length>0?p._insertHeading(i,p._newBlkId,r,e.getLevel()):p._insertParagraph(i,p._newBlkId,r,!0):a.isCatalogue(e)?p._insertCatalogueHelp(i,{startBlock:e,paraId:p._newBlkId,text:r}):a.isTodo(e)?e.isEmpty()&&0===r.getLength()?l.replaceBlockWithParagraph(p,p._note,e,""):p._insertTodo(i,{startBlock:e,id:p._newBlkId,text:r,checked:!1}):p._insertParagraph(i,p._newBlkId,r),f=!0),l.setTextBlockAsEndingRange(p,c,0,0),s.each(p._note.getInterBlocks(e,o,!0),function(t){g.push(t.getId())}),f&&g.push(p._newBlkId),p.pushAffectedBlockIds(g),!0)},_insertListItem:function(t,e,n){var o,r=this;return o=l.createNewListItem(t,e,n),l.setBlockStyleByPreBlock(o,t),r.executeAtomicCommand(new c({note:r._note,newBlks:[o],preBlk:t})),o},_insertParagraph:function(t,e,n,o){var r,i=this;if(r=l.createNewParagraph(t,e,n,o))return o||l.setBlockStyleByPreBlock(r,t),i.executeAtomicCommand(new c({note:i._note,newBlks:[r],preBlk:t})),r},_insertHeading:function(t,e,n,o){var r,i=this;return r=l.createNewHeading(t,e,n,o,!0),i.executeAtomicCommand(new c({note:i._note,newBlks:[r],preBlk:t})),r},_insertTodo:function(t,e){var n,o=this;return n=l.createNewTodo(t,e),l.setBlockStyleByPreBlock(n,t),o.executeAtomicCommand(new c({note:o._note,newBlks:[n],preBlk:t})),n},_insertCatalogueHelp:function(t,e){var n=this,o=e.startBlock;return e.text.getLength()<1?e.href="":e.href=o.getHref(),n._insertCatalogue(t,e)},_insertCatalogue:function(t,e){var n,o=this;return n=l.createNewCatalogue(t,e),o.executeAtomicCommand(new c({note:o._note,newBlks:[n],preBlk:t})),n},_reduceListItemLevel:function(t){var e=this,n=t;return t.getLevel()<=1?n=l.replaceBlockWithParagraph(e,e._note,t,""):e.executeAtomicCommand(new d({listItems:[t],newLevel:t.getLevel()-1})),n},_replaceBlockWithListItem:function(t,e,n){var o=this;return o.executeAtomicCommand(new p({note:o._note,blocks:[t]})),o._insertListItem(e,t.getId(),n)},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),o&&(t._newBlkId=o.newBlkId)},isSingleBlockAffected:function(){return!1},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.newBlkId=t._newBlkId,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(2).BlockTypes,a=n(16),l=n(44),c=n(84),u=n(3);return e=o.extend({name:"comp.KeyTab",_cmdArgs:null,_note:null,_withShiftKey:!1,initialize:function(){var t,n,o,r=this;if(r._note=r.options.note,r._cmdArgs=r.options.args,e.__super__.initialize.apply(r),!u.isCollabCommand(r._cmdArgs)){if(t=r._cmdArgs.range,r._cmdArgs.withShiftKey&&(r._withShiftKey=!0),!t||!t.canDrawedByNative())return i.error(r.name+":note range should NOT be null"),void(r.isReadyToApply=!1);if(n=t.getStartBlockRange(),o=n.block,t.isInSingleBlock()&&!s.isTextBlock(o))return void(r.isReadyToApply=!1)}},apply:function(){var t,e,n,o,r,i,l,u=this,p=u._cmdArgs.range,d=1;if(t=p.getStartBlockRange(),e=t.block,n=p.getEndBlockRange(),o=n.block,u._withShiftKey&&(d=-1),(i=p.isInMultiBlock())||0===t.start&&t.end===e.getLength())return l=!i,r=u._note.getInterBlocks(e,o,!0),a.isInSameList(r)?u._isFirstListItem(r[0])?a.updateBlocksIndentLevel(u,r[0].getOwnerList().getItems(),d):u.executeAtomicCommand(new c({listItems:r,deltaLevel:d})):u._withShiftKey&&l?e.getBlockStyle("text-indent")?u._updateBlockTextIndent(e,d):a.updateBlocksIndentLevel(u,[e],d):l&&0===t.end?u._updateBlockTextIndent(e,d):a.updateBlocksIndentLevel(u,r,d),u.setEndingRange(p),!0;0===t.start?s.isListItem(e)?u._isFirstListItem(e)?(a.updateBlocksIndentLevel(u,e.getOwnerList().getItems(),d),u.setEndingRange(p)):(u.executeAtomicCommand(new c({listItems:[e],deltaLevel:d})),u.setEndingRange(p)):u._withShiftKey?e.getBlockStyle("text-indent")?u._updateBlockTextIndent(e,d):(a.updateBlocksIndentLevel(u,[e],d),u.setEndingRange(p)):u._updateBlockTextIndent(e,d):u._withShiftKey?u._handleShiftTabNotAtStart(t):u._insertTabChar()},_handleShiftTabNotAtStart:function(t){var e,n,o,r,i=this,s=t.block,c=!0;for(e=s.getText().getReadOnlyData(),n=t.start,r=n-1;r>=0;r--)if("\t"!==e[r].char){if(" "!==e[r].char){c=!1;break}n-r==4&&(o=r)}else o||(o=r);c?(o=o||0,i.executeAtomicCommand(new l({block:s,start:o,end:n})),a.setTextBlockAsEndingRange(i,s,o,o)):i._insertTabChar()},_insertTabChar:function(){var t=this,e=t._cmdArgs.inlineStyles,n=t._cmdArgs.range,o=n.getStartBlockRange();a.deleteSelectedContent(t,t._note,n),a.insertTabChar(t,o.block,o.start,e),a.setTextBlockAsEndingRange(t,o.block,o.start+1,o.start+1)},_isFirstListItem:function(t){return 1===t.getLevel()&&1===t.getIndex()},_updateBlockTextIndent:function(t,e){var n=this;a.updateBlockTextIndentLevel(n,t,e),n.setEndingRange(n._cmdArgs.range)},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;o&&o.simpleValue1&&(t._withShiftKey=!0),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return t._withShiftKey&&(n.simpleValue1=!0),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(4),a=n(26),l=n(51),c=n(52),u=n(3),p=n(2),d=p.RichText,h=p.BlockTypes;return e=o.extend({name:"comp.KeyTextInput",_cmdArgs:null,_note:null,_inputtedText:null,_recogLink:!1,initialize:function(){var t,n=this;if(n._note=n.options.note,n._cmdArgs=n.options.args,t=n._cmdArgs.range,e.__super__.initialize.apply(n,arguments),!u.isCollabCommand(n._cmdArgs)){if(!t)return n.isReadyToApply=!1,void s.error(n.name+":note range should NOT be null");n._recogLink=n._cmdArgs.recogLink,n._inputtedText=n._cmdArgs.text}},apply:function(){var t,e,n,o,r,s,c,u,p=this,d=p._cmdArgs.range;return t=d.getStartBlockRange(),e=t.block,n=e,s=t.start,o=d.getEndBlockRange(),r=o.block,d.isInSingleBlock()&&h.isTable(e)?p._insertTextInTable(t,e,p._inputtedText):(d.isCollapsed()||i.deleteSelectedContent(p,p._note,d),h.isTextBlock(e)||(n=i.replaceBlockWithParagraph(p,p._note,e,""),s=0),d.isInMultiBlock()&&(h.isTextBlock(r)&&(u=r.getText()),p.executeAtomicCommand(new a({note:p._note,blocks:[r]}))),c=s+p._inputtedText.getLength(),u&&p._inputtedText.append(u),p.executeAtomicCommand(new l({block:n,start:s,text:p._inputtedText})),p._recogLink&&i.recogLink(p,n,0,s),i.setTextBlockAsEndingRange(p,n,c,c),!0)},_insertTextInTable:function(t,e,n){var o,r,i=this;(o=t.getAsRectRange())&&(r=o.getFirstCell(),i.executeAtomicCommand(new c({table:e,cellRect:{row:r.row,col:r.col},content:n})))},canBeMerged:function(t){var n,o,r,i=this;if(e.__super__.canBeMerged.apply(i,[t])){if(!i.startingRange||!t.getStartingRange())return!1;if(n=i.startingRange.getStartBlockRange(),r=t.getStartingRange().getStartBlockRange(),!t.getStartingRange().isCollapsed())return!1;if(i.isLocalExecutedCmd){if(!i.endingRange)return!1;if(o=i.endingRange.getEndBlockRange(),!h.isTextBlock(o))return!1;if(r.getBlockId()!==o.getBlockId())return!1;if(o.end!==r.start)return!1}else{if(n.getBlockId()!==r.getBlockId())return!1;if(n.start!==r.start)return!1}return" "!==t.getInputtedText().toString()}return!1},fromCollabJSON:function(){var t=this,n=t.options.args,o=n.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),o&&(t._inputtedText=d.fromCollabJSON(o.richText),o.recogLink&&(t._recogLink=!0))},getInputtedText:function(){return this._inputtedText},mergeLocalCmd:function(t){var e,n,o=this,r=t.getInputtedText();o.endingRange&&(e=o.endingRange.getEndBlockRange()),r&&r.getLength()>0&&(o._inputtedText.append(r),o.isLocalExecutedCmd&&(n=e.end+r.getLength(),i.setTextBlockAsEndingRange(o,e.block,n,n)))},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n&&(n.richText=t._inputtedText.toCollabJSON(),t._recogLink&&(n.recogLink=t._recogLink)),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(4),s=n(16);return e=o.extend({name:"comp.RemoveFormat",_note:null,_cmdArgs:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args,e.__super__.initialize.apply(t)},apply:function(){var t=this,e=t._cmdArgs.range;return!e||e.isCollapsed()?(i.error("collapsed",e),!1):(s.resetAllStyles(t,t._note,e),t.setEndingRange(e),!0)}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(1),s=n(388),a=n(3);return e=o.extend({name:"comp.ReplaceResource",_note:null,_cmdArgs:null,_resources:null,_resProps:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args,e.__super__.initialize.apply(t),a.isCollabCommand(t._cmdArgs)||(t._resources=t._cmdArgs.resources,t._resProps=t._cmdArgs.resProps,t.endingRange=t._cmdArgs.endingRange)},apply:function(){var t=this;return t.executeAtomicCommand(new s({resources:t._resources,newResProps:t._resProps}),t.endingRange),!0},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.coreEditor,o=t._cmdArgs.collabProperties.cmdJSON;o&&(t._resProps=o.simpleValue1,t._resources=[],i.each(o.resIds,function(e){t._resources.push(n.getBlockById(e))}),o.simpleValue2&&(t._cmdArgs.ignoreUndoRedo=!0),o.endNoteRange&&(t.endingRange=o.endNoteRange)),e.__super__.fromCollabJSON.apply(t)},isSingleBlockAffected:function(){return!1},toCollabJSON:function(){var t=this,n=[],o=e.__super__.toCollabJSON.apply(t);return o&&(i.each(t._resources,function(t){n.push(t.getId())}),o.simpleValue1=t._resProps,o.resIds=n,t._cmdArgs.ignoreUndoRedo&&(o.simpleValue2=!0),o.endNoteRange=t.endingRange),o}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(1),s=n(2).BlockTypes,a=n(3);return e=o.extend({name:"atom.SetResourceProps",_resources:null,_newResProps:null,_oldResProps:null,initialize:function(){var t=this,n=t.options,o=n.args;e.__super__.initialize.apply(t),a.isCollabCommand(o)||(t._resources=n.resources,t._newResProps=n.newResProps)},apply:function(){var t=this;return t._oldResProps={},i.each(t._resources,function(e,n){t._oldResProps[n]={},s.isImage(e)?(t._newResProps[n].source&&(t._oldResProps[n].source=e.getSource(),e.setSource(t._newResProps[n].source)),i.isUndefined(t._newResProps[n].title)||(t._oldResProps[n].title=e.getTitle(),e.setTitle(t._newResProps[n].title))):s.isAttachment(e)&&(t._newResProps[n].source&&(t._oldResProps[n].source=e.getSource(),e.setSource(t._newResProps[n].source)),t._newResProps[n].resource&&(t._oldResProps[n].resource=e.getResource(),e.setResource(t._newResProps[n].resource)),t._newResProps[n].fileName&&(t._oldResProps[n].fileName=e.getFileName(),e.setFileName(t._newResProps[n].fileName)),t._newResProps[n].fileLength&&(t._oldResProps[n].fileLength=e.getFileLength(),e.setFileLength(t._newResProps[n].fileLength)))}),!0},doUnapply:function(){var t=this;return i.each(t._resources,function(e,n){s.isImage(e)?(t._oldResProps[n].source&&e.setSource(t._oldResProps[n].source),i.isUndefined(t._oldResProps[n].title)||e.setTitle(t._oldResProps[n].title)):s.isAttachment(e)&&(t._oldResProps[n].source&&e.setSource(t._oldResProps[n].src),t._oldResProps[n].resource&&e.setResource(t._oldResProps[n].resource),t._oldResProps[n].fileName&&e.setFileName(t._oldResProps[n].fileName),t._oldResProps[n].fileLength&&e.setFileLength(t._oldResProps[n].fileLength))}),!0},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties.cmdJSON;r&&(t=o.collabProperties.coreEditor.getNote(),r.dataBefore&&(n._oldResProps=r.dataBefore),n._newResProps=r.dataAfter,n._resources=n._getResByIds(t,r.resIds)),e.__super__.fromCollabJSON.apply(n)},toCollabJSON:function(){var t=this,n=[],o=e.__super__.toCollabJSON.apply(t);return t._oldResProps&&(o.dataBefore=t._oldResProps),o.dataAfter=t._newResProps,i.each(t._resources,function(t){n.push(t.getId())}),o.resIds=n,o},_getResByIds:function(t,e){var n=[];return i.some(t.getAllBlocks(),function(t){return i.contains(e,t.getId())&&n.push(t),e.length===n.length}),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(12),i=n(5),s=n(16),a=n(11),l=n(26),c=n(24),u=n(3),p=n(2),d=p.Catalogue,h=p.Catalogues,f=p.RichText,g=p.BlockTypes;return e=r.extend({name:"comp.RefreshCatalogue",_cmdArgs:null,_note:null,_ownerId:null,_delete:!1,_catalogueIds:null,_catalogues:null,_newCatalogues:null,_blankParaId:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},t._ownerId=t._cmdArgs.ownerId,t._delete=t._cmdArgs.delete,e.__super__.initialize.apply(t,arguments),t._initBlocks()},_initBlocks:function(){var t,e,n=this,r=n._note,i=r.blocks,l=[],c=[],p=[];o.each(i,function(t){g.isCatalogue(t)&&t.getOwnerId()===n._ownerId&&l.push(t),s.isForCatalogueBlock(t)&&c.push(t)}),(l.length>0||!n._ownerId)&&(n._catalogueIds=n._catalogueIds||[],n._ownerId=n._ownerId||u.newGUID(),e=new h({id:n._ownerId}),o.each(c,function(o,r){t=new d({indent:o.getLevel()-1,text:o.getText().toString().trim(),href:o.getId(),ownerList:e}),p.push(t),n._catalogueIds[r]?t.setId(n._catalogueIds[r]):n._catalogueIds[r]=t.getId()}),0===c.length&&(t=new d({indent:0,text:a.INSERT_BLANK_CATALOGUE_TEXT,ownerList:e}),p.push(t),n._catalogueIds[0]?t.setId(n._catalogueIds[0]):n._catalogueIds[0]=t.getId())),n._catalogues=l,n._newCatalogues=p,(0===p.length||n._delete)&&(n._blankParaId=n._blankParaId||u.newGUID())},apply:function(){var t=this,e=t._catalogues,n=t._newCatalogues,o=n[n.length-1];t._blankParaId?(o=s.createNewParagraph(null,t._blankParaId,new f({text:""})),t.executeAtomicCommand(new c({note:t._note,newBlks:[o],preBlk:e[e.length-1]}))):t.executeAtomicCommand(new c({note:t._note,newBlks:n,preBlk:e[e.length-1]||t.startingRange.getEndBlockRange().block})),e.length>0&&t.executeAtomicCommand(new l({note:t._note,blocks:t._note.getInterBlocks(e[0],e[e.length-1],!0)})),s.setTextBlockAsEndingRange(t,o,o.getLength(),o.getLength())},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;e.__super__.fromCollabJSON.apply(t),n&&(t._ownerId=n.listId,t._catalogueIds=n.blockIds,t._delete=n.simpleValue1,t._blankParaId=n.newBlkId)},toCollabJSON:function(){var t,n=this;return t=e.__super__.toCollabJSON.apply(n),t&&(t.listId=n._ownerId,t.blockIds=n._catalogueIds,t.simpleValue1=n._delete,t.newBlkId=n._blankParaId),t}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(3);return e=o.extend({_cmdArgs:null,_oldData:null,_content:null,_align:null,_headerFooter:null,name:"comp.SetHeaderFooter",initialize:function(t){var n=this;n._oldData={},n._cmdArgs=t.args,i.isCollabCommand(n._cmdArgs)||(n._content=n._cmdArgs.content,n._align=n._cmdArgs.align,n._headerFooter=n._cmdArgs.headerFooter),n.startingRange=t.args.range,n.endingRange=t.args.endingRange,e.__super__.initialize.apply(n)},apply:function(){var t=this,e=t._align,n=t._content,o=t._headerFooter;o&&(null!=e&&(t._oldData.align=o.getAlign()),null!=n&&(t._oldData.content=o.getContent(!1)),o.setContentAndStyle(n,e),t.effected=!0)},doReapply:function(){var t=this,e=t._align,n=t._content;t._headerFooter.setContentAndStyle(n,e)},doUnapply:function(){var t=this,e=t._headerFooter,n=t._oldData;n&&e.setContentAndStyle(n.content,n.align)},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties,o=n.cmdJSON,r=n.coreEditor.note;e.__super__.fromCollabJSON.apply(t),o&&(t._content=o.headerFooterInfo.content,t._align=o.headerFooterInfo.align,t._headerFooter=r.getHeaderFooter(o.headerFooterInfo.isFooter))},toCollabJSON:function(){var t,n=this,o=e.__super__.toCollabJSON.apply(n);return o&&(t={},t.content=n._content,t.align=n._align,t.isFooter=n._headerFooter.isFooter,o.headerFooterInfo=t),o}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(12),i=n(5),s=n(158),a=n(3),l=n(2),c=l.TodoRange,u=l.NoteRange;return e=r.extend({name:"comp.SetBlockProps",_cmdArgs:null,_note:null,_blocks:null,_props:null,updateSelectionDisabled:!0,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args,e.__super__.initialize.apply(t),a.isCollabCommand(t._cmdArgs)||(t._blocks=t._cmdArgs.blocks,t._props=t._cmdArgs.props)},apply:function(){var t=this,e=t._blocks[0],n=new c({block:e,start:e.getEndOffset(),end:e.getEndOffset()});return t.executeAtomicCommand(new s({blocks:this._blocks,props:this._props}),new u({startRange:n,endRange:n})),!0},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;n&&(t._blocks=[],o.each(n.blockIds,function(e){t._blocks.push(t._note.getBlockById(e))}),t._props=n.simpleValue1),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t),r=[];return o.each(t._blocks,function(t){r.push(t.getId())}),n.blockIds=r,n.simpleValue1=t._props,n}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(393),s=n(3);return e=o.extend({name:"comp.SetTableCellsSize",_table:null,_sizes:null,initialize:function(){var t=this,n=t.options.args;s.isCollabCommand(n)||(t._table=n.table,t._sizes=n.sizes),e.__super__.initialize.apply(t)},apply:function(){var t=this,e=t._table,n=t._sizes;return!(n.length<1)&&(n.forEach(function(n){t.executeAtomicCommand(new i({table:e,size:n}))}),!0)},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._sizes=i.simpleValue1)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._sizes,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(3);return e=o.extend({name:"atom.SetTableCellSize",_table:null,_size:null,_oldSize:null,effected:!1,initialize:function(){var t=this,n=t.options.args;this._oldSize={},e.__super__.initialize.apply(t),i.isCollabCommand(n)||(t._table=t.options.table,t._size=t.options.size)},apply:function(){var t=this._table,e=this._size;return null!=e.row&&(this._oldSize.row=e.row,this._oldSize.height=t.getRowHeight(e.row),t.setRowHeight(e.row,e.height),this.effected=!0),null!=e.col&&(this._oldSize.col=e.col,this._oldSize.width=t.getColumnWidth(e.col),t.setColumnWidth(e.col,e.width),this.effected=!0),this.effected},doUnapply:function(){var t=this._table,e=this._oldSize;null!=e.row&&t.setRowHeight(e.row,e.height),null!=e.col&&t.setColumnWidth(e.col,e.width)},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._size=i.simpleValue1,n._oldSize=i.simpleValue2)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._size,n.simpleValue2=t._oldSize,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(16),s=n(38),a=n(2).TableUtil,l=n(159),c=n(3);return e=o.extend({name:"comp.InsertTableRowCol",_table:null,_rect:null,_cellsData:null,effected:!1,initialize:function(){var t,n=this,o=n.options.args;this._rect={},e.__super__.initialize.apply(n),c.isCollabCommand(o)||(this._cellsData=o.cellsData||[[]],this._sizes=o.sizes,t=o.range,t?n._transformRangeToData(t,o):(this._rect=o.rect,this._table=o.table))},_transformRangeToData:function(t,e){var n,o=t.getStartBlockRange(),r=o.getAsRectRange(),i=e.describe;r&&(n=r.getRect(),null!=i.row&&(this._rect.row=i.row===s.UP?n.top:n.top+n.height),null!=i.col&&(this._rect.col=i.col===s.LEFT?n.left:this._rect.col=n.left+n.width),this._table=o.block)},apply:function(){var t=this,e=t._rect,n=t._cellsData,o=t._sizes;null!=e.row&&(t._insertRows(e.row,n,o),this.effected=!0),null!=e.col&&(t._insertCols(e.col,n,o),this.effected=!0)},_insertRows:function(t,e,n){var o=this,r=o._table;e.forEach(function(n,s){0===n.length&&(n=r.creatRowData(t+s)),e[s]=n,i.fixMergeCellBeforeRowColChange({index:t+s,table:r,cmd:o,insertData:n})}),o.executeAtomicCommand(new l({cellsData:e,sizes:n,rect:this._rect,table:r}))},_insertCols:function(t,e,n){var o=this,r=o._table,s=r.getCells();e.forEach(function(n,a){s.forEach(function(t,e){n[e]=n[e]||r.createCell()}),e[a]=n,i.fixMergeCellBeforeRowColChange({index:t+a,table:r,cmd:o,isCol:!0,insertData:n})}),o.executeAtomicCommand(new l({cellsData:e,sizes:n,rect:this._rect,table:r}))},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._rect=i.simpleValue1,n._sizes=i.simpleValue2,n._cellsData=a.cellsFromCollabJSON(i.dataBefore))},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._rect,n.simpleValue2=t._sizes,n.dataBefore=a.cellsToCollabJSON(t._cellsData),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(26),s=n(396),a=n(16),l=n(3),c=n(2),u=c.NoteRange,p=c.TableRange;return e=o.extend({name:"comp.DeleteTableRowCol",_table:null,_rect:null,_oldData:null,_count:null,_range:null,effected:!1,initialize:function(){var t,n=this,o=n.options.args;this._rect={},e.__super__.initialize.apply(n),l.isCollabCommand(o)||(t=o.range,t?n._transformRangeToData(t,o):(this._rect=o.rect,this._count=o.count,n._table=o.table))},_transformRangeToData:function(t,e){var n,o,r=this,i=t.getStartBlockRange(),s=e.describe;(n=i.getAsRectRange())&&(o=n.getRect(),s.row&&(this._rect.row=o.top,this._count=o.height),s.col&&(this._rect.col=o.left,this._count=o.width),r._rectOfRectRange=o,this._table=i.block)},apply:function(){var t,e,n,o,r,i,l=this,c=l._count,d=l._rect,h=l._table;if(null!=d.row){if(t=h.getRowCount(),0===d.row&&t===c)return l._deleteTable();for(n=0;n<c;n++)a.fixMergeCellBeforeRowColChange({index:d.row,table:h,cmd:l,isDelete:!0}),l.executeAtomicCommand(new s({count:1,rect:d,table:h}));this.effected=!0}if(null!=d.col){if(e=h.getColumnCount(),0===d.col&&e===c)return l._deleteTable();for(n=0;n<c;n++)a.fixMergeCellBeforeRowColChange({index:d.col,table:h,cmd:l,isDelete:!0,isCol:!0}),l.executeAtomicCommand(new s({count:1,rect:d,table:h}));this.effected=!0}l._rectOfRectRange&&(o=p.create({block:h,type:p.TYPES.NORMAL,rect:l._rectOfRectRange}),o&&(r=o.getAsRectRange()),r||(o=p.create({block:h,type:p.TYPES.FIRST_CELL})),i=u.create({startRange:o,endRange:o}),l.setEndingRange(i))},_deleteTable:function(){this._applyCommandToComposite(new i({blocks:[this._table],note:this.options.note})),this.setEndingRange(u.createMock()),this.effected=!0},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._rect=i.simpleValue1,n._count=i.simpleValue2)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._rect,n.simpleValue2=t._count,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(18),r=n(5),i=n(2).TableUtil,s=n(3);return e=o.extend({name:"atom.DeleteTableRowCol",_table:null,_rect:null,_oldCellsData:null,_count:null,effected:!1,initialize:function(){var t=this,n=t.options,o=n.args;s.isCollabCommand(o)||(this._count=n.count,this._rect=n.rect,this._table=n.table),e.__super__.initialize.apply(t)},apply:function(){var t=this,e=t._rect,n=t._table,o=t._count;null!=e.row&&(t._oldCellsData=n.deleteRows(e.row,o),this.effected=!0),null!=e.col&&(t._oldCellsData=n.deleteCols(e.col,o),this.effected=!0)},doUnapply:function(){var t=this,e=t._rect,n=t._table,o=t._oldCellsData;null!=e.row&&n.insertRows(e.row,o.rowsData,o.heights),null!=e.col&&n.insertCols(e.col,o.colsData,o.widths)},fromCollabJSON:function(){var t,n,o=this,r=o.options.args,s=r.collabProperties,a=s.cmdJSON;e.__super__.fromCollabJSON.apply(o),n=s.coreEditor.getNote(),a&&(o._table=n.getBlockById(a.blockId),o._rect=a.simpleValue1,o._count=a.simpleValue2,(t=a.dataBefore)&&(o._oldCellsData=t,t.rowsData&&(o._oldCellsData.rowsData=i.cellsFromCollabJSON(t.rowsData)),t.colsData&&(o._oldCellsData.colsData=i.cellsFromCollabJSON(t.colsData))))},toCollabJSON:function(){var t,n=this,o=e.__super__.toCollabJSON.apply(n);return o.blockId=n._table.getId(),o.simpleValue1=n._rect,o.simpleValue2=n._count,t=n._oldCellsData,t&&(o.dataBefore=t,t.rowsData&&(o.dataBefore.rowsData=i.cellsToCollabJSON(t.rowsData)),t.colsData&&(o.dataBefore.colsData=i.cellsToCollabJSON(t.colsData))),o}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(113),s=n(83),a=n(398),l=n(3);return e=o.extend({name:"comp.ToggleMergeTableCell",_table:null,_rect:null,_oldData:null,_range:null,effected:!1,initialize:function(){var t,n=this,o=n.options.args;l.isCollabCommand(o)||(t=o.range,t?n._transformRangeToData(t,o):(this._rect=o.rect,n._table=o.table)),e.__super__.initialize.apply(n)},_transformRangeToData:function(t){var e,n,o=t.getStartBlockRange();(e=o.getAsRectRange())&&(n=e.getRect(),this._range=t,this._rect=n,this._table=o.block)},apply:function(){var t,e,n,o=this,r=o._rect,l=o._table,c=!1,u=!1,p=null;if(r&&(1!==r.width||1!==r.height)){for(l.isMergeRect(r)&&(c=!0),e=r.top;e<r.top+r.height;e++)for(n=r.left;n<r.left+r.width;n++)t=l.getCell(e,n),e===r.top&&n===r.left?(t.isEmpty()||(u=!0),o.executeAtomicCommand(new i({table:l,type:i.TYPES.POINT,value:c?null:{width:r.width,height:r.height},rect:{row:e,col:n}}))):(u||p||t.isEmpty()||(p=t.getContent()),c||(o._applyCommandToComposite(new a({args:{table:l,content:"",range:o._range,cellRect:{row:e,col:n}}})),o.executeAtomicCommand(new s({table:l,styles:null,rect:{width:1,height:1,top:e,left:n}}))),o.executeAtomicCommand(new i({table:l,type:i.TYPES.CELL,value:c?null:{dy:e-r.top,dx:n-r.left},rect:{row:e,col:n}})));p&&o._applyCommandToComposite(new a({args:{table:l,content:p,cellRect:{row:r.top,col:r.left}}})),o.effected=!0}},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._rect=i.simpleValue1)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._rect,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(52),s=n(3),a=n(2).TableCellUtil;return e=o.extend({name:"comp.SetTableCellContent",_table:null,_cellRect:null,_oldContent:null,initialize:function(){var t=this,n=t.options.args;s.isCollabCommand(n)||(t._table=n.table,t._cellRect=n.cellRect,t._content=n.content),e.__super__.initialize.apply(t)},apply:function(){var t=this;t.executeAtomicCommand(new i({table:t._table,cellRect:t._cellRect,content:t._content}))},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._content=a.contentFromCollabJSON(i.simpleValue1),n._oldContent=a.contentFromCollabJSON(i.simpleValue2),n._cellRect=i.newBlkId)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=a.contentToCollabJSON(t._content),n.simpleValue2=a.contentToCollabJSON(t._oldContent),n.newBlkId=t._cellRect,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(83),s=n(3);return e=o.extend({name:"comp.SetTableCellBlockStyle",_table:null,_styles:null,_rect:null,_toggle:null,effected:!1,initialize:function(){var t,n=this,o=n.options.args;e.__super__.initialize.apply(n),s.isCollabCommand(o)||(t=o.range,n._styles=o.styles,n._toggle=o.toggle,n._transformRangeToData(t,o))},_transformRangeToData:function(t){var e,n,o=t.getStartBlockRange();(e=o.getAsRectRange())&&(n=e.getRect(),this._rect=n,this._table=o.block)},apply:function(){var t=this;if(!t._rect)return t.effected;t.executeAtomicCommand(new i({table:t._table,rect:t._rect,styles:t._styles,toggle:t._toggle})),t.effected=!0},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._rect=i.simpleValue1,n._styles=i.simpleValue2||null,n._toggle=i.newBlkId||null)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._rect,n.simpleValue2=t._styles||null,n.newBlkId=t._toggle||null,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(159),s=n(52),a=n(113),l=n(83),c=n(2).TableUtil,u=n(3);return e=o.extend({name:"comp.InsertTableCells",_table:null,_widths:null,_heights:null,_cellsData:null,_rect:null,effected:!1,initialize:function(){var t=this,n=t.options.args;e.__super__.initialize.apply(t),u.isCollabCommand(n)||(t._table=n.table,t._widths=n.widths,t._heights=n.heights,t._cellsData=n.cellsData,t._transformRangeToData(n.range))},_transformRangeToData:function(t){var e,n=t.getStartBlockRange();n.getAsRectRange&&(e=n.getAsRectRange(),this._rect=e.getRect())},apply:function(){var t,e,n,o,r,i,a,c=this,u=c._table,p=c._rect,d=c._cellsData;if(!d)return c._clearCellsData();if(!d[0]||d[0].length<1)return!1;for(t=d.length,e=d[0].length,c._handleExtendCol(),c._handleExtendRow(),o=0;o<t;o++)for(i=o+p.top,r=0;r<e;r++)a=r+p.left,n=d[o][r],c._handleOldMergePoint(u.getCell(i,a),i,a),c._handleMergePointCell(n,o,r),n.isMergedCell()||(c.executeAtomicCommand(new s({content:n.getContent(),table:u,cellRect:{row:o+p.top,col:r+p.left}})),c.executeAtomicCommand(new l({rect:{top:p.top+o,left:p.left+r,width:1,height:1},styles:n.getBlockStyles(),table:u})),this.effected=!0)},_handleExtendCol:function(){var t,e,n,o=this,r=o._table,s=o._rect,a=o._widths,l=o._cellsData,c=l[0].length,u=r.getColumnCount(),p=r.getRowCount(),d=[];if((t=s.left+c-u)>0){for(l.forEach(function(e,n){e.slice(-t).forEach(function(t,e){d[e]=d[e]||[],d[e][s.top+n]=t})}),e=0;e<p;e++)for(n=0;n<d.length;n++)d[n][e]=d[n][e]||r.createCell({row:e,col:s.left+n});o.executeAtomicCommand(new i({rect:{col:u},table:r,cellsData:d,sizes:a?a.slice(-t):null})),o.effected=!0}},_handleExtendRow:function(){var t,e,n,o=this,r=o._table,s=o._rect,a=o._heights,l=o._cellsData,c=l.length,u=r.getColumnCount(),p=r.getRowCount(),d=[];if((t=s.top+c-p)>0){for(l.slice(-t).forEach(function(t,e){d[e]=d[e]||[],t.forEach(function(t,n){d[e][s.left+n]=t})}),e=0;e<d.length;e++)for(n=0;n<u;n++)d[e][n]=d[e][n]||r.createCell({row:s.top+s.height,col:n});o.executeAtomicCommand(new i({rect:{row:p},table:r,cellsData:d,sizes:a?a.slice(-t):null})),o.effected=!0}},_handleMergePointCell:function(t,e,n){var o=this,r=o._table,i=o._rect;t.isMergePoint()?(t.getMergePointAttr(),o.executeAtomicCommand(new a({rect:{row:i.top+e,col:i.left+n},value:t.getMergePointAttr(),type:a.TYPES.POINT,table:r}))):t.isMergedCell()&&o.executeAtomicCommand(new a({rect:{row:i.top+e,col:i.left+n},value:t.getMergedCellAttr(),type:a.TYPES.CELL,table:r}))},_handleOldMergePoint:function(t,e,n){var o,r,i=this,s=i._table,a=i._rect,l=i._cellsData,c=l.length,u=l[0].length;if(t&&(t.isMergePoint()&&(o=t.getMergePointAttr(),this._clearCellsAttr(e,n,o.width,o.height)),t.isMergedCell())){if(!(r=s.getCell(e,n,{findMergePointIfNeeded:!0,withPosition:!0}))||a.top+c>=r.row&&a.top<=r.row&&a.left+u>r.col&&a.left<=r.col)return;o=r.cell.getMergePointAttr(),this._clearCellsAttr(r.row,r.col,o.width,o.height)}},_clearCellsAttr:function(t,e,n,o){var r,i,s=this,l=s._table;for(r=0;r<o;r++)for(i=0;i<n;i++)s.executeAtomicCommand(new a({table:l,rect:{row:t+r,col:e+i}}))},_clearCellsData:function(){var t,e,n=this,o=n._rect,r=n._table;for(t=0;t<o.height;t++)for(e=0;e<o.width;e++)n.executeAtomicCommand(new s({content:"",table:r,cellRect:{row:t+o.top,col:e+o.left}}));n.executeAtomicCommand(new l({rect:o,table:r}))},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._rect=i.simpleValue1,n._widths=i.simpleValue2.widths,n._heights=i.simpleValue2.heights,n._cellsData=c.cellsFromCollabJSON(i.dataBefore))},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._rect,n.simpleValue2={widths:t._widths,height:t._heights},n.dataBefore=c.cellsToCollabJSON(t._cellsData),n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(12),r=n(5),i=n(156),s=n(3);return e=o.extend({name:"comp.SetTableCellInlineStyle",_table:null,_styles:null,_rect:null,_toggle:null,initialize:function(){var t,n=this,o=n.options.args;e.__super__.initialize.apply(n),s.isCollabCommand(o)||(t=o.range,n._styles=o.styles,n._toggle=o.toggle,n._transformRangeToData(t,o))},_transformRangeToData:function(t){var e,n,o=t.getStartBlockRange();(e=o.getAsRectRange())&&(n=e.getRect(),this._rect=n,this._table=o.block)},apply:function(){var t=this;t._rect&&t.executeAtomicCommand(new i({table:t._table,rect:t._rect,styles:t._styles,toggle:t._toggle}))},fromCollabJSON:function(){var t,n=this,o=n.options.args,r=o.collabProperties,i=r.cmdJSON;e.__super__.fromCollabJSON.apply(n),t=r.coreEditor.getNote(),i&&(n._table=t.getBlockById(i.blockId),n._rect=i.simpleValue1,n._styles=i.simpleValue2||null,n._toggle=i.newBlkId||null)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t);return n.blockId=t._table.getId(),n.simpleValue1=t._rect,n.simpleValue2=t._styles||null,n.newBlkId=t._toggle||null,n}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(57),r=n(5),i=n(16),s=n(52),a=n(2),l=a.BlockTypes,c=a.MacroResource,u=n(24),p=n(3);return e=o.extend({name:"comp.AppendMacro",_cmdArgs:null,_note:null,_newBlkId:null,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args||{},p.isCollabCommand(t._cmdArgs)||(t._newBlkId=p.newGUID()),e.__super__.initialize.apply(t,arguments)},insertResource:function(t,e,n){var o=this,r=[],s=o._cmdArgs.range,a=i.createMacro(o._newBlkId,o._cmdArgs.macroName,o._cmdArgs.macroContent,o._cmdArgs.macroVersion);return l.isTable(t)&&s.isSingleTableSelected()?o._insertMacroResourceInTable(t):(e&&r.push(e),r.push(a),n&&r.push(n),o.executeAtomicCommand(new u({note:o._note,newBlks:r,preBlk:t})),a)},_insertMacroResourceInTable:function(t){var e,n=this,o=n._cmdArgs.range,r=o.getStartBlockRange(),i=r.getAsRectRange();if(i)return e=i.getFirstCellRect(),n.executeAtomicCommand(new s({table:t,cellRect:e,content:new c({name:n._cmdArgs.macroName,content:n._cmdArgs.macroContent,version:n._cmdArgs.macroVersion})})),t},fromCollabJSON:function(){var t=this,n=t.options.args.collabProperties.cmdJSON;n&&(t._newBlkId=n.newBlkId),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t,n=this;return n.rangeIsRequired=!1,n.resetAffectedBlockIds(),t=e.__super__.toCollabJSON.apply(n),t.newBlkId=n._newBlkId,t}}),r.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(12),i=n(5),s=n(158),a=n(3),l=n(2),c=l.MacroRange,u=l.NoteRange;return e=r.extend({name:"comp.UpdateMacroContent",_cmdArgs:null,_note:null,_blocks:null,_props:null,updateSelectionDisabled:!0,initialize:function(){var t=this;t._note=t.options.note,t._cmdArgs=t.options.args,e.__super__.initialize.apply(t),a.isCollabCommand(t._cmdArgs)||(t._blocks=t._cmdArgs.blocks,t._props=t._cmdArgs.props)},apply:function(){var t=this,e=t._blocks[0],n=new c({block:e});return t.executeAtomicCommand(new s({blocks:this._blocks,props:this._props}),new u({startRange:n,endRange:n})),!0},fromCollabJSON:function(){var t=this,n=t._cmdArgs.collabProperties.cmdJSON;n&&(t._blocks=[],o.each(n.blockIds,function(e){t._blocks.push(t._note.getBlockById(e))}),t._props=n.simpleValue1),e.__super__.fromCollabJSON.apply(t)},toCollabJSON:function(){var t=this,n=e.__super__.toCollabJSON.apply(t),r=[];return o.each(t._blocks,function(t){r.push(t.getId())}),n.blockIds=r,n.simpleValue1=t._props,n}}),i.add(e),e}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(2),n(1),n(4)],void 0!==(r=function(t,e,n,o,r){"use strict";return function(){function t(){}return t.imgToBase64=function(t){var e=document.createElement("CANVAS"),n=e.getContext("2d"),o=null;if(!t)return null;e.height=t.naturalHeight,e.width=t.naturalWidth,n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0);try{o=e.toDataURL("image/jpeg",1)}catch(t){r.warn(t.message)}return o},t.getBase64Data=function(t){var e=this;if(!t)return{};var n,r={data:{}},i=r.data;return o.each(t,function(t){(n=e.imgToBase64(t.img))&&(i[t.source]={base64:n})}),r},t.parseImageJson=function(t){var e=null;if(!t)return null;try{e=JSON.parse(t)}catch(t){return r.error("no imagejson or parse imagejson error"),null}return e},t.setBlockIds=function(t,e){var r=[];return o.each(t,function(t){if(n.BlockTypes.isImage(t)){var o=t.getSource(),i=e[o];i&&i.base64&&(r.push(t),i.imgBlockIds?i.imgBlockIds.push(t.getId()):i.imgBlockIds=[t.getId()])}}),r},t.base64ToBlob=function(t){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],o=atob(e[1]),r=o.length,i=new Uint8Array(r);r--;)i[r]=o.charCodeAt(r);return new Blob([i],{type:n})},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(29),r=n(1),i=n(4),s=n(20),a=n(11),l=n(152),c=n(2),u=c.RangeUtil,p=c.NoteRange,d=function(t){return t&&t.name===l.prototype.name};return e={_editor:null,_undoStack:null,_redoStack:null,_notOwnManagerAdapterStack:null,initialize:function(t){var e=this;e._undoStack=[],e._redoStack=[],e._notOwnManagerAdapterStack=[],e._editor=t.editor},exec:function(t,e,n){var o,r,s,a,l=this,c=!1,u=!0,h=!1;return!!t&&(l._editor.isCollabEnabled()&&(c=n.collabProperties.isCollabCmd&&n.collabProperties.isOwnCmd,u=!n.collabProperties.isCollabCmd,c&&(d(t)?l._localManagerAdapterOverriden(t)?t.setIgnoreUndoRedo(!0):h=!0:n.collabProperties.cmdJSON.isLocalExecutedCmd&&(h=!0)),h)?(l._updateUndoCmdFinalVersion(t.cmdId,n.collabProperties.finalNoteVersion),l.trigger("command-exec",t,n),!0):(a=t.apply(),r={cmdName:t.name,cmdType:"do"},o=t.getEndingRange(),!1!==a&&!p.isNoteRange(o)&&t.getStartingRange()&&(i.warn("endingRange should be a noteRange, so set it to be same as startEndingRange:",o),o=t.getStartingRange(),t.setEndingRange(o)),s=u||c,o&&s&&!t.updateSelectionDisabled&&l.trigger("update-selection",o,r),s&&!t.effected?(l.trigger("command-exec",t,n),a):(d(t)&&(t.sendInfoToInner({canUndo:l.canUndo(),canRedo:l.canRedo()}),s||l._notOwnManagerAdapterStack.push(t)),l._editor.isCollabEnabled()?n.collabProperties.dataCmdError?(l.trigger("command-exec",t,n),!1):(s&&(t.getIgnoreUndoRedo()||l._pushToUndoStack(t),l._redoStack=[]),l.trigger("command-exec",t,n),!0):(t.getIgnoreUndoRedo()||l._undoStack.push(t),l._redoStack=[],l.trigger("command-exec",t,n),!0))))},canUndo:function(){return 0!==this._undoStack.length},undo:function(){if(!this.canUndo())return i.warn("Can Not undo"),!1;var t,e=this,n=e._undoStack,o=e._redoStack,r=n.pop();return r.doUnapply(),o.push(r),e.trigger("command-exec",r),t={cmdName:r.name,cmdType:"undo"},e.trigger("update-selection",r.getStartingRange(),t),!0},canRedo:function(){return 0!==this._redoStack.length},redo:function(){if(!this.canRedo())return!1;var t,e=this,n=e._undoStack,o=e._redoStack,r=o.pop();return r.doReapply(),n.push(r),e.trigger("command-exec",r),t={cmdName:r.name,cmdType:"redo"},e.trigger("update-selection",r.getEndingRange(),t),!0},reset:function(){var t=this;t._undoStack=[],t._redoStack=[],t._notOwnManagerAdapterStack=[]},registerManager:function(t,e){var n,o=this;if(!t||!t.on)return void i.warn("commandManager is not Valid!");o.unregisterManager(t),t.on("command-executed",function(r,s){var a=l.create(e,r,s);if(!a)return void i.warn("ManagerAdapter failed to create command!");a.isOriginalCmd=!0,a.isLocalExecutedCmd=!0,a.setCmdOriginalNoteVersion(o._editor.getNoteVersion()),o._pushToUndoStack(a),o._redoStack=[],o.trigger("command-exec",a),t.triggerGlobalUndoStatus(o.canUndo(),o.canRedo()),o._editor.isCollabEnabled()&&(n=window.JSON.parse(s))&&0!==n.colWidths.length&&0!==n.rowHeights.length&&o._editor.pushLocalDataCommand(a,!0)})},unregisterManager:function(t){t&&t.on&&t.off("command-executed")},applyCollabCmdRedoUndo:function(t){var e,n=this,o=t.options.args,r=o.collabProperties.cmdJSON,i=o.collabProperties.isOwnCmd;if(i&&o.collabProperties.isLocalExecutedCmd)return void n.trigger("command-exec",t,o);o.collabProperties.isCollabUndo?(t.setCollabUndo(!0),t.setCollabRedo(!1),e=t.doUnapply(o)):o.collabProperties.isCollabRedo&&(t.setCollabUndo(!1),t.setCollabRedo(!0),e=t.doReapply(o)),!1!==e?(o.collabProperties.isCollabUndo&&t.setStartingRange(u.buildNoteRangeFromJSON(r.startNoteRange,n._editor)),o.collabProperties.isCollabRedo&&t.setEndingRange(u.buildNoteRangeFromJSON(r.endNoteRange,n._editor)),i&&(o.collabProperties.isCollabUndo?(n._pushToRedoStack(n._undoStack.pop()),n.trigger("update-selection",t.getStartingRange())):o.collabProperties.isCollabRedo&&(n._pushToUndoStack(n._redoStack.pop()),n.trigger("update-selection",t.getEndingRange())))):i&&(o.collabProperties.isCollabUndo?n.dropUndoCmds():o.collabProperties.isCollabRedo&&n.dropRedoCmd(),n._editor.notifyErrorToHost(a.INVALIDACTION_FAILED_COLLABCMD,o.collabProperties.coreEditor)),i&&d(t)&&t.sendInfoToInner({canUndo:n.canUndo(),canRedo:n.canRedo()}),n.trigger("command-exec",t,o)},dropRedoCmd:function(){this._redoStack.pop(),this.trigger("redo-stack-change")},dropUndoCmds:function(t,e,n){var o,r=this;t?(o=r._getUndoCmdIndexById(t))>=0&&(n?r._undoStack.splice(o,e,n):r._undoStack.splice(o,e)):r._undoStack.pop(),this.trigger("undo-stack-change")},getRedoCmd:function(){return r.last(this._redoStack)},getUndoCmd:function(){return r.last(this._undoStack)},_getUndoCmdIndexById:function(t){var e=this,n=-1,o=0;return r.some(e._undoStack,function(e){return e.getCmdId()===t&&(n=o),n>=0||(o++,!1)}),n},_pushToRedoStack:function(t){var e=this;t&&e._redoStack.push(t)},_pushToUndoStack:function(t){var e=this;t&&(t.getIgnoreUndoRedo()||(e._undoStack.push(t),e._undoStack.length>a.MAX_UNDO_STACK_SIZE&&e._undoStack.shift()))},_localManagerAdapterOverriden:function(t){var e,n=this,o=!1,r=0;for(n._notOwnManagerAdapterStack&&(r=n._notOwnManagerAdapterStack.length);r>0&&(e=n._notOwnManagerAdapterStack[r-1],e.getCmdOriginalNoteVersion()===t.getCmdOriginalNoteVersion());r--)if(t.getBlockId()===e.getBlockId()){o=!0;break}return o},_updateUndoCmdFinalVersion:function(t,e){var n=this;r.some(n._undoStack,function(n){if(n.cmdId===t)return n.setCmdFinalNoteVersion(e),!0})},destroy:function(){this._editor&&(this._editor=null),this.options&&this.options.editor&&(this.options.editor=null)}},r.extend(e,s.Events),o.extend(e)}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(35),n(28),n(4),n(33),n(2)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.collapseToStart=function(){this.noteRange&&this.noteRange.collapse&&(this.noteRange.collapse(!0),this._drawRange(),this._triggerSelectionChange())},e.prototype.collapseToEnd=function(){this.noteRange&&this.noteRange.collapse&&(this.noteRange.collapse(!1),this._drawRange(),this._triggerSelectionChange())},e.prototype.getNativeRange=function(){return s.getRange(window)},e.prototype.getRange=function(){return this.noteRange},e.prototype.isCollapsed=function(){var t=this.noteRange;return!!t&&t.isCollapsed()},e.prototype.reset=function(){this.noteRange=null},e.prototype.setRange=function(t,e,n){this._setRange(t,{scrollIntoView:n,selectionChangeEvent:e,toDraw:!0,trigger:!0})},e.prototype.initialize=function(t){this.noteView=t.noteView,this._bindEvents()},e.prototype._bindEvents=function(){n.addListeners({selectionchange:"_onDocSelectionChange","set-range":"_onSetRange"},this.noteView,this)},e.prototype._convertToNoteRange=function(t){return this.noteView.convertToNoteRange(t)},e.prototype._drawRange=function(t){t=!1!==t,this.noteView.trigger("draw-range",this.noteRange,t)},e.prototype._onDocSelectionChange=function(t){var e=s.getRange(),n=this._convertToNoteRange(e);if(this.noteRange=n,n&&!n.canDrawedByNative())return void this.setRange(n);this.trigger("doc-change-selection",n),this._triggerSelectionChange()},e.prototype._onSetRange=function(t,e,n,o){this._setRange(t,{selectionChangeEvent:o,toDraw:e,trigger:n})},e.prototype._setRange=function(t,e){var n=this._convertToNoteRange(t);if(!n||!n.getStartBlockRange()||!n.getEndBlockRange())return void r.warn("Failed convert native range to note range!");e=e||{},this.noteRange=n,e.toDraw&&this._drawRange(e.scrollIntoView),e.trigger&&this._triggerSelectionChange(e.selectionChangeEvent)},e.prototype._triggerSelectionChange=function(t){t||(t=a.SelectionChangeEvent.createUserTypeEvent()),this.trigger("selection-change",t)},e}(o)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(){return{encode:function(t){return window.btoa(window.unescape(encodeURIComponent(t)))},decode:function(t){return decodeURIComponent(window.escape(window.atob(t)))}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(4),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(409),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432)],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){t.redo()};n.register({name:"redo",key:"mod+y",action:o}),n.register({name:"redo_2",key:"mod+shift+z",action:o})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"backspace",key:"backspace",action:function(t){t.execDeleteBackward()}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"del",key:"del",action:function(t){t.execDeleteForward()}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e,n){var o=t.noteView;o&&(o.directionKeyJustMoved=!0),t.moveCaretWithDirection(!0,e);var r=t.getNoteRange(),i=r.getEndBlockRange(),s=i.block;if(!s.isEmpty())switch(n){case"right":s.getLength()===i.end&&t.note.getLastBlock()===s&&t.execCommand("comp.AppendBlank");break;case"down":t.note.getLastBlock()===s&&t.execCommand("comp.AppendBlank")}};n.register({name:"down",key:"down",preventDefault:!1,action:o}),n.register({name:"right",key:"right",preventDefault:!1,action:o})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(2),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e,o;e=t.getNoteRange(),o=e.getEndBlockRange(),e.isInSingleBlock()&&n.BlockTypes.isHeading(o.block)&&o.isCollapsed()&&o.start===o.block.getLength()&&t.resetEditingInlineStates(),t.execCommand("comp.KeyEnter",{inlineStyles:t.getEditingInlineState()})};o.register({name:"enter",key:"enter",action:r}),o.register({name:"alt+enter",key:"alt+enter",action:r}),o.register({name:"shift+enter",key:"shift+enter",action:r})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"esc",key:"esc",preventDefault:!1,action:function(t){t.trigger("esc")}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(2),n(4),n(7)],void 0!==(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.register({name:"space",key:"space",preventDefault:!1,action:function(t){var e,r=t.getNoteRange();if(r&&(e=r.getStartBlockRange().block,r.isInSingleBlock()&&e&&n.BlockTypes.isTable(e)))return void o.error("should NOT trigger insertText when select only Table.");t.insertText(" ",!1)}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"tab",key:"tab",action:function(t){var e=t.getEditingInlineState();t.execCommand("comp.KeyTab",{inlineStyles:e})}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){var n=t.noteView;n&&(n.directionKeyJustMoved=!0),t.moveCaretWithDirection(!1,e)};n.register({name:"up",key:"up",preventDefault:!1,action:o}),n.register({name:"left",key:"left",preventDefault:!1,action:o})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7),n(1)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=["ctrl+backspace","ctrl+del","shift+backspace","shift+del","alt+backspace","alt+del","mod+backspace","mod+del"];o.each(r,function(t){n.register({name:t,key:t,preventDefault:!0,action:function(){}})})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"bold",key:"mod+b",action:function(t){t.toggleInlineStyle("bold")}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"italic",key:"mod+i",action:function(t){t.toggleInlineStyle("italic")}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(4),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.register({name:"reloadPage",key:"mod+shift+r",preventDefault:!1,action:function(){if(n.DEBUG){window.clearJstCache&&(window.clearJstCache(),window.alert("Clear JST cache... Done!"));var t=window.location.href;window.location.href=t}}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"save",key:"mod+s",action:function(t){t.trigger("yne-save-content")}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"undo",key:"mod+z",action:function(t){t.undo()}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"selectAll",key:"mod+a",read:!0,action:function(t){t.selectAll()}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(2),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e,o,r,i,s=t.getNoteRange(),a=t.noteView;(e=a.getHtmlContentEditable())||s&&s.isInSingleBlock()&&s.isMatchBlockTypes(t.note,[n.BlockTypes.IMAGE,n.BlockTypes.ATTACHMENT])&&(r=s.getStartBlockRange(),o=r.block,(i=a.getBlockViewByBlock(o))&&(a.setHtmlContentEditable(!0),i.el.focus(),window.setTimeout(function(){a.setHtmlContentEditable(!1)},0)))};o.register({name:"copy",key:"mod+c",preventDefault:!1,read:!0,action:r}),o.register({name:"cut",key:"mod+x",preventDefault:!1,action:r})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(17),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.register({name:"paste",key:"mod+v",preventDefault:!1,action:function(t,e){var o=t.editor;t.setPasteAsText(!1),n.IS_MAC&&(e.preventDefault(),o.callMacNativeApi("menuPaste"))}}),o.register({name:"pasteAsText",key:"mod+shift+v",preventDefault:!1,action:function(t){t.setPasteAsText(!0)}}),o.register({name:"pasteAsText_alternative",key:"mod+shift+option+v",preventDefault:!1,action:function(t){t.setPasteAsText(!0)}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"shiftTab",key:"shift+tab",action:function(t){var e=t.getEditingInlineState();t.execCommand("comp.KeyTab",{inlineStyles:e,withShiftKey:!0})}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(17),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.IS_PC&&(o.register({name:"zoomIn_0",key:"mod+plus",action:function(t){t.zoomInEditor()}}),o.register({name:"zoomIn_1",key:"mod+shift+plus",action:function(t){t.zoomInEditor()}}),o.register({name:"zoomIn_2",key:"mod+=",action:function(t){t.zoomInEditor()}}),o.register({name:"zoomIn_3",key:"mod+shift+=",action:function(t){t.zoomInEditor()}}))}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(17),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.IS_PC&&(o.register({name:"zoomOut_0",key:"mod+-",action:function(t){t.zoomOutEditor()}}),o.register({name:"zoomOut_1",key:"mod+shift+-",action:function(t){t.zoomOutEditor()}}),o.register({name:"zoomOut_2",key:"mod+0",action:function(t){t.zoomEditor(1,!0)}}))}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(17),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.register({name:"deleteToEnd",key:"ctrl+k",action:function(t){n.IS_MAC&&t.execDeleteToEnd()}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(17),n(7)],void 0!==(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.register({name:"deleteForward",key:"ctrl+d",action:function(t){n.IS_MAC&&t.execDeleteForward()}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.register({name:"underline",key:"mod+u",action:function(t){t.toggleInlineStyle("underline")}})}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(114)],void 0!==(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.macroConfigs={}}return t.prototype.getMacroConfig=function(t){return this.macroConfigs[t]},t.prototype.registerMacroConfig=function(t){var e=this;Array.isArray(t)?t.forEach(function(t){e.macroConfigs[t.macroName]=t}):this.macroConfigs[t.macroName]=t,n.trigger()},t.prototype.unregisterMacroConfig=function(t){if(t){this.getMacroConfig(t).onDestroy(),delete this.macroConfigs[t]}else for(var e=0,o=Object.keys(this.macroConfigs);e<o.length;e++){var r=o[e];this.unregisterMacroConfig(r)}n.trigger()},t.prototype.getMacroStyles=function(t){var e=t.getMacroName(),n=this.getMacroConfig(e);return n.getMacroStyles?n.getMacroStyles():null},t.prototype.isHidePlaceholderBtn=function(t){var e=t.getMacroName(),n=this.getMacroConfig(e);return!!n.isHidePlaceholderBtn&&n.isHidePlaceholderBtn()},t.prototype.getEditView=function(t){var e=t.getMacroName(),n=t.getMacroContent(),o=t.getMacroVersion(),r=this.getMacroConfig(e);return r&&r.getEditView?r.getEditView(n,o):null},t.prototype.getReadView=function(t){var e=t.getMacroName(),n=t.getMacroContent(),o=t.getMacroVersion(),r=this.getMacroConfig(e);return r&&r.getReadView?r.getReadView(n,{macroVersion:o}):null},t.prototype.getInsertDialog=function(t){var e=this.getMacroConfig(t);return e&&e.getInsertDialog?e.getInsertDialog():null},t.prototype.getEditDialog=function(t){var e=t.getMacroName(),n=t.getMacroContent(),o=t.getMacroVersion(),r=this.getMacroConfig(e);return r&&r.getEditDialog?r.getEditDialog(n,o):null},t.prototype.getAllMacroConfig=function(){return this.macroConfigs},t.prototype.getMacroConfigNotOnToolbar=function(){for(var t={},e=0,n=Object.keys(this.macroConfigs);e<n.length;e++){var o=n[e],r=this.macroConfigs[o];r&&(r.toolbarOptions||(t[o]=r))}return t},t.prototype.getCustomOptions=function(t){for(var e={},n=0,o=Object.keys(t);n<o.length;n++){var r=o[n],i=this.macroConfigs[r];i&&i.customOptions&&(e[r]=i.customOptions)}return e},t.prototype.hasMacroConfigNotOnToolbar=function(){for(var t=0,e=Object.keys(this.macroConfigs);t<e.length;t++){var n=e[t],o=this.macroConfigs[n];if(o&&!o.toolbarOptions)return!0}return!1},t.prototype.getMacroConfigOnToolbar=function(){for(var t={},e=0,n=Object.keys(this.macroConfigs);e<n.length;e++){var o=n[e],r=this.macroConfigs[o];r&&(r.toolbarOptions&&(t[o]=r))}return t},t}();e.default=o}.apply(e,o))&&(t.exports=r)},function(t,e,n){t.exports=n(435)},function(t,e,n){"use strict";var o=n(21);e.Subject=o.Subject,e.AnonymousSubject=o.AnonymousSubject;var r=n(0);e.Observable=r.Observable,n(437),n(440),n(443),n(446),n(449),n(452),n(454),n(457),n(458),n(461),n(464),n(466),n(469),n(472),n(477),n(478),n(479),n(482),n(483),n(485),n(488),n(491),n(494),n(497),n(499),n(501),n(503),n(509),n(511),n(513),n(515),n(517),n(519),n(521),n(523),n(525),n(527),n(529),n(531),n(533),n(535),n(537),n(539),n(541),n(543),n(545),n(547),n(550),n(552),n(554),n(556),n(558),n(560),n(562),n(564),n(566),n(568),n(570),n(572),n(574),n(579),n(581),n(583),n(585),n(587),n(589),n(591),n(593),n(595),n(597),n(599),n(601),n(603),n(605),n(607),n(609),n(611),n(613),n(615),n(617),n(619),n(621),n(624),n(626),n(628),n(630),n(632),n(634),n(636),n(638),n(640),n(642),n(644),n(646),n(648),n(650),n(652),n(654),n(656),n(658),n(660),n(662),n(664),n(666),n(668),n(670),n(679),n(681),n(683),n(685),n(687),n(689),n(691),n(693),n(695),n(697),n(698),n(700),n(702),n(704),n(706),n(707),n(709),n(711),n(713),n(715),n(717),n(719),n(721);var i=n(19);e.Subscription=i.Subscription;var s=n(6);e.Subscriber=s.Subscriber;var a=n(89);e.AsyncSubject=a.AsyncSubject;var l=n(96);e.ReplaySubject=l.ReplaySubject;var c=n(220);e.BehaviorSubject=c.BehaviorSubject;var u=n(214);e.ConnectableObservable=u.ConnectableObservable;var p=n(69);e.Notification=p.Notification;var d=n(97);e.EmptyError=d.EmptyError;var h=n(75);e.ArgumentOutOfRangeError=h.ArgumentOutOfRangeError;var f=n(88);e.ObjectUnsubscribedError=f.ObjectUnsubscribedError;var g=n(250);e.TimeoutError=g.TimeoutError;var m=n(163);e.UnsubscriptionError=m.UnsubscriptionError;var _=n(247);e.TimeInterval=_.TimeInterval;var b=n(131);e.Timestamp=b.Timestamp;var y=n(723);e.TestScheduler=y.TestScheduler;var v=n(263);e.VirtualTimeScheduler=v.VirtualTimeScheduler;var w=n(174);e.AjaxResponse=w.AjaxResponse,e.AjaxError=w.AjaxError,e.AjaxTimeoutError=w.AjaxTimeoutError;var I=n(115);e.pipe=I.pipe;var C=n(239),M=n(14),T=n(175),k=n(726),S=n(86),N=n(67),x=n(87),A=n(730);e.operators=A;var E={asap:C.asap,queue:T.queue,animationFrame:k.animationFrame,async:M.async};e.Scheduler=E;var O={rxSubscriber:S.rxSubscriber,observable:x.observable,iterator:N.iterator};e.Symbol=O},function(t,e,n){"use strict";function o(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(s.empty)}var r=n(6),i=n(86),s=n(164);e.toSubscriber=o},function(t,e,n){"use strict";var o=n(0),r=n(438);o.Observable.bindCallback=r.bindCallback},function(t,e,n){"use strict";var o=n(439);e.bindCallback=o.BoundCallbackObservable.create},function(t,e,n){"use strict";function o(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function r(t){var e=t.err;t.subject.error(e)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(0),a=n(23),l=n(22),c=n(89),u=function(t){function e(e,n,o,r,i){t.call(this),this.callbackFunc=e,this.selector=n,this.args=o,this.context=r,this.scheduler=i}return i(e,t),e.create=function(t,n,o){return void 0===n&&(n=void 0),function(){for(var r=[],i=0;i<arguments.length;i++)r[i-0]=arguments[i];return new e(t,n,r,this,o)}},e.prototype._subscribe=function(t){var n=this.callbackFunc,o=this.args,r=this.scheduler,i=this.subject;if(r)return r.schedule(e.dispatch,0,{source:this,subscriber:t,context:this.context});if(!i){i=this.subject=new c.AsyncSubject;var s=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var o=t.source,r=o.selector,i=o.subject;if(r){var s=a.tryCatch(r).apply(this,e);s===l.errorObject?i.error(l.errorObject.e):(i.next(s),i.complete())}else i.next(e.length<=1?e[0]:e),i.complete()};s.source=this;a.tryCatch(n).apply(this.context,o.concat(s))===l.errorObject&&i.error(l.errorObject.e)}return i.subscribe(t)},e.dispatch=function(t){var e=this,n=t.source,i=t.subscriber,s=t.context,u=n.callbackFunc,p=n.args,d=n.scheduler,h=n.subject;if(!h){h=n.subject=new c.AsyncSubject;var f=function t(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];var s=t.source,c=s.selector,u=s.subject;if(c){var p=a.tryCatch(c).apply(this,n);p===l.errorObject?e.add(d.schedule(r,0,{err:l.errorObject.e,subject:u})):e.add(d.schedule(o,0,{value:p,subject:u}))}else{var h=n.length<=1?n[0]:n;e.add(d.schedule(o,0,{value:h,subject:u}))}};f.source=n;a.tryCatch(u).apply(s,p.concat(f))===l.errorObject&&h.error(l.errorObject.e)}e.add(h.subscribe(i))},e}(s.Observable);e.BoundCallbackObservable=u},function(t,e,n){"use strict";var o=n(0),r=n(441);o.Observable.bindNodeCallback=r.bindNodeCallback},function(t,e,n){"use strict";var o=n(442);e.bindNodeCallback=o.BoundNodeCallbackObservable.create},function(t,e,n){"use strict";function o(t){var e=this,n=t.source,o=t.subscriber,s=t.context,a=n,p=a.callbackFunc,d=a.args,h=a.scheduler,f=n.subject;if(!f){f=n.subject=new u.AsyncSubject;var g=function t(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];var s=t.source,a=s.selector,u=s.subject,p=n.shift();if(p)e.add(h.schedule(i,0,{err:p,subject:u}));else if(a){var d=l.tryCatch(a).apply(this,n);d===c.errorObject?e.add(h.schedule(i,0,{err:c.errorObject.e,subject:u})):e.add(h.schedule(r,0,{value:d,subject:u}))}else{var f=n.length<=1?n[0]:n;e.add(h.schedule(r,0,{value:f,subject:u}))}};g.source=n;l.tryCatch(p).apply(s,d.concat(g))===c.errorObject&&e.add(h.schedule(i,0,{err:c.errorObject.e,subject:f}))}e.add(f.subscribe(o))}function r(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function i(t){var e=t.err;t.subject.error(e)}var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n(0),l=n(23),c=n(22),u=n(89),p=function(t){function e(e,n,o,r,i){t.call(this),this.callbackFunc=e,this.selector=n,this.args=o,this.context=r,this.scheduler=i}return s(e,t),e.create=function(t,n,o){return void 0===n&&(n=void 0),function(){for(var r=[],i=0;i<arguments.length;i++)r[i-0]=arguments[i];return new e(t,n,r,this,o)}},e.prototype._subscribe=function(t){var e=this.callbackFunc,n=this.args,r=this.scheduler,i=this.subject;if(r)return r.schedule(o,0,{source:this,subscriber:t,context:this.context});if(!i){i=this.subject=new u.AsyncSubject;var s=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var o=t.source,r=o.selector,i=o.subject,s=e.shift();if(s)i.error(s);else if(r){var a=l.tryCatch(r).apply(this,e);a===c.errorObject?i.error(c.errorObject.e):(i.next(a),i.complete())}else i.next(e.length<=1?e[0]:e),i.complete()};s.source=this;l.tryCatch(e).apply(this.context,n.concat(s))===c.errorObject&&i.error(c.errorObject.e)}return i.subscribe(t)},e}(a.Observable);e.BoundNodeCallbackObservable=p},function(t,e,n){"use strict";var o=n(0),r=n(444);o.Observable.combineLatest=r.combineLatest},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,o=null;return r.isScheduler(t[t.length-1])&&(o=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&i.isArray(t[0])&&(t=t[0]),new s.ArrayObservable(t,o).lift(new a.CombineLatestOperator(n))}var r=n(34),i=n(37),s=n(46),a=n(90);e.combineLatest=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(6),i=function(t){function e(e,n,o){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=o,this.index=0}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(r.Subscriber);e.InnerSubscriber=i},function(t,e,n){"use strict";var o=n(0),r=n(68);o.Observable.concat=r.concat},function(t,e,n){"use strict";function o(t){var e=t[u.iterator];if(!e&&"string"==typeof t)return new d(t);if(!e&&void 0!==t.length)return new h(t);if(!e)throw new TypeError("object is not iterable");return t[u.iterator]()}function r(t){var e=+t.length;return isNaN(e)?0:0!==e&&i(e)?(e=s(e)*Math.floor(Math.abs(e)),e<=0?0:e>f?f:e):e}function i(t){return"number"==typeof t&&l.root.isFinite(t)}function s(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=n(25),c=n(0),u=n(67),p=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=o(e)}return a(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.hasError,o=t.iterator,r=t.subscriber;if(n)return void r.error(t.error);var i=o.next();return i.done?void r.complete():(r.next(i.value),t.index=e+1,r.closed?void("function"==typeof o.return&&o.return()):void this.schedule(t))},e.prototype._subscribe=function(t){var n=this,o=n.iterator,r=n.scheduler;if(r)return r.schedule(e.dispatch,0,{index:0,iterator:o,subscriber:t});for(;;){var i=o.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof o.return&&o.return();break}}},e}(c.Observable);e.IteratorObservable=p;var d=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[u.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),h=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=r(t)),this.arr=t,this.idx=e,this.len=n}return t.prototype[u.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),f=Math.pow(2,53)-1},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(117),s=n(47),a=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return o(e,t),e.create=function(t,n){var o=t.length;return 0===o?new s.EmptyObservable:1===o?new i.ScalarObservable(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,o=t.length,r=t.subscriber;if(!r.closed){if(n>=o)return void r.complete();r.next(e[n]),t.index=n+1,this.schedule(t)}},e.prototype._subscribe=function(t){var n=this,o=n.arrayLike,r=n.scheduler,i=o.length;if(r)return r.schedule(e.dispatch,0,{arrayLike:o,index:0,length:i,subscriber:t});for(var s=0;s<i&&!t.closed;s++)t.next(o[s]);t.complete()},e}(r.Observable);e.ArrayLikeObservable=a},function(t,e,n){"use strict";var o=n(0),r=n(450);o.Observable.defer=r.defer},function(t,e,n){"use strict";var o=n(451);e.defer=o.DeferObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(10),s=n(9),a=function(t){function e(e){t.call(this),this.observableFactory=e}return o(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new l(t,this.observableFactory)},e}(r.Observable);e.DeferObservable=a;var l=function(t){function e(e,n){t.call(this,e),this.factory=n,this.tryDefer()}return o(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(i.subscribeToResult(this,t))},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var o=n(0),r=n(453);o.Observable.empty=r.empty},function(t,e,n){"use strict";var o=n(47);e.empty=o.EmptyObservable.create},function(t,e,n){"use strict";var o=n(0),r=n(455);o.Observable.forkJoin=r.forkJoin},function(t,e,n){"use strict";var o=n(456);e.forkJoin=o.ForkJoinObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(47),s=n(37),a=n(10),l=n(9),c=function(t){function e(e,n){t.call(this),this.sources=e,this.resultSelector=n}return o(e,t),e.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(null===t||0===arguments.length)return new i.EmptyObservable;var o=null;return"function"==typeof t[t.length-1]&&(o=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),0===t.length?new i.EmptyObservable:new e(t,o)},e.prototype._subscribe=function(t){return new u(t,this.sources,this.resultSelector)},e}(r.Observable);e.ForkJoinObservable=c;var u=function(t){function e(e,n,o){t.call(this,e),this.sources=n,this.resultSelector=o,this.completed=0,this.haveValues=0;var r=n.length;this.total=r,this.values=new Array(r);for(var i=0;i<r;i++){var s=n[i],l=a.subscribeToResult(this,s,null,i);l&&(l.outerIndex=i,this.add(l))}}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.values[n]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this,o=n.haveValues,r=n.resultSelector,i=n.values,s=i.length;if(!t._hasValue)return void e.complete();if(++this.completed===s){if(o===s){var a=r?r.apply(this,i):i;e.next(a)}e.complete()}},e}(l.OuterSubscriber)},function(t,e,n){"use strict";var o=n(0),r=n(169);o.Observable.from=r.from},function(t,e,n){"use strict";var o=n(0),r=n(459);o.Observable.fromEvent=r.fromEvent},function(t,e,n){"use strict";var o=n(460);e.fromEvent=o.FromEventObservable.create},function(t,e,n){"use strict";function o(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function r(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}function i(t){return!!t&&"[object NodeList]"===f.call(t)}function s(t){return!!t&&"[object HTMLCollection]"===f.call(t)}function a(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}var l=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=n(0),u=n(23),p=n(85),d=n(22),h=n(19),f=Object.prototype.toString,g=function(t){function e(e,n,o,r){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=o,this.options=r}return l(e,t),e.create=function(t,n,o,r){return p.isFunction(o)&&(r=o,o=void 0),new e(t,n,r,o)},e.setupSubscription=function(t,n,l,c,u){var p;if(i(t)||s(t))for(var d=0,f=t.length;d<f;d++)e.setupSubscription(t[d],n,l,c,u);else if(a(t)){var g=t;t.addEventListener(n,l,u),p=function(){return g.removeEventListener(n,l,u)}}else if(r(t)){var m=t;t.on(n,l),p=function(){return m.off(n,l)}}else{if(!o(t))throw new TypeError("Invalid event target");var _=t;t.addListener(n,l),p=function(){return _.removeListener(n,l)}}c.add(new h.Subscription(p))},e.prototype._subscribe=function(t){var n=this.sourceObj,o=this.eventName,r=this.options,i=this.selector,s=i?function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var o=u.tryCatch(i).apply(void 0,e);o===d.errorObject?t.error(d.errorObject.e):t.next(o)}:function(e){return t.next(e)};e.setupSubscription(n,o,s,t,r)},e}(c.Observable);e.FromEventObservable=g},function(t,e,n){"use strict";var o=n(0),r=n(462);o.Observable.fromEventPattern=r.fromEventPattern},function(t,e,n){"use strict";var o=n(463);e.fromEventPattern=o.FromEventPatternObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(85),i=n(0),s=n(19),a=function(t){function e(e,n,o){t.call(this),this.addHandler=e,this.removeHandler=n,this.selector=o}return o(e,t),e.create=function(t,n,o){return new e(t,n,o)},e.prototype._subscribe=function(t){var e=this,n=this.removeHandler,o=this.selector?function(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];e._callSelector(t,n)}:function(e){t.next(e)},i=this._callAddHandler(o,t);r.isFunction(n)&&t.add(new s.Subscription(function(){n(o,i)}))},e.prototype._callSelector=function(t,e){try{var n=this.selector.apply(this,e);t.next(n)}catch(e){t.error(e)}},e.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}},e}(i.Observable);e.FromEventPatternObservable=a},function(t,e,n){"use strict";var o=n(0),r=n(465);o.Observable.fromPromise=r.fromPromise},function(t,e,n){"use strict";var o=n(171);e.fromPromise=o.PromiseObservable.create},function(t,e,n){"use strict";var o=n(0),r=n(467);o.Observable.generate=r.generate},function(t,e,n){"use strict";var o=n(468);e.generate=o.GenerateObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(34),s=function(t){return t},a=function(t){function e(e,n,o,r,i){t.call(this),this.initialState=e,this.condition=n,this.iterate=o,this.resultSelector=r,this.scheduler=i}return o(e,t),e.create=function(t,n,o,r,a){return 1==arguments.length?new e(t.initialState,t.condition,t.iterate,t.resultSelector||s,t.scheduler):void 0===r||i.isScheduler(r)?new e(t,n,o,s,r):new e(t,n,o,r,a)},e.prototype._subscribe=function(t){var n=this.initialState;if(this.scheduler)return this.scheduler.schedule(e.dispatch,0,{subscriber:t,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:n});for(var o=this,r=o.condition,i=o.resultSelector,s=o.iterate;;){if(r){var a=void 0;try{a=r(n)}catch(e){return void t.error(e)}if(!a){t.complete();break}}var l=void 0;try{l=i(n)}catch(e){return void t.error(e)}if(t.next(l),t.closed)break;try{n=s(n)}catch(e){return void t.error(e)}}},e.dispatch=function(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var o=void 0;try{o=n(t.state)}catch(t){return void e.error(t)}if(!o)return void e.complete();if(e.closed)return}var r;try{r=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(r),!e.closed))return this.schedule(t)}},e}(r.Observable);e.GenerateObservable=a},function(t,e,n){"use strict";var o=n(0),r=n(470);o.Observable.if=r._if},function(t,e,n){"use strict";var o=n(471);e._if=o.IfObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(10),s=n(9),a=function(t){function e(e,n,o){t.call(this),this.condition=e,this.thenSource=n,this.elseSource=o}return o(e,t),e.create=function(t,n,o){return new e(t,n,o)},e.prototype._subscribe=function(t){var e=this,n=e.condition,o=e.thenSource,r=e.elseSource;return new l(t,n,o,r)},e}(r.Observable);e.IfObservable=a;var l=function(t){function e(e,n,o,r){t.call(this,e),this.condition=n,this.thenSource=o,this.elseSource=r,this.tryIf()}return o(e,t),e.prototype.tryIf=function(){var t,e=this,n=e.condition,o=e.thenSource,r=e.elseSource;try{t=n();var s=t?o:r;s?this.add(i.subscribeToResult(this,s)):this._complete()}catch(t){this._error(t)}},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var o=n(0),r=n(473);o.Observable.interval=r.interval},function(t,e,n){"use strict";var o=n(474);e.interval=o.IntervalObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(71),i=n(0),s=n(14),a=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=s.async),t.call(this),this.period=e,this.scheduler=n,(!r.isNumeric(e)||e<0)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=s.async)}return o(e,t),e.create=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=s.async),new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.subscriber,o=t.period;n.next(e),n.closed||(t.index+=1,this.schedule(t,o))},e.prototype._subscribe=function(t){var n=this.period,o=this.scheduler;t.add(o.schedule(e.dispatch,n,{index:0,subscriber:t,period:n}))},e}(i.Observable);e.IntervalObservable=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(19),i=function(t){function e(e,n){t.call(this)}return o(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(r.Subscription);e.Action=i},function(t,e,n){"use strict";var o=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=o},function(t,e,n){"use strict";var o=n(0),r=n(93);o.Observable.merge=r.merge},function(t,e,n){"use strict";var o=n(0),r=n(119);o.Observable.race=r.race},function(t,e,n){"use strict";var o=n(0),r=n(480);o.Observable.never=r.never},function(t,e,n){"use strict";var o=n(481);e.never=o.NeverObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(116),s=function(t){function e(){t.call(this)}return o(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){i.noop()},e}(r.Observable);e.NeverObservable=s},function(t,e,n){"use strict";var o=n(0),r=n(168);o.Observable.of=r.of},function(t,e,n){"use strict";var o=n(0),r=n(484);o.Observable.onErrorResumeNext=r.onErrorResumeNext},function(t,e,n){"use strict";var o=n(120);e.onErrorResumeNext=o.onErrorResumeNextStatic},function(t,e,n){"use strict";var o=n(0),r=n(486);o.Observable.pairs=r.pairs},function(t,e,n){"use strict";var o=n(487);e.pairs=o.PairsObservable.create},function(t,e,n){"use strict";function o(t){var e=t.obj,n=t.keys,o=t.length,r=t.index,i=t.subscriber;if(r===o)return void i.complete();var s=n[r];i.next([s,e[s]]),t.index=r+1,this.schedule(t)}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),s=function(t){function e(e,n){t.call(this),this.obj=e,this.scheduler=n,this.keys=Object.keys(e)}return r(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=e.keys,r=e.scheduler,i=n.length;if(r)return r.schedule(o,0,{obj:this.obj,keys:n,length:i,index:0,subscriber:t});for(var s=0;s<i;s++){var a=n[s];t.next([a,this.obj[a]])}t.complete()},e}(i.Observable);e.PairsObservable=s},function(t,e,n){"use strict";var o=n(0),r=n(489);o.Observable.range=r.range},function(t,e,n){"use strict";var o=n(490);e.range=o.RangeObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=function(t){function e(e,n,o){t.call(this),this.start=e,this._count=n,this.scheduler=o}return o(e,t),e.create=function(t,n,o){return void 0===t&&(t=0),void 0===n&&(n=0),new e(t,n,o)},e.dispatch=function(t){var e=t.start,n=t.index,o=t.count,r=t.subscriber;if(n>=o)return void r.complete();r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t))},e.prototype._subscribe=function(t){var n=0,o=this.start,r=this._count,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:n,count:r,start:o,subscriber:t});for(;;){if(n++>=r){t.complete();break}if(t.next(o++),t.closed)break}},e}(r.Observable);e.RangeObservable=i},function(t,e,n){"use strict";var o=n(0),r=n(492);o.Observable.using=r.using},function(t,e,n){"use strict";var o=n(493);e.using=o.UsingObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(10),s=n(9),a=function(t){function e(e,n){t.call(this),this.resourceFactory=e,this.observableFactory=n}return o(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e,n=this,o=n.resourceFactory,r=n.observableFactory;try{return e=o(),new l(t,e,r)}catch(e){t.error(e)}},e}(r.Observable);e.UsingObservable=a;var l=function(t){function e(e,n,o){t.call(this,e),this.resource=n,this.observableFactory=o,e.add(n),this.tryUse()}return o(e,t),e.prototype.tryUse=function(){try{var t=this.observableFactory.call(this,this.resource);t&&this.add(i.subscribeToResult(this,t))}catch(t){this._error(t)}},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var o=n(0),r=n(495);o.Observable.throw=r._throw},function(t,e,n){"use strict";var o=n(496);e._throw=o.ErrorObservable.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=function(t){function e(e,n){t.call(this),this.error=e,this.scheduler=n}return o(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.error;t.subscriber.error(e)},e.prototype._subscribe=function(t){var n=this.error,o=this.scheduler;if(t.syncErrorThrowable=!0,o)return o.schedule(e.dispatch,0,{error:n,subscriber:t});t.error(n)},e}(r.Observable);e.ErrorObservable=i},function(t,e,n){"use strict";var o=n(0),r=n(173);o.Observable.timer=r.timer},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(71),i=n(0),s=n(14),a=n(34),l=n(94),c=function(t){function e(e,n,o){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,r.isNumeric(n)?this.period=Number(n)<1&&1||Number(n):a.isScheduler(n)&&(o=n),a.isScheduler(o)||(o=s.async),this.scheduler=o,this.dueTime=l.isDate(e)?+e-this.scheduler.now():e}return o(e,t),e.create=function(t,n,o){return void 0===t&&(t=0),new e(t,n,o)},e.dispatch=function(t){var e=t.index,n=t.period,o=t.subscriber,r=this;if(o.next(e),!o.closed){if(-1===n)return o.complete();t.index=e+1,r.schedule(t,n)}},e.prototype._subscribe=function(t){var n=this,o=n.period,r=n.dueTime;return n.scheduler.schedule(e.dispatch,r,{index:0,period:o,subscriber:t})},e}(i.Observable);e.TimerObservable=c},function(t,e,n){"use strict";var o=n(0),r=n(500);o.Observable.zip=r.zip},function(t,e,n){"use strict";var o=n(95);e.zip=o.zipStatic},function(t,e,n){"use strict";var o=n(0),r=n(502);o.Observable.ajax=r.ajax},function(t,e,n){"use strict";var o=n(174);e.ajax=o.AjaxObservable.create},function(t,e,n){"use strict";var o=n(0),r=n(504);o.Observable.webSocket=r.webSocket},function(t,e,n){"use strict";var o=n(505);e.webSocket=o.WebSocketSubject.create},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(21),i=n(6),s=n(0),a=n(19),l=n(25),c=n(96),u=n(23),p=n(22),d=n(508),h=function(t){function e(e,n){if(e instanceof s.Observable)t.call(this,n,e);else{if(t.call(this),this.WebSocketCtor=l.root.WebSocket,this._output=new r.Subject,"string"==typeof e?this.url=e:d.assign(this,e),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new c.ReplaySubject}}return o(e,t),e.prototype.resultSelector=function(t){return JSON.parse(t.data)},e.create=function(t){return new e(t)},e.prototype.lift=function(t){var n=new e(this,this.destination);return n.operator=t,n},e.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new c.ReplaySubject),this._output=new r.Subject},e.prototype.multiplex=function(t,e,n){var o=this;return new s.Observable(function(r){var i=u.tryCatch(t)();i===p.errorObject?r.error(p.errorObject.e):o.next(i);var s=o.subscribe(function(t){var e=u.tryCatch(n)(t);e===p.errorObject?r.error(p.errorObject.e):e&&r.next(t)},function(t){return r.error(t)},function(){return r.complete()});return function(){var t=u.tryCatch(e)();t===p.errorObject?r.error(p.errorObject.e):o.next(t),s.unsubscribe()}})},e.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,n=this._output,o=null;try{o=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=o,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(t){return void n.error(t)}var r=new a.Subscription(function(){t.socket=null,o&&1===o.readyState&&o.close()});o.onopen=function(e){var s=t.openObserver;s&&s.next(e);var a=t.destination;t.destination=i.Subscriber.create(function(t){return 1===o.readyState&&o.send(t)},function(e){var r=t.closingObserver;r&&r.next(void 0),e&&e.code?o.close(e.code,e.reason):n.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()},function(){var e=t.closingObserver;e&&e.next(void 0),o.close(),t._resetState()}),a&&a instanceof c.ReplaySubject&&r.add(a.subscribe(t.destination))},o.onerror=function(e){t._resetState(),n.error(e)},o.onclose=function(e){t._resetState();var o=t.closeObserver;o&&o.next(e),e.wasClean?n.complete():n.error(e)},o.onmessage=function(e){var o=u.tryCatch(t.resultSelector)(e);o===p.errorObject?n.error(p.errorObject.e):n.next(o)}},e.prototype._subscribe=function(t){var e=this,n=this.source;if(n)return n.subscribe(t);this.socket||this._connectSocket();var o=new a.Subscription;return o.add(this._output.subscribe(t)),o.add(function(){var t=e.socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())}),o},e.prototype.unsubscribe=function(){var e=this,n=e.source,o=e.socket;o&&1===o.readyState&&(o.close(),this._resetState()),t.prototype.unsubscribe.call(this),n||(this.destination=new c.ReplaySubject)},e}(r.AnonymousSubject);e.WebSocketSubject=h},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(72),i=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return o(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,o){return void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,o):e.flush(this)},e}(r.AsyncAction);e.QueueAction=i},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(73),i=function(t){function e(){t.apply(this,arguments)}return o(e,t),e}(r.AsyncScheduler);e.QueueScheduler=i},function(t,e,n){"use strict";function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=e.length,r=0;r<o;r++){var i=e[r];for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}function r(t){return t.Object.assign||o}var i=n(25);e.assignImpl=o,e.getAssign=r,e.assign=r(i.root)},function(t,e,n){"use strict";var o=n(0),r=n(510);o.Observable.prototype.buffer=r.buffer},function(t,e,n){"use strict";function o(t){return r.buffer(t)(this)}var r=n(176);e.buffer=o},function(t,e,n){"use strict";var o=n(0),r=n(512);o.Observable.prototype.bufferCount=r.bufferCount},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=null),r.bufferCount(t,e)(this)}var r=n(177);e.bufferCount=o},function(t,e,n){"use strict";var o=n(0),r=n(514);o.Observable.prototype.bufferTime=r.bufferTime},function(t,e,n){"use strict";function o(t){var e=arguments.length,n=r.async;i.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var o=null;e>=2&&(o=arguments[1]);var a=Number.POSITIVE_INFINITY;return e>=3&&(a=arguments[2]),s.bufferTime(t,o,a,n)(this)}var r=n(14),i=n(34),s=n(178);e.bufferTime=o},function(t,e,n){"use strict";var o=n(0),r=n(516);o.Observable.prototype.bufferToggle=r.bufferToggle},function(t,e,n){"use strict";function o(t,e){return r.bufferToggle(t,e)(this)}var r=n(179);e.bufferToggle=o},function(t,e,n){"use strict";var o=n(0),r=n(518);o.Observable.prototype.bufferWhen=r.bufferWhen},function(t,e,n){"use strict";function o(t){return r.bufferWhen(t)(this)}var r=n(180);e.bufferWhen=o},function(t,e,n){"use strict";var o=n(0),r=n(520);o.Observable.prototype.catch=r._catch,o.Observable.prototype._catch=r._catch},function(t,e,n){"use strict";function o(t){return r.catchError(t)(this)}var r=n(181);e._catch=o},function(t,e,n){"use strict";var o=n(0),r=n(522);o.Observable.prototype.combineAll=r.combineAll},function(t,e,n){"use strict";function o(t){return r.combineAll(t)(this)}var r=n(182);e.combineAll=o},function(t,e,n){"use strict";var o=n(0),r=n(524);o.Observable.prototype.combineLatest=r.combineLatest},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.combineLatest.apply(void 0,t)(this)}var r=n(90);e.combineLatest=o},function(t,e,n){"use strict";var o=n(0),r=n(526);o.Observable.prototype.concat=r.concat},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.concat.apply(void 0,t)(this)}var r=n(183),i=n(68);e.concatStatic=i.concat,e.concat=o},function(t,e,n){"use strict";var o=n(0),r=n(528);o.Observable.prototype.concatAll=r.concatAll},function(t,e,n){"use strict";function o(){return r.concatAll()(this)}var r=n(118);e.concatAll=o},function(t,e,n){"use strict";var o=n(0),r=n(530);o.Observable.prototype.concatMap=r.concatMap},function(t,e,n){"use strict";function o(t,e){return r.concatMap(t,e)(this)}var r=n(121);e.concatMap=o},function(t,e,n){"use strict";var o=n(0),r=n(532);o.Observable.prototype.concatMapTo=r.concatMapTo},function(t,e,n){"use strict";function o(t,e){return r.concatMapTo(t,e)(this)}var r=n(184);e.concatMapTo=o},function(t,e,n){"use strict";var o=n(0),r=n(534);o.Observable.prototype.count=r.count},function(t,e,n){"use strict";function o(t){return r.count(t)(this)}var r=n(185);e.count=o},function(t,e,n){"use strict";var o=n(0),r=n(536);o.Observable.prototype.dematerialize=r.dematerialize},function(t,e,n){"use strict";function o(){return r.dematerialize()(this)}var r=n(186);e.dematerialize=o},function(t,e,n){"use strict";var o=n(0),r=n(538);o.Observable.prototype.debounce=r.debounce},function(t,e,n){"use strict";function o(t){return r.debounce(t)(this)}var r=n(187);e.debounce=o},function(t,e,n){"use strict";var o=n(0),r=n(540);o.Observable.prototype.debounceTime=r.debounceTime},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.async),i.debounceTime(t,e)(this)}var r=n(14),i=n(188);e.debounceTime=o},function(t,e,n){"use strict";var o=n(0),r=n(542);o.Observable.prototype.defaultIfEmpty=r.defaultIfEmpty},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=null),r.defaultIfEmpty(t)(this)}var r=n(122);e.defaultIfEmpty=o},function(t,e,n){"use strict";var o=n(0),r=n(544);o.Observable.prototype.delay=r.delay},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.async),i.delay(t,e)(this)}var r=n(14),i=n(189);e.delay=o},function(t,e,n){"use strict";var o=n(0),r=n(546);o.Observable.prototype.delayWhen=r.delayWhen},function(t,e,n){"use strict";function o(t,e){return r.delayWhen(t,e)(this)}var r=n(190);e.delayWhen=o},function(t,e,n){"use strict";var o=n(0),r=n(548);o.Observable.prototype.distinct=r.distinct},function(t,e,n){"use strict";function o(t,e){return r.distinct(t,e)(this)}var r=n(191);e.distinct=o},function(t,e,n){"use strict";function o(){return function(){function t(){this._values=[]}return t.prototype.add=function(t){this.has(t)||this._values.push(t)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._values.length=0},t}()}var r=n(25);e.minimalSetImpl=o,e.Set=r.root.Set||o()},function(t,e,n){"use strict";var o=n(0),r=n(551);o.Observable.prototype.distinctUntilChanged=r.distinctUntilChanged},function(t,e,n){"use strict";function o(t,e){return r.distinctUntilChanged(t,e)(this)}var r=n(123);e.distinctUntilChanged=o},function(t,e,n){"use strict";var o=n(0),r=n(553);o.Observable.prototype.distinctUntilKeyChanged=r.distinctUntilKeyChanged},function(t,e,n){"use strict";function o(t,e){return r.distinctUntilKeyChanged(t,e)(this)}var r=n(192);e.distinctUntilKeyChanged=o},function(t,e,n){"use strict";var o=n(0),r=n(555);o.Observable.prototype.do=r._do,o.Observable.prototype._do=r._do},function(t,e,n){"use strict";function o(t,e,n){return r.tap(t,e,n)(this)}var r=n(193);e._do=o},function(t,e,n){"use strict";var o=n(0),r=n(557);o.Observable.prototype.exhaust=r.exhaust},function(t,e,n){"use strict";function o(){return r.exhaust()(this)}var r=n(194);e.exhaust=o},function(t,e,n){"use strict";var o=n(0),r=n(559);o.Observable.prototype.exhaustMap=r.exhaustMap},function(t,e,n){"use strict";function o(t,e){return r.exhaustMap(t,e)(this)}var r=n(195);e.exhaustMap=o},function(t,e,n){"use strict";var o=n(0),r=n(561);o.Observable.prototype.expand=r.expand},function(t,e,n){"use strict";function o(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,r.expand(t,e,n)(this)}var r=n(196);e.expand=o},function(t,e,n){"use strict";var o=n(0),r=n(563);o.Observable.prototype.elementAt=r.elementAt},function(t,e,n){"use strict";function o(t,e){return r.elementAt(t,e)(this)}var r=n(197);e.elementAt=o},function(t,e,n){"use strict";var o=n(0),r=n(565);o.Observable.prototype.filter=r.filter},function(t,e,n){"use strict";function o(t,e){return r.filter(t,e)(this)}var r=n(124);e.filter=o},function(t,e,n){"use strict";var o=n(0),r=n(567);o.Observable.prototype.finally=r._finally,o.Observable.prototype._finally=r._finally},function(t,e,n){"use strict";function o(t){return r.finalize(t)(this)}var r=n(198);e._finally=o},function(t,e,n){"use strict";var o=n(0),r=n(569);o.Observable.prototype.find=r.find},function(t,e,n){"use strict";function o(t,e){return r.find(t,e)(this)}var r=n(125);e.find=o},function(t,e,n){"use strict";var o=n(0),r=n(571);o.Observable.prototype.findIndex=r.findIndex},function(t,e,n){"use strict";function o(t,e){return r.findIndex(t,e)(this)}var r=n(199);e.findIndex=o},function(t,e,n){"use strict";var o=n(0),r=n(573);o.Observable.prototype.first=r.first},function(t,e,n){"use strict";function o(t,e,n){return r.first(t,e,n)(this)}var r=n(200);e.first=o},function(t,e,n){"use strict";var o=n(0),r=n(575);o.Observable.prototype.groupBy=r.groupBy},function(t,e,n){"use strict";function o(t,e,n,o){return r.groupBy(t,e,n,o)(this)}var r=n(201);e.GroupedObservable=r.GroupedObservable,e.groupBy=o},function(t,e,n){"use strict";var o=n(25),r=n(577);e.Map=o.root.Map||function(){return r.MapPolyfill}()},function(t,e,n){"use strict";var o=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?void 0:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();e.MapPolyfill=o},function(t,e,n){"use strict";var o=function(){function t(){this.values={}}return t.prototype.delete=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var n=this.values;for(var o in n)n.hasOwnProperty(o)&&null!==n[o]&&t.call(e,n[o],o)},t.prototype.clear=function(){this.values={}},t}();e.FastMap=o},function(t,e,n){"use strict";var o=n(0),r=n(580);o.Observable.prototype.ignoreElements=r.ignoreElements},function(t,e,n){"use strict";function o(){return r.ignoreElements()(this)}var r=n(202);e.ignoreElements=o},function(t,e,n){"use strict";var o=n(0),r=n(582);o.Observable.prototype.isEmpty=r.isEmpty},function(t,e,n){"use strict";function o(){return r.isEmpty()(this)}var r=n(203);e.isEmpty=o},function(t,e,n){"use strict";var o=n(0),r=n(584);o.Observable.prototype.audit=r.audit},function(t,e,n){"use strict";function o(t){return r.audit(t)(this)}var r=n(126);e.audit=o},function(t,e,n){"use strict";var o=n(0),r=n(586);o.Observable.prototype.auditTime=r.auditTime},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.async),i.auditTime(t,e)(this)}var r=n(14),i=n(204);e.auditTime=o},function(t,e,n){"use strict";var o=n(0),r=n(588);o.Observable.prototype.last=r.last},function(t,e,n){"use strict";function o(t,e,n){return r.last(t,e,n)(this)}var r=n(205);e.last=o},function(t,e,n){"use strict";var o=n(0),r=n(590);o.Observable.prototype.let=r.letProto,o.Observable.prototype.letBind=r.letProto},function(t,e,n){"use strict";function o(t){return t(this)}e.letProto=o},function(t,e,n){"use strict";var o=n(0),r=n(592);o.Observable.prototype.every=r.every},function(t,e,n){"use strict";function o(t,e){return r.every(t,e)(this)}var r=n(206);e.every=o},function(t,e,n){"use strict";var o=n(0),r=n(594);o.Observable.prototype.map=r.map},function(t,e,n){"use strict";function o(t,e){return r.map(t,e)(this)}var r=n(74);e.map=o},function(t,e,n){"use strict";var o=n(0),r=n(596);o.Observable.prototype.mapTo=r.mapTo},function(t,e,n){"use strict";function o(t){return r.mapTo(t)(this)}var r=n(207);e.mapTo=o},function(t,e,n){"use strict";var o=n(0),r=n(598);o.Observable.prototype.materialize=r.materialize},function(t,e,n){"use strict";function o(){return r.materialize()(this)}var r=n(208);e.materialize=o},function(t,e,n){"use strict";var o=n(0),r=n(600);o.Observable.prototype.max=r.max},function(t,e,n){"use strict";function o(t){return r.max(t)(this)}var r=n(209);e.max=o},function(t,e,n){"use strict";var o=n(0),r=n(602);o.Observable.prototype.merge=r.merge},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.merge.apply(void 0,t)(this)}var r=n(210),i=n(93);e.mergeStatic=i.merge,e.merge=o},function(t,e,n){"use strict";var o=n(0),r=n(604);o.Observable.prototype.mergeAll=r.mergeAll},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeAll(t)(this)}var r=n(92);e.mergeAll=o},function(t,e,n){"use strict";var o=n(0),r=n(606);o.Observable.prototype.mergeMap=r.mergeMap,o.Observable.prototype.flatMap=r.mergeMap},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),r.mergeMap(t,e,n)(this)}var r=n(70);e.mergeMap=o},function(t,e,n){"use strict";var o=n(0),r=n(608);o.Observable.prototype.flatMapTo=r.mergeMapTo,o.Observable.prototype.mergeMapTo=r.mergeMapTo},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),r.mergeMapTo(t,e,n)(this)}var r=n(211);e.mergeMapTo=o},function(t,e,n){"use strict";var o=n(0),r=n(610);o.Observable.prototype.mergeScan=r.mergeScan},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),r.mergeScan(t,e,n)(this)}var r=n(212);e.mergeScan=o},function(t,e,n){"use strict";var o=n(0),r=n(612);o.Observable.prototype.min=r.min},function(t,e,n){"use strict";function o(t){return r.min(t)(this)}var r=n(213);e.min=o},function(t,e,n){"use strict";var o=n(0),r=n(614);o.Observable.prototype.multicast=r.multicast},function(t,e,n){"use strict";function o(t,e){return r.multicast(t,e)(this)}var r=n(53);e.multicast=o},function(t,e,n){"use strict";var o=n(0),r=n(616);o.Observable.prototype.observeOn=r.observeOn},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=0),r.observeOn(t,e)(this)}var r=n(91);e.observeOn=o},function(t,e,n){"use strict";var o=n(0),r=n(618);o.Observable.prototype.onErrorResumeNext=r.onErrorResumeNext},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.onErrorResumeNext.apply(void 0,t)(this)}var r=n(120);e.onErrorResumeNext=o},function(t,e,n){"use strict";var o=n(0),r=n(620);o.Observable.prototype.pairwise=r.pairwise},function(t,e,n){"use strict";function o(){return r.pairwise()(this)}var r=n(215);e.pairwise=o},function(t,e,n){"use strict";var o=n(0),r=n(622);o.Observable.prototype.partition=r.partition},function(t,e,n){"use strict";function o(t,e){return r.partition(t,e)(this)}var r=n(216);e.partition=o},function(t,e,n){"use strict";function o(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}e.not=o},function(t,e,n){"use strict";var o=n(0),r=n(625);o.Observable.prototype.pluck=r.pluck},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.pluck.apply(void 0,t)(this)}var r=n(217);e.pluck=o},function(t,e,n){"use strict";var o=n(0),r=n(627);o.Observable.prototype.publish=r.publish},function(t,e,n){"use strict";function o(t){return r.publish(t)(this)}var r=n(218);e.publish=o},function(t,e,n){"use strict";var o=n(0),r=n(629);o.Observable.prototype.publishBehavior=r.publishBehavior},function(t,e,n){"use strict";function o(t){return r.publishBehavior(t)(this)}var r=n(219);e.publishBehavior=o},function(t,e,n){"use strict";var o=n(0),r=n(631);o.Observable.prototype.publishReplay=r.publishReplay},function(t,e,n){"use strict";function o(t,e,n,o){return r.publishReplay(t,e,n,o)(this)}var r=n(221);e.publishReplay=o},function(t,e,n){"use strict";var o=n(0),r=n(633);o.Observable.prototype.publishLast=r.publishLast},function(t,e,n){"use strict";function o(){return r.publishLast()(this)}var r=n(222);e.publishLast=o},function(t,e,n){"use strict";var o=n(0),r=n(635);o.Observable.prototype.race=r.race},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.race.apply(void 0,t)(this)}var r=n(223),i=n(119);e.raceStatic=i.race,e.race=o},function(t,e,n){"use strict";var o=n(0),r=n(637);o.Observable.prototype.reduce=r.reduce},function(t,e,n){"use strict";function o(t,e){return arguments.length>=2?r.reduce(t,e)(this):r.reduce(t)(this)}var r=n(76);e.reduce=o},function(t,e,n){"use strict";var o=n(0),r=n(639);o.Observable.prototype.repeat=r.repeat},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=-1),r.repeat(t)(this)}var r=n(224);e.repeat=o},function(t,e,n){"use strict";var o=n(0),r=n(641);o.Observable.prototype.repeatWhen=r.repeatWhen},function(t,e,n){"use strict";function o(t){return r.repeatWhen(t)(this)}var r=n(225);e.repeatWhen=o},function(t,e,n){"use strict";var o=n(0),r=n(643);o.Observable.prototype.retry=r.retry},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=-1),r.retry(t)(this)}var r=n(226);e.retry=o},function(t,e,n){"use strict";var o=n(0),r=n(645);o.Observable.prototype.retryWhen=r.retryWhen},function(t,e,n){"use strict";function o(t){return r.retryWhen(t)(this)}var r=n(227);e.retryWhen=o},function(t,e,n){"use strict";var o=n(0),r=n(647);o.Observable.prototype.sample=r.sample},function(t,e,n){"use strict";function o(t){return r.sample(t)(this)}var r=n(228);e.sample=o},function(t,e,n){"use strict";var o=n(0),r=n(649);o.Observable.prototype.sampleTime=r.sampleTime},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.async),i.sampleTime(t,e)(this)}var r=n(14),i=n(229);e.sampleTime=o},function(t,e,n){"use strict";var o=n(0),r=n(651);o.Observable.prototype.scan=r.scan},function(t,e,n){"use strict";function o(t,e){return arguments.length>=2?r.scan(t,e)(this):r.scan(t)(this)}var r=n(127);e.scan=o},function(t,e,n){"use strict";var o=n(0),r=n(653);o.Observable.prototype.sequenceEqual=r.sequenceEqual},function(t,e,n){"use strict";function o(t,e){return r.sequenceEqual(t,e)(this)}var r=n(230);e.sequenceEqual=o},function(t,e,n){"use strict";var o=n(0),r=n(655);o.Observable.prototype.share=r.share},function(t,e,n){"use strict";function o(){return r.share()(this)}var r=n(231);e.share=o},function(t,e,n){"use strict";var o=n(0),r=n(657);o.Observable.prototype.shareReplay=r.shareReplay},function(t,e,n){"use strict";function o(t,e,n){return r.shareReplay(t,e,n)(this)}var r=n(232);e.shareReplay=o},function(t,e,n){"use strict";var o=n(0),r=n(659);o.Observable.prototype.single=r.single},function(t,e,n){"use strict";function o(t){return r.single(t)(this)}var r=n(233);e.single=o},function(t,e,n){"use strict";var o=n(0),r=n(661);o.Observable.prototype.skip=r.skip},function(t,e,n){"use strict";function o(t){return r.skip(t)(this)}var r=n(234);e.skip=o},function(t,e,n){"use strict";var o=n(0),r=n(663);o.Observable.prototype.skipLast=r.skipLast},function(t,e,n){"use strict";function o(t){return r.skipLast(t)(this)}var r=n(235);e.skipLast=o},function(t,e,n){"use strict";var o=n(0),r=n(665);o.Observable.prototype.skipUntil=r.skipUntil},function(t,e,n){"use strict";function o(t){return r.skipUntil(t)(this)}var r=n(236);e.skipUntil=o},function(t,e,n){"use strict";var o=n(0),r=n(667);o.Observable.prototype.skipWhile=r.skipWhile},function(t,e,n){"use strict";function o(t){return r.skipWhile(t)(this)}var r=n(237);e.skipWhile=o},function(t,e,n){"use strict";var o=n(0),r=n(669);o.Observable.prototype.startWith=r.startWith},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.startWith.apply(void 0,t)(this)}var r=n(238);e.startWith=o},function(t,e,n){"use strict";var o=n(0),r=n(671);o.Observable.prototype.subscribeOn=r.subscribeOn},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=0),r.subscribeOn(t,e)(this)}var r=n(672);e.subscribeOn=o},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=0),function(n){return n.lift(new i(t,e))}}var r=n(673);e.subscribeOn=o;var i=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new r.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(239),s=n(71),a=function(t){function e(e,n,o){void 0===n&&(n=0),void 0===o&&(o=i.asap),t.call(this),this.source=e,this.delayTime=n,this.scheduler=o,(!s.isNumeric(n)||n<0)&&(this.delayTime=0),o&&"function"==typeof o.schedule||(this.scheduler=i.asap)}return o(e,t),e.create=function(t,n,o){return void 0===n&&(n=0),void 0===o&&(o=i.asap),new e(t,n,o)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,o=this.source;return this.scheduler.schedule(e.dispatch,n,{source:o,subscriber:t})},e}(r.Observable);e.SubscribeOnObservable=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(675),i=n(72),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return o(e,t),e.prototype.requestAsyncId=function(e,n,o){return void 0===o&&(o=0),null!==o&&o>0?t.prototype.requestAsyncId.call(this,e,n,o):(e.actions.push(this),e.scheduled||(e.scheduled=r.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,o);0===e.actions.length&&(r.Immediate.clearImmediate(n),e.scheduled=void 0)},e}(i.AsyncAction);e.AsapAction=s},function(t,e,n){"use strict";(function(t,o){var r=n(25),i=function(){function t(t){if(this.root=t,t.setImmediate&&"function"==typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var e=function t(e){delete t.instance.tasksByHandle[e]};e.instance=this,this.clearImmediate=e}}return t.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},t.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},t.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},t.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},t.prototype.canUsePostMessage=function(){var t=this.root;if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}return!1},t.prototype.partiallyApplied=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=function t(){var e=t,n=e.handler,o=e.args;"function"==typeof n?n.apply(void 0,o):new Function(""+n)()};return o.handler=t,o.args=e,o},t.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},t.prototype.createProcessNextTickSetImmediate=function(){var t=function t(){var e=t.instance,n=e.addFromSetImmediateArguments(arguments);return e.root.process.nextTick(e.partiallyApplied(e.runIfPresent,n)),n};return t.instance=this,t},t.prototype.createPostMessageSetImmediate=function(){var t=this.root,e="setImmediate$"+t.Math.random()+"$",n=function n(o){var r=n.instance;o.source===t&&"string"==typeof o.data&&0===o.data.indexOf(e)&&r.runIfPresent(+o.data.slice(e.length))};n.instance=this,t.addEventListener("message",n,!1);var o=function t(){var e=t,n=e.messagePrefix,o=e.instance,r=o.addFromSetImmediateArguments(arguments);return o.root.postMessage(n+r,"*"),r};return o.instance=this,o.messagePrefix=e,o},t.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},t.prototype.createMessageChannelSetImmediate=function(){var t=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){var n=e.data;t.runIfPresent(n)};var n=function t(){var e=t,n=e.channel,o=e.instance,r=o.addFromSetImmediateArguments(arguments);return n.port2.postMessage(r),r};return n.channel=e,n.instance=this,n},t.prototype.createReadyStateChangeSetImmediate=function(){var t=function t(){var e=t.instance,n=e.root,o=n.document,r=o.documentElement,i=e.addFromSetImmediateArguments(arguments),s=o.createElement("script");return s.onreadystatechange=function(){e.runIfPresent(i),s.onreadystatechange=null,r.removeChild(s),s=null},r.appendChild(s),i};return t.instance=this,t},t.prototype.createSetTimeoutSetImmediate=function(){var t=function t(){var e=t.instance,n=e.addFromSetImmediateArguments(arguments);return e.root.setTimeout(e.partiallyApplied(e.runIfPresent,n),0),n};return t.instance=this,t},t}();e.ImmediateDefinition=i,e.Immediate=new i(r.root)}).call(e,n(240).clearImmediate,n(240).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";function o(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[l]=o,a(l),l++}function r(t){delete c[t]}function i(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o)}}function s(t){if(u)setTimeout(s,0,t);else{var e=c[t];if(e){u=!0;try{i(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var a,l=1,c={},u=!1,p=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var t=p.documentElement;a=function(e){var n=p.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(s,0,t)}}(),d.setImmediate=o,d.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(43),n(677))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){g&&h&&(g=!1,h.length?f=h.concat(f):m=-1,f.length&&a())}function a(){if(!g){var t=r(s);g=!0;for(var e=f.length;e;){for(h=f,f=[];++m<e;)h&&h[m].run();m=-1,e=f.length}h=null,g=!1,i(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,p,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var h,f=[],g=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new l(t,e)),1!==f.length||g||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(73),i=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,o=-1,r=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++o<r&&(t=n.shift()));if(this.active=!1,e){for(;++o<r&&(t=n.shift());)t.unsubscribe();throw e}},e}(r.AsyncScheduler);e.AsapScheduler=i},function(t,e,n){"use strict";var o=n(0),r=n(680);o.Observable.prototype.switch=r._switch,o.Observable.prototype._switch=r._switch},function(t,e,n){"use strict";function o(){return r.switchAll()(this)}var r=n(241);e._switch=o},function(t,e,n){"use strict";var o=n(0),r=n(682);o.Observable.prototype.switchMap=r.switchMap},function(t,e,n){"use strict";function o(t,e){return r.switchMap(t,e)(this)}var r=n(130);e.switchMap=o},function(t,e,n){"use strict";var o=n(0),r=n(684);o.Observable.prototype.switchMapTo=r.switchMapTo},function(t,e,n){"use strict";function o(t,e){return r.switchMapTo(t,e)(this)}var r=n(242);e.switchMapTo=o},function(t,e,n){"use strict";var o=n(0),r=n(686);o.Observable.prototype.take=r.take},function(t,e,n){"use strict";function o(t){return r.take(t)(this)}var r=n(243);e.take=o},function(t,e,n){"use strict";var o=n(0),r=n(688);o.Observable.prototype.takeLast=r.takeLast},function(t,e,n){"use strict";function o(t){return r.takeLast(t)(this)}var r=n(128);e.takeLast=o},function(t,e,n){"use strict";var o=n(0),r=n(690);o.Observable.prototype.takeUntil=r.takeUntil},function(t,e,n){"use strict";function o(t){return r.takeUntil(t)(this)}var r=n(244);e.takeUntil=o},function(t,e,n){"use strict";var o=n(0),r=n(692);o.Observable.prototype.takeWhile=r.takeWhile},function(t,e,n){"use strict";function o(t){return r.takeWhile(t)(this)}var r=n(245);e.takeWhile=o},function(t,e,n){"use strict";var o=n(0),r=n(694);o.Observable.prototype.throttle=r.throttle},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.defaultThrottleConfig),r.throttle(t,e)(this)}var r=n(98);e.throttle=o},function(t,e,n){"use strict";var o=n(0),r=n(696);o.Observable.prototype.throttleTime=r.throttleTime},function(t,e,n){"use strict";function o(t,e,n){return void 0===e&&(e=r.async),void 0===n&&(n=i.defaultThrottleConfig),s.throttleTime(t,e,n)(this)}var r=n(14),i=n(98),s=n(246);e.throttleTime=o},function(t,e,n){"use strict";var o=n(0),r=n(247);o.Observable.prototype.timeInterval=r.timeInterval},function(t,e,n){"use strict";var o=n(0),r=n(699);o.Observable.prototype.timeout=r.timeout},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=r.async),i.timeout(t,e)(this)}var r=n(14),i=n(249);e.timeout=o},function(t,e,n){"use strict";var o=n(0),r=n(701);o.Observable.prototype.timeoutWith=r.timeoutWith},function(t,e,n){"use strict";function o(t,e,n){return void 0===n&&(n=r.async),i.timeoutWith(t,e,n)(this)}var r=n(14),i=n(251);e.timeoutWith=o},function(t,e,n){"use strict";var o=n(0),r=n(703);o.Observable.prototype.timestamp=r.timestamp},function(t,e,n){"use strict";function o(t){return void 0===t&&(t=r.async),i.timestamp(t)(this)}var r=n(14),i=n(131);e.timestamp=o},function(t,e,n){"use strict";var o=n(0),r=n(705);o.Observable.prototype.toArray=r.toArray},function(t,e,n){"use strict";function o(){return r.toArray()(this)}var r=n(252);e.toArray=o},function(t,e){},function(t,e,n){"use strict";var o=n(0),r=n(708);o.Observable.prototype.window=r.window},function(t,e,n){"use strict";function o(t){return r.window(t)(this)}var r=n(253);e.window=o},function(t,e,n){"use strict";var o=n(0),r=n(710);o.Observable.prototype.windowCount=r.windowCount},function(t,e,n){"use strict";function o(t,e){return void 0===e&&(e=0),r.windowCount(t,e)(this)}var r=n(254);e.windowCount=o},function(t,e,n){"use strict";var o=n(0),r=n(712);o.Observable.prototype.windowTime=r.windowTime},function(t,e,n){"use strict";function o(t){var e=r.async,n=null,o=Number.POSITIVE_INFINITY;return s.isScheduler(arguments[3])&&(e=arguments[3]),s.isScheduler(arguments[2])?e=arguments[2]:i.isNumeric(arguments[2])&&(o=arguments[2]),s.isScheduler(arguments[1])?e=arguments[1]:i.isNumeric(arguments[1])&&(n=arguments[1]),a.windowTime(t,n,o,e)(this)}var r=n(14),i=n(71),s=n(34),a=n(255);e.windowTime=o},function(t,e,n){"use strict";var o=n(0),r=n(714);o.Observable.prototype.windowToggle=r.windowToggle},function(t,e,n){"use strict";function o(t,e){return r.windowToggle(t,e)(this)}var r=n(256);e.windowToggle=o},function(t,e,n){"use strict";var o=n(0),r=n(716);o.Observable.prototype.windowWhen=r.windowWhen},function(t,e,n){"use strict";function o(t){return r.windowWhen(t)(this)}var r=n(257);e.windowWhen=o},function(t,e,n){"use strict";var o=n(0),r=n(718);o.Observable.prototype.withLatestFrom=r.withLatestFrom},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.withLatestFrom.apply(void 0,t)(this)}var r=n(258);e.withLatestFrom=o},function(t,e,n){"use strict";var o=n(0),r=n(720);o.Observable.prototype.zip=r.zipProto},function(t,e,n){"use strict";function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.zip.apply(void 0,t)(this)}var r=n(95);e.zipProto=o},function(t,e,n){"use strict";var o=n(0),r=n(722);o.Observable.prototype.zipAll=r.zipAll},function(t,e,n){"use strict";function o(t){return r.zipAll(t)(this)}var r=n(259);e.zipAll=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(69),s=n(724),a=n(725),l=n(261),c=n(263),u=750,p=function(t){function e(e){t.call(this,c.VirtualAction,u),this.assertDeepEqual=e,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return o(e,t),e.prototype.createTime=function(t){var n=t.indexOf("|");if(-1===n)throw new Error('marble diagram for time should have a completion marker "|"');return n*e.frameTimeFactor},e.prototype.createColdObservable=function(t,n,o){if(-1!==t.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==t.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var r=e.parseMarbles(t,n,o),i=new s.ColdObservable(r,this);return this.coldObservables.push(i),i},e.prototype.createHotObservable=function(t,n,o){if(-1!==t.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var r=e.parseMarbles(t,n,o),i=new a.HotObservable(r,this);return this.hotObservables.push(i),i},e.prototype.materializeInnerObservable=function(t,e){var n=this,o=[];return t.subscribe(function(t){o.push({frame:n.frame-e,notification:i.Notification.createNext(t)})},function(t){o.push({frame:n.frame-e,notification:i.Notification.createError(t)})},function(){o.push({frame:n.frame-e,notification:i.Notification.createComplete()})}),o},e.prototype.expectObservable=function(t,n){var o=this;void 0===n&&(n=null);var s,a=[],l={actual:a,ready:!1},c=e.parseMarblesAsSubscriptions(n).unsubscribedFrame;return this.schedule(function(){s=t.subscribe(function(t){var e=t;t instanceof r.Observable&&(e=o.materializeInnerObservable(e,o.frame)),a.push({frame:o.frame,notification:i.Notification.createNext(e)})},function(t){a.push({frame:o.frame,notification:i.Notification.createError(t)})},function(){a.push({frame:o.frame,notification:i.Notification.createComplete()})})},0),c!==Number.POSITIVE_INFINITY&&this.schedule(function(){return s.unsubscribe()},c),this.flushTests.push(l),{toBe:function(t,n,o){l.ready=!0,l.expected=e.parseMarbles(t,n,o,!0)}}},e.prototype.expectSubscriptions=function(t){var n={actual:t,ready:!1};return this.flushTests.push(n),{toBe:function(t){var o="string"==typeof t?[t]:t;n.ready=!0,n.expected=o.map(function(t){return e.parseMarblesAsSubscriptions(t)})}}},e.prototype.flush=function(){for(var e=this.hotObservables;e.length>0;)e.shift().setup();t.prototype.flush.call(this);for(var n=this.flushTests.filter(function(t){return t.ready});n.length>0;){var o=n.shift();this.assertDeepEqual(o.actual,o.expected)}},e.parseMarblesAsSubscriptions=function(t){if("string"!=typeof t)return new l.SubscriptionLog(Number.POSITIVE_INFINITY);for(var e=t.length,n=-1,o=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=0;i<e;i++){var s=i*this.frameTimeFactor,a=t[i];switch(a){case"-":case" ":break;case"(":n=s;break;case")":n=-1;break;case"^":if(o!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");o=n>-1?n:s;break;case"!":if(r!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");r=n>-1?n:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return r<0?new l.SubscriptionLog(o):new l.SubscriptionLog(o,r)},e.parseMarbles=function(t,e,n,o){if(void 0===o&&(o=!1),-1!==t.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var r=t.length,a=[],l=t.indexOf("^"),c=-1===l?0:l*-this.frameTimeFactor,u="object"!=typeof e?function(t){return t}:function(t){return o&&e[t]instanceof s.ColdObservable?e[t].messages:e[t]},p=-1,d=0;d<r;d++){var h=d*this.frameTimeFactor+c,f=void 0,g=t[d];switch(g){case"-":case" ":break;case"(":p=h;break;case")":p=-1;break;case"|":f=i.Notification.createComplete();break;case"^":break;case"#":f=i.Notification.createError(n||"error");break;default:f=i.Notification.createNext(u(g))}f&&a.push({frame:p>-1?p:h,notification:f})}return a},e}(c.VirtualTimeScheduler);e.TestScheduler=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(0),i=n(19),s=n(260),a=n(262),l=function(t){function e(e,n){t.call(this,function(t){var e=this,n=e.logSubscribedFrame();return t.add(new i.Subscription(function(){e.logUnsubscribedFrame(n)})),e.scheduleMessages(t),t}),this.messages=e,this.subscriptions=[],this.scheduler=n}return o(e,t),e.prototype.scheduleMessages=function(t){for(var e=this.messages.length,n=0;n<e;n++){var o=this.messages[n];t.add(this.scheduler.schedule(function(t){var e=t.message,n=t.subscriber;e.notification.observe(n)},o.frame,{message:o,subscriber:t}))}},e}(r.Observable);e.ColdObservable=l,a.applyMixins(l,[s.SubscriptionLoggable])},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(21),i=n(19),s=n(260),a=n(262),l=function(t){function e(e,n){t.call(this),this.messages=e,this.subscriptions=[],this.scheduler=n}return o(e,t),e.prototype._subscribe=function(e){var n=this,o=n.logSubscribedFrame();return e.add(new i.Subscription(function(){n.logUnsubscribedFrame(o)})),t.prototype._subscribe.call(this,e)},e.prototype.setup=function(){for(var t=this,e=t.messages.length,n=0;n<e;n++)!function(){var e=t.messages[n];t.scheduler.schedule(function(){e.notification.observe(t)},e.frame)}()},e}(r.Subject);e.HotObservable=l,a.applyMixins(l,[s.SubscriptionLoggable])},function(t,e,n){"use strict";var o=n(727),r=n(729);e.animationFrame=new r.AnimationFrameScheduler(o.AnimationFrameAction)},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(72),i=n(728),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return o(e,t),e.prototype.requestAsyncId=function(e,n,o){return void 0===o&&(o=0),null!==o&&o>0?t.prototype.requestAsyncId.call(this,e,n,o):(e.actions.push(this),e.scheduled||(e.scheduled=i.AnimationFrame.requestAnimationFrame(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,o);0===e.actions.length&&(i.AnimationFrame.cancelAnimationFrame(n),e.scheduled=void 0)},e}(r.AsyncAction);e.AnimationFrameAction=s},function(t,e,n){"use strict";var o=n(25),r=function(){function t(t){t.requestAnimationFrame?(this.cancelAnimationFrame=t.cancelAnimationFrame.bind(t),this.requestAnimationFrame=t.requestAnimationFrame.bind(t)):t.mozRequestAnimationFrame?(this.cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)):t.webkitRequestAnimationFrame?(this.cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)):t.msRequestAnimationFrame?(this.cancelAnimationFrame=t.msCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.msRequestAnimationFrame.bind(t)):t.oRequestAnimationFrame?(this.cancelAnimationFrame=t.oCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.oRequestAnimationFrame.bind(t)):(this.cancelAnimationFrame=t.clearTimeout.bind(t),this.requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)})}return t}();e.RequestAnimationFrameDefinition=r,e.AnimationFrame=new r(o.root)},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(73),i=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,o=-1,r=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++o<r&&(t=n.shift()));if(this.active=!1,e){for(;++o<r&&(t=n.shift());)t.unsubscribe();throw e}},e}(r.AsyncScheduler);e.AnimationFrameScheduler=i},function(t,e,n){"use strict";var o=n(126);e.audit=o.audit;var r=n(204);e.auditTime=r.auditTime;var i=n(176);e.buffer=i.buffer;var s=n(177);e.bufferCount=s.bufferCount;var a=n(178);e.bufferTime=a.bufferTime;var l=n(179);e.bufferToggle=l.bufferToggle;var c=n(180);e.bufferWhen=c.bufferWhen;var u=n(181);e.catchError=u.catchError;var p=n(182);e.combineAll=p.combineAll;var d=n(90);e.combineLatest=d.combineLatest;var h=n(183);e.concat=h.concat;var f=n(118);e.concatAll=f.concatAll;var g=n(121);e.concatMap=g.concatMap;var m=n(184);e.concatMapTo=m.concatMapTo;var _=n(185);e.count=_.count;var b=n(187);e.debounce=b.debounce;var y=n(188);e.debounceTime=y.debounceTime;var v=n(122);e.defaultIfEmpty=v.defaultIfEmpty;var w=n(189);e.delay=w.delay;var I=n(190);e.delayWhen=I.delayWhen;var C=n(186);e.dematerialize=C.dematerialize;var M=n(191);e.distinct=M.distinct;var T=n(123);e.distinctUntilChanged=T.distinctUntilChanged;var k=n(192);e.distinctUntilKeyChanged=k.distinctUntilKeyChanged;var S=n(197);e.elementAt=S.elementAt;var N=n(206);e.every=N.every;var x=n(194);e.exhaust=x.exhaust;var A=n(195);e.exhaustMap=A.exhaustMap;var E=n(196);e.expand=E.expand;var O=n(124);e.filter=O.filter;var D=n(198);e.finalize=D.finalize;var L=n(125);e.find=L.find;var R=n(199);e.findIndex=R.findIndex;var B=n(200);e.first=B.first;var j=n(201);e.groupBy=j.groupBy;var P=n(202);e.ignoreElements=P.ignoreElements;var z=n(203);e.isEmpty=z.isEmpty;var H=n(205);e.last=H.last;var F=n(74);e.map=F.map;var G=n(207);e.mapTo=G.mapTo;var U=n(208);e.materialize=U.materialize;var V=n(209);e.max=V.max;var Y=n(210);e.merge=Y.merge;var W=n(92);e.mergeAll=W.mergeAll;var J=n(70);e.mergeMap=J.mergeMap;var Z=n(70);e.flatMap=Z.mergeMap;var Q=n(211);e.mergeMapTo=Q.mergeMapTo;var $=n(212);e.mergeScan=$.mergeScan;var X=n(213);e.min=X.min;var K=n(53);e.multicast=K.multicast;var q=n(91);e.observeOn=q.observeOn;var tt=n(120);e.onErrorResumeNext=tt.onErrorResumeNext;var et=n(215);e.pairwise=et.pairwise;var nt=n(216);e.partition=nt.partition;var ot=n(217);e.pluck=ot.pluck;var rt=n(218);e.publish=rt.publish;var it=n(219);e.publishBehavior=it.publishBehavior;var st=n(222);e.publishLast=st.publishLast;var at=n(221);e.publishReplay=at.publishReplay;var lt=n(223);e.race=lt.race;var ct=n(76);e.reduce=ct.reduce;var ut=n(224);e.repeat=ut.repeat;var pt=n(225);e.repeatWhen=pt.repeatWhen;var dt=n(226);e.retry=dt.retry;var ht=n(227);e.retryWhen=ht.retryWhen;var ft=n(129);e.refCount=ft.refCount;var gt=n(228);e.sample=gt.sample;var mt=n(229);e.sampleTime=mt.sampleTime;var _t=n(127);e.scan=_t.scan;var bt=n(230);e.sequenceEqual=bt.sequenceEqual;var yt=n(231);e.share=yt.share;var vt=n(232);e.shareReplay=vt.shareReplay;var wt=n(233);e.single=wt.single;var It=n(234);e.skip=It.skip;var Ct=n(235);e.skipLast=Ct.skipLast;var Mt=n(236);e.skipUntil=Mt.skipUntil;var Tt=n(237);e.skipWhile=Tt.skipWhile;var kt=n(238);e.startWith=kt.startWith;var St=n(241);e.switchAll=St.switchAll;var Nt=n(130);e.switchMap=Nt.switchMap;var xt=n(242);e.switchMapTo=xt.switchMapTo;var At=n(243);e.take=At.take;var Et=n(128);e.takeLast=Et.takeLast;var Ot=n(244);e.takeUntil=Ot.takeUntil;var Dt=n(245);e.takeWhile=Dt.takeWhile;var Lt=n(193);e.tap=Lt.tap;var Rt=n(98);e.throttle=Rt.throttle;var Bt=n(246);e.throttleTime=Bt.throttleTime;var jt=n(248);e.timeInterval=jt.timeInterval;var Pt=n(249);e.timeout=Pt.timeout;var zt=n(251);e.timeoutWith=zt.timeoutWith;var Ht=n(131);e.timestamp=Ht.timestamp;var Ft=n(252);e.toArray=Ft.toArray;var Gt=n(253);e.window=Gt.window;var Ut=n(254);e.windowCount=Ut.windowCount;var Vt=n(255);e.windowTime=Vt.windowTime;var Yt=n(256);e.windowToggle=Yt.windowToggle;var Wt=n(257);e.windowWhen=Wt.windowWhen;var Jt=n(258);e.withLatestFrom=Jt.withLatestFrom;var Zt=n(95);e.zip=Zt.zip;var Qt=n(259);e.zipAll=Qt.zipAll},function(t,e,n){var o,r;o=[n,e,n(1)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.getAsArray=function(){return[9,12,14,16,18,22,26,30,36,42]},t.getAsList=function(){var t=this.getAsArray(),e={};return n.each(t,function(t){e[t]=t}),e},t.getMin=function(){return this.getAsArray()[0]},t.getMax=function(){var t=this.getAsArray();return t[t.length-1]},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(1),r=n(8),i=n(13),s=n(40),a=n(65),l=[["r","g","b"],["h","s","v"],["h","s","l"]],c=[[255,255,255],[360,100,100],[360,100,100]];return e.View.extend({className:"bulb__color-picker",name:"colorpicker",label:"",templateName:"color_picker",events:{mousedown:"onMouseDown","mousedown .bulb__color-picker-panel":"onPanelMouseDown","mousedown .bulb__color-picker-panel-board":"onBoardMousedown","mousedown .bulb__color-picker-panel-alpha":"onAlphaMousedown","mousedown .bulb__color-picker-panel-ribbon":"onRibbonMousedown","click .bulb__color-picker-panel-params-lable-number":"onParamsLabelClick"},initialize:function(t){var e=this;e.editor=t.editor,e.render(),e.hidePicker(),e.mode=0,o.bindAll(e,"onDocumentMouseDown","onBoardMousedown","onBoardDrag","onBoardDragEnd","onAlphaMousedown","onAlphaDrag","onAlphaDragEnd","onRibbonMousedown","onRibbonDrag","onRibbonDragEnd","onParamsLabelClick"),e.on("color-picker-show",e.showPicker),r(document).on("mousedown",e.onDocumentMouseDown)},render:function(){var t,e=this,n=e.$el;t=i.render("common",e.templateName),n.html(t),e.panel=n.find(".bulb__color-picker-panel")[0],e.board=n.find(".bulb__color-picker-panel-board")[0],e.boardBg=r(e.board).find(".bulb__color-picker-panel-board-hsv"),e.ribbon=n.find(".bulb__color-picker-panel-ribbon")[0],e.alpha=n.find(".bulb__color-picker-panel-alpha")[0],e.preview=n.find(".bulb__color-picker-panel-preview")[0],e.inputs=n.find(".bulb__color-picker-panel-params-input"),e.inputHex=r(e.inputs).find("input")[0],e.inputR=r(e.inputs).find("input")[1],e.inputG=r(e.inputs).find("input")[2],e.inputB=r(e.inputs).find("input")[3],e.inputA=r(e.inputs).find("input")[4],e.labelR=n.find(".bulb__color-picker-panel-params-lable-number")[0],e.labelG=n.find(".bulb__color-picker-panel-params-lable-number")[1],e.labelB=n.find(".bulb__color-picker-panel-params-lable-number")[2],e.bindEvents()},bindEvents:function(){var t=this;o.bindAll(t,"onHexChange","onRedChange","onGreenChange","onBlueChange","onAlphaChange","updateInputHex","updateInputR","updateInputG","updateInputB","updateInputA","onKeyDown","onLastInputKeyDown"),r(t.inputHex).on("input propertychange",t.onHexChange),r(t.inputHex).on("blur",t.updateInputHex),r(t.inputHex).on("keydown",t.onKeyDown),r(t.inputR).on("input propertychange",t.onRedChange),r(t.inputR).on("blur",t.updateInputR),r(t.inputR).on("keydown",t.onKeyDown),r(t.inputG).on("input propertychange",t.onGreenChange),r(t.inputG).on("blur",t.updateInputG),r(t.inputG).on("keydown",t.onKeyDown),r(t.inputB).on("input propertychange",t.onBlueChange),r(t.inputB).on("blur",t.updateInputB),r(t.inputB).on("keydown",t.onKeyDown),r(t.inputA).on("input propertychange",t.onAlphaChange),r(t.inputA).on("blur",t.updateInputA),r(t.inputA).on("keydown",t.onLastInputKeyDown)},showPicker:function(t){var e=this,n=e.solidColor(t.selectedValue);n.isValid()||(n=e.solidColor(t.value)),n.isValid()||(n=s("#393939")),e.color=n,e.mode=0,e.item=t,e.$el.show(),e.updateUI()},solidColor:function(t){var e=s(t),n=e.toRgb();return 0===n.r&&0===n.g&&0===n.b&&0===n.a&&e.setAlpha(1),e},hidePicker:function(){var t,e=this;e.removeWindowListeners(),e.$el.hide(),e.item&&(t=e.color.toRgbString(),e.item.changeValue(t),e.item=null)},removeWindowListeners:function(){var t=this;r(window).off("mousemove",t.onBoardDrag),r(window).off("mouseup",t.onBoardDragEnd),r(window).off("mousemove",t.onAlphaDrag),r(window).off("mouseup",t.onAlphaDragEnd),r(window).off("mousemove",t.onRibbonDrag),r(window).off("mouseup",t.onRibbonDragEnd)},onDocumentMouseDown:function(){this.hidePicker()},onMouseDown:function(t){this.hidePicker(),t.stopPropagation(),t.preventDefault()},onPanelMouseDown:function(t){t.stopPropagation()},onBoardMousedown:function(t){var e=this;e.onBoardDrag(t),e.removeWindowListeners(),r(window).on("mousemove",e.onBoardDrag),r(window).on("mouseup",e.onBoardDragEnd)},onBoardDrag:function(t){var e=this,n=t.clientX,o=t.clientY;t.preventDefault(),e.pointMoveTo({x:n,y:o})},onBoardDragEnd:function(t){var e=this;e.onBoardDrag(t),e.removeWindowListeners()},pointMoveTo:function(t){var e,n,o=this,i=o.board.getBoundingClientRect(),a=t.x-i.left,l=t.y-i.top,c=o.color.toHsv(),u=r(o.boardBg).css("background-color"),p=c.h;e=s(u),e.isValid()&&(p=e.toHsv().h),a=Math.max(0,a),a=Math.min(a,200),l=Math.max(0,l),l=Math.min(l,150),n=s.fromRatio({h:p/360,s:a/200,v:1-l/150,a:c.a}),n.isValid()&&(o.color=n,o.updateBoardPoint(a-4,l-4),o.updatePreview(),o.updateAlpha(),o.updateInputHex(),o.updateInputG(),o.updateInputB(),o.updateInputR())},onAlphaMousedown:function(t){var e=this;e.onAlphaDrag(t),e.removeWindowListeners(),r(window).on("mousemove",e.onAlphaDrag),r(window).on("mouseup",e.onAlphaDragEnd)},onAlphaDrag:function(t){var e=this,n=t.clientX,o=t.clientY;t.preventDefault(),e.alphaMoveTo({x:n,y:o})},onAlphaDragEnd:function(t){var e=this;e.onAlphaDrag(t),e.removeWindowListeners()},alphaMoveTo:function(t){var e,n=this,o=n.alpha.getBoundingClientRect(),r=o.width,i=t.x-o.left;i=Math.max(0,i),i=Math.min(i,r),e=i/r,n.color.setAlpha(e),n.updateAlpha(100*e),n.updatePreview(),n.updateInputA()},onRibbonMousedown:function(t){var e=this;e.onRibbonDrag(t),e.removeWindowListeners(),r(window).on("mousemove",e.onRibbonDrag),r(window).on("mouseup",e.onRibbonDragEnd)},onRibbonDrag:function(t){var e=this,n=t.clientX,o=t.clientY;t.preventDefault(),e.ribbonMoveTo({x:n,y:o})},onRibbonDragEnd:function(t){var e=this;e.onRibbonDrag(t),e.removeWindowListeners()},ribbonMoveTo:function(t){var e,n,o=this,r=o.ribbon.getBoundingClientRect(),i=r.width,a=t.x-r.left,l=o.color.toHsv();a=Math.max(0,a),a=Math.min(a,i),e=a/i,n=s.fromRatio({h:e,s:l.s,v:l.v,a:l.a}),n.isValid()&&(o.color=n,o.updateRibbon(100*e),o.updateBoardBg(360*e),o.updatePreview(),o.updateAlpha(),o.updateInputHex(),o.updateInputR(),0===o.mode&&(o.updateInputG(),o.updateInputB()))},onHexChange:function(){var t,e=this,n=r(e.inputHex).val();n.length>0&&n.length<6&&(n=n.concat("0".repeat(6-n.length))),t=s(n),t.isValid()&&(t.setAlpha(e.color.getAlpha()),e.color=t,e.updateOnHexChange())},updateOnHexChange:function(){var t=this;t.updateBoardPoint(),t.updateBoardBg(),t.updatePreview(),t.updateAlpha(),t.updateRibbon(),t.updateInputR(),t.updateInputG(),t.updateInputB()},onRedChange:function(){var t=this,e=r(t.inputR).val(),n=t.mode,i=t.color.toHsv(),a=t.color.toRgb(),l=t.color.toHsl();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>c[n][0]||(t.color=1===n?s.fromRatio({h:e/360,s:i.s,v:i.v,a:i.a}):2===n?s.fromRatio({h:e/360,s:l.s,l:l.l,a:l.a}):s({r:e,g:a.g,b:a.b,a:a.a}),t.updateOnRedChange()))},updateOnRedChange:function(){var t=this;0===t.mode&&t.updateBoardPoint(),t.updateBoardBg(),t.updatePreview(),t.updateAlpha(),t.updateRibbon(),t.updateInputHex()},onGreenChange:function(){var t=this,e=r(t.inputG).val(),n=t.mode,i=t.color.toHsv(),a=t.color.toRgb(),l=t.color.toHsl();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>c[n][1]||(t.color=1===n?s.fromRatio({h:i.h,s:e/100,v:i.v,a:i.a}):2===n?s.fromRatio({h:l.h,s:e/100,l:l.l,a:l.a}):s({r:a.r,g:e,b:a.b,a:a.a}),t.updateOnGreenChange()))},updateOnGreenChange:function(){var t=this;t.updateBoardPoint(),0===t.mode&&(t.updateBoardBg(),t.updateRibbon()),t.updatePreview(),t.updateAlpha(),t.updateInputHex()},onBlueChange:function(){var t=this,e=r(t.inputB).val(),n=t.mode,i=t.color.toHsv(),a=t.color.toRgb(),l=t.color.toHsl();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>c[n][2]||(t.color=1===n?s.fromRatio({h:i.h,s:i.s,v:e/100,a:i.a}):2===n?s.fromRatio({h:l.h,s:l.s,l:e/100,a:l.a}):s({r:a.r,g:a.g,b:e,a:a.a}),t.updateOnBlueChange()))},updateOnBlueChange:function(){var t=this;t.updateBoardPoint(),0===t.mode&&(t.updateBoardBg(),t.updateRibbon()),t.updatePreview(),t.updateAlpha(),t.updateInputHex()},onAlphaChange:function(){var t=this,e=r(t.inputA).val();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>100||(t.color.setAlpha(e/100),t.updateOnAlphaChange()))},updateOnAlphaChange:function(){var t=this;t.updatePreview(),t.updateAlpha()},onParamsLabelClick:function(){var t=this,e=t.mode;e+=1,e%=3,t.mode=e,t.updateInputR(),t.updateInputB(),t.updateInputG()},onKeyDown:function(t){var e=this;a.isMatch("enter",t.keyCode)&&(t.stopPropagation(),t.preventDefault(),e.hidePicker(),e.editor.focus())},onLastInputKeyDown:function(t){var e=this;(a.isMatch("enter",t.keyCode)||a.isMatch("tab",t.keyCode))&&(t.stopPropagation(),t.preventDefault(),e.hidePicker(),e.editor.focus())},inputValue:function(t,e){var n,o=this,r=o.color,i=r.toRgb(),s=r.toHsv(),a=r.toHsl(),c=1;switch(t){case 0:n=i;break;case 1:n=s;break;case 2:n=a;break;default:n=i}return(0===t||1!==e&&2!==e)&&3!==e||(c=100),Math.round(n[l[t][e]]*c)},updateInputHex:function(){var t=this,e=t.color;r(t.inputHex).val(e.toHex().toUpperCase())},updateInputR:function(){var t=this,e=t.mode;r(t.labelR).text(l[e][0].toUpperCase()),r(t.inputR).val(t.inputValue(e,0))},updateInputG:function(){var t=this,e=t.mode;r(t.labelG).text(l[e][1].toUpperCase()),r(t.inputG).val(t.inputValue(e,1))},updateInputB:function(){var t=this,e=t.mode;r(t.labelB).text(l[e][2].toUpperCase()),r(t.inputB).val(t.inputValue(e,2))},updateInputA:function(){var t=this,e=t.color,n=e.getAlpha();r(t.inputA).val(Math.round(100*n))},updateBoardBg:function(t){var e,n=this,o=n.color,r=o.toHsv(),i=n.boardBg;t>=0&&t<=360||(t=r.h),e=s.fromRatio({h:t/360,s:1,v:1}),i.css("background-color",e.toHexString())},updateBoardPoint:function(t,e){var n=this,o=n.color,i=o.toHsv(),s=r(n.board).find("span");t>=0&&t<=200||(t=200*i.s-4),e>=0&&e<=150||(e=150*(1-i.v)-4),s.css("left",t+"px"),s.css("top",e+"px")},updatePreview:function(){var t=this,e=t.color,n=e.getAlpha(),o=r(t.preview).find("span");o.css("background-color",e.toHexString()),o.css("opacity",n)},updateAlpha:function(t){var e,n=this,o=n.color,i=o.toRgb(),a=r(n.alpha).find(".bulb__color-picker-panel-alpha-bg"),l=r(n.alpha).find("span");t>=0&&t<=100||(t=100*i.a),e="linear-gradient(to right, "+s({r:i.r,g:i.g,b:i.b,a:0}).toRgbString()+", "+s({r:i.r,g:i.g,b:i.b,a:1}).toRgbString()+")",a.css("background",e),l.css("left",t+"%")},updateRibbon:function(t){var e=this,n=e.color,o=n.toHsv(),i=o.h,s=r(e.ribbon).find("span");t>=0&&t<=100||(t=Math.round(i/360*100)),s.css("left",t+"%")},updateUI:function(){var t=this;t.updateBoardBg(),t.updateBoardPoint(),t.updatePreview(),t.updateAlpha(),t.updateRibbon(),t.updateInputHex(),t.updateInputA(),t.updateInputR(),t.updateInputB(),t.updateInputG(),t.updateInputHex()},reset:function(){this.$el.hide()},destroy:function(){this.editor&&(this.editor=null),this.options&&this.options.editor&&(this.options.editor=null),r(document).off("mousedown")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){"use strict";var o;void 0!==(o=function(t){var e=n(13),o=n(20),r=n(1),i=n(65),s=n(17),a=n(264),l=function(){};return o.View.extend({className:"bulb__image-title-input-wrapper",name:"ImageTitleInputView",events:{"keydown .bulb__image-title-input":"_onKeyDown","paste .bulb__image-title-input":"_onPaste","input .bulb__image-title-input":"_onInput"},zoom:1,initialize:function(t){var e=this;e.editor=t.editor,r.bindAll(e,"_onEditStart","_onEditEnd","_onKeyDown","_onExit","_onUpdate","_getPosition","_onPaste","_show","_hide","_onInput","_handlerPlaceholder","_onLockedChange"),e.on("img-title-edit-start",e._onEditStart),e.on("img-title-edit-end",e._onEditEnd),e.on("img-title-edit-focus",e._onFocus),e.on("img-title-edit-exit",e._onExit),e.on("img-title-edit-update",e._onUpdate),e.on("locked-change",e._onLockedChange),e._callback=l},render:function(){var t=e.render("common","image-title-input",{title:""});this.$el.html(t)},_getPosition:function(t){var e=this.editor.getNoteViewWrapper(),n=s.IS_PC?this.editor.getNoteViewFrame():this.editor.noteView.$el,o=n.offset(),r=parseInt(n.css("margin-top"));t.left=t.left-e.offset().left+e.scrollLeft(),t.top=t.top-o.top+r},_show:function(){var t=this._origialNode;this.$el.show(),t&&t.css("color","transparent")},_hide:function(){var t=this._origialNode;t&&(t.css("color",""),t.css("height","auto")),this.$el.hide()},_onEditStart:function(t,n,o,i,s){var a,c=this,u=n();c.getOffset=n,c._getPosition(u),c._callback!==l&&c._onEditEnd(),t||(t=""),a=e.render("common","image-title-input",r.defaults({title:t},u)),c.$el.html(a),c.$input=this.$el.find(".bulb__image-title-input"),c.$placeholder=this.$el.find(".bulb__image-title-placeholder"),c.$input.on("blur",function(){c._handlerPlaceholder(),c._onEditEnd()}).on("focus",function(){c._handlerPlaceholder(),c.editor.controller.lockBlockById(s)}),c._callback=o||l,c._origialNode=i,c._handlerPlaceholder(),t&&c._show(),c.$placeholder.click(function(){c.$input.focus()})},_onEditEnd:function(t,e){if(this.$input&&this.$input.is(":visible")){var n=this.$input.text();this._callback(n,t,e,this.$el.is(":visible"))}},_onKeyDown:function(t){if(this.$input.is(":visible")&&i.isMatch("enter",t.keyCode)&&r.isFunction(this._onEditEnd))return t.preventDefault(),this._onEditEnd(!0,this.editor.controller.getNextCaretBlockRange()),void this._onExit();(t.ctrlKey||t.metaKey)&&["B","b","U","u","I","i"].forEach(function(e){if(i.isMatch(e,t.keyCode))return void t.preventDefault()})},_onFocus:function(){var t=this.$input;t&&t.is(":visible")||this._show(),t.focus()},_onExit:function(){this._hide(),this._callback=l},_onUpdate:function(t){var e=t();this.getOffset=t,this._getPosition(e),this.$input.css({left:e.left,top:e.top,width:e.width+"px","min-height":e.height+"px"}),this.$placeholder.css({left:e.left,top:e.top,width:e.width+"px"})},_handlerPlaceholder:function(){var t=this;t.$input.text()?t.$placeholder.hide():t.$placeholder.show()},setZoom:function(t){var e=this;e.zoom=t,e.$el.css("zoom",e.zoom)},_transferString:function(t){var e=t;try{e=e.replace(/\r\n/g," "),e=e.replace(/\n/g," ")}catch(t){}return e},_onPaste:function(t){var e,n,o=t.originalEvent;t.preventDefault(),o.clipboardData&&o.clipboardData.getData?(e=o.clipboardData.getData("text/plain"),n=this._transferString(e),document.execCommand("insertHTML",!1,n)):window.clipboardData&&window.clipboardData.getData&&(e=window.clipboardData.getData("Text"),a(e))},_onInput:function(){var t=this.$input.height();t!==this._origialNode.height()&&this._origialNode.height(t),this._handlerPlaceholder()},_onLockedChange:function(){this.getOffset&&this._onUpdate(this.getOffset)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(735);return[n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(743),n(744),n(745),n(746),n(747),n(748),e,n(749),n(750),n(751),e,n(752),n(753),n(754),e,n(755),n(756)]}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){},e.prototype.selectAction=function(){},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="split",this.label="---",this.type=n.TYPE.SPLIT},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return this.block=e.imgBlock,!!e.imgBlock},e.prototype.selectAction=function(){this.block&&this.block.trigger("edit-image-title")},e.prototype.reset=function(){t.prototype.reset.call(this),this.block=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="imageTitle",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return this.editor.canUndo()},e.prototype.selectAction=function(){this.editor.undo()},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="undo",this.label="",this.key="mod+z"},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return this.editor.canRedo()},e.prototype.selectAction=function(){this.editor.redo()},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="redo",this.label="",this.key="mod+y"},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(17),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){var n=t.target,o=n.ownerDocument;if(e.isRangeCollapsed)return void(this.isDisabled=!0);this.doc=o,this.targetEl=n},e.prototype.selectAction=function(){var t,e,o,r,i,s,a=this,l=a.doc,c=a.editor,u=a.targetEl;if(t=c.getNoteRange(),n.IS_MAC){if(!t||t.isCollapsed())return;return c.callMacNativeApi("menuCopy"),void c.execCommand("comp.DeleteNoteRange",{range:t})}t.isSingleTableSelected()&&(e=t.getStartBlockRange(),o=e.block,r=c.getController().noteView,i=r.getBlockViewByBlock(o),u=i.getHiddenInputView()),u.focus();try{s=l.execCommand("cut")}catch(t){s=!1}s||c.trigger("yne-clipboard-error","cut",function(){c.focus()})},e.prototype.reset=function(){t.prototype.reset.call(this),this.doc=null,this.targetEl=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="cut",this.label="",this.key="mod+x"},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(17),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){var n=t.target,o=n.ownerDocument;if(e.isRangeCollapsed)return void(this.isDisabled=!0);this.targetEl=n,this.doc=o},e.prototype.selectAction=function(){var t,e,o,r,i,s,a=this,l=a.doc,c=a.editor,u=a.targetEl;if(n.IS_MAC)return void c.callMacNativeApi("menuCopy");t=c.getNoteRange(),t.isSingleTableSelected()&&(e=t.getStartBlockRange(),o=e.block,r=c.getController().noteView,i=r.getBlockViewByBlock(o),u=i.getHiddenInputView()),u.focus();try{s=l.execCommand("copy")}catch(t){s=!1}s||c.trigger("yne-clipboard-error","copy",function(){c.focus()})},e.prototype.reset=function(){t.prototype.reset.call(this),this.doc=null,this.targetEl=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="copy",this.label="",this.key="mod+c"},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(17),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){var o,r=t.target,i=r.ownerDocument;return this.targetEl=r,this.doc=i,n.IS_MAC&&(o=this.editor.callMacNativeApi("macClipboardAvailable"),this.isDisabled=!o),!0},e.prototype.selectAction=function(){var t,e=this,o=this.doc,r=this.targetEl;if(n.IS_MAC)return this.editor.setPasteAsText(!1),void this.editor.callMacNativeApi("menuPaste");r.focus();try{t=o.execCommand("paste")}catch(e){t=!1}t||this.editor.trigger("yne-clipboard-error","paste",function(){e.editor.focus()})},e.prototype.reset=function(){t.prototype.reset.call(this),this.doc=null,this.targetEl=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="paste",this.label="",this.key="mod+v"},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(15),o=n(1);return function(){return new e({name:"pasteNoteLink",label:"",key:"mod+v",_linkId:null,_linkName:null,queryAction:function(){var t=this,e=t.editor;t._linkId=t._linkName=null,t.isDisabled=t.isHidden=!0,e.trigger("yne-require-innerlink",function(e,n){var r=o.isUndefined(e)||o.isUndefined(n);t.isDisabled=t.isHidden=r,r||(t._linkId=e,t._linkName=n)})},selectAction:function(){var t=this;t.editor.insertNoteLink(t._linkId,t._linkName)}})}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(17),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){var o,r=t.target;return this.targetEl=r,n.IS_MAC&&(this.isHidden=!1,o=this.editor.callMacNativeApi("macClipboardAvailable"),this.isDisabled=!o),!0},e.prototype.selectAction=function(){var t=this,e=this.targetEl;if(n.IS_MAC)return this.editor.setPasteAsText(!0),void this.editor.callMacNativeApi("menuPaste");e.focus(),this.editor.trigger("yne-clipboard-error","paste-as-text",function(){t.editor.focus()})},e.prototype.reset=function(){t.prototype.reset.call(this),this.targetEl=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="pasteAsText",this.label=""},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){var n=this.editor.canRemoveFormat()&&!e.isImgAttachBlock&&!e.tableInfo;return this.isDisabled=!n,!e.tableInfo&&!e.isImgAttachBlock},e.prototype.selectAction=function(){this.editor.execCommand("comp.RemoveFormat")},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="removeFormat",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!e.isImgAttachBlock&&!e.tableInfo},e.prototype.selectAction=function(){this.editor.selectAll()},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="selectAll",this.label="",this.key="mod+a"},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!e.isImgAttachBlock&&!e.tableInfo},e.prototype.selectAction=function(){var t=this.editor,e=this.editor.countWords(!0),n=e.count,o=e.isSelected,r=e.detail;t.trigger("yne-show-words",n,o,r)},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="countWords",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15),n(2)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return this.block=e.imgBlock||e.attachmentBlock,this.isImg=!!e.imgBlock,this.tableInfo=e.tableInfo,this.isMacro=e.macroBlock||e.tableInfo&&e.tableInfo.type===o.TableCellType.MACRO,!!e.isImgAttachBlock||!(!e.tableInfo||!e.tableInfo.cell)&&!this.isMacro},e.prototype.selectAction=function(){var t=this.block,e=this.isImg,n=this.tableInfo;n&&(t=n.cell.getContent(),n.type===o.TableCellType.IMAGE&&(e=!0)),e?this.editor.trigger("yne-download-image",t.getSource()):this.editor.trigger("yne-download-attachment",t.getResource(),t.getFileName())},e.prototype.reset=function(){t.prototype.reset.call(this),this.block=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="download",this.label=""},e}(n),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){var n=this.editor;return this.noteRange=n.getNoteRange(),!!e.isImgAttachBlock},e.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteNoteRange",{range:this.noteRange})},e.prototype.reset=function(){t.prototype.reset.call(this),this.noteRange=null},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="delete",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(38),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{row:n.UP}})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="insertRowUp",this.label=""},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(38),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{row:n.DOWN}})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="insertRowDown",this.label=""},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteTableRowCol",{describe:{row:!0}})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="deleteRow",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(38),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{col:n.LEFT}})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="insertColLeft",this.label=""},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(38),n(15)],void 0!==(r=function(t,e,n,o){"use strict";var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{col:n.RIGHT}})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="insertColRight",this.label=""},e}(o),s=new r({});return function(){return s}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteTableRowCol",{describe:{col:!0}})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="deleteCol",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo&&(e.tableInfo.onlyMergePointAndCell?(this.label="",!0):!1===e.tableInfo.onlyOneCell&&(this.label="",!0))},e.prototype.selectAction=function(){this.editor.execCommand("comp.ToggleMergeTableCell",{})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="mergeCell",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(15)],void 0!==(r=function(t,e,n){"use strict";var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.queryAction=function(t,e){return!!e.tableInfo},e.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteNoteRange",{isTableDelete:!0})},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.name="deleteTable",this.label=""},e}(n),r=new o({});return function(){return r}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(758),o=n(1),r=n(4),i=!1;return{checkNativeApi:function(){var t=window.ynote||{};t?o.each(e,function(e,n){null==t[n]&&r.error("Native does not implement api: "+n)}):r.error("window.ynote does not exist!")},callNativeApi:function(t,e){var n,o=this,s=window.ynote||{};if(i||(o.checkNativeApi(),i=!0),n=s[t])return n.apply(s,e||[]);r.error("No native api: "+t)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return{menuCopy:function(){},menuPaste:function(){},macClipboardAvailable:function(){},macClipboardData:function(t){}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(265);var e=n(20),o=n(1),r=n(8),i=n(2).BlockTypes,s=n(760),a=(n(17),n(761),n(41)),l=[n(762),n(763),n(764),n(765),n(266),n(767),n(41),n(768),n(41),n(769),n(770),n(771),n(772),n(773),n(41),n(774),n(777),n(266),n(778),n(779),n(780),n(41),n(781),n(782),n(41),n(783),n(784),n(785),n(786),n(787),n(788),n(789),n(41),n(790),n(791),n(792),n(793),n(794),n(795)],c=n(796),u=n(797),p=[],d=n(798),h=n(114);return e.View.extend({className:"bulb__toolbar",events:{mousedown:"_onMouseDown"},_lastRangeType:null,initialize:function(t){var e=this,n=t.editor;e.editor=n,e.userSetItems=t.userSetItems,e.items=[],e.bindEvents(),e.isRendered=!1,h.register(function(){e.editor&&(e.initItems(),e.show())}),e.initItems()},initItems:function(){var t=this,e=t.editor,n=e.getMacroConfigManager(),r=t._handleUserSetItems();r=t._handleUserSetSplitLine(r),t.items=[],o.each(r,function(n){t.addItem(new n({editor:e}))}),o.each(n.getMacroConfigOnToolbar(),function(n){t.addItem(new d({label:n.toolbarOptions.label,icon:n.toolbarOptions.icon,macroName:n.macroName,version:n.version},e))}),n.hasMacroConfigNotOnToolbar()&&t.addItem(new u({editor:e})),t.showMore=new c({editor:e,items:p}),t.addItem(t.showMore)},bindEvents:function(){var t=this,e=t.editor,n=s.EDITOR_BUTTON_STATE_MAP;e.on("yne-editing-state-change",function(){var r,a=e.getNoteRange(),l=s.RANGE_DEFAULT;a&&(r=a.getStartBlockRange().block,i.isHeaderFooter(r)?l=s.RANGE_HEADER_FOOTER:i.isImage(r)?l=s.RANGE_IMAGE:i.isAttachment(r)?l=s.RANGE_ATTACHMENT:a.isSingleTableSelected()?l=s.RANGE_TABLE_CELL:i.isCatalogue(r)?l=s.RANGE_CATALOGUE:i.isMacro(r)&&(l=s.RANGE_MACRO)),t._lastRangeType!==l&&(t._lastRangeType=l,o.each(t.items,function(t){var r,i=n[t.name],a=s.ACTION_SHOW_ENABLE;switch(o.each(i,function(t){t.on===s.RANGE_DEFAULT&&(a=t.action),t.on===l&&(r=t.action)}),null==r&&(r=a),e.editorProps.toolbarRemove.indexOf(t.name)>-1&&l!==s.RANGE_TABLE_CELL&&(r=s.ACTION_HIDE),r){case s.ACTION_SHOW_ENABLE:t.show(),t.enable();break;case s.ACTION_HIDE:t.hide();break;case s.ACTION_ENABLE:t.enable();break;case s.ACTION_DISABLE:t.show(),t.disable()}}),t.reShrink())})},render:function(){var t=this,e=this.items,n=this.$el;o.each(e,function(e){t.editor.editorProps.toolbarRemove.indexOf(e.name)>-1&&e.hide(),n.append(e.$el),e.on("re-shrink",o.throttle(t.reShrink.bind(t),100))}),t.isRendered=!0,r(window).on("resize",t.reShrink.bind(t))},reset:function(){var t=this;o.each(t.items,function(t){t&&t.reset&&t.reset()})},destroy:function(){this.editor&&(this.editor=null),this.options&&this.options.editor&&(this.options.editor=null),o.each(this.items,function(t){t&&(t.off(),t.destroy(),t=null)}),this.$el&&(this.$el.remove(),this.$el=null),r(window).off("resize")},addItem:function(t){this.items.push(t)},addItems:function(t){this.items.concat(t)},show:function(){var t=this,e=this.items;t.$el.empty(),o.each(e,function(e){t.editor.editorProps.toolbarRemove.indexOf(e.name)>-1&&t._lastRangeType!==s.RANGE_TABLE_CELL&&e.hide(),t.$el.append(e.$el)}),t.$el.show(),t.shrink()},hide:function(){var t=this;t.$el.hide(),t.showMore.hideMenu()},reShrink:function(){var t=this,e=this.items,n=this.$el;o.each(e,function(e){t.editor&&t.editor.editorProps.toolbarRemove.indexOf(e.name)>-1&&t._lastRangeType!==s.RANGE_TABLE_CELL&&e.hide(),n.append(e.$el)}),t.shrink()},shrink:function(){var t=this,e=t.items;if(0!==e.length){var n,r,i=t.$el.parent().width(),s=o.last(e).$el,a=s.outerWidth(!0),l=a,c=0;p=[],o.map(e,function(t,o){var s,a=t.isVisible;if(o===e.length-1)return t.items=p,n=t.$el.find(".bulb__combo-menu"),r=i-100,c>r?n.css("width",r).css("white-space","normal"):n.css("width","").css("white-space",""),void t.resetMenu();a?(s=t.$el.outerWidth(!0),l+=s):s=0,i<l&&(c+=s,p.push(t))}),0===p.length?s.hide():s.show()}},_onMouseDown:function(t){t.preventDefault()},_invoke:function(t){var e=this;o.each(e.items,function(e){e[t]&&e[t]()})},_handleUserSetItems:function(){var t=this,e=[],n=[],o=[],r=l.slice(0);return t.userSetItems?(t.userSetItems=t.userSetItems.map(function(t){return t.toLocaleLowerCase()}),t.userSetItems.forEach(function(t){/^!/.test(t)&&e.push(t.slice(1)),/^\^/.test(t)&&n.push(t.slice(1)),/^\w/.test(t)&&o.push(t)}),e.length&&(r=r.filter(function(t){return-1===e.indexOf(t.prototype.name)})),o.length&&(e.length,r=o.map(function(t){return r.find(function(e){return e.prototype.name===t})})),n.length&&n.reverse().forEach(function(t){var e=l.findIndex(function(e){return e.prototype.name===t});-1!==e&&r.unshift(l[e])}),r):r},_handleUserSetSplitLine:function(t){var e,n,r,i=this,s=0,l=[];if(!i.userSetItems)return t;for(e=i.userSetItems.filter(function(t){return!/^!/.test(t)}).map(function(t){return/^\^/.test(t)?t.slice(1):t}),e=e.reduce(function(t,e){var n=t.length-1;return-1!==n&&"|"===e&&/\|$/.test(t[n])?t[n]=t[n]+"|":t.push(e),t},[]);s<e.length;)n=0===s?null:e[s-1],r=s===e.length-1?null:e[s+1],/\|$/.test(e[s])&&l.push({preItem:n,nextItem:r,number:e[s].split("").length}),s++;return l.forEach(function(e){var n,r=Array(e.number).fill(a);return e.preItem?(n=t.findIndex(function(t){return t.prototype.name===e.preItem}),void Array.prototype.splice.apply(t,o.flatten([n+1,0,r]))):e.nextItem?(n=t.findIndex(function(t){return t.prototype.name===e.nextItem}),void Array.prototype.splice.apply(t,o.flatten([n,0,r]))):void t.unshift(a)}),t},enable:function(){var t=this;t.$el.removeClass("bulb__disabled"),t._invoke("enable")},disable:function(){var t=this;t.$el.addClass("bulb__disabled"),t._invoke("disable")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){"use strict";var e=n(1),o={ACTION_SHOW_ENABLE:1,ACTION_HIDE:2,ACTION_ENABLE:3,ACTION_DISABLE:4},r={RANGE_DEFAULT:1,RANGE_HEADER_FOOTER:2,RANGE_TABLE_CELL:3,RANGE_CATALOGUE:4,RANGE_IMAGE:5,RANGE_ATTACHMENT:6,RANGE_MACRO:7},i={EDITOR_BUTTON_STATE_MAP:{undo:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE}],redo:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE}],"remove-format":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"format-painter":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"no-table-split":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],heading:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"base-split":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE}],"font-family":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"font-size":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],bold:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],italic:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],underline:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],strike:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],color:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"back-color":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"unordered-list":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"ordered-list":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],todo:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],quote:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],align:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE}],"table-justify":[{on:r.RANGE_DEFAULT,action:o.ACTION_HIDE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_SHOW_ENABLE}],indent:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],outdent:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"line-height":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],"table-wrap":[{on:r.RANGE_DEFAULT,action:o.ACTION_HIDE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_SHOW_ENABLE}],"table-operate":[{on:r.RANGE_DEFAULT,action:o.ACTION_HIDE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_SHOW_ENABLE}],"table-split":[{on:r.RANGE_DEFAULT,action:o.ACTION_HIDE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_SHOW_ENABLE}],"table-merge":[{on:r.RANGE_DEFAULT,action:o.ACTION_HIDE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_SHOW_ENABLE}],table:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE}],hr:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE}],link:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE},{on:r.RANGE_IMAGE,action:o.ACTION_DISABLE},{on:r.RANGE_ATTACHMENT,action:o.ACTION_DISABLE},{on:r.RANGE_MACRO,action:o.ACTION_DISABLE}],img:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE}],attachment:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE}],catalogue:[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_DISABLE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_DISABLE}],"macro-button":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_HIDE}],"more-macro":[{on:r.RANGE_DEFAULT,action:o.ACTION_SHOW_ENABLE},{on:r.RANGE_HEADER_FOOTER,action:o.ACTION_HIDE},{on:r.RANGE_TABLE_CELL,action:o.ACTION_HIDE},{on:r.RANGE_CATALOGUE,action:o.ACTION_HIDE}]}};return e.extend(i,o,r)}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(27),o=e.extend({name:"view-mode",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",render:function(){var t,e=this;o.__super__.render.apply(e,arguments),t=e.$el.find(".bulb__button"),t.addClass("bulb__normal"),e.editor.on("view-mode-change",function(n){var o=2===n;o?(t.removeClass("bulb__normal"),t.addClass("bulb__page")):(t.removeClass("bulb__page"),t.addClass("bulb__normal")),e.state=o})},onClick:function(){var t=this,e=!0===t.state,n=e?0:2;t.editor.setViewMode(n,!0,!0)}});return o}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({name:"undo",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"command-exec":"_onHistoryChange","undo-stack-change":"_onHistoryChange","cell-edit-view-exit":"_onHistoryChange","cell-edit-view-enter":"_onCellEditViewHistoryChange","cell-edit-view-history-change":"_onCellEditViewHistoryChange"},_onHistoryChange:function(){var t=this;t.setState(t.editor.canUndo())},_onCellEditViewHistoryChange:function(t){this.setState(t.canUndo)},onClick:function(){var t=this;!0===t.state&&t.editor.execCommandByToolbar("undo")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({name:"redo",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"command-exec":"_onHistoryChange","redo-stack-change":"_onHistoryChange","cell-edit-view-exit":"_onHistoryChange","cell-edit-view-enter":"_onCellEditViewHistoryChange","cell-edit-view-history-change":"_onCellEditViewHistoryChange"},_onHistoryChange:function(){var t=this;t.setState(t.editor.canRedo())},_onCellEditViewHistoryChange:function(t){this.setState(t.canRedo)},onClick:function(){var t=this;!0===t.state&&t.editor.execCommandByToolbar("redo")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({name:"remove-format",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"yne-selection-change":"_onSelectionChange","yne-editing-state-change":"_onEditingStateChange"},_onEditingStateChange:function(t){var e=this;e.$el.hasClass("bulb__disabled")||(t&&null!==t.cellEditViewRangeCollapsed?e.setState(!1===t.cellEditViewRangeCollapsed):e.setState(!0))},_onSelectionChange:function(){var t=this;t.$el.hasClass("bulb__disabled")||t.setState(!0)},onClick:function(){var t,e=this;if(!(t=e.editor.getNoteRange())||t.isCollapsed())return void e.editor.resetEditingInlineStates();e.editor.execCommandByToolbar("comp.RemoveFormat")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(27),o=n(766);return e.extend({name:"format-painter",label:"",events:{click:"onClick",dblclick:"onDblClick",mousedown:"onMouseDown"},defaultState:!1,state:!1,templateName:"toolbar-button-template",initialize:function(){var t=this;e.prototype.initialize.apply(t,arguments),t._initFormatPainterManager()},_initFormatPainterManager:function(){var t=this;t._formatPainterManager=new o({editor:t.editor}),t._formatPainterManager.on("formatpainter-state-change",t.onFormatPainterStateChange.bind(t))},clickAction:function(){var t=this;!0===t.state?t.reset():t.stash(!0)},onClick:function(){var t=this;clearTimeout(t._timer),t._timer=setTimeout(function(){t.clickAction()},300)},onDblClick:function(){var t=this;clearTimeout(t._timer),t.stash()},stash:function(t){this._formatPainterManager.stash(t)},reset:function(){this._formatPainterManager.reset()},onFormatPainterStateChange:function(t){this.setState(!!t)},destroy:function(){e.prototype.destroy.apply(this,arguments),this._formatPainterManager&&this._formatPainterManager.destroy()}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(29),r=n(8),i=n(20),s=n(1),a=n(11),l=n(40),c={NONE:0,ONCE:1,REPEAT:2};return e={state:null,data:null,initialize:function(t){var e=this;e._editor=t.editor,e.state=c.NONE,s.bindAll(e,"stash","_paintWithDebounce","reset","_onSelectStart","_onCommandExec")},_isLinkStyle:function(t){return t&&t.color&&t.color!==a.INTERM&&l.equals(t.color,"blue")&&!0===t.underline},stash:function(t){var e,n=this,o=n._editor;n.reset(),e=o.querySelectionInlineStyles(),n._isLinkStyle(e)&&e.href&&(delete e.color,delete e.underline),n.data={inlineStyles:e,blockStyles:o.querySelectionBlockStyles()},t?n.setState(c.ONCE):n.setState(c.REPEAT),n.bindEvents()},paint:function(){var t=this;t.data&&t._editor.execCommandByToolbar("comp.FormatPainter",{data:t.data}),t.state===c.ONCE&&t.reset()},reset:function(){var t=this;t._clearPaintTimeout(),t.data=null,t.setState(c.NONE),t.unbindEvents()},setState:function(t){var e=this;e.state!==t&&(e.state=t,e.trigger("formatpainter-state-change",!!t),e.updateFormatPainterCursorUI(!!t))},updateFormatPainterCursorUI:function(t){this._editor.updateFormatPainterCursorUI(t)},bindEvents:function(){var t=this,e=t._editor;t.unbindEvents(),e.on("selectstart",t._onSelectStart),e.on("mouse-down",t._onSelectStart),e.on("esc",t.reset),e.on("command-exec",t._onCommandExec)},unbindEvents:function(){var t=this,e=t._editor;e&&(e.off("selectstart",t._onSelectStart),e.off("mouse-down",t._onSelectStart),e.off("esc",t.reset),e.off("command-exec",t._onCommandExec)),r(document).off("mouseup",t._paintWithDebounce)},_onSelectStart:function(){var t=this;r(document).one("mouseup",t._paintWithDebounce)},_clearPaintTimeout:function(){var t=this;t._paintTimeout&&(window.clearTimeout(t._paintTimeout),t._paintTimeout=null)},_paintWithDebounce:function(){var t=this;t._clearPaintTimeout(),t._paintTimeout=window.setTimeout(function(){t.paint()},100)},_onCommandExec:function(t){"comp.FormatPainter"!==(t||{}).name&&this.reset()},destroy:function(){this._editor&&(this._editor=null),this.options&&this.options.editor&&(this.options.editor=null),this.reset()}},s.extend(e,i.Events),o.extend(e)}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(8),o=n(134),r=n(154);return o.extend({name:"heading",label:"",defaultValue:"default",items:r.headingArray,templateName:"toolbar-combo-box-heading",editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},updateValueUI:function(t){var n=this,o=e(n.valueWrapperEl).find(".bulb__combo-value")[0];r.headingMap[t]?e(o).text(r.headingMap[t].name):e(o).text(n.getUnlistedText(t)||"")},getUnlistedText:function(t){var e=this;return t?r.headingMap[t].name:r.headingMap[e.defaultValue].name+""},onItemClick:function(t){var e,n,o=this,i=t.textContent.trim();for(e in r.headingMap)if(r.headingMap[e].name===i){n=e;break}o.editor.execCommandByToolbar("comp.InsertHeading",{level:n})},onEditingStateChange:function(){var t=this,e=t.editor.querySelectionBlockStyle(t.name);r.headingMap[e]?t.select(e):t.select(t.defaultValue)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(134),r=n(11),i=n(2).FontMaps,s=n(8);return e=o.extend({name:"font-family",label:"",defaultValue:i.DEFAULT_FONT,items:i.getItems(),templateName:"toolbar-combo-box-font-family",getUnlistedText:function(t){var e;return t&&t!==r.INTERM&&(e=i.getFont(t)),e=e||i.splitFontFamily(t)[0]||""},render:function(){var t,n=this;e.__super__.render.apply(n,arguments),t=n.$el.find(".bulb__combo-value-font-family"),s(t).hover(function(){s(n.displayWrapperEl).tooltipster({animation:"",animationDuration:0,content:t.text(),delay:[800,300]})},function(){s(n.displayWrapperEl).tooltipster({animation:"",animationDuration:0,content:n.label,delay:[800,300]})})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(134).extend({name:"font-size",label:"",defaultValue:"14",items:{9:"9",12:"12",14:"14",16:"16",18:"18",22:"22",26:"26",30:"30",36:"36",42:"42"},templateName:"toolbar-combo-box-font-size",getUnlistedText:function(t){var e=this,n=parseInt(t,10);return n&&!isNaN(n)?n+"":e.defaultValue+""}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(99),o=n(11);return e.extend({name:"bold",label:"",shortcut:o.IS_MAC?"Command+B":"Ctrl+B"})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(99),o=n(11);return e.extend({name:"italic",label:"",shortcut:o.IS_MAC?"Command+I":"Ctrl+I"})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(99),o=n(11);return e.extend({name:"underline",label:"",shortcut:o.IS_MAC?"Command+U":"Ctrl+U"})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(99),o=n(11);return e.extend({name:"strike",label:"",shortcut:o.IS_MAC?"Command+E":"Ctrl+E"})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(267),o=n(4),r=n(40);return e.extend({name:"color",label:"",defaultValue:"#393939",defaultSetValue:"#DF402A",doAction:function(t){var e=this,n={},i=t||e.value,s=r(i);if(!s||!1===s.isValid())return void o.error("tiny color object is not valid",s);n[e.name]=s.toHexString(),e.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:n})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(135),o=n(8),r=n(776);return e.extend({name:"color",defaultValue:"#000000",items:r,templateName:"toolbar-combo-box-color",editorEvents:{"yne-selection-change":"onSelectionChange"},onValueWrapperElClick:function(){var t=this,e=t.value;t.hideMenu(),e!==t.selectedValue&&t.onChange(e)},onChange:function(t){this.doAction(t)},doAction:function(){},onItemClick:function(t){var e=this,n=o(t).data("value");if(o(t).hasClass("bulb__color-section-other"))return e.editor.trigger("color-picker-show",e),void e.hideMenu();e.changeValue(n)},changeValue:function(t){var e=this;t&&t!==e.value&&e.select(t),t&&t!==e.selectedValue&&e.onChange(t)},updateValueUI:function(t){var e=this,n=o(e.valueWrapperEl).find(".bulb__combo-value-buttom-color")[0];o(n).css("background-color",t)},onSelectionChange:function(){var t=this,e=t.editor.querySelectionInlineStyle(t.name);t.selectedValue=e}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return{theme:["#ffffff","#000000","#eeece0","#1c487f","#4d80bf","#c24f4a","#9abc52","#7b5ba1","#46acc8","#f9963b"],other:[["#f2f2f2","#808080","#ddd9c2","#c5d9f2","#dce6f3","#f3dcdb","#ebf1dd","#e6e0ec","#daeef4","#feead9"],["#d9d9d9","#595959","#c4be95","#8db3e5","#b8cde6","#e7b9b7","#d7e5bb","#ccc0db","#b6dee9","#fdd5b3"],["#bfbfbf","#404040","#948b50","#528cd8","#94b2d9","#da9693","#c3d798","#b3a1c8","#91cdde","#fbc08c"],["#a6a6a6","#262626","#4a4528","#15365f","#355f94","#973632","#769436","#60487c","#2c859d","#e66c00"],["#808080","#0d0d0d","#1e1c10","#0f2340","#243f62","#642422","#4f6324","#403053","#1e5969","#994800"]],standard:["#df402a","#f77567","#fad4d3","#fae220","#b19067","#77c94b","#98dede","#184e87","#9896a4","#90a7d1"]}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(267).extend({name:"back-color",label:"",defaultValue:"transparent",defaultSetValue:"#FAE220",templateName:"toolbar-combo-box-back-color",doAction:function(t){var e=this,n={};n[e.name]=t||e.value,e.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:n})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(136),o=n(2).List,r=n(11);return e.extend({name:"unordered-list",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:r.IS_MAC?"Command+L":"Ctrl+L",querySelectionState:function(){return this.editor.isSameList("unordered")},onClick:function(){this.editor.execCommandByToolbar("comp.InsertList",{type:o.UNORDERED})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(136),o=n(2).List,r=n(11);return e.extend({name:"ordered-list",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:r.IS_MAC?"Command+Shift+L":"Ctrl+Shift+L",querySelectionState:function(){return this.editor.isSameList("ordered")},onClick:function(){this.editor.execCommandByToolbar("comp.InsertList",{type:o.ORDERED})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(60),o=n(11);return e.extend({name:"todo",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:o.IS_MAC?"Command+D":"Ctrl+D",onClick:function(){this.editor.execCommandByToolbar("comp.InsertTodo",{checked:!1})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(100),o=n(2).BlockTypes,r=n(1),i=n(8),s=e.extend({name:"align",label:"",defaultValue:"left",items:{justify:"",left:"",center:"",right:""},templateName:"toolbar-combo-box-align",updateValueUI:function(t){var e=this,n=i(e.valueWrapperEl).find(".bulb__combo-value")[0];i(n).removeClass(r.keys(e.items).map(function(t){return"bulb__"+t}).join(" ")),i(n).addClass("bulb__"+t)},onChange:function(t){var e,n,r,i,a=this;if(e=a.editor,(r=e.getNoteRange())&&(n=r.getStartBlockRange(),(i=n.block)&&o.isHeaderFooter(i)))return void e.execCommandByToolbar("comp.SetHeaderFooter",{align:t,headerFooter:i,range:n});s.__super__.onChange.apply(a,arguments)},onSelectionChange:function(){var t,e=this,n=e.editor.getNoteRange(),r=n&&n.getStartBlockRange().block;t=r&&o.isHeaderFooter(r)?r.getAlign():e.editor.querySelectionBlockStyle(e.name),e.items[t]?e.select(t):e.select(e.defaultValue)}});return s}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(100),o=n(1),r=n(8);return e.extend({name:"table-justify",label:"",defaultValue:"middle",isVisible:!1,items:{top:"",middle:"",bottom:""},templateName:"toolbar-combo-box-align",updateValueUI:function(t){var e=this,n=r(e.valueWrapperEl).find(".bulb__combo-value")[0];r(n).removeClass(o.keys(e.items).map(function(t){return"bulb__"+t}).join(" ")),r(n).addClass("bulb__"+t)},onEditingStateChange:function(){this.enable()},onChange:function(t){var e=this,n=e.editor;t&&n.execCommandByToolbar("comp.SetTableCellBlockStyle",{styles:{verticalAlign:t}})},onSelectionChange:function(){var t,e=this;t=e.editor.querySelectionBlockStyle("verticalAlign"),e.items[t]?e.select(t):e.select(e.defaultValue)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(136).extend({name:"indent",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.IndentOutdent",{indentStep:1})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({name:"outdent",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.IndentOutdent",{indentStep:-1})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(100),o=n(1),r=n(8);return e.extend({name:"line-height",label:"",defaultValue:1.75,keys:[1,1.25,1.5,1.75,2,2.5,3],items:[{key:1,value:"1.0"},{key:1.25,value:"1.25"},{key:1.5,value:"1.5"},{key:1.75,value:"1.75"},{key:2,value:"2.0"},{key:2.5,value:"2.5"},{key:3,value:"3.0"}],templateName:"toolbar-combo-box-line-height",updateValueUI:function(t){var e=this,n=r(e.menuWrapperEl),i=o.indexOf(e.keys,t);n.find(".bulb__active").removeClass("bulb__active bulb__svg-common"),-1!==i&&n.find(".bulb__line-height-"+i).addClass("bulb__active bulb__svg-common")},onSelectionChange:function(){var t,e,n=this,r=n.editor.querySelectionBlockStyle(n.name);-1!==o.indexOf(n.keys,r)?n.select(r):parseFloat(r)==r?(t=parseFloat(r),o.each(n.keys,function(n){var o=Math.abs(n-r);o<t&&(e=n,t=o)}),n.select(e)):(n.select(n.defaultValue),n._isForceSelectWhenClick=!0)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({name:"table-wrap",label:"",defaultState:!1,isVisible:!1,templateName:"toolbar-button-template",onEditingStateChange:function(){var t,e=this;t=e.editor.querySelectionBlockStyle("wrap"),e.setState(t||!1)},onClick:function(){this.editor.execCommandByToolbar("comp.SetTableCellBlockStyle",{toggle:"wrap"})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(100),o=n(38),r=n(1),i=n(8);return e.extend({name:"table-operate",label:"",defaultValue:"",isVisible:!1,items:{insertRowUp:"",insertRowDown:"",deleteRow:"",insertColLeft:"",insertColRight:"",deleteCol:"",deleteTable:""},templateName:"toolbar-combo-box-align",updateValueUI:function(t){var e=this,n=i(e.valueWrapperEl).find(".bulb__combo-value")[0];i(n).removeClass(r.keys(e.items).map(function(t){return"bulb__"+t}).join(" ")),i(n).addClass("bulb__"+t)},onChange:function(t){var e,n,r=this,i=r.editor;t&&("insertRowUp"===t&&(e=o.UP),"insertRowDown"===t&&(e=o.DOWN),"insertColLeft"===t&&(n=o.LEFT),"insertColRight"===t&&(n=o.RIGHT),e&&i.execCommandByToolbar("comp.InsertTableRowCol",{describe:{row:e}}),n&&i.execCommandByToolbar("comp.InsertTableRowCol",{describe:{col:n}}),"deleteRow"===t&&i.execCommandByToolbar("comp.DeleteTableRowCol",{describe:{row:!0}}),"deleteCol"===t&&i.execCommandByToolbar("comp.DeleteTableRowCol",{describe:{col:!0}}),"deleteTable"===t&&i.execCommandByToolbar("comp.DeleteNoteRange",{isTableDelete:!0}),r.value="")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(41),o=n(1);return e.extend({name:"table-split",isVisible:!1,initialize:function(t){this.editor=t.editor,this.bindEditorEvents(),this.isVisible||this.hide()},editorEvents:{"yne-selection-change":"onSelectionChange"},bindEditorEvents:function(){var t=this,e=t.editor,n=t.editorEvents;n&&o.each(n,function(n,o){e.on(o,t[n].bind(t))})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(27).extend({name:"table-merge",label:"",defaultState:!1,isVisible:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.ToggleMergeTableCell")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(13),i=n(59);return i.extend({className:"bulb__toolbar-item bulb__toolbar-combo-box bulb__toolbar-combo-box-table",events:{"click .bulb__combo-value-wrapper":"onValueWrapperClick","mouseleave .bulb__combo-menu":"onMenuMouseLeave","mouseenter .bulb__combo-item":"onItemMouseEnter","click .bulb__combo-item":"onItemClick",mousedown:"onMouseDown"},editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},name:"table",label:"",templateName:"toolbar-combo-box-table",initialize:function(t){var e=this;e.editor=t.editor,e.render(),e.bindDocumentEvents(),e.bindEditorEvents()},render:function(){var t,e=this,n=e.$el;t=r.render("web",e.templateName,{name:e.name,label:e.label,maxRows:6,maxCols:8}),n.html(t),e.menuWrapperEl=n.find(".bulb__combo-menu-wrapper")[0],e.menuLabelEl=n.find(".bulb__combo-menu-label-table")[0],e.comboItems=n.find(".bulb__combo-item"),n.find(".bulb__combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},bindDocumentEvents:function(){var t=this;e.bindAll(t,"onDocumentMouseDown"),o(document).on("mousedown",t.onDocumentMouseDown)},bindEditorEvents:function(){var t=this,n=t.editor,o=t.editorEvents;o&&e.each(o,function(e,o){n.on(o,t[e].bind(t))})},onDocumentMouseDown:function(t){var e=this,n=t.target;o.contains(e.el,n)||e.hideMenu()},onValueWrapperClick:function(){this.toggleMenu()},onItemMouseEnter:function(t){var e=t.target,n=this.getItemCoordinate(e);this.selectItems(n.row+1,n.col+1)},onItemClick:function(t){var e=this,n=t.target,o=e.getItemCoordinate(n);e.insertTable(o.row+1,o.col+1),e.hideMenu()},onMenuMouseLeave:function(){this.resetSelected()},onMouseDown:function(t){t.preventDefault()},getItemCoordinate:function(t){var e=o(t);return{row:e.data("row"),col:e.data("col")}},resetSelected:function(){this.selectItems(0,0)},selectItems:function(t,e){this.updateSelectedLabelText(t,e),this.updateSelectedItemsUI(t,e)},updateSelectedLabelText:function(t,e){var n=o(this.menuLabelEl);t>0&&e>0?n.html(t+"  "+e+" "):n.html("")},updateSelectedItemsUI:function(t,e){var n,r,i=this;for(o(i.comboItems).removeClass("bulb__selected"),n=0;n<t;n++)for(r=0;r<e;r++)o(i.comboItems[8*n+r]).addClass("bulb__selected")},insertTable:function(t,e){this.editor.execCommandByToolbar("comp.InsertTable",{rows:t,cols:e})},toggleMenu:function(){var t=this;o(t.menuWrapperEl).hasClass("bulb__show")?t.hideMenu():t.showMenu()},showMenu:function(){var t,e=this,n=e.menuWrapperEl;o(n).removeClass("bulb__menu-position-fix"),o(n).addClass("bulb__show"),t=n.getBoundingClientRect(),t.right>document.documentElement.offsetWidth&&o(n).addClass("bulb__menu-position-fix")},hideMenu:function(){var t=this;o(t.menuWrapperEl).removeClass("bulb__show"),t.resetSelected()},onEditingStateChange:function(){},destroy:function(){i.prototype.destroy.apply(this,arguments),o(document).off("mousedown")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(60),o=n(11);return e.extend({name:"hr",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:o.IS_MAC?"Command+H":"Ctrl+H",onClick:function(){this.editor.execCommandByToolbar("comp.InsertHorizontalRule")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(13),i=n(65),s=n(109),a=n(59);return a.extend({className:"bulb__toolbar-item bulb__toolbar-combo-box bulb__toolbar-combo-link",name:"link",label:"",templateName:"toolbar-combo-box-insert-link",events:{"mousedown .bulb__combo-value-wrapper-link":"onValueWrapperMouseDown","click .bulb__combo-value-wrapper-link":"onValueWrapperClick","click .bulb__link-button":"onConfirmButtonClick",mousedown:"onMouseDown"},initialize:function(t){var e=this;e.editor=t.editor,e.items=t.items,e.render(),e.bindDocumentEvents(),e.bindEditorEvents()},render:function(){var t,e=this,n=e.$el;t=r.render("web",e.templateName,{name:e.name,label:e.label}),n.html(t),e.menuWrapperEl=n.find(".bulb__combo-menu-wrapper")[0],e.menuItemContainer=n.find(".bulb__combo-menu")[0],e.input=n.find(".bulb__link-input"),o(e.input).keydown(function(t){t.stopPropagation(),i.isMatch("enter",t.keyCode)&&(t.preventDefault(),e.onConfirmButtonClick())}),n.find(".bulb__combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},bindDocumentEvents:function(){var t=this;e.bindAll(t,"onDocumentMouseDown"),o(document).on("mousedown",t.onDocumentMouseDown)},unbindDocumentEvents:function(){o(document).off("mousedown")},onDocumentMouseDown:function(){this.hideMenu()},bindEditorEvents:function(){var t=this,n=t.editor,o=t.editorEvents;o&&e.each(o,function(e,o){n.on(o,t[e].bind(t))})},onMouseDown:function(t){t.stopPropagation(),t.preventDefault()},onConfirmButtonClick:function(){var t=this,e=s.safeHref(o(t.input).val().trim());e&&t.editor.execCommandByToolbar("comp.InsertLink",{src:e}),t.hideMenu(),window.focus()},onValueWrapperMouseDown:function(t){t.preventDefault()},onValueWrapperClick:function(){var t=this,n=t.editor.getEditorProps(),o=t.editor.getNoteRange(),r=t.editor.note,i=o.getDataAsPlain(r),a={text:i,url:t.link};t.editor.trigger("yne-before-insert-link",a,function(n){var o,r=n.url,i=n.text;e.isString(r)&&(o=s.safeHref(r.trim()))&&t.editor.execCommandByToolbar("comp.InsertLink",{src:o,text:i})}),n.disableInsertLink||t.toggleMenu()},toggleMenu:function(){var t=this,e=o(t.menuWrapperEl);e.toggleClass("bulb__show"),e.is(":visible")&&t.input.focus()},showMenu:function(){var t=this,e=t.menuWrapperEl;o(e).addClass("bulb__show"),t.input.focus()},hideMenu:function(){var t=this,e=t.menuWrapperEl;o(e).removeClass("bulb__show"),o(t.input).val("")},reset:function(){this.hideMenu()},destroy:function(){a.prototype.destroy.apply(this,arguments),this.unbindDocumentEvents()}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(60).extend({name:"img",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){var t=this,e=t.editor;e.trigger("yne-insert-photo",function(t){e.insertImage(t)})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(60).extend({name:"attachment",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){var t=this,e=t.editor;e.trigger("yne-insert-attachment",function(t){e.insertAttachment(t)})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(60).extend({name:"catalogue",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.InsertCatalogue")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(13),i=n(59);return i.extend({className:"bulb__toolbar-item bulb__toolbar-combo-box bulb__toolbar-combo-more",name:"showmore",label:"",templateName:"toolbar-combo-box-show-more",events:{"click .bulb__combo-value-wrapper-showmore":"onValueWrapperClick",mousedown:"onMouseDown"},initialize:function(t){var e=this;e.editor=t.editor,e.items=t.items,e.render(),e.bindDocumentEvents()},render:function(){var t,e=this,n=e.$el;t=r.render("web",e.templateName,{name:e.name,label:e.label}),n.html(t),e.menuWrapperEl=n.find(".bulb__combo-menu-wrapper")[0],e.menuItemContainer=n.find(".bulb__combo-menu")[0],e.$split=n.find(".bulb__toolbar-more-split"),n.find(".bulb__combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},bindDocumentEvents:function(){var t=this;e.bindAll(t,"onDocumentMouseDown"),o(document).on("mousedown",t.onDocumentMouseDown)},onDocumentMouseDown:function(t){var e=this,n=t.target;o.contains(e.el,n)||e.hideMenu()},onMouseDown:function(t){t.preventDefault()},onValueWrapperClick:function(){this.toggleMenu()},toggleMenu:function(){o(this.menuWrapperEl).toggleClass("bulb__show")},showMenu:function(){var t=this,e=t.menuWrapperEl;o(e).addClass("bulb__show")},hideMenu:function(){var t=this,e=t.menuWrapperEl;o(e).removeClass("bulb__show")},resetMenu:function(){var t,n=this,r=n.items,i=o(n.menuItemContainer);e.map(r,function(t){i.append(t.$el)}),i.children().length>0?(t=n.$el.prev(),(t.hasClass("bulb__toolbar-split")||t.hasClass("bulb__table-split"))&&t.hide(),n.$el.show()):n.$el.hide()},destroy:function(){i.prototype.destroy.apply(this,arguments),o(document).off("mousedown")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){return n(60).extend({name:"more-macro",label:"",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){var t=this,e=t.editor,n=e.getMacroConfigManager(),o=n.getMacroConfigNotOnToolbar(),r=n.getCustomOptions(o);e.trigger("yne-insert-macro-clicked",r,function(t){var o;t&&(o=n.getMacroConfig(t))&&n.getInsertDialog(o.macroName).then(function(t){e.execCommandByToolbar("comp.AppendMacro",{macroName:o.macroName,macroContent:t,macroVersion:o.version})})})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(27);return function(t,n){return new(e.extend({name:"macro-button",label:t.label,events:{click:"onClick"},defaultState:!1,state:!1,templateName:"toolbar-button-template",initialize:function(){var n=this;n.icon=t.icon,e.prototype.initialize.apply(n,arguments)},onClick:function(){var e=this;e.editor.getMacroConfigManager().getInsertDialog(t.macroName).then(function(n){e.editor.execCommandByToolbar("comp.AppendMacro",{macroName:t.macroName,macroContent:n,macroVersion:t.version})})},resetMenu:function(){}}))({editor:n})}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(800),o=n(2).SupportedInlineStyles,r=n(1),i=n(40),s=new e({}),a={color:{valueInView:"#393939",compareEqual:function(t,e){return i.equals(t,e)}},"font-family":{valueInView:["-apple-system","BlinkMacSystemFont","PingFang SC","Helvetica","Tahoma","Arial","Hiragino Sans GB","Microsoft YaHei","","SimSun","","Heiti","","sans-serif"].join(",")},"color-catalogue":{valueInView:"#003884",value:o.getDefault("color"),compareEqual:function(t,e){return i.equals(t,e)}}};return r.each(a,function(t,e){var n={name:e,valueInView:t.valueInView,value:o.getDefault(e)||t.value,compareEqual:t.compareEqual};s.addMappingRule(n)}),s}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(801);return e.extend({name:"InlineStyleViewMapper"})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(29),o=n(4);return e.extend({initialize:function(){var t=this;t._mappingRules={},delete t.options},_isValidMappingRule:function(t){return!(!t||!t.name||null==t.value||null==t.valueInView)},addMappingRule:function(t){var e,n=this,r=n._mappingRules;return n._isValidMappingRule(t)?(e=t.name,r[e]?void o.error("Failed to add mapping rule, mapping rule do exists",t):void(n._mappingRules[e]=t)):void o.error("Failed to add mapping rule, parameter is not valid",t)},valueFromView:function(t,e){var n=this._mappingRules[t],o=e;return n&&(n.compareEqual?n.compareEqual(e,n.valueInView):e===n.valueInView)&&(o=n.value),o},valueToView:function(t,e){var n=this._mappingRules[t],o=e;return n&&(n.compareEqual?n.compareEqual(e,n.value):e===n.value)&&(o=n.valueInView),o}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(803);return e=o.extend({render:function(){var t=this;e.__super__.render.apply(t,arguments)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(20),i=n(11),s=n(101),a=n(33),l=n(804),c=n(857),u=n(45),p=n(39),d=n(4),h=n(35),f=n(58),g=n(39),m=n(858),_=n(859),b=n(270),y=n(2),v=y.AttachmentRange,w=y.ImageRange,I=y.NoteRange,C=y.BlockRangeMap,M=y.BlockTypes,T=y.HeaderFooter;return r.View.extend({className:"bulb__note-view",attributes:{tabIndex:1,spellcheck:!1,contenteditable:"true"},directionKeyJustMoved:!1,_isOnMouseDown:!1,events:{textInput:"_onTextInput",compositionstart:"_onCompositionStart",compositionend:"_onCompositionEnd",mousedown:"_onMouseDown",mouseup:"_onMouseUp",selectstart:"_onSelectStart",contextmenu:"_onContextMenu",dragstart:"_onDragDropEvent",dragover:"_onDragDropEvent",drop:"_onDragDropEvent",dragend:"_onDragEnd",copy:"_onCopy",cut:"_onCut",paste:"_onPaste","click a[href]":"_onAnchorClick",click:"_onClick",blur:"_onBlur",focus:"_onFocus"},note:null,blockViews:null,tableViews:null,headerView:null,footerView:null,_keyMonitor:null,_inlineStyleViewMapper:null,isOnComposition:!1,_isSilent:!1,_noteEvents:{"insert-block":"_onInsertBlock","remove-block":"_onRemoveBlock","replace-block":"_onReplaceBlock","read-only-change":"_onReadOnlyChange","high-light":"_onHighlight","next-high-light":"_onNextHighlight","pre-high-light":"_onPreHighlight","content-parse-done":"_onContentParseDone","header-footer-changed":"_OnHeaderFooterChanged","clear-high-light":"_onClearHighlight"},_docEvents:{selectionchange:"_onSelectionChange"},_shouldStopComposition:!1,_affectedViewsByComposition:null,_pageBatchTimer:null,_pageBatchPendingQueue:null,_viewMode:null,_renderBatchTimer:null,_currentZoom:null,_disableOCR:null,_previewMode:null,initialize:function(t){var e=this;e._bindEventHandlers(),e.setOptions(t),e._bindEventsForDoc(),e._bindEventsForThis(),e.highlightView=new m,e._pageBatchPendingQueue=[],t.inlineStyleViewMapper&&(e._inlineStyleViewMapper=t.inlineStyleViewMapper),e._currentZoom=1},createHeaderFooterView:function(t){var e,n,o,r;if(e=this,null!=(n=e.note))return o=n.getHeaderFooter(t),o||(o=T.createBlank(t),n.setHeaderFooter(o,t)),r=new _(o,e.isReadOnly()),r.on("focus",function(){e.trigger("set-range",I.createForHeaderFooter(o),!0,!0)}).on("blur",function(t){e.trigger("selectionchange",t)}).on("text-input",function(t){e.trigger("header-footer-view-text-change",t,r.block)}),r},_renderHeaderFooterView:function(t){t.prepend(this.headerView.$el),t.append(this.footerView.$el)},_removeHeaderFooterView:function(){null!=this.headerView&&(this.headerView.remove(),this.headerView=null),null!=this.footerView&&(this.footerView.remove(),this.footerView=null)},_OnHeaderFooterChanged:function(t){var e=this,n=e.options.noteviewFrame;e.isInPageMode()&&(t?(null!=e.footerView&&e.footerView.remove(),e.footerView=e.createHeaderFooterView(t),null!=n&&n.append(this.footerView.$el)):(null!=e.headerView&&e.headerView.remove(),e.headerView=e.createHeaderFooterView(t),null!=n&&n.prepend(this.headerView.$el)))},_bindEventHandlers:function(){var t=this,n=function(n){e.bindAll(t,n)};e.each(t._noteEvents,n),e.each(t._docEvents,n)},_setNote:function(t){var e=this;e.removeNote(),e.note=t,e._bindEventsForNote()},removeNote:function(){var t=this;t.note&&t._unbindEventsForNote(),t.note=null},reset:function(){var t,e=this;if(e.removeNote(),e.$el.html(""),e.blockViews=e._clearBlockViews(e.blockViews),e.options&&(e.options.note=null,e.options.isNoteSet=!1,(t=e.options.noteviewFrame)&&(t.find(".bulb__header-footer-input").prop("contenteditable",!0),t.removeClass("bulb__has-handwrite"))),e.$el.removeClass("bulb__read-only"),e._keyMonitor&&e._keyMonitor.clearCache(),o(document.head).find("style.note-style").remove(),e._isSilent=!1,window.parent!==window){window.getSelection().removeAllRanges()}e._pageBatchTimer&&(window.clearTimeout(e._pageBatchTimer),e._pageBatchTimer=null),e._renderBatchTimer&&(clearTimeout(e._renderBatchTimer),e._renderBatchTimer=null),e._pageBatchPendingQueue=[],e._removeHeaderFooterView()},setOptions:function(t){var n=this;if(t=t||{},null==n.options)n.options=e.clone(t);else for(var o in t)t.hasOwnProperty(o)&&(n.options[o]=t[o]);null!=n.options.note&&n._setNote(n.options.note),null!=n.options.viewMode&&(n._viewMode=n.options.viewMode),n._disableOCR=!!n.options.disableOCR,n._previewMode=!!n.options.previewMode},render:function(){var t=this,e=t.$el,n=t.highlightView,r=t.options.noteviewFrame;t.blockViews=t.blockViews?t._clearBlockViews(t.blockViews):[],t.tableViews=[],e.html(""),o(document.head).find("style.note-style").remove(),o(document.head).append('<style class="bulb__note-style"></style>'),e.append(n.$el),t.isInPageMode()?t._enablePageMode(!1):t._disablePageMode(t._viewMode),null!=r&&r.find(".bulb__header-footer-input").prop("contenteditable",!t.isReadOnly()),null!=t._renderBatchTimer&&(clearTimeout(t._renderBatchTimer),t._renderBatchTimer=null),t._renderInBatch(0)},_renderInBatch:function(t){var e,n,o=this,r=o.note,i=Date.now();if(null!=r){for(;t<r.blocks.length&&(e=r.blocks[t],n=o._createBlockView(e),n||d.warn("Failed to create block view!"),o.blockViews.push(n),o.$el.append(n.$el),n.render(),o._bindEventsForBlockView(e,n),o._setPageInfo(t),t++,!(Date.now()-i>100)););t<r.blocks.length&&(o._renderBatchTimer=setTimeout(o._renderInBatch.bind(o,t),10))}},_repairBlockViews:function(t){var n,o,r,i=this,s=[];t&&t.length>0&&(n=t.shift(),s.push(n),t.length>0&&(o=t.pop(),s.push(o)),i._isElementExisting(n.cid)||(r=i.getBlockViewIndex(n)-1,r>=0?i.getBlockViewAt(r).$el.after(n.$el):i.getBlockViewAt(0).$el.before(n.$el)),o&&!i._isElementExisting(o.cid)&&n.$el.after(o.$el),i.reRenderTextBlockView(s),e.each(t,function(t){i._isElementExisting(t.cid)||o.$el.before(t.$el)}))},_isElementExisting:function(t){var e,n=this;return e=n.$el.find('[data-yne-cid="'+t+'"]'),e.length>0},reRenderTextBlockView:function(t){var n=this;t=t||n.blockViews,e.each(t,function(t){var e=t.block;M.isTextBlock(e)&&t.render()})},_listenerEventsForBlockView:function(t){var n={command:"onCommand","get-read-only-status":"_onGetReadOnlyStatus"};return M.isTable(t)&&(n=e.extend(n,{"select-all":"onSelectAll","save-content":"_onSaveContent"})),n},_bubbleEventsForBlockView:function(t){var n={"locked-change":!0};switch(M.getType(t)){case M.IMAGE:n=e.extend(n,{"yne-replace-image":!0,"yne-open-image":!0,"yne-download-image":!0,"get-image-items":!0,"img-title-edit-start":!0,"img-title-edit-end":!0,"img-title-edit-focus":!0,"img-title-edit-exit":!0,"img-title-edit-update":!0,"yne-image-ocr":!0});break;case M.ATTACHMENT:n=e.extend(n,{"yne-replace-attachment":!0,"yne-open-attachment":!0,"yne-download-attachment":!0});break;case M.TABLE:n=e.extend(n,{"yne-download-attachment":!0,"yne-on-paste":!0,"get-note-range":!0,"link-menu-show":!0,"link-menu-hide":!0,"move-caret":!0,"set-range":!0,"global-redo":!0,"global-undo":!0,copy:!0,cut:!0,"yne-pre-paste":!0,"cell-edit-view-selection-change":!0,"cell-edit-view-enter":!0,"cell-edit-view-exit":!0,"cell-edit-view-history-change":!0,"cell-edit-view-command-executed":!0,"yne-blob-paste":!0});break;case M.PARAGRAPH:case M.HEADING:n=e.extend(n,{"link-menu-show":!0,"link-menu-hide":!0});break;case M.LIST_ITEM:n=e.extend(n,{"get-editing-styles":!0,"link-menu-show":!0,"link-menu-hide":!0});break;case M.CATALOGUE:n=e.extend(n,{"inner-goto":!0})}return n},_unbindEventsForBlockView:function(t,n){var o=this,r=function(t){t&&e.each(t,function(t,e){n.off(e)})};r(o._listenerEventsForBlockView(t)),r(o._bubbleEventsForBlockView(t))},_bindEventsForBlockView:function(t,e,n){var o,r=this;n=!1!==n,n&&r._unbindEventsForBlockView(t,e),o=r._listenerEventsForBlockView(t),h.addListeners(o,e,r),o=r._bubbleEventsForBlockView(t),h.bubble(o,e,r)},setHtmlContentEditable:function(t){this.$el.attr("contenteditable",!!t)},getHtmlContentEditable:function(){return"true"==this.el.contentEditable+""},updateFormatPainterCursorUI:function(t){t?this.$el.addClass("bulb__format-painter-active"):this.$el.removeClass("bulb__format-painter-active")},_handleNoteEvents:function(t){var n=this,o=n.note;if(!o||!o.on||!o.off)return void d.warn("Failed to bind note events!");e.each(n._noteEvents,function(e,r){t?o.on(r,n[e]):o.off(r,n[e])})},_bindEventsForNote:function(){this._handleNoteEvents(!0)},_unbindEventsForNote:function(){this._handleNoteEvents(!1)},_bindEventsForDoc:function(){var t=this,n=o(document);e.each(t._docEvents,function(e,o){n.on(o,t[e])})},_unbindEventsForDoc:function(){var t=this,n=o(document);e.each(t._docEvents,function(t,e){n.off(e)})},_bindEventsForThis:function(){var t=this;t.on("draw-range",t._onDrawRange.bind(t)),t.on("resize",t._onResize.bind(t))},_onChangeHandwriteBlock:function(t){var e=this.options.noteviewFrame;t?e.addClass("bulb__has-handwrite"):this.note.hasHandWriteBlock()||e.removeClass("bulb__has-handwrite")},bindKey:function(t){var e=this,n=e._keyMonitor;t&&(n||(e._keyMonitor=n=new s({el:e.el})),n.unbind(t),n.bind(t,function(n){e.trigger("key-pressed",t,n)}),e._keyMonitor=n)},unbindKey:function(t){var e=this,n=e._keyMonitor;n&&t&&n.unbind(t)},_onDrawRange:function(t,e){var n=this;n._silentDo(function(){n._drawRange(t,e)})},_updateSelectionUI:function(t){var e,n,o,r,i,s,a=this;return t?null==a.note?void d.warn("Note has been dettached."):(I.isNoteRange(t)?(o=t.getStartBlockRange(),r=t.getEndBlockRange(),e=a.note.getBlockIndex(o.block),n=a.note.getBlockIndex(r.block)):(i=a.getBlockViewContainer(t.startContainer),s=a.getBlockViewContainer(t.endContainer),e=a.getBlockViewIndex(i),n=a.getBlockViewIndex(s)),a._selectMacros(e,n,t),a._selectAttachments(e,n,t),void a._selectCatalogueTables(e,n)):void d.warn("The range is not valid!")},_selectMacros:function(t,n){var o=this;if(-1===t||-1===n)return void d.warn("start or end is -1");t!==n&&e.each(o.blockViews,function(e,o){if(e){var r=o>=t&&o<=n;e._selectMacro&&e._selectMacro(r)}})},_selectAttachments:function(t,n){var o=this;if(-1===t||-1===n)return void d.warn("start or end is -1");t!==n&&e.each(o.blockViews,function(e,o){if(e){var r=o>=t&&o<=n;e.selectAttachment&&e.selectAttachment(r)}})},_selectCatalogueTables:function(t,n){var o,r=this,i=[];-1!==t&&-1!==n&&e.each(r.blockViews,function(e,r){if(e){var s=r>=t&&r<=n;if(e.selectTable)return void e.selectTable(s);if(e.selectCatalogue){if(o=e.getOwnerId(),!s&&i[o])return;i[o]=!0,e.selectCatalogue(s)}}})},_drawRange:function(t,e){if(t&&t.canDrawedByNative){var n,o,r,i=this,s=t.getStartBlockRange(),l=s.block;if(e=!1!==e,i._clearCustomSelectionUI(l),t.canDrawedByNative())i.setHtmlContentEditable(!0),i._updateSelectionUI(t),n=i._convertToNativeRange(t),a.setRange(n,window),e&&i._scrollNativeSelectionIntoWrapper(n);else{if(i.setHtmlContentEditable(!1),t.isInMultiBlock())return void d.warn("The note range is note valid!");s=t.getStartBlockRange(),null!=i.note&&(o=i.note.getBlockIndex(s.block),(r=i.getBlockViewAt(o))&&r.trigger("draw-range",s,l))}}},_isZeroRect:function(t){return!t||0===t.width&&0===t.height},_scrollNativeSelectionIntoWrapper:function(t){var e,n,o=this;if(!o._isOnMouseDown){if(!t)return void d.warn("range not found");if(t.collapsed?(e=t.getClientRects()[0],o._isZeroRect(e)&&(e=t.getBoundingClientRect())):e=t.getBoundingClientRect(),o._isZeroRect(e)&&(n=t.commonAncestorContainer,1!==n.nodeType&&(n=n.parentNode),e=n.getBoundingClientRect()),o._isZeroRect(e))return void d.error("can not get selection client rect");o._scrollRectIntoWrapper(e)}},_getWrapper:function(){for(var t=this,e=t.el.parentNode;e;){if(o(e).is(".bulb__note-view-wrapper"))return e;e=e.parentNode}},_scrollRectIntoWrapper:function(t){var e=this,n=e._getWrapper(),o=n.getBoundingClientRect(),r=o.top,i=o.bottom,s=o.height,a=o.left,l=o.right,c=t.top*e._currentZoom,u=t.bottom*e._currentZoom,p=t.height*e._currentZoom,d=t.left*e._currentZoom,h=null,f=null;e._isZeroRect(t)||(n.scrollHeight!==n.clientHeight&&(i-=11,s-=11),n.scrollBarWidth!==n.clientWidth&&(l-=11),p>s?(u<0||c>s)&&(f=u-s):c<r||c-r<=10?f=-1*Math.abs(c-r):u>i||i-u<=10?f=Math.abs(u-i):u===i&&(f=10),d>=l||l-d<=10?h=Math.abs(d-l):(d<=a||d-a<=10)&&(h=-1*Math.abs(d-a)),e._scrollWrapperBy(h,f))},_scrollWrapperBy:function(t,n){var o=this._getWrapper();t>0?t+=20:t<0&&(t-=20),n>0?n+=20:n<0&&(n-=20),e.isNumber(t)&&(o.scrollLeft+=t),e.isNumber(n)&&(o.scrollTop+=n)},parseNativeRange:function(t){if(!t||!t.startContainer)return void d.warn("no native range!");var e=this,n=t.startContainer,o=t.endContainer;if(_.isHeaderView(n))return[new C[M.HEADER_FOOTER]({block:e.note.getHeaderFooter(!1)})];if(_.isFooterView(n))return[new C[M.HEADER_FOOTER]({block:e.note.getHeaderFooter(!0)})];var r,i,s,a,l=e.getBlockViewContainer(n),c=e.getBlockViewContainer(o),u=e.getBlockViewIndex(l),p=e.getBlockViewIndex(c),h=[];if(-1===u||-1===p)return void d.warn("start/end block index is -1 !");if(null==e.note)return void d.warn("note has been dettached.");for(r=u;r<=p;r++)s=e.blockViews[r],i=e.note.getBlockAt(r),a=s.parseNativeRange(t,i,r!==u&&r!==p),a?h.push(a):d.warn("Failed to parse native range to block range!");return h},convertToNoteRange:function(t){if(!t)return void d.warn("no range");if(t instanceof I)return t;var n=this.parseNativeRange(t);return n&&n.length?new I({endRange:e.last(n),startRange:e.first(n)}):void d.warn("Failed to parse native range to note range!")},_convertToNativeBlockRange:function(t){var e=this.getBlockViewByBlock(t.block);return e?e.convertToNativeRange(t):void d.warn("No blockView")},_convertToNativeRange:function(t){var e,n,o,r,i,s=this;if(t.canDrawedByNative())return e=t.getStartBlockRange(),(o=s._convertToNativeBlockRange(e))?t.isInSingleBlock()?o:(n=t.getEndBlockRange(),(r=s._convertToNativeBlockRange(n))?(i=document.createRange(),i.setStart(o.startContainer,o.startOffset),i.setEnd(r.endContainer,r.endOffset),i):void d.warn("no native range for end block!")):void d.warn("no native range for start block!")},_isRangeInTableBlock:function(){return a.isRangeInSelector(".bulb__block-view.bulb__table-view")},_onSelectionChange:function(t){var e=this,n=!a.isRangeInNode(e.el),o=a.getRange(),r=null;if(e._updateSelectionUI(o),n?r="The native range is not in note view!":b.isRangeInCellEditArea(o)?r="The native range is in table cell edit area":e._isSilent?r="The _isSilent flag is true!":e.isOnComposition&&(r="The isOnComposition flag is true!"),!r){if(e._isRangeInTableBlock()){if(!e.directionKeyJustMoved)return void(r="The selection/range is in table box!");e.directionKeyJustMoved=!1}e.trigger("selectionchange",t),e._scrollNativeSelectionIntoWrapper(o)}},_silentDo:function(t){var e=this;if(e._isSilent=!0,d.DEBUG)t();else try{t()}catch(t){d.warn("silent do error")}window.setTimeout(function(){e._isSilent=!1},0)},clearNativeSelectionUI:function(){a.getSelection(window).removeAllRanges()},_clearCustomSelectionUI:function(t){var n=this,o=n.blockViews;e.each(o,function(e){e.trigger("draw-range",null,t)})},_appendBlankLineIfNeed:function(){var t,e=this,n=e.note;n&&((t=n.getLastBlock())&&(!t||n.lastBlockIsEasyInput()&&!t.isLocked())||e.trigger("note-append-blankparagraph",t))},focusLastBlankLine:function(){var t=this;t._appendBlankLineIfNeed(),window.setTimeout(function(){var e=t.getLastBlockView();o(e.el).trigger("mousedown")},50)},isReadOnly:function(){var t=this,e=t.note;return null==e||e&&e.isReadOnly()},_onGetReadOnlyStatus:function(t){var e=this;t&&t(e.isReadOnly())},_isAtEndOfTextBlock:function(t,e){if(!document.caretRangeFromPoint)return!1;var n,r,i=document.caretRangeFromPoint(t.clientX,t.clientY),s=e.querySelector(".bulb__para-text");if(!s||!i||!i.collapsed)return!1;if(n=i.commonAncestorContainer,u.isText(n)){if(i.startOffset!==n.nodeValue.length)return!1;n=n.parentNode}if(!o.contains(s,n))return!1;for(;n&&n!==s;){if(r=n.parentNode,r.lastChild!==n)return!1;n=r}return!0},_onMouseDown:function(t){var e,n,r,i,s,a,l,c=this,u=3===(t.keyCode||t.which);if(c._isOnMouseDown=!0,c._clearHighlight(),c.$el.removeClass("bulb__highlight"),!c.isReadOnly()&&(e=c.getBlockViewContainer(t.target),n=c.getBlock(t.target),c._preventSelectStart=!1,!u||(g.isSafari()&&e&&c._isAtEndOfTextBlock(t,e)&&(c._preventSelectStart=!0),o(e).is(".bulb__image-view, .bulb__attachment-view, .bulb__table-view")))){if(!n||n.isLocked())return void c.focusLastBlankLine();if(c.trigger("mouse-down",t),r=M.getType(n),a=C[r])switch(i=new a({block:n}),s=new I({startRange:i,endRange:i}),r){case M.IMAGE:case M.ATTACHMENT:case M.MACRO:case M.HANDWRITE:c.setHtmlContentEditable(!0),e.focus(),c.trigger("set-range",s,!0,!0);break;case M.QUOTE:case M.TODO:case M.PARAGRAPH:case M.LIST_ITEM:case M.HEADING:case M.CATALOGUE:t.detail>2?(t.preventDefault(),i.expandToEnd(),l=!0):(l=!1,s=document.caretRangeFromPoint(t.clientX,t.clientY)),c.setHtmlContentEditable(!0),c._clearCustomSelectionUI(),c.trigger("backup-drag-range"),c.trigger("set-range",s,l,!0);break;case M.TABLE:break;case M.HR:c.trigger("set-range",s,!0,!0);break;case M.UNKNOWN:c.setHtmlContentEditable(!1),c.trigger("set-range",s,!0,!0)}else d.warn("_onMouseDown is not handled, block type is "+r);c.lastBlock=n}},_clearHighlight:function(){this.highlightView.$el.remove(),this._onClearHighlight()},_onMouseUp:function(){this._isOnMouseDown=!1},_onAnchorClick:function(t){var e,n=t.currentTarget;if(t.preventDefault(),e=n&&n.getAttribute("href"))return f.isNoteLinkUrl(e)?this.trigger("open-link",f.getNoteId(e),!0):void this.trigger("open-link",e)},_onSelectStart:function(t){if(!0===this._preventSelectStart)return t.preventDefault(),t.stopPropagation(),!1;this.trigger("selectstart",t)},_onTextInput:function(t){var e,n,o=this;t.preventDefault(),o.isReadOnly()||(n=t.originalEvent||t)&&(e=n.data+"")&&o.trigger("text-input",e)},_onCompositionStart:function(t){var e=this;return e.isReadOnly()?void t.preventDefault():(window.clearTimeout(e._compositionEndTimer),e.setCompositionState(!0),e._shouldStopComposition=!1,e._affectedViewsByComposition=null,e.trigger("onCompositionStart",function(t,n){e._shouldStopComposition=t,e._affectedViewsByComposition=n}),e._shouldStopComposition?(t.preventDefault(),void t.stopPropagation()):void e.trigger("delete-selection"))},_onCompositionEnd:function(t){var e=this,n=t.originalEvent||t;if(e.isReadOnly()||e._shouldStopComposition)return t.preventDefault(),void(e._affectedViewsByComposition&&e._repairBlockViews(e._affectedViewsByComposition));n.data||e.trigger("delete-selection"),e._compositionEndTimer=window.setTimeout(function(){e.setCompositionState(!1)},0)},setCompositionState:function(t){var e,n=this;t&&(e=a.getRange(),n.trigger("set-range",e,!1,!1)),n.isOnComposition=t},_onInsertBlock:function(t,e){var n=this,o=n._createBlockView(e);c(o),n._bindEventsForBlockView(e,o),n._insertBlockView(t,o)},_onRemoveBlock:function(t,e){var n=this;n._removeBlockView(t),!1!==e&&n._setPageInfo(t)},_onReplaceBlock:function(t,e){var n=this,o=n._createBlockView(e);c(o),n._replaceBlockView(t,o)},_createBlockView:function(t){var e,n=this,o=M.getType(t),r=l(o),s={};return n.isInPageMode()?n.options.pageType===i.PAGE_TYPE_A4?(s.height=i.PAGE_HEIGHT_A4,s.width=i.PAGE_WIDTH_A4):n.options.pageType===i.PAGE_TYPE_B5?(s.height=i.PAGE_HEIGHT_B5,s.width=i.PAGE_WIDTH_B5):n.options.pageType===i.PAGE_TYPE_TEST?(s.height=i.PAGE_HEIGHT_TEST,s.width=i.PAGE_WIDTH_TEST):n.options.pageType===i.PAGE_TYPE_NONE?(s.height=i.PAGE_HEIGHT_NONE,s.width=i.PAGE_WIDTH_NONE):(d.debugAlert("Invalid pageType in PageMode:",n.options.pageType),s.height=i.PAGE_HEIGHT_NONE,s.width=i.PAGE_WIDTH_NONE):(s.height=i.PAGE_HEIGHT_NONE,s.width=i.PAGE_WIDTH_NONE),c(!!r),e=new r({editor:n.options.editor,block:t,isReadOnly:t.isReadOnly(),inlineStyleViewMapper:n._inlineStyleViewMapper,pageSize:s,pageBreakContainer:n.options.noteviewFrame,noteView:n,disableOCR:n._disableOCR,previewMode:n._previewMode}),e.on("view-height-changed",n._onBlockViewHeightChanged.bind(n)),e.on("pageBreak-inserted",n._onPageBreakInserted.bind(n)),e.on("pageBreak-positionChanged",n._onPageBreakPosChanged.bind(n)),e instanceof l(M.HANDWRITE)&&n._onChangeHandwriteBlock(!0),e},_insertBlockView:function(t,e){var n=this,o=n.blockViews,r=n.$el,i=r.children().filter(".bulb__block-view"),s=i.length;o.splice(t,0,e),t===s?r.append(e.$el):i.eq(t).before(e.$el),e.render()},_removeBlockView:function(t){var n,o,r,i,s,a=this,c=a.blockViews,u=a.$el,p=a.tableViews;n=c.splice(t,1),o=n[0],i=e.indexOf(p,o),i>=0&&p.splice(i,1),s=u.children().filter(".bulb__block-view"),r=s.eq(t),r&&(r.attr("data-yne-cid")===o.cid?s.eq(t).remove():d.warn("skip div deletion whose attr is "+r.attr("data-yne-cid"))),o instanceof l(M.HANDWRITE)&&a._onChangeHandwriteBlock(!1),o.clearPageBreaks(),o.onDestroy()},_replaceBlockView:function(t,e){var n=this,o=n.blockViews,r=n.$el;n._clearBlockViews(o.splice(t,1,e)),r.children().filter(".bulb__block-view").eq(t).replaceWith(e.$el),e.render()},getBlockViewAt:function(t){return this.blockViews[t]},getLastBlockView:function(){var t=this,e=t.blockViews;return e[e.length-1]},getBlockViewContainer:function(t){var e,n,r=this;return o(t).is(".bulb__highlight-view")?(e=r.getBlockViewAt(0))&&(n=e.el):n=o(t).closest(".bulb__block-view")[0],n},getBlockViewIndex:function(t){if(!t)return-1;return this.$el.find(">.bulb__block-view").index(t)},getBlock:function(t){var e,n,o=this,r=o.note;if(null!=r)return e=o.getBlockViewContainer(t),n=o.getBlockViewIndex(e),r.getBlockAt(n)},getBlockViewByBlock:function(t){var e,n=this;if(null!=n.note)return e=n.note.getBlockIndex(t),n.getBlockViewAt(e)},getBlockViewById:function(t){var e,n=this;if(n.note)return e=n.note.getBlockById(t),n.getBlockViewByBlock(e)},scrollBlockViewIntoWrapper:function(t){var e=this,n=e.getBlockViewById(t),o=n.el.offsetTop;e._getWrapper().scrollTop=o},onCommand:function(t,e){var n,o,r,i=this;null==e.range&&(e.imageBlockView?(n=e.imageBlockView,e.imageBlockView=null,r=new w({block:n.block}),o=new I({blockRanges:[r]}),e.range=o):e.attachmentBlockView&&(n=e.attachmentBlockView,e.attachmentBlockView=null,r=new v({block:n.block}),o=new I({blockRanges:[r]}),e.range=o)),i.trigger("command",t,e)},_onCopy:function(t){this.trigger("copy",t)},_onCut:function(t){var e=this;if(e.isReadOnly())return void t.preventDefault();e.trigger("cut",t)},_onPaste:function(t){var e=this;if(e.isReadOnly())return void t.preventDefault();e.trigger("paste",t)},_onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),e.isReadOnly()||e.trigger("contextmenu",t)},_onDragDropEvent:function(t){var e,n=this;if(!n.isReadOnly())switch(t=t.originalEvent,e=n.getBlock(t.srcElement),t.type){case"dragstart":n.trigger("dragstart",t,e);break;case"dragover":n.trigger("dragover",t,e);break;case"drop":n.trigger("drop",t)}},_onDragEnd:function(t){this.trigger("dragend",t)},_onBlur:function(){this.trigger("blur")},_onFocus:function(){window.parent!==window&&p.isSafari()&&window.parent.getSelection().removeAllRanges()},_onClick:function(){this.trigger("yne-click")},onSelectAll:function(){var t,n=this,o=document.createRange();t=M.isTodo(e.first(n.note.blocks))?n.el.firstChild.querySelector(".bulb__todo-input"):n.el.firstChild,o.setStart(t,0),o.setEnd(n.el.lastChild,1),a.setRange(o,window),n.parseNativeRange(o)},_onSaveContent:function(){this.trigger("save-content")},_onReadOnlyChange:function(){var t=this,e=t.isReadOnly(),n=t.options.noteviewFrame;t.setHtmlContentEditable(!e),e?(t.$el.addClass("bulb__read-only"),null!=n&&n.find(".bulb__header-footer-input").prop("contenteditable",!1)):(t.$el.removeClass("bulb__read-only"),null!=n&&n.find(".bulb__header-footer-input").prop("contenteditable",!0))},_checkHighlightView:function(){var t=this;t.$el.children()[0]!==t.highlightView.$el.get(0)&&t.$el.prepend(t.highlightView.$el)},_onHighlight:function(t){var e=this;t.length?(e.$el.addClass("bulb__highlight"),e._checkHighlightView()):e.$el.removeClass("bulb__highlight"),e.highlightView.showHighlight(e.el,t)},_onClearHighlight:function(){e.each(this.blockViews,function(t){t.clearHighlight()})},_onNextHighlight:function(){var t=this;t._checkHighlightView(),t.highlightView.nextHighlight()},_onPreHighlight:function(){var t=this;t._checkHighlightView(),t.highlightView.preHighlight()},_onResize:function(t){var n=this;e.isNumber(t)&&(n._currentZoom=t),e.each(n.blockViews,function(t){t.trigger("resize"),n.isInPageMode()&&t.coincideAllPageBreaks()}),n._scrollNativeSelectionIntoWrapper(a.getRange())},_clearBlockViews:function(t){return e.each(t,function(t){t.onDestroy()}),[]},isInPageMode:function(){return 2===this._viewMode},setViewMode:function(t,e){var n=this;n._viewMode=t,n.isInPageMode()?n._enablePageMode(e):n._disablePageMode(t)},_calcNoteViewFrameHeight:function(){var t,n,o,r,s,a=this,l=e.last(a.blockViews),c=a.options.noteviewFrame;if(null!=l){if(t=(l.getLastTransPageIndex()||0)+1,a.options.pageType===i.PAGE_TYPE_A4?n=i.PAGE_HEIGHT_A4:a.options.pageType===i.PAGE_TYPE_B5?n=i.PAGE_HEIGHT_B5:a.options.pageType===i.PAGE_TYPE_TEST&&(n=i.PAGE_HEIGHT_TEST),null!=n&&t>1){if(o=t-2,r=c.find('[data-page-id="'+o+'"]'),0===r.length)return void d.debugAlert("Failed to find pageBreak:",o);r.length>1&&(d.debugAlert("Should not find more than one pageBreak:",o),r=r.first()),s=n-(c.height()-parseInt(a.$el.css("padding-bottom"))-parseInt(r.css("top"))-r.height()),c.height(c.height()+s),l.$el.position().top-parseInt(a.$el.css("padding-top"))+l.$el.height()>a.$el.height()&&(d.debugAlert("noteview content is overflowed"),c.height("auto"))}else c.height(n+parseInt(a.$el.css("padding-top"))+parseInt(a.$el.css("padding-bottom")));a._coincideAllPageBreaks()}},_coincideAllPageBreaks:function(){var t=this;e.each(t.blockViews,function(t){t.coincideAllPageBreaks()})},_disablePageMode:function(t){var n=this,o=n.options.noteviewFrame;if(n._pageBatchTimer&&(window.clearTimeout(n._pageBatchTimer),n._pageBatchTimer=null),!o)return void d.debugAlert("noteviewFrame should NOT be null when _disablePageMode");o.removeClass(i.PAGE_CLASS_A4),o.removeClass(i.PAGE_CLASS_B5),o.removeClass(i.PAGE_CLASS_TEST),e.each(n.blockViews,function(t){t.disablePageMode()}),n._viewMode=t,n._removeHeaderFooterView(),o.css("height","auto")},_enablePageMode:function(t){var n=this,o=n.options.noteviewFrame;if(n._pageBatchTimer&&(window.clearTimeout(n._pageBatchTimer),n._pageBatchTimer=null),n._pageBatchPendingQueue=[],!o)return void d.debugAlert("noteviewFrame should NOT be null when _enablePageMode");o.removeClass(i.PAGE_CLASS_A4),o.removeClass(i.PAGE_CLASS_B5),o.removeClass(i.PAGE_CLASS_TEST),n.options.pageType===i.PAGE_TYPE_A4?o.addClass(i.PAGE_CLASS_A4):n.options.pageType===i.PAGE_TYPE_B5?o.addClass(i.PAGE_CLASS_B5):n.options.pageType===i.PAGE_TYPE_TEST&&o.addClass(i.PAGE_CLASS_TEST),n._removeHeaderFooterView(),n.headerView=n.createHeaderFooterView(!1),n.footerView=n.createHeaderFooterView(!0),n._renderHeaderFooterView(o),!0===t&&null!=n.note&&(e.each(n.blockViews,function(t){t.enablePageMode(n.options.pageType)}),n._setPageInfo(0))},_getBlockViewIndexByCID:function(t){var n,o=this;return e.some(o.blockViews,function(e,o){return e.cid===t&&(n=o,!0)}),n},_onBlockViewHeightChanged:function(t){var e,n=this;null!=(e=n._getBlockViewIndexByCID(t))&&n._setPageInfo(e)},_onContentParseDone:function(){this.isInPageMode()&&this._calcNoteViewFrameHeight()},_onPageBreakInserted:function(){},_onPageBreakPosChanged:function(){},_setPageInfo:function(t,e){var n,o,r,i,s=this;if(s.isInPageMode()&&null!=s.blockViews&&0!==s.blockViews.length&&null!=(n=s.blockViews[t])&&null!=n.cid)if(s._setPageInfoInBatch(t),!0===e&&(s._pageBatchTimer=null),s._pageBatchPendingQueue.length>0){if(null==s._pageBatchTimer){for(i=null;null==i&&s._pageBatchPendingQueue.length>0;)r=s._pageBatchPendingQueue.shift(),o=s.blockViews[r.index],i=null!=o&&o.cid===r.cid?r.index:s._getBlockViewIndexByCID(r.cid);null!=i&&(s._pageBatchTimer=setTimeout(s._setPageInfo.bind(s,i,!0),10))}}else s._pageBatchTimer=null,s.note.isParsingData()?s.options.noteviewFrame.height("auto"):s._calcNoteViewFrameHeight()},_setPageInfoInBatch:function(t){var e,n,o,r,i,s,a,l,c=this,u=Date.now();if(null!=c.blockViews&&0!==c.blockViews.length&&null!=t&&null!=(o=c.blockViews[t]))for(e=0===t?0:o.getFirstTransPageIndex();t<c.blockViews.length;){if(o=c.blockViews[t],0===t)a=o.resetPageInfo(0,0),n=0;else{if(r=c.blockViews[t-1],null==(n=r.getLastTransPageIndex()))break;s=r.getBottomPosInPage(n),-1===s&&(s=0),a=o.resetPageInfo(n,s)}if(t++,null!=n&&null!=e&&n-e,!0===a){if(M.isImage(o.block)&&o.isOnFloat()&&(l=n+1),(null==l||l<=n)&&Date.now()-u>100){i=c.blockViews[t],null!=i&&c._pageBatchPendingQueue.push({cid:i.cid,index:t});break}}else if(null==l||l<=n)break}},destroy:function(){this.off(),this._unbindEventsForNote(),this._unbindEventsForDoc(),this.options.editor&&(this.options.editor=null),e.each(this.blockViews,function(t){t.destroy()})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(2).BlockTypes,o=n(42),r={};return r[e.ATTACHMENT]=n(806),r[e.CATALOGUE]=n(807),r[e.HANDWRITE]=n(810),r[e.HEADING]=n(811),r[e.HR]=n(812),r[e.IMAGE]=n(813),r[e.LIST_ITEM]=n(816),r[e.PARAGRAPH]=n(61),r[e.TABLE]=n(270),r[e.TODO]=n(853),r[e.QUOTE]=n(854),r[e.UNKNOWN]=n(855),r[e.MACRO]=n(856),function(t){var e=r[t];return e||o}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(11),r=n(13),i=n(4),s=n(8);return e.View.extend({className:"bulb__page-break-view",templateName:"page_break_view",PLACEHOLDER_PREFIX:"p_",_$placeholder:null,_$pageBreak:null,_$container:null,_isAtViewBeginning:null,_topBlankHeight:null,_bottomBlankHeight:null,coincide:function(){var t,e,n=this;t=n._getOffsetTopPos(n.getPlaceholder()),e=t+n.getTopBlankHeight(),i.log("placeHolderTop/pageBreakTop/topBlankHeight:",t,e,n.getTopBlankHeight()),n.getPageBreak().offset({top:e})},destroy:function(){var t=this;t._$pageBreak.remove(),t._$placeholder.remove()},getPlaceholder:function(){return this._$placeholder},getPageBreak:function(){return this._$pageBreak},getTopBlankHeight:function(){return this._topBlankHeight},initialize:function(t){var e,n,a,l,c=this,u=t.pageIndex;c._topBlankHeight=t.topBlankHeight||0,c._bottomBlankHeight=t.bottomBlankHeight||0,c._$placeholder=t.placeholder||s('<div class="bulb__page-break-placeholder"></div>'),c._$pageBreak=s(r.render("common",c.templateName,{})),c._$container=t.container,c._$pageBreak.prepend(t.noteView.createHeaderFooterView(!0).$el),c._$pageBreak.append(t.noteView.createHeaderFooterView(!1).$el),l=c._$container.find('[data-page-id="'+u+'"]'),0!==l.length&&l.attr("data-page-cid")===c.cid&&(i.debugAlert("should not create existing pageBreak for same view"),l.remove()),c._topBlankHeight<0&&(i.debugAlert("topBlankHeight should not be less than 0"),c._topBlankHeight=0),c._bottomBlankHeight<0&&(i.debugAlert("bottomBlankHeight should not be less than 0"),c._bottomBlankHeight=0),c._$pageBreak.attr("data-page-id",u),c._$pageBreak.attr("data-page-cid",c.cid),c._$pageBreak.attr("contenteditable","false"),e=c._$pageBreak.find(".bulb__bottomSpan"),n=c._$pageBreak.find(".bulb__topSpan"),a=c._$pageBreak.find(".bulb__middleSpan"),n.outerHeight(o.PAGE_SPLIT_BLANK_HEIGHT),e.outerHeight(o.PAGE_SPLIT_BLANK_HEIGHT),a.outerHeight(o.PAGE_SPLIT_MIDDLE_HEIGHT),c._$pageBreak.appendTo(c._$container),c._$pageBreak.height(n.outerHeight()+a.outerHeight()+e.outerHeight()),c._$placeholder.attr("data-page-id",c.PLACEHOLDER_PREFIX+c._$pageBreak.attr("data-page-id")),c._$placeholder.attr("data-page-cid",c.PLACEHOLDER_PREFIX+c._$pageBreak.attr("data-page-cid")),c._$placeholder.attr("contenteditable","false"),c._$placeholder.height(c._$pageBreak.height()+c._topBlankHeight+c._bottomBlankHeight)},isAtViewBeginning:function(){return!0===this._isAtViewBeginning},setAtViewBeginning:function(t){this._isAtViewBeginning=!0===t},_getOffsetTopPos:function(t){return t.offset().top}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(265);var e=n(42),o=n(8),r=n(1),i=n(13),s=n(2).AttachmentRange,a=n(33),l=n(39),c=n(17),u=n(268),p=n(11),d=n(137);return e.extend({className:"bulb__block-view bulb__attachment-view",DEFAULT_HEIGHT:100,timer:null,events:{"dblclick .bulb__attachment-container":"_onImgDblclick","mousemove .bulb__attachment-container":"_onMouseMove","mouseout .bulb__attachment-container":"_onMouseOut","click .bulb__attachment-download":"_onDownloadClick","dragstart .bulb__attachment-mask":"_onDragstart","dragend .bulb__attachment-mask":"_onDragEnd"},_isFloatSwitch:!1,_viewFrameHeight:null,initialize:function(){var t=this;e.prototype.initialize.apply(t,arguments),r.bindAll(t,"_onStyleChange","_onContentChange","_onMouseMove","_onMouseOut"),t.block.on("style-change",t._onStyleChange),t.block.on("content-change",r.debounce(t._onContentChange,100)),t.bindSelectionEvents()},render:function(){var t,n,r,s,a,h=this,f=h.block,g=f.getSource(!0),m=f.getFileName(),_=f.getFileLength();c.IS_PC&&(g=u(g)),(c.IS_WEB_NOTE||c.IS_WEB_GROUP)&&!0===f.getFakeLoading()&&(g=p.LOADING_IMAGE_PATH,f.setFakeLoading(!1)),t=d.getFileType(m),n=t?"bulb__svg--type_"+t+"_large":"bulb__svg--type_other_large",s=void 0===_?"":d.getSizeString(_),a=d.splitFileFullName(m),r=i.render("common","attachment-view-attachment-container",{name:n,fileName:a.fileName,fileType:a.fileType,size:s,title:m,draggable:!0}),h.$el.find(".bulb__attachment-container").remove(),h.$el.append(r),h._viewFrameHeight=h.$el.outerHeight(!0)-h.$el.height(),h.$el.find(".bulb__attachment-container").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-attachment","tooltipster-attachment-customized"],side:"bottom",delay:[800,300],arrow:!1,functionPosition:function(t,e,n){var r,i,s=o(e.tooltipClone);return r=h.mousePosY+s.height()>document.body.clientHeight?h.mousePosY-s.height()+10:h.mousePosY-10,i=h.mousePosX+s.width()>document.body.clientWidth?h.mousePosX-s.width()-10:h.mousePosX+10,n.coord.top=r>0?r:0,n.coord.left=i>0?i:0,n}}),h._renderStyles(),l.isSafari()&&h.$el.find(".bulb__attachment-container").attr("contenteditable","true"),e.prototype.render.apply(h,arguments)},_renderStyles:function(){var t=this,e=t.block.getBlockStyles();r.each(e,function(e,n){t._setStyle(n,e)})},_setStyle:function(t,e){var n=this,o=n.$el;switch(t){case"align":o.css("text-align",e);break;case"float":o.css("float")!==e?(n._isFloatSwitch=!0,o.css("float",e)):n._isFloatSwitch=!1}},_onStyleChange:function(t,e){var n=this;n._setStyle(t,e),n.trigger("view-height-changed",n.cid)},_onContentChange:function(){var t=this;t.render(),t.trigger("view-height-changed",t.cid)},getImgElement:function(){return this.$el.find("img").get(0)},getAttachmentContainerElm:function(){return this.$el.find(".bulb__attachment-container").get(0)},convertToNativeRange:function(){var t=this,e=document.createRange(),n=t.$el.get(0);return e.setStart(n,0),e.setEnd(n,n.childNodes.length),e},parseNativeRange:function(t,e,n){var o=this;if(n||a.isNodeInRange(o.getAttachmentContainerElm(),t)||a.isRangeInNode(o.el,t)||o._isSelected())return new s({block:e})},_removeFocusedClass:function(){this.$el.removeClass("bulb__focused")},_addFocusedClass:function(){this.$el.addClass("bulb__focused")},onDrawRange:function(t){var e,n=this;t?(n._addFocusedClass(),e=document.createRange(),e.selectNodeContents(n.el.firstChild),a.setRange(e,window)):(n._removeFocusedClass(),n.selectAttachment())},_onImgDblclick:function(){var t=this,e=t.block.getResource(),n=t.block.getFileName();c.IS_PC&&t.trigger("yne-open-attachment",e,n)},_onDownloadClick:function(){var t=this,e=t.block,n=e.getResource(),o=e.getFileName();t.trigger("yne-download-attachment",n,o)},_onDragstart:function(){this.$el.find(".bulb__attachment-mask").css("opacity",1)},_onDragEnd:function(){this.$el.find(".bulb__attachment-mask").css("opacity",0)},_isSelected:function(){return this.$el.find(".bulb__attachment-container").hasClass("bulb__selected")},selectAttachment:function(t){t?this.$el.find(".bulb__attachment-container").addClass("bulb__selected"):this.$el.find(".bulb__attachment-container").removeClass("bulb__selected")},disablePageMode:function(){var t=this;e.prototype.disablePageMode.apply(t),t.$el.css("max-height","none")},_isPagingContinue:function(){return this._isFloatSwitch},_setViewMaxHeight:function(t){var e,n=this,o=n._pageInfo[t-1],r=0,i=n._getTopPosInPage(t);o&&(r=n._getPageBreakBottomPosInView(t-1)),e=n.PAGE_HEIGHT+r-n._viewFrameHeight-i,e<p.PAGE_SPLIT_BLANK_HEIGHT/2&&(e=p.PAGE_SPLIT_BLANK_HEIGHT/2),n.$el.css("max-height",e)},_onMouseMove:function(t){var e=this;clearTimeout(e.timer),e.timer=setTimeout(function(){e.mousePosX=t.originalEvent.x||t.originalEvent.layerX||0,e.mousePosY=t.originalEvent.y||t.originalEvent.layerY||0},200)},_onMouseOut:function(){clearTimeout(this.timer)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(8),o=n(13),r=n(11),i=n(40),s=n(61),a=n(111),l=n(58),c=n(2),u=c.FontMaps,p=c.SupportedInlineStyles,d=c.ParagraphRange,h=c.Rich2HtmlConvertor,f=s.extend({className:"bulb__block-view bulb__catalogue-view",events:{"click a":"_onAnchorClick"},_forcePageBreakBegin:!0,initialize:function(t){s.prototype.initialize.apply(this,arguments);var e=this,n=e.block;e.editor=t.editor,n.on("sorting-change",function(){e._renderSorting()}),n.on("focus",e.focus.bind(e)),n.on("blur",e.blur.bind(e))},_renderTemplate:function(){var t=this;t.$el.html(o.render("common","catalogue_view",{isFirst:t.block.isFirst()}))},_renderText:function(){var t,n=this,o=n.block,r=o.getReadOnlyText(),s=n._inlineStyleViewMapper,a=n.$el.find(".bulb__para-text"),l=e("<a></a>");t=h.rich2html(r,{styleRules:{color:function(t){var e=t.color;return t.href!==p.getDefault("href")&&i.equals(t.color,"blue")?"#003884":null!=e&&s?s.valueToView("color-catalogue",e):void 0},"font-family":function(t){var e,n=t["font-family"];return null!=n&&s&&(e=s.valueToView("font-family",n)),n!==e?e:u.getAllValueByFont(n)||n}}}),l.html(t),a.html(l),n._renderSorting(),n._addLinkMenu()},_onAnchorClick:function(t){var e=this,n=e.block.getHref();t.stopPropagation(),a.test(n)?e.trigger("open-link",n):e.trigger("inner-goto",n)},_addLinkMenu:function(){var t,e=this,n=e.block,o=e.$el.find("a");o.off("hover"),o.hover(function(){l.isNoteLinkUrl(n.getHref())||e.isCollabLocked()||(t=new d({start:0,end:n.getLength(),block:n}),e.trigger("link-menu-show",{linkNode:o[0],href:n.getViewHref(),range:t,block:n}))},function(){e.trigger("link-menu-hide")})},_renderSorting:function(){this._renderFirst(),this._renderLast()},_renderFirst:function(){var t,e,n=this,o=n.block,r=n.$el;if(!o.isFirst())return r.removeClass("bulb__catalogue-first");r.addClass("bulb__catalogue-first"),t=r.find(".bulb__catalogue-refresh"),e=r.find(".bulb__catalogue-delete"),t.off("click"),e.off("click"),t.on("click",function(){n.trigger("command","comp.RefreshCatalogue",{ownerId:o.getOwnerId()})}),e.on("click",function(){n.trigger("command","comp.RefreshCatalogue",{ownerId:o.getOwnerId(),delete:!0})})},_renderLast:function(){var t=this;if(!t.block.isLast())return t.$el.removeClass("bulb__catalogue-last");t.$el.addClass("bulb__catalogue-last")},_setStyle:function(t,e){var n,o=this,i=o.$el,a=i.find(".bulb__para-text"),l=o.block;switch(t){case"indent":n=l.getBlockStyle("text-indent"),e=n+e,e=e>0?e:0,a.css("text-indent",e*r.INDENT_WIDTH||"");break;case"text-indent":n=l.getBlockStyle("indent"),e=n+e,e=e>0?e:0,a.css("text-indent",e*r.INDENT_WIDTH||"");break;case"href":i.find("a").attr("href",l.getViewHref());break;default:s.prototype._setStyle.call(o,t,e)}},_onLockedChange:function(t){var e=this,n=e.block.getOwnerList();s.prototype._onLockedChange.call(e,t),n.updateLockState(e.isLocked())},getOwnerId:function(){return this.block.getOwnerId()},selectCatalogue:function(t){var e=this.block;t?e.trigger("select"):e.trigger("remove-select")},focus:function(){this.editor.isReadOnly()||this.$el.addClass("bulb__catalogue-focus")},blur:function(){this.editor.isReadOnly()||this.$el.removeClass("bulb__catalogue-focus")},_getHeightInPage:function(t){var e=f.__super__._getHeightInPage.apply(this,[t]),n=parseInt(this.$el.css("marginTop")),o=parseInt(this.$el.css("marginBottom"));return isNaN(n)||(e+=n),isNaN(o)||(e+=o),e},destroy:function(){s.prototype.destroy.apply(this,arguments),this.block.off()}});return f}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(809)],void 0!==(r=function(t,e,n){"use strict";return function(t){var e,o=[];for(e=0;e<t.length;e++)n(t,e)>65535?(o.push(t.slice(e,e+2)),e++):o.push(t[e]);return o}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(t,e){if(null!=String.prototype.codePointAt)return String.prototype.codePointAt.call(t,e);if(null===t||void 0===t)throw new TypeError("codePointAtString");t=String(t);var n,o,r=t.length,i=isNaN(e)?0:Number(e);return i<0||i>=r?void 0:(n=t.charCodeAt(i),n>=55296&&n<=56319&&r>i+1&&(o=t.charCodeAt(i+1))>=56320&&o<=57343?1024*(n-55296)+o-56320+65536:n)}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(42),n(13),n(17),n(33),n(2)],void 0!==(r=function(t,e,n,o,r,s,a){"use strict";var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){var n=this;t.prototype.initialize.call(this,e),n._viewProps={block:e.block},n.bindSelectionEvents()},e.prototype.convertToNativeRange=function(){var t=this,e=document.createRange(),n=t.$el.get(0);return e.setStart(n,0),e.setStart(n,n.childNodes.length),e},e.prototype.getImgElement=function(){return this.$el.find("img").get(0)},e.prototype.onDrawRange=function(t){var e,n=this;t?(n._addFocusedClass(),e=document.createRange(),e.selectNodeContents(n.$el.children(".bulb__handwrite-copy-hack")[0]),s.setRange(e,window)):(n._removeFocusedClass(),n.selectHandWrite(!1))},e.prototype.parseNativeRange=function(t,e,n){var o=this;if(n||o._isHandWriteInNativeRange(t)||o._isNativeRangeInHandWriteView(t)||o._isSelected())return new a.HandWriteRange({block:e})},e.prototype.selectHandWrite=function(t){t?this.$el.find(".bulb__attachment-container").addClass("bulb__selected"):this.$el.find(".bulb__attachment-container").removeClass("bulb__selected")},e.prototype.render=function(){var e,n,i=this;t.prototype.render.call(this),n=i.block.getSource(r.IS_PC),e=o.render("common","handwrite-view-container",{src:n}),i.$el.html(e)},e.prototype._addFocusedClass=function(){this.$el.addClass("bulb__focused")},e.prototype._isHandWriteInNativeRange=function(t){var e,n=this,o=n.getImgElement(),r=window.Range;return e=o.ownerDocument.createRange(),e.selectNode(o),t.compareBoundaryPoints(r.START_TO_START,e)<1&&t.compareBoundaryPoints(r.END_TO_END,e)>-1},e.prototype._isNativeRangeInHandWriteView=function(t){var e,n=this,o=n.el;return e=t.commonAncestorContainer,3===e.nodeType&&(e=e.parentNode),!(e!==o&&!$.contains(o,e))},e.prototype._isSelected=function(){return this.$el.find(".bulb__attachment-container").hasClass("bulb__selected")},e.prototype._removeFocusedClass=function(){this.$el.removeClass("bulb__focused")},e}(n);return delete l.prototype.constructor,l.prototype.className="bulb__block-view bulb__handwrite-view",n.extend(l.prototype)}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(61);return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},className:"bulb__block-view bulb__heading-view",_renderText:function(){this.$el.find(".bulb__para-text").attr("id",this.block.getId()),e.prototype._renderText.apply(this)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(42),o=n(2).HrRange;return e.extend({className:"bulb__block-view bulb__hr-view",initialize:function(){var t=this;e.prototype.initialize.apply(t,arguments)},render:function(){var t=this,n=t.block,o=n.getBlockStyle("width"),r=n.getBlockStyle("height");t.$el.html('<div class="bulb__hr-container"></div>').css({"text-align":n.getBlockStyle("align")}).find(".bulb__hr-container").css({width:o+"%",height:r,backgroundColor:n.getBlockStyle("color")}),e.prototype.render.apply(t,arguments)},convertToNativeRange:function(){var t=this,e=document.createRange(),n=t.$el.get(0);return e.setStart(n,0),e.setEnd(n,n.childNodes.length),e},parseNativeRange:function(t,e,n){var r=this;if(n||r._isHrInNativeRange(t))return new o({block:e})},_isHrInNativeRange:function(t){var e,n=this,o=n.$el.find(".bulb__hr-container").get(0);return e=o.ownerDocument.createRange(),e.selectNode(o),t.compareBoundaryPoints(Range.START_TO_START,e)<1&&t.compareBoundaryPoints(Range.END_TO_END,e)>-1}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){"use strict";var e=n(42),o=n(8),r=n(1),i=n(13),s=n(2).ImageRange,a=n(4),l=n(814),c=n(33),u=n(39),p=n(268),d=n(269),h=n(132),f=n(17),g=n(11),m=n(815);return e.extend({className:"bulb__block-view bulb__image-view",DEFAULT_HEIGHT:100,_isFloatSwitch:!1,_$imgDiv:null,_$imgContainerDiv:null,_$imgTitle:null,_viewFrameHeight:null,_isImgLoaded:null,events:{"mousedown .bulb__resize-handle":"_onMouseDownResizeHandle","mousedown img":"_onMouseDownImgPreview",mouseenter:"_onMouseEnter",mouseleave:"_onMouseLeave","mouseleave .bulb__menu-wrapper":"_onMouseLeaveMenuWrapper","click .bulb__yne-button-item":"_onButtonItemClick","click .bulb__yne-popup-item":"_onPopupMenuItemClick","dblclick img":"_onImgDblclick","click img":"_onImgClick","mousedown .bulb__image-title":"_onMouseDownImageTitleHandle"},_imageResizeStartInfo:null,_imageResizeEventNS:null,_imgHeightInData:null,_imgWidthInData:null,_imgHeightBeforeLoad:null,_imgLoadWidth:null,_disableOCR:null,_OCRHighlightInfo:null,_OCRHighlightItem:null,initialize:function(t){var n=this;e.prototype.initialize.apply(n,[t]),n._imageResizeEventNS=".bulb__img-resize-"+r.uniqueId(),r.bindAll(n,"_onStyleChange","_onContentChange","_onChangeImageTitle","_onUpdateImageTitle","_editImgTitle","_handlerImgTitle","_onWinResize","_onHighlight"),n.block.on("edit-image-title",n._editImgTitle),n.block.on("style-change",n._onStyleChange),n.block.on("content-change",n._onContentChange),n.block.on("extra-info-change",n._onContentChange),n.block.on("view-resize",n._onWinResize),n.block.on("high-light",n._onHighlight),n.bindSelectionEvents(),n.on("resize",n._onWinResize),n.on("locked-change",function(){n.isLocked()&&(n.trigger("img-title-edit-exit"),n._removeFocusedClass())}),n._disableOCR=!!t.disableOCR||!f.IS_PC,n._OCRHighlightItem=[],n._OCRHighlightInfo=null},render:function(){var t,n=this,o=n.block,s=o.getSource(!0),a=o.getTitle(),l=o.getImageInfo(),c=null,m=null,_=s;l&&(s="/yws/res/thumb/"+l.resId,l.rawWide<=620?(c=l.rawWide,m=l.rawHeight):c=620),n._imgLoadWidth=c,f.IS_PC&&(s=p(s)),(f.IS_WEB_NOTE||f.IS_WEB_GROUP)&&!0===o.getFakeLoading()&&(s=g.LOADING_IMAGE_PATH,o.setFakeLoading(!1)),t=i.render("common","image-view-image-container",{randomId:r.uniqueId("img-view"),width:c,height:m,src:"",hasOCR:!n._disableOCR}),n.$el.html(t),n._isImgLoaded=!1,n._$imgContainerDiv=n.$el.find(".bulb__image-container"),n._$imgDiv=n.$el.find("img"),n._$imgTitle=n.$el.find(".bulb__image-title"),n._viewFrameHeight=n.$el.outerHeight(!0)-n.$el.height(),n._imgHeightInData=o.getBlockStyle("height",!0),n._imgWidthInData=o.getBlockStyle("width",!0),n._imgHeightBeforeLoad=n._$imgDiv.height(),n._$imgDiv.load(function(){n.$el.hasClass("bulb__focused")&&n._onUpdateImageTitle(!0),n._onImgLoaded()}),n._$imgDiv.attr("src",h.getURL(d.addIfNeeded(s))),n._renderStyles(),u.isSafari()&&n._$imgContainerDiv.attr("contenteditable","true"),e.prototype.render.apply(n,arguments),n.title=a,a?n._$imgTitle.text(a):n._$imgTitle.hide(),(f.IS_WEB_NOTE||f.IS_WEB_GROUP)&&n._loadOriginImg(_)},_renderStyles:function(){var t=this,e=t.block.getBlockStyles();r.each(e,function(e,n){t._setStyle(n,e)})},_setStyle:function(t,e){var n,r=this,i=r.$el,s=o("body").find(".bulb__image-title-hidden");switch(t){case"align":i.css("text-align",e),s.length&&s.css("text-align",e);break;case"width":n=r.getImgElement(),null==e&&null==r._imgLoadWidth?o(n).css("width",""):null==e&&r._imgLoadWidth?o(n).css("width",r._imgLoadWidth):r._setImageWidth(e);break;case"float":i.css("float")!==e?(r._isFloatSwitch=!0,i.css("float",e)):r._isFloatSwitch=!1,!1===r.isOnFloat()&&r._resetImageMaxWidth();break;case"height":break;default:a.error("unkown style name:",t)}},_onStyleChange:function(t,e){var n=this;n._setStyle(t,e),n.trigger("view-height-changed",n.cid)},_onContentChange:function(){var t=this,e=t.block,n=t.$el,o=e.getTitle(),r=e.getSource(!0);f.IS_PC&&(r=p(r)),r=h.getURL(d.addIfNeeded(r)),n.find("img").attr("src",r),t._$imgTitle.text(o),t.title=o,t._handlerImgTitle(),this.trigger("img-title-edit-exit"),t.trigger("view-height-changed",t.cid)},getImgElement:function(){return this.$el.find("img").get(0)},convertToNativeRange:function(){var t=this,e=document.createRange(),n=t.$el.get(0);return e.setStart(n,0),e.setEnd(n,n.childNodes.length),e},parseNativeRange:function(t,e,n){var o=this;if(n||c.isNodeInRange(o.getImgElement(),t)||c.isRangeInNode(o.el,t))return new s({block:e})},_showButtonGroup:function(){var t=this;t._hidePopupMenu(),l.adjustMenu(t.$el)},_hideButtonGroup:function(){var t=this;t.$el.find(".bulb__menu-wrapper").hide(),t._hidePopupMenu()},_onButtonItemClick:function(t){var e=this,n=t.currentTarget,o=n.dataset.buttonName;if(!e.isLocked())switch(o){case"menu":default:e._togglePopupMenu()}},_togglePopupMenu:function(){var t,e,n,o,r,i,s=this,a=s.$el.find(".bulb__yne-popup-menu");a.toggle(),a.is(":visible")?(t=s.$el.find(".bulb__yne-button-group").outerHeight(),e=a.get(0).getBoundingClientRect(),n=e.top,r=e.height,i=document.documentElement.clientHeight,o=n+r>i?-(r+5):t+5,a.css({top:o+"px"})):a.css({top:""})},_hidePopupMenu:function(){var t=this,e=t.$el.find(".bulb__yne-popup-menu");e.hide(),e.css({top:""})},_onMouseEnter:function(){var t=this,e=t.block;t.isLocked()||e.isReadOnly()||t._showButtonGroup()},_onMouseLeave:function(){var t=this;t.isLocked()||t._hideButtonGroup()},_onMouseLeaveMenuWrapper:function(){var t=this;t.isLocked()||t._hidePopupMenu()},_onPopupMenuItemClick:function(t){var e=this,n=t.currentTarget,i=o(n).attr("data-cm-name"),s={},a=e.block;if(!e.isLocked()&&!a.isReadOnly()){switch(e._hidePopupMenu(),i){case"image-title":e._editImgTitle();break;case"float-left":case"float-right":case"clear-float":s.float="float-left"===i?"left":"float-right"===i?"right":"none";break;case"clear-resize":s.width=null;break;case"delete":e.trigger("command","comp.DeleteNoteRange",{range:null,imageBlockView:e});break;case"download":e.trigger("yne-download-image",a.getSource(!0));break;case"image-ocr":e.trigger("yne-image-ocr",m(a))}r.isEmpty(s)||e.trigger("command","comp.ApplyStyles",{range:null,imageBlockView:e,blockStyles:s})}},_removeFocusedClass:function(){var t=this;!t.$el.hasClass("bulb__focused")||t.isLocked()||t.block.isReadOnly()||(t.trigger("img-title-edit-end"),t.trigger("img-title-edit-exit"),t._handlerImgTitle()),t.$el.removeClass("bulb__focused")},_onUpdateImageTitle:function(t){var e=this,n=function(){var t=e._$imgTitle.offset();return{left:t.left,top:t.top,width:e.$el.width(),height:e._$imgTitle.height(),textAlign:e.block.getStyles("align")}};if(!e.isLocked()&&!e.block.isReadOnly())return t?void e.trigger("img-title-edit-update",n):e.$el.hasClass("bulb__focused")?void 0:void e.trigger("img-title-edit-start",e.block.getTitle(),n,e._onChangeImageTitle,e._$imgTitle,e.block.getId())},_addFocusedClass:function(){var t=this;t._onUpdateImageTitle(),t.$el.addClass("bulb__focused")},_drawNativeRange:function(){var t=this,e=document.createRange(),n=t.getImgElement();e.selectNode(n),e.collapse(!0),c.setRange(e)},onDrawRange:function(t){var e,n=this;t&&!n.isLocked()?(n._addFocusedClass(),e=document.createRange(),e.selectNodeContents(n.el.lastChild),c.setRange(e,window)):n._removeFocusedClass()},_onMouseDownResizeHandle:function(t){var e,n,r=this,i=r.getImgElement(),s=t.pageX,a=t.pageY,l={centerX:0,centerY:0,startWidth:0,startHeight:0,startToCenter:0},c=r.block;r.isLocked()||c.isReadOnly()||i&&(e=o(i),l.startWidth=e.width(),l.startHeight=e.height(),n=e.offset(),l.centerX=n.left+l.startWidth/2,l.centerY=n.top+l.startHeight/2,l.startToCenter=Math.sqrt(Math.pow(l.centerX-s,2)+Math.pow(l.centerY-a,2)),r._imageResizeStartInfo=l,r._bindEventsForResize(),t.preventDefault(),r.$el.css("height",r.$el.height()))},_bindEventsForResize:function(){var t=this,e=t.el.ownerDocument,n=t._imageResizeEventNS;t._unbindEventsForResize(),o(e).bind("mousemove"+n,t._onResizeMove.bind(t)).bind("mouseup"+n,t._onResizeEnd.bind(t))},_unbindEventsForResize:function(){var t=this,e=t.el.ownerDocument;o(e).unbind(t._imageResizeEventNS)},_onResizeMove:function(t){this._handleImageResize(t.pageX,t.pageY)},_onResizeEnd:function(t){var e=this;e.$el.css("height","auto"),e._unbindEventsForResize(),e._handleImageResize(t.pageX,t.pageY,!0)},_handleImageResize:function(t,e,n){var o,r,i=this,s=i._imageResizeStartInfo,l={};if(s){if(o=Math.sqrt(Math.pow(s.centerX-t,2)+Math.pow(s.centerY-e,2)),r=o*s.startWidth/s.startToCenter,o*s.startHeight/s.startToCenter,!i.getImgElement())return void a.warn("no image element!");if(i._setImageWidth(r),!0!==n)return void i._onUpdateImageTitle(!0);l.width=i._$imgDiv.width(),l.height=i._$imgDiv.height(),i.trigger("command","comp.ApplyStyles",{range:null,imageBlockView:i,blockStyles:l})}},_onImgDblclick:function(){var t=this,e=t.block.getSource(!0);f.IS_PC&&t.trigger("yne-open-image",e)},_onImgClick:function(t){var e=this;e.trigger("img-title-edit-end"),(e.showImgPreview||e.isLocked()||e.block.isReadOnly())&&e.trigger("get-image-items",e.block),t.preventDefault(),t.stopPropagation()},_onMouseDownImgPreview:function(){var t=this;t.showImgPreview=t.$el.hasClass("bulb__focused")},_onChangeImageTitle:function(t,e,n,o){var i=this,s=i.block,a=[],l=[],c={};return t!==s.getTitle()&&(a.push({source:s.getSource(),title:t}),l.push(s),r.extend(c,{resources:l,resProps:a}),e&&r.extend(c,{endingRange:n}),i.trigger("command","comp.ReplaceResource",c)),!t&&o&&i._$imgTitle.hide(),!0},_onMouseDownImageTitleHandle:function(t){t.preventDefault()},onDestroy:function(){this.trigger("img-title-edit-exit")},_onWinResize:function(){var t=this;t.$el.hasClass("bulb__focused")&&t._onUpdateImageTitle(!0)},_onHighlight:function(t,e,n){var o=this,r=o.block,i=r.getHighlight(t,e);i&&o._convertToData(i,n)},_convertToData:function(t,e){var n,o=this,i=o._$imgTitle.get(0).firstChild;o._OCRHighlightInfo=null,r.each(t,function(t){null==t.imageInfo?(n=document.createRange(),n.setStart(i,t.start),n.setEnd(i,t.end),e(n)):o._OCRHighlightInfo=t.imageInfo}),o._createHighlightMark()},_editImgTitle:function(){var t=this;setTimeout(function(){t._$imgTitle.show(),t._onUpdateImageTitle(!0),t.trigger("img-title-edit-focus")},0)},_handlerImgTitle:function(){var t=this;t.title?t._$imgTitle.show():t._$imgTitle.hide()},clearHighlight:function(){this._OCRHighlightInfo=null,this._clearHighlightMark()},_clearHighlightMark:function(){r.each(this._OCRHighlightItem,function(t){t.remove()}),this._OCRHighlightItem=[]},disablePageMode:function(){var t=this;e.prototype.disablePageMode.apply(t),t.$el.hasClass("bulb__focused")&&t._onUpdateImageTitle(!0),t.$el.css("max-height","none"),t._resetImageMaxWidth()},_contentHeightOverflowCheck:function(){var t,e,n,o,r=this,i=r._$imgTitle.height(),s=0,a=r._$imgDiv.height();return r._isInPageMode()?(t=r.getLastTransPageIndex(),null!=t&&(e=r._getTopPosInPage(t),a=Math.ceil(a),s=Math.ceil(e+a+i+r._viewFrameHeight)-r.PAGE_HEIGHT),s>0&&(n=r._$imgDiv.height()-s,n<g.PAGE_SPLIT_BLANK_HEIGHT/2&&(n=g.PAGE_SPLIT_BLANK_HEIGHT/2),o=r._$imgDiv.width()*n/r._$imgDiv.height(),r._$imgDiv.css("max-width",o)),s):s},_isPagingContinue:function(){return this._isFloatSwitch},_onImgLoaded:function(){var t,e=this;e._isImgLoaded=!0,e.$el.height("auto"),e._$imgDiv.height("auto"),t=e._$imgDiv.height(),e._imgHeightInData!==t||null==e._imgWidthInData?(e.block.setStyles("height",t),e.block.setStyles("width",e._$imgDiv.width()),e._imgHeightInData=t):e._imgHeightBeforeLoad!==t&&e.trigger("view-height-changed",e.cid),e._createHighlightMark()},_createHighlightMark:function(){var t=this,e=t._OCRHighlightInfo;if(t._clearHighlightMark(),null!=e){var n=t._$imgContainerDiv.width()/e.width;r.each(e.pos,function(e){var r=o(i.render("common","high_light_item",{top:e.top*n-1,left:e.left*n-2,height:(e.bottom-e.top)*n,width:(e.right-e.left)*n}));r.appendTo(t._$imgContainerDiv),t._OCRHighlightItem.push(r)})}},_resetImageMaxWidth:function(){var t=this;null!=t._$imgDiv&&t._$imgDiv.css("max-width","")},_setImageWidth:function(t){var e=this;null!=t&&(t=Math.ceil(t),e._$imgDiv.width(t),e._resetImageMaxWidth(),null!=e._imgHeightInData&&!1===e._isImgLoaded&&e._$imgDiv.height(Math.ceil(e._imgHeightInData*e._$imgDiv.width()/t)))},_setViewMaxHeight:function(t){var e=this,n=e._pageInfo[t-1],o=0,r=e._getTopPosInPage(t);n&&(o=e._getPageBreakBottomPosInView(t-1)),e.$el.css("max-height",e.PAGE_HEIGHT+o-e._viewFrameHeight-r),e._contentHeightOverflowCheck()},_loadOriginImg:function(t){var e=this;t=h.getURL(d.addIfNeeded(t)),o("<img />").attr("src",t).load(function(){e._$imgDiv.attr("src",t),e._$imgDiv.removeClass("bulb__filter-blur")}).error(function(){e._$imgDiv.unbind("error")}),e._$imgDiv.error(function(){e._$imgDiv.attr("src",t),e._$imgDiv.removeClass("bulb__filter-blur")})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(8)],void 0!==(r=function(t,e,n){"use strict";return function(){function t(){}return t.adjustMenu=function(t){var e=t.find(".bulb__menu-wrapper"),o=e.width(),r=n(t.children()[0]),i=t.offsetParent().width(),s=r.position().left;s<o&&r.width()<o?e.addClass("bulb__menu-wrapper-left"):e.removeClass("bulb__menu-wrapper-left"),i-s-r.width()<o?r.width()<o?(e.addClass("bulb__menu-wrapper-mini"),e.removeClass("bulb__menu-wrapper-right")):(e.addClass("bulb__menu-wrapper-right"),e.removeClass("bulb__menu-wrapper-mini")):(e.removeClass("bulb__menu-wrapper-mini"),e.removeClass("bulb__menu-wrapper-right")),e.show()},t}()}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return function(t){var e=t.getSource();if(e.startsWith("http")){var n=e.split("/");n.length>=2&&(e=n[n.length-2])}return e}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(61),r=n(13),i=n(2).ListItemMarker,s=n(39);return o.extend({className:"bulb__block-view bulb__list-item-view bulb__paragraph-view",_template:r.getTemplate("common","list_item_view"),_styleSheet:null,initialize:function(){var t=this;o.prototype.initialize.apply(t,arguments),t._initEvents()},_initEvents:function(){var t=this,n=t.block,o=n.getOwnerList();if(!o)throw"no ownerList!";e.bindAll(t,"_onLevelChange","_onIndexChange","_onTypeChange","_onStyleChange"),n.on("level-change",t._onLevelChange),n.on("index-change",t._onIndexChange),o.on("type-change",t._onTypeChange),n.on("style-change",t._onStyleChange)},_renderLevel:function(){var t=this,e=t.block,n=e.getLevel(),o=t.$el.find(".bulb__li-box"),r=i.makeHtmlMarker(e);o.attr("data-level",n),r&&r.listStyleType&&o.attr("data-style-type",r.listStyleType)},_renderText:function(){var t=this;o.prototype._renderText.apply(t,arguments),t._renderMarkerText(),t._renderAlign()},_renderMarkerText:function(){var t,e=this,n=e.block.getText(),o=e.$el.find("li");o.attr("style",""),n.getLength()?t=i.convertToCssStyle(n.getStylesAtIndex(0),e._inlineStyleViewMapper):e.trigger("get-editing-styles",function(e){t=i.convertToCssStyle(e)}),t&&o.css(t)},_renderIndex:function(){var t=this,e=t.block;t.$el.find(".bulb__li-box").attr("start",e.getIndex())},render:function(){var t=this;o.prototype.render.apply(t,arguments),t._renderLevel(),t._renderIndex(),(s.isSafari()||s.isEdge())&&t.$el.addClass("bulb__no-inline"),t.trigger("view-height-changed",t.cid)},_renderTemplate:function(){var t=this,e=t.block;t.$el.html(t._template({isOrdered:e.isOrdered()}))},_onLevelChange:function(){var t=this;t._renderLevel(),t._renderIndex(),t.trigger("view-height-changed",t.cid)},_onIndexChange:function(){var t=this;t._renderIndex(),t.trigger("view-height-changed",t.cid)},_onTypeChange:function(){this.block.setLocked(!1),this.render()},_onStyleChange:function(t,e){var n=this,r=n.$el.find("li");switch(o.prototype._onStyleChange.apply(n,arguments),t){case"align":r.css("text-align",e)}},_renderAlign:function(){var t=this,e=t.$el.find("li"),n=t.block.getBlockStyle("align");n&&e.css("text-align",n)},_onContentChange:function(){var t=this;0===t.$el.find(".bulb__para-text").length&&t.render(),t._renderText(),t.trigger("view-height-changed",t.cid)},_getContentContainer:function(){return this.$el.find(".bulb__li-box")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(45);return function(t,n){if(e.isNode(t)){if(n=!1!==n,t.removeNode&&n)return t.removeNode(t,n);if(t.parentNode&&t.parentNode.removeChild){if(!n)for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);return t.parentNode.removeChild(t)}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(272);return e.View.extend({tagName:"div",className:"bulb__selection-layer",initialize:function(t){var e=t.tableView;this._tableView=e},render:function(){this.$el.attr("contenteditable","false")},hide:function(){this.$el.hide()},_computeViewRect:function(t){if(t){var e,n,r,i,s=this,a=s._tableView,l=t.getAsRectRange();if(l&&(e=l.getFirstCell(),n=l.getLastCell(),e&&e.cell&&n&&n.cell))return r=a.getBoundingRectByCell(e.cell),i=a.getBoundingRectByCell(n.cell),o.union(r,i)}},draw:function(t){var e=this,n=e._computeViewRect(t);n&&n.width>0&&n.height>0?e.$el.css({top:n.top,left:n.left,width:n.width,height:n.height}).show():e.$el.hide()}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(20),r=n(8),i=n(4),s=n(1),a=n(820),l=n(101),c=n(35),u=n(7),p=n(821),d=n(45),h=n(822),f=n(33),g=n(48),m=n(40),_=n(13),b=n(830),y=n(274),v=n(831),w=n(832),I=n(2),C=I.HandlerMap.StyleHandlers,M=I.TableCell,T=I.TableCellType,k=I.Convert,S=I.RichText,N=I.Lines,x=I.tagConfig,A=I.FontMaps;return n(833),e=o.View.extend({tagName:"div",className:"bulb__cell-edit",_editBox:null,_changeMonitor:null,_isDirty:!1,_editingCellId:null,_rangeWhenBlur:null,_editingInlineStates:null,events:{contextmenu:"_onPreventAndStop",mousedown:"_onStopPropagation",copy:"_onStopPropagation",cut:"_onStopPropagation",paste:"_onPaste",dblclick:"_onDblclick"},_onPreventAndStop:function(t){t.preventDefault(),t.stopPropagation()},_onStopPropagation:function(t){t.stopPropagation()},initialize:function(t){var e=this;e._table=t.table,e._tableView=t.tableView,e._styleRules=t.styleRules,e._mapper=t.mapper,e._isRendered=!1,e._commander=h({editHost:e}),e._uid=s.unique("cell-edit-view-"),e._eventNS="."+e._uid,delete e.options},render:function(){var t=this,e=_.render("common","table_cell_edit",{}),n=t.el;!0!==t._isRendered&&(t._isRendered=!0,n.innerHTML=e,t._editBox=n.querySelector(".bulb__cell-edit-box"),t._initEvents())},_initEvents:function(){var t=this,e=t._editBox;c.addListeners({focus:"_onFocus",blur:"_onBlur",textInput:"_onTextInput",compositionstart:"_onCompositionStart",compositionend:"_onCompositionEnd",click:"_onClick"},r(e),t),t._initKeyHandlerManager(),t._changeMonitor=p.create({el:e}),c.addListeners({"content-change":"_onContentChange"},t._changeMonitor,t),t._history=w.create(),c.addListeners({undo:"_onHistoryUndo",redo:"_onHistoryRedo",change:"_onHistoryChange"},t._history,t)},_bindKey:function(t){var e=this,n=e._keyMonitor;t&&(n||(e._keyMonitor=n=new l({el:e._editBox,beforeMatch:function(t){t.stopPropagation()}})),n.unbind(t),n.bind(t,function(n){e._keyHandlerManager&&e._keyHandlerManager.execWithKey(t,e,n)}))},_unbindKey:function(t){var e=this,n=e._keyMonitor;n&&t&&n.unbind(t)},_initKeyHandlerManager:function(){var t=this,e=new u({scope:"table-cell-edit"}),n=e.getAvailableHandlerNames();e.on("bind-key",t._bindKey.bind(t)),e.on("unbind-key",t._unbindKey.bind(t)),s.each(n,function(t){e.bind(t)}),t._keyHandlerManager=e},blur:function(){this._editBox.blur()},_onBlur:function(){var t=this;if(t._isOnToolbarLinkView())return void(t._rangeWhenBlur=t.getNativeRange());this.trigger("blur"),this._commitChange()},_onFocus:function(){},_recognizeLink:function(t){var e,n,o=this,r=o.getNativeRange(),i=o.getEditBox(),s=y.getUrlInfoBeforeRange(r,i)||{},a=o._compositionStartUriInfo||{};if(a.alreadyUrl||s.alreadyUrl)return t.preventDefault(),n=document.createElement("div"),n.innerHTML=t.data,e=g.create({name:"insertHTML",value:"<span></span>"+n.innerText,isNative:!0}),void o.execCommand(e);s.startNode&&(" "!==t.data||s.alreadyUrl||(t.preventDefault(),r=document.createRange(),r.setStart(s.startNode,s.startOffset),r.setEnd(s.endNode,s.endOffset),o.setNativeRange(r),e=g.create({name:"insertLink",value:s.uri}),o.execCommand(e),r=o.getNativeRange(),r.collapse(!1),o.setNativeRange(r),e=g.create({name:"insertHTML",value:" ",isNative:!0}),o.execCommand(e)))},_onTextInput:function(t){var e=this,n=t.originalEvent||t;n.stopPropagation(),e._recognizeLink(n)},_onCompositionStart:function(t){var e=this,n=e.getNativeRange(),o=e.getEditBox();t.stopPropagation(),this._isOnComposition=!0,this._compositionStartUriInfo=y.getUrlInfoBeforeRange(n,o)},_onCompositionEnd:function(t){t.stopPropagation(),this._isOnComposition=!1,this._compositionStartUriInfo=null},_onClick:function(t){t.stopPropagation()},_onContentChange:function(){var t=this;t._isDirty=!0,t._handleChangeWithDebounce()},_snapshot:function(){var t,e=this,n=e._editBox,o=e.getNativeRange();return o?(t=v.jsonlify(n,o),{html:n.innerHTML,jsonRange:t}):void i.warn("Failed to create snapshot",o)},_saveHistory:function(){var t=this,e=t._lastSnapshot||t._baseSnapshot,n=t._snapshot();t._history.save({snapshotBefore:e,snapshotAfter:n}),t._lastSnapshot=n},_clearTimeoutOfHandleChange:function(){var t=this;t._timeoutOfHandleChange&&(window.clearTimeout(t._timeoutOfHandleChange),t._timeoutOfHandleChange=null)},_handleChangeWithDebounce:function(){var t=this;t._clearTimeoutOfHandleChange(),t._timeoutOfHandleChange=window.setTimeout(function(){if(t._isOnComposition)return!1;t._saveHistory()},500)},_silentDo:function(t){var e=this;e._changeMonitor&&!1===e._changeMonitor.isMonitoring()?t():(e._changeMonitor.disconnect(),t(),e._changeMonitor.observe())},silentDocSelectionChangeDo:function(t){var e=this;e._stopListenerDocSelectionChange?t():(e._stopListenerDocSelectionChange=!0,t(),window.clearTimeout(e._timeoutForStopListenerDocSelectionChange),e._timeoutForStopListenerDocSelectionChange=window.setTimeout(function(){e._stopListenerDocSelectionChange=!1},0))},undo:function(){var t=this,e=t._history;return t._clearTimeoutOfHandleChange(),!!e&&e.undo()},redo:function(){var t=this,e=t._history;return t._clearTimeoutOfHandleChange(),!!e&&e.redo()},_restoreSnapshot:function(t){if(t){var e=this;e._clearTimeoutOfHandleChange(),e._silentDo(function(){var n;e._editBox.innerHTML=t.html,n=v.parseJSON(e._editBox,t.jsonRange),e.setNativeRange(n)})}},_onHistoryUndo:function(t){this._restoreSnapshot(t)},_onHistoryRedo:function(t){this._restoreSnapshot(t)},_onHistoryChange:function(){var t=this,e=t._history;t.trigger("cell-edit-view-history-change",{canUndo:e.canUndo(),canRedo:e.canRedo()})},_handleContentWhenShowAndEdit:function(t,e){var n,o,r=!1;return null!=t?t instanceof N||(n=t instanceof S?t:S.create(t+""),o=N.create({richText:n}),r=!o.isEmpty()):e.getType()===T.TEXT&&(o=e.getContent(),o.isEmpty()&&(o=null)),{lines:o,isDirty:r}},showAndEdit:function(t){if(!t||null==t.row||null==t.col)return void i.warn("Failed to show cell edit view, parameter is not valid",t);var e,n,o,a,l=this,c=l._table.getCell(t.row,t.col),u=r(l._editBox),p={};c&&(l._changeMonitor.disconnect(),l._editingCellId=c.getCellId(),(e=l._tableView.getBoundingRectAt(t.row,t.col))&&(n=l._handleContentWhenShowAndEdit(t.content,c),o=n.lines,o||(o=N.createBlank(!0),a=!0),l._isDirty=n.isDirty,u.css({left:e.left,top:e.top,minWidth:e.width-3,minHeight:e.height-3}),l._renderLines(o),l.$el.show(),l._focusEditBox(!0),a&&(s.each(c.getStylesForEmpty(),function(t,e){var n,o={};if(o[e]=t,!(n=b.createCmdBall("comp.ApplyStyles",{inlineStyles:o})))return!1;p[n.name]=n}),p.fontSize&&(l.execCommand(p.fontSize),delete p.fontSize),s.each(p,function(t){l.execCommand(t)})),l._changeMonitor.observe(),l._addListenerForDocSelectionChange(),l._baseSnapshot=l._snapshot(),l.trigger("cell-edit-view-enter",{canUndo:l._history.canUndo(),canRedo:l._history.canRedo()})))},_onSelectionChange:function(){var t=this,e=t.getNativeRange();t._clearEditingInlineStates(),t.trigger("cell-edit-view-selection-change",e)},_addListenerForDocSelectionChange:function(){var t=this;r(document).on("selectionchange"+t._eventNS,function(e){t.getNativeRange()&&(t._stopListenerDocSelectionChange||t._onSelectionChange(e))})},_removeListenerForDocSelectionChange:function(){r(document).off("selectionchange"+this._eventNS)},_renderLines:function(t){var e=this,n=t.toHtml({styleRules:e._styleRules}),o=e._editBox;r(o).html(n)},_focusEditBox:function(t){var e,n,o=this,r=o._editBox;if(t){var i=f.getRange(),s=r.querySelector(".bulb__table-cell-line");if(!s||!i)return;e=s.lastChild,n=e||s,i.setStart(n,n.childNodes.length),i.setEnd(n,n.childNodes.length),f.setRange(i)}r.focus()},hide:function(){this.$el.hide()},_filterToLinesHtml:function(){var t=this,e=t._editBox,n=function(t){s.each(t,function(t){var e=t.style.textDecorationLine;e&&(t.style.textDecoration=e),t.hasChildNodes()&&n(t.children)})};n(e.children)},_getContentAsLines:function(){var t,e,n=this,o=N.createBlank();return n._viewStyleToData(),n._filterToLinesHtml(),t=n._editBox.innerHTML,e=k(t,{holdSpaces:!0})||[],s.each(e,function(t){var e=M.blockToCellContent(t);e instanceof N&&o.appendLines(e)}),o},_viewStyleToData:function(){var t=this,e=t._editBox,n=t._styleRules,o=t._mapper;s.map(n,function(n,r){var i,a,l;if(i=e.querySelectorAll("font"),"font-family"===r)return void s.forEach(i,function(t){a=t.getAttribute("face"),(a=A.getFontFirstValue(a))&&(l=o.valueFromView(r,a))&&t.setAttribute("face",l)});t._elsViewStyleToData(i,o,r),t._elsViewStyleToData(e.querySelectorAll("span"),o,r)})},_elsViewStyleToData:function(t,e,n){var o,r,i=!1;s.forEach(t,function(t){o=t.getAttribute(n),o?i=!0:o=t.style[n],o&&("color"===n&&(o=m(o).toHexString()),(r=e.valueFromView(n,o))&&(i?t.setAttribute(n,r):t.style[n]=r))})},_commitChange:function(){var t,e=this;e._isDirty&&(t=e._getContentAsLines(),e.trigger("set-cell-content",e._editingCellId,t)),e.exit()},_isOnToolbarLinkView:function(){return r(".bulb__combo-menu-link .bulb__link-input").is(":visible")},isFocused:function(){var t=this,e=document.activeElement;return e===t.el||r.contains(t.el,e)},_isShow:function(){return this.$el.is(":visible")},isOnEdit:function(){var t=this;return!!t.isFocused()||t._isOnToolbarLinkView()&&t._isShow()},getNativeRange:function(){var t=this,e=f.getRange();if(f.isRangeInNode(t._editBox,e))return e;i.warn("native range is null or not in cell edit view",e)},setNativeRange:function(t){var e=this;f.isRangeInNode(e._editBox,t)?f.setRange(t):i.warn("Failed to set native range to cell edit view",t)},_formatStyles:function(t){return t},_queryStyles:function(t){var e,n,o=this,r=o.getNativeRange();if(r)return e=r.startContainer,d.isText(e)&&(e=e.parentNode),n=window.getComputedStyle(e,null),n=o._formatStyles(n),t?n[t]:n},_queryInlineStylesForBulb:function(){var t=this,e=t._queryStyles(),n={},o={style:e},r=s.keys(b.INLINE_STYLES_CMD_MAP);return s.forEach(r,function(t){n[t]=C[t].action(o)}),n},queryInlineStylesForBulb:function(){var t,e,n,o=this,r=o.getNativeRange();if(r)return t=o._queryInlineStylesForBulb(),r.collapsed&&o._editingInlineStates?(e=s.clone(o._editingInlineStates),s.defaults(e,t),n=e):n=t,n.cellEditViewRangeCollapsed=r.collapsed,n},toggleInlineStyle:function(t){var e,n,o=this;if(-1===s.keys(b.TOGGLE_INLINE_STYLES_CMD_MAP).indexOf(t))return void i.warn("toggleInlineStyle does NOT supprot",t);n=b.getCmdNameByStyleName(t),e=g.create({name:n,tryNativeIfNeeded:!0}),o.execCommand(e)},_shouldModifyEditingInlineStates:function(t,e,n){return!!(t&&t.name&&e&&e.collapsed&&1===n)&&s.values(b.INLINE_STYLES_CMD_MAP).indexOf(t.name)>-1},_grabEditingInlineStates:function(t){if(t&&t.name){var e,n=this;n._editingInlineStates||(e=n._queryInlineStylesForBulb(),n._editingInlineStates=e)}},_updateEditingInlineStates:function(t){if(t&&t.name){var e=this,n=t.name,o=t.value,r=b.getStyleNameByCmdName(n),i=s.keys(b.TOGGLE_INLINE_STYLES_CMD_MAP);r&&e._editingInlineStates&&(i.indexOf(r)>-1&&!0!==o&&!1!==o&&(o=!e._editingInlineStates[r]),e._editingInlineStates[r]=o)}},_clearEditingInlineStates:function(){this._editingInlineStates=null},execCommand:function(t){var e,n,o=this,r=o.getNativeRange();return r?(o._nestLevel||(o._nestLevel=0),o._nestLevel++,e=o._shouldModifyEditingInlineStates(t,r,o._nestLevel),1===o._nestLevel&&(e?o._grabEditingInlineStates(t):o._clearEditingInlineStates()),n=o._commander.exec(t),n&&1===o._nestLevel&&(e?o._updateEditingInlineStates(t):o._clearEditingInlineStates(),o.trigger("cell-edit-view-command-executed")),o._nestLevel--,n):(i.warn("nativeRange  is not in editBox"),!1)},exit:function(){var t=this;t._isDirty=!1,t._editingCellId=null,t._clearTimeoutOfHandleChange(),t._lastSnapshot=null,t._baseSnapshot=null,t._removeListenerForDocSelectionChange(),t._changeMonitor.disconnect(),t._history.reset(),t.trigger("cell-edit-view-exit"),t.hide()},_filterTable:function(t){var e=t.querySelectorAll("table");s.each(e,function(t){var e=t.querySelectorAll("td"),n="";s.each(e,function(t){n+=t.innerHTML}),t.innerHTML=n})},_filterHtml:function(t){var e=a(t),n=["img"];return e?(this._filterTable(e),s.each(x,function(t,e){!1===t&&n.push(e)}),s.each(n,function(t){var n=e.querySelectorAll(t);s.each(n,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}),e.innerHTML.trim()):""},_onPaste:function(t){var e,n,o=this,r=t.originalEvent||t,i=r.clipboardData;t.stopPropagation(),t.preventDefault(),i&&i.types&&(-1!==s.indexOf(i.types,"text/html")?(e=i.getData("text/html"),e=o._filterHtml(e),n=g.create({name:"insertHTML",isNative:!0,value:e})):-1!==s.indexOf(i.types,"text/plain")&&(e=i.getData("text/plain"),n=g.create({name:"insertText",isNative:!0,value:e})),o.execCommand(n))},_onDblclick:function(t){t.stopPropagation()},editFromToolbar:function(t,e){var n,o=this,r=o.getNativeRange(),i=o.queryInlineStylesForBulb();return o._rangeWhenBlur&&(r=o._rangeWhenBlur,f.setRange(r)),!!r&&(!!(n=b.createCmdBall(t,e,i))&&(o.execCommand(n),o._rangeWhenBlur=null,!0))},getEditBox:function(){return this._editBox}},{create:function(t){return t&&t.table&&t.tableView?new e(t):void i.warn("Failed to create CellEditView",t)},isRangeIn:function(t){if(!t)return!1;return f.isRangeInSelector("div.bulb__cell-edit",t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){var t=function(t,e){var n,o,r;if(e.implementation&&e.implementation.createHTMLDocument)return n=e.implementation.createHTMLDocument("title"),n.body.innerHTML=t,n;if(r=e.defaultView||window,r.DOMParser){o=new r.DOMParser;try{n=o.parseFromString("","text/html")}catch(t){}if(n)return n.body.innerHTML=t,n}};return function(e,n,o,r){if(r=!0===r,e||r){n=n||document;var i,s,a,l,c=t(e,n);if(c){if(!1!==o)return c.body;for(a=c.body.childNodes,i=a.length,l=[],s=0;s<i;s++)l.push(a[s]);return l}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(28),r=n(8),i=n(4),s=window.MutationObserver||window.WebKitMutationObserver;return e=o.extend({initialize:function(t){var e=this;t=t||{},e._el=t.el,e._monitoring=!1,e._hasBindDOMSubtreeModified=!1,delete e.options,s&&(e._observer=new s(function(){e._fireChange()}))},_fireChange:function(){var t=this;!0===t._monitoring&&t.trigger("content-change")},observe:function(){var t=this;t.isMonitoring()||(t._observer?t._observer.observe(t._el,{childList:!0,attributes:!0,subtree:!0,characterData:!0,attributeFilter:["style"]}):!1===t._hasBindDOMSubtreeModified&&(t._hasBindDOMSubtreeModified=!0,r(t._el).on("DOMSubtreeModified",t._fireChange.bind(t))),t._monitoring=!0)},disconnect:function(){var t=this;t._monitoring=!1,t._observer&&t._observer.disconnect()},destroy:function(){var t=this;t._observer?(t._observer.disconnect(),t._observer=null):!0===t._hasBindDOMSubtreeModified&&r(t._el).off("DOMSubtreeModified")},isMonitoring:function(){return this._monitoring}},{create:function(t){return t&&t.el?new e(t):void i.warn("Failed to create ChangeMonitor")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(823),o=n(824),r=n(825),i=n(826),s=n(827),a=n(828),l=n(829),c=[r,i,o,s,a,l];return function(t){var n=e.create(t);return n.addCmds(c),n}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(1),r=n(4),i=n(29),s=["undo","redo","fontSize"];return e=i.extend({initialize:function(t){var e=this;t=o.defaults(t||{},{editHost:null}),e._commands={},e._editHost=t.editHost,delete e.options},addCmd:function(t){var e=this,n=e._commands;if(t&&t.name&&t.action){if(n[t.name])return void r.warn("command has defined: ",t.name);n[t.name]=t}},addCmds:function(t){var e=this;o.each(t,function(t){e.addCmd(t)})},exec:function(t){var e,n=this;return t&&t.name?(!0===t.stopSelectionChange?n._editHost.silentDocSelectionChangeDo(function(){e=n._exec(t)}):e=n._exec(t),e):(r.warn("Failed to exec cmdBall",t),!1)},_exec:function(t){var e,n,o,i=this,a=i._commands;if(e=t.name,!t.isNative){if((o=a[e])&&o.action)return n=o.action.apply(o,[t.value,i,i._editHost]),t.callback&&t.callback(n),n;if(r.warn("no command",e),!t.tryNativeIfNeeded)return!1;r.warn("try to exec native command",e)}return s.indexOf(e)>-1?(r.error("native command is unvalid",e),!1):(n=i.execNative(e,t.value),t.callback&&t.callback(n),n)},execNative:function(t,e){if(!document.queryCommandSupported(t))return void r.error("command is not supported",t);document.execCommand("styleWithCSS",!1,!0);var n=document.execCommand(t,!1,e||"");return n||r.error("Failed to exec command",t,e),n}},{create:function(t){return new e(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(48);return{name:"fontSize",action:function(t,n,o){var r,i=o.getNativeRange();return!!i&&(i.collapsed?(o.execCommand(e.create({name:"insertHTML",isNative:!0,value:'<span style="font-size: '+t+'px;"> </span>'})),o.execCommand(e.create({name:"delete",isNative:!0}))):(r=e.create({name:"applyInlineStyle",value:{name:"fontSize",value:t+"px"},isNative:!1}),o.execCommand(r)))}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(45),r=n(4),i=function(t,e){if(t&&t.tagName)return(t.tagName+"").toLowerCase()===(e+"").toLowerCase()},s=function(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},a=function(t,e,n){if(n===t)return null;if(t.firstChild&&!e)return t.firstChild;if(!t.parentNode)return null;for(var o=t.nextSibling||a(t.parentNode,!0,n);s(o,n);)o=o.firstChild;return o},l=function(t){var e=t.startContainer,n=t.endContainer,o=t.startOffset,r=t.endOffset;return e===n&&o===r},c=function(t){var e,n=t.startContainer,r=t.endContainer,i=t.startOffset,s=t.endOffset;o.isText(r)&&s!==r.length&&r.splitText(s),o.isText(n)&&0!==i&&(e=n.splitText(i),n===r&&(r=e,s=e.length),n=e,i=0),t.setStart(n,i),t.setEnd(r,s)},u=function(t,e,n){var r,i=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;for(o.isElement(i)&&0!==s&&(r=i.childNodes[s],i=r||i.nextSibling,s=0),o.isElement(l)&&c!==l.length&&(0===c?l=l.previousSibling:(r=l.childNodes[c-1],l=r||l.previousSibling),c=l.length),r=i;r;r=a(r,e,l))n(r)},p=function(t){if(t.parentNode){var n=e.toArray(t.childNodes),o=t.parentNode;i(t,"span")&&0===t.attributes.length&&(e.each(n,function(e){t.removeChild(e),o.insertBefore(e,t)}),o.removeChild(t)),e.each(n,function(t){p(t)})}},d=function(t,e){u(t,!1,function(t){o.isElement(t)&&(t.style[e]="")}),p(t.commonAncestorContainer)},h=function(t){return{startNode:t.startContainer,endNode:t.endContainer,startOffset:t.startOffset,endOffset:t.endOffset}},f=function(t,e){t.setStart(e.startNode,e.startOffset),t.setEnd(e.endNode,e.endOffset)},g=function(t,e,n){var r;c(t),r=h(t),d(t,e),u(t,!0,function(r){var i,s;o.isElement(r)?r.style[e]=n:o.isText(r)&&!/^\s*$/.test(r.data)&&(i=t.startContainer.ownerDocument,s=i.createElement("span"),s.style[e]=n,r.parentNode.insertBefore(s,r),r.parentNode.removeChild(r),s.appendChild(r))}),f(t,r)};return{name:"applyInlineStyle",action:function(t,e,n){var o=t.name,i=t.value,s=n.getNativeRange();return s&&!l(s)?(g(s,o,i),n.setNativeRange(s),!0):(r.warn("Failed to execute applyInlineStyle",s),!1)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(48),r=n(273);return{name:"applyInlineStyles",action:function(t,n,i){var s=!1;return e.map(r.INLINE_STYLES_CMD_MAP,function(n,r){if(e.has(t,r)){if(null==t[r])return;i.execCommand(o.create({name:n,value:t[r],stopSelectionChange:"fontSize"===n})),s=!0}}),s}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(48),o=n(66),r=n(109);return{name:"insertLink",action:function(t,n,i){return!!(t=r.safeHref(t))&&(i.execCommand(e.create({name:"underline",value:!0})),i.execCommand(e.create({name:"createLink",value:o.completeUrl(t||"")})),!0)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return{name:"undo",action:function(t,e,n){return n.undo()}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(){return{name:"redo",action:function(t,e,n){return n.redo()}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(48),o=n(2).FontMaps,r=n(1),i=n(4),s=n(273);return{TOGGLE_INLINE_STYLES_CMD_MAP:s.TOGGLE_INLINE_STYLES_CMD_MAP,INLINE_STYLES_CMD_MAP:s.INLINE_STYLES_CMD_MAP,getStyleNameByCmdName:function(t){var e,n=this;return r.some(n.INLINE_STYLES_CMD_MAP,function(n,o){if(n===t)return e=o,!0}),e},getCmdNameByStyleName:function(t){if(t)return this.INLINE_STYLES_CMD_MAP[t]},_createInlineStyleCmdBall:function(t){t=t||{};var n,i=this;return r.some(i.INLINE_STYLES_CMD_MAP,function(i,s){if(r.has(t,s))return"font-family"===s&&(t[s]=o.getAllValueByFont(t[s])||t[s]),n=e.create({name:i,value:t[s],stopSelectionChange:"fontSize"===i}),!0}),n},_createFormatPainterCmdBall:function(t,n){return r.map(n,function(e,o){t[o]===n[o]&&delete t[o]}),e.create({name:"applyInlineStyles",value:t})},createCmdBall:function(t,n,o){var r,s=this;switch(n=n||{},t){case"comp.RemoveFormat":r=e.create({name:"removeFormat"});break;case"comp.FormatPainter":if(!n.data||!n.data.inlineStyles)return;r=s._createFormatPainterCmdBall(n.data.inlineStyles,o);break;case"comp.ApplyStyles":n.inlineStyles&&(r=s._createInlineStyleCmdBall(n.inlineStyles));break;case"comp.InsertLink":if(!n.src)return;r=e.create({name:"insertLink",value:n.src});break;case"undo":r=e.create({name:"undo",isNative:!1,tryNativeIfNeeded:!1});break;case"redo":r=e.create({name:"redo",isNative:!1,tryNativeIfNeeded:!1})}return r||i.warn("toolbarAdapter do NOT handle: ",t,n),r}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(45);return{jsonlify:function(t,n){if(t&&n){var r=function(n){var r,i={};return o.isText(n)?(r=n.parentNode,i.childIndex=e.indexOf(r.childNodes,n)):r=n,i.isRoot=r===t,i.isRoot?i:(i.tagName=r.tagName,i.tagIndex=e.indexOf(t.querySelectorAll(i.tagName),r),i)},i={collapsed:n.collapsed,startContainer:r(n.startContainer),startOffset:n.startOffset};return i.collapsed?i:(i.endContainer=r(n.endContainer),i.endOffset=n.endOffset,i)}},parseJSON:function(t,e){if(t&&e){var n,o=function(e){var n,o;return e.isRoot?null!=e.childIndex?t.childNodes[e.childIndex]:t:(o=t.querySelectorAll(e.tagName),n=o[e.tagIndex],null!=e.childIndex?n.childNodes[e.childIndex]:n)},r=t.ownerDocument,i=r.createRange(),s=o(e.startContainer);return i.setStart(s,e.startOffset),e.collapsed?i.setEnd(s,e.startOffset):(n=o(e.endContainer),i.setEnd(n,e.endOffset)),i}}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(28),r=n(4);return e=o.extend({initialize:function(){var t=this;delete t.options,t.reset()},reset:function(){var t=this;t._undo=[],t._redo=[],t.trigger("change")},save:function(t){if(!t||!t.snapshotBefore||!t.snapshotAfter)return r.warn("parameter is unvalid",t),!1;var e=this;return e._undo.push(t),e._redo=[],e.trigger("change"),!0},canUndo:function(){return this._undo.length>0},canRedo:function(){return this._redo.length>0},undo:function(t){var e,n=this;for(t=t||1;t&&t>0&&n.canUndo();)e=n._undo.pop(),n._redo.push(e),t--;return!!e&&(n.trigger("undo",e.snapshotBefore),n.trigger("change"),!0)},redo:function(t){var e,n=this;for(t=t||1;t&&t>0&&n.canRedo();)e=n._redo.pop(),n._undo.push(e),t--;return!!e&&(n.trigger("redo",e.snapshotAfter),n.trigger("change"),!0)}},{create:function(t){return new e(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(834),n(835),n(836),n(837),n(838),n(839),n(840)}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(7).register({name:"enter",scope:"table-cell-edit",key:"enter",action:function(t){t.blur()}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(48),r=n(274),i=function(t){var e,n,i=t.getNativeRange(),s=t.getEditBox();e=r.getUrlInfoBeforeRange(i,s),e?(e.alreadyUrl||(i=document.createRange(),i.setStart(e.startNode,e.startOffset),i.setEnd(e.endNode,e.endOffset),t.setNativeRange(i),n=o.create({name:"insertLink",value:e.uri}),t.execCommand(n),i=t.getNativeRange(),i.collapse(!1),t.setNativeRange(i)),n=o.create({name:"insertHTML",value:"<div><br/></div>",isNative:!0})):n=o.create({name:"insertLineBreak",isNative:!0}),t.execCommand(n)};e.register({name:"altEnter",scope:"table-cell-edit",key:"alt+enter",action:i}),e.register({name:"shiftEnter",scope:"table-cell-edit",key:"shift+enter",action:i})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(7).register({name:"esc",scope:"table-cell-edit",key:"esc",action:function(t){t.exit()}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(1),r={"mod+b":"bold","mod+i":"italic","mod+e":"strike","mod+u":"underline"};o.each(r,function(t,n){e.register({name:t,scope:"table-cell-edit",key:n,action:function(e){e.toggleInlineStyle(t)}})})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(48);e.register({name:"modZ",scope:"table-cell-edit",key:"mod+z",action:function(t){var e=o.create({name:"undo",isNative:!1,tryNativeIfNeeded:!1});t.execCommand(e)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(48),r=function(t){var e=o.create({name:"redo",isNative:!1,tryNativeIfNeeded:!1});t.execCommand(e)};e.register({name:"modShiftZ",scope:"table-cell-edit",key:"mod+shift+z",action:r}),e.register({name:"modY",scope:"table-cell-edit",key:"mod+y",action:r})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(7).register({name:"save",scope:"table-cell-edit",key:"mod+s",action:function(){}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e,o=n(20),r=n(1),i=n(35),s=n(101),a=n(33),l=new Array(3).join(" "),c=[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,112,113,114,115,116,117,118,119,120,121,122,123,144,145,229];return e=o.View.extend({tagName:"input",className:"bulb__hidden-input",_lastKeyDownCode:null,initialize:function(){var t=this;t._initEvents(),delete t.options},_initEvents:function(){var t=this;i.addListeners({keydown:"_onKeyDown",textInput:"_onTextInput",compositionstart:"_onCompositionStart",compositionend:"_onCompositionEnd",copy:"_onCopyCutPaste",cut:"_onCopyCutPaste",paste:"_onCopyCutPaste"},t.$el,t)},bindKey:function(t){var e=this,n=e._keyMonitor;t&&(n||(e._keyMonitor=n=new s({el:e.el,beforeMatch:function(t){t.stopPropagation()},afterMatch:function(t,n){n||-1!==r.indexOf(c,t.keyCode)||t.ctrlKey||t.metaKey||e._onPrintableKeyDown(t)}})),n.unbind(t),n.bind(t,function(n){e.trigger("key-monitor",t,n)}))},unbindKey:function(t){var e=this,n=e._keyMonitor;n&&t&&n.unbind(t)},render:function(){this.$el.val(l)},isFocused:function(){return document.activeElement===this.el},isOnEdit:function(){var t=this;return t.isFocused()&&t.getValue()!==l},focus:function(t){var e=this,n=e.el;t&&this.setPosition(t.left,t.top),n.select()},blur:function(){this.el.blur()},setPosition:function(t,e){var n=this,o=n.el;o.style.left=t+"px",o.style.top=e+"px"},setWidth:function(t){this.el.style.width=t+"px"},bringToFront:function(){this.el.value="",this.el.style.zIndex=255},hideBehind:function(){this.el.style.zIndex=-255},_onPrintableKeyDown:function(t){var e=this,n=t.originalEvent||t;t.preventDefault(),e._triggerTextInput(n.key)},_onKeyDown:function(t){this._lastKeyDownCode=t.keyCode},_onTextInput:function(t){t.stopPropagation();var e=this,n=t.originalEvent.data;229===e._lastKeyDownCode&&(r.contains(["","~","","@","#","","%","","&","*","","","-","","=","+","","{","","}","","|","","","","","","","","","","","",""],n)||/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/.test(n))&&window.setTimeout(function(){e._triggerTextInput(n)},50)},_onCompositionStart:function(t){t.stopPropagation();var e=this;e._compositionStartFired=!0,e.bringToFront()},_onCompositionEnd:function(t){if(t.stopPropagation(),!this.locked){var e=this,n=t.data||this.$el.val();e._compositionStartFired=!1,n&&r.defer(function(){e._triggerTextInput(n)}),e.hideBehind()}},_onInput:function(){var t,e=this,n=e.hiddenInputView;e._compositionStartFired||(t={data:n.getValue()},n.clearValue(),e.onCompositionEnd(t))},_onCopyCutPaste:function(t){var e=this,n=t.type;t.preventDefault(),t.stopPropagation(),e.trigger(n,t)},_triggerTextInput:function(t){var e=this;e.trigger("text-input",t),e.clearValue()},clearValue:function(){this.el.value=l},getValue:function(){return this.el.value}},{create:function(t){return new e(t)},isRangeIn:function(t){if(t){return a.isRangeInSelector("input.bulb__hidden-input",t)}}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(271),r=n(35),i=n(38),s=n(13),a=n(1);return e.View.extend({className:"bulb__cell-resize-layer",initialize:function(t){var e=this,n=t.tableView,r=n.$el;e._tableView=n,e._draggable=new o({el:e.el,disableDocSelection:!0}),e._active=!0,e._onDrag=!1,e._resizeDirection=null,e._cellInfo=null,this._rowLine=r.find(".bulb__row-resize-line"),this._colLine=r.find(".bulb__col-resize-line"),e._bindEvents()},_bindEvents:function(){var t=this,e=t._draggable,n=t._tableView,i={};a.bindAll(t,"_onCellEnter"),i[o.DRAG_START]="_onDragStart",i[o.DRAGGING]="_onDragging",i[o.DRAG_END]="_onDragEnd",r.addListeners(i,e,t),n.on("cell-enter",t._onCellEnter)},render:function(){var t=this,e=s.render("common","table_cell_resize",{});t.$el.html(e),t.showAt()},showAt:function(t){var e=this;t&&null!=t.width&&e.$el.css({width:t.width,height:t.height,top:t.top,left:t.left}).show()},hide:function(){this.$el.hide()},enable:function(){this._active=!0},disable:function(){var t=this;t._active=!1,t.hide()},isActive:function(){return this._active},_parseType:function(t){var e,n=t.className;return a.some(i,function(t,o){var r=o.toLowerCase();if(n.indexOf(r)>-1)return e=t,!0}),e||i.UP},_onDragStart:function(t){var e,n=this,o=n._tableView;o&&!o.isLocked()&&(t.stopPropagation(),n._onDrag=!0,n._resizeDirection=n._parseType(t.target),e=o.getEventBoundingRect(t),n._startRect=e,n._updateResizeLine(e.left,e.top),o.focusOutTbody())},_onDragging:function(t){var e,n=this,o=n._tableView;o&&!o.isLocked()&&(t.stopPropagation(),n._onDrag=!0,e=o.getEventBoundingRect(t),n._updateResizeLine(e.left,e.top))},_onDragEnd:function(t){var e,n,o,r=this,s=r._tableView,a=r._cellInfo;s&&!s.isLocked()&&(t.stopPropagation(),r._onDrag=!1,e=s.getEventBoundingRect(t),r._updateResizeLine(e.left,e.top,!0),n=e.left-r._startRect.left,o=e.top-r._startRect.top,a&&(0===a.row&&r._resizeDirection===i.TOP&&(o=0-o),0===a.col&&r._resizeDirection===i.LEFT&&(n=0-n)),r._execResizeCommand(n,o))},_updateResizeLine:function(t,e,n){switch(this._resizeDirection){case i.UP:case i.DOWN:n?this._rowLine.hide():this._rowLine.css({top:e}).show();break;case i.RIGHT:case i.LEFT:n?this._colLine.hide():this._colLine.css({left:t}).show()}},_execResizeCommand:function(t,e){var n,o,r,s,l,c,u,p,d,h,f=this,g=f._tableView,m=g.block,_=f._cellInfo;switch(f._resizeDirection){case i.UP:case i.DOWN:n=_.row,f._resizeDirection===i.UP?n-=1:(c=m.getMergePointAttrAt(_.row,_.col).height||0)>1&&(n+=c-1),n=n<0?0:n,r=g.getRowElHeight(n),r+=e,r=a.max([r,10]),f.trigger("set-row-height",n,r);break;case i.RIGHT:case i.LEFT:if(o=_.col,f._resizeDirection===i.LEFT?o-=1:(l=m.getMergePointAttrAt(_.row,_.col).width||0)>1&&(o+=l-1),u=o+1,o=o<0?0:o,p=g.getColElWidth(o),s=a.max([p+t,35]),u>=m.getColumnCount()){f.trigger("set-col-width",o,p+t);break}u!==o?(d=p+m.getColumnWidth(u),h=a.max([d-s,35]),f.trigger("set-cells-size",[{col:u,width:h},{col:o,width:d-h}])):f.trigger("set-col-width",o,s)}},_onCellEnter:function(t){var e,n,o,r=this,i=r._tableView,s=i.block;!s.locked&&i&&r.isActive()&&!r._onDrag&&(n=i.getCellElementByTarget(t),(e=s.getCellById(n))&&(r._cellInfo={row:e.row,col:e.col},o=i.getBoundingRect(n),r.showAt(o)))}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(13),o=n(137),r=n(269),i=n(132);return{_renderWrap:function(t){return'<div class="bulb__resource-wrap">'+t+"</div>"},renderImage:function(t,e){var n=t.getSource(e),o=document.createElement("img");return o.setAttribute("draggable","false"),o.setAttribute("src",i.getURL(r.addIfNeeded(n))||""),o.setAttribute("width","100%"),o.setAttribute("height","auto"),this._renderWrap(o.outerHTML)},renderMacro:function(t,n){var o,r=this,i=t.getMacroName(),s=n.getMacroConfigManager(),a=s.getMacroConfig(i);a.isHidePlaceholderBtn&&(o=a.isHidePlaceholderBtn);var l=e.render("common","macro_view",{isReadOnly:r.previewMode||o});return this._renderWrap(l)},renderMacroBody:function(t,e){var n=t.getMacroName(),o=t.getMacroContent(),r=t.getMacroVersion();return e.getMacroConfigManager().getMacroConfig(n).getEditView(o,r)},renderAttachment:function(t){var n,r,i,s,a=t.getInfo();return n=o.splitFileFullName(a.fileName),r=o.getSizeString(a.fileLength),s=o.getFileIconByName(a.fileName),i=e.render("common","attachment-view-attachment-container",{name:s,fileName:n.fileName,fileType:n.fileType,size:r,title:a.fileName,draggable:!1}),this._renderWrap(i)}}}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(845),n(846),n(847),n(848),n(849),n(850),n(851),n(852)}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(1),r={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+e":"strike"};o.each(r,function(t,n){e.register({name:t,scope:"table-hidden-input",key:n,action:function(e){e.toggleInlineStyle(t)}})})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(38),r=n(1),i={left:o.LEFT,right:o.RIGHT,up:o.UP,down:o.DOWN,tab:o.RIGHT,"shift+tab":o.LEFT,enter:o.DOWN};r.each(i,function(t,n){e.register({name:n,scope:"table-hidden-input",key:n,action:function(e,n){e.moveWithDirection(t,n)}})})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(1),r=["backspace","del"];o.each(r,function(t){e.register({name:t,scope:"table-hidden-input",key:t,action:function(t){t.clearSelectedCells()}})})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(7).register({name:"save",scope:"table-hidden-input",key:"mod+s",action:function(t){t.trigger("save-content")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){n(7).register({name:"select-all",scope:"table-hidden-input",key:"mod+a",action:function(t){t.selectAll(!0)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7);e.register({name:"undo",scope:"table-hidden-input",key:"mod+z",action:function(t){t.trigger("global-undo")}}),e.register({name:"redo",scope:"table-hidden-input",key:"mod+y",action:function(t){t.trigger("global-redo")}}),e.register({name:"redo_2",scope:"table-hidden-input",key:"mod+shift+z",action:function(t){t.trigger("global-redo")}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7),o=n(1),r=n(39),i=["mod+1","mod+2","mod+3","mod+4","mod+d","mod+h","mod+l"];r.isSafari()||o.each(i,function(t){e.register({name:t,scope:"table-hidden-input",key:t,preventDefault:!0,action:function(){}}),e.register({name:t,scope:"table-cell-edit",key:t,action:function(){}})})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(7);e.register({name:"paste",key:"mod+v",scope:"table-hidden-input",preventDefault:!1,action:function(t){t.setPasteAsText(!1)}}),e.register({name:"pasteAsText",key:"mod+shift+v",scope:"table-hidden-input",preventDefault:!1,action:function(t){t.setPasteAsText(!0)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(61),o=n(1),r=n(13);return e.extend({$checkbox:null,_checked:!1,name:"todo",className:"bulb__block-view bulb__todo-view",events:{"mousedown .bulb__todo-mark":"_onClick"},initialize:function(t){var n=this;e.prototype.initialize.apply(n,arguments),n.options=t,n.block=t.block,o.bindAll(n,"_blockCheckedChange"),n.block.on("checked-change",n._blockCheckedChange)},_renderTemplate:function(){var t=this;t.$el.html(r.render("common",t.name))},render:function(){var t=this,n=t.block;e.prototype.render.apply(t,arguments),t._blockCheckedChange(n.getChecked())},_blockCheckedChange:function(t){t?this.$el.addClass("bulb__checked"):this.$el.removeClass("bulb__checked"),this._checked=t},_onClick:function(t){t.preventDefault(),t.stopPropagation();var e=this._checked;this.trigger("command","comp.SetBlockProps",{blocks:[this.block],props:{checked:!e}})},destroy:function(){var t=this;e.prototype.destroy.apply(t,arguments),t.options&&t.options.editor&&(t.options.editor=null)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(1),o=n(8),r=n(61),i=n(40),s=n(58),a=n(2),l=a.Quote,c=a.QuoteRange,u=a.Rich2HtmlConvertor,p=a.SupportedInlineStyles,d=a.FontMaps;return r.extend({name:"quote",className:"bulb__block-view bulb__paragraph-view bulb__quote-view",_renderText:function(){var t,n,r=this,a=r.block,h=a.getReadOnlyText(),f=r._inlineStyleViewMapper,g=r.$el.find(".bulb__para-text");t=h.isEmpty()?this._createHtmlForBlankLine():u.rich2html(h,{styleRules:{color:function(t){var e=t.color;return t.href!==p.getDefault("href")&&i.equals(t.color,"blue")?"#003884":null!=e&&f?f.valueToView("color",e):void 0},"font-family":function(t){var e,n=t["font-family"];return null!=n&&f&&(e=f.valueToView("font-family",n)),n!==e?e:d.getAllValueByFont(n)||n},"font-weight":function(){return l.DEFAULT_STYLES["font-weight"]}}}),g.html(t),n=a.getStyleRanges("href"),e.each(n,function(t){var e,n,i;e=new c({start:t.from,end:t.to,block:a}),n=r.convertToNativeRange(e),(i=r._findLinkNode(n.endContainer))&&(o(i).off("hover"),o(i).hover(function(){s.isNoteLinkUrl(i.href)||r.isCollabLocked()||r.trigger("link-menu-show",{linkNode:i,range:e,block:a})},function(){r.trigger("link-menu-hide")}))})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){var e=n(42),o=n(2).UnknownRange;return e.extend({className:"bulb__block-view bulb__unknown-view",initialize:function(){var t=this;e.prototype.initialize.apply(t,arguments)},render:function(){var t=this;this.$el.html("<div></div>"),e.prototype.render.apply(t,arguments)},convertToNativeRange:function(){},parseNativeRange:function(t,e,n){if(n)return new o({block:e})}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(42),n(13),n(2),n(4),n(33),n(1)],void 0!==(r=function(t,e,n,o,r,s,a,l){"use strict";var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){var n=this;t.prototype.initialize.call(this,e),n.previewMode=e.previewMode,n.editor=e.editor,n.bindSelectionEvents(),n.block.on("content-change",l.debounce(n._onContentChange.bind(this),100)),n.block.on("style-change",n._onStyleChange.bind(this))},e.prototype.render=function(){var e,n=this;t.prototype.render.call(this);var r=n.editor.getMacroConfigManager().isHidePlaceholderBtn(n.block),i=n.editor.getMacroConfigManager().getMacroStyles(n.block),a=o.render("common","macro_view",{isReadOnly:n.previewMode||r});n.$el.html(a),n.bindEvents(),e=n.previewMode?n.editor.getMacroConfigManager().getReadView(n.block):n.editor.getMacroConfigManager().getEditView(n.block),e&&e.then(function(t){var e=n.$el.find(".bulb__macro-body"),o=$(t);e.empty().append(o),n.$el.find(".bulb__macro-hover-body").css({left:n.$el.find(".bulb__macro-body").width()}),n.$el.find(".bulb__macro").css(i)}).catch(function(t){s.warn("edit view generating failed: "+t)}),this._renderStyles()},e.prototype.bindEvents=function(){var t=this.el.querySelector(".bulb__macro-edit-button"),e=this.el.querySelector(".bulb__macro-delete-button");$(t).on("click",this._onEditButtonClicked.bind(this)),$(e).on("click",this._onDeleteButtonClicked.bind(this))},e.prototype._onDeleteButtonClicked=function(){this.editor.getController().execCommand("comp.KeyBackspace")},e.prototype._onEditButtonClicked=function(){var t=this,e=this.block,n=this.editor.getMacroConfigManager().getEditDialog(e),o=this.editor.getMacroConfigManager().getMacroConfig(e.getMacroName());n?n.then(function(n){t.trigger("command","comp.UpdateMacroContent",{blocks:[e],props:{macroVersion:o.version,macroContent:n}})}).catch(function(t){s.warn("edit macro data failed: "+t)}):s.log("click edit button of a macro: "+e.getId())},e.prototype._onContentChange=function(){this.render()},e.prototype._renderStyles=function(){var t=this,e=this.block.getBlockStyles();l.each(e,function(e,n){t._setStyle(n,e)})},e.prototype._onStyleChange=function(t,e){this._setStyle(t,e),this.trigger("view-height-changed",this.cid)},e.prototype._setStyle=function(t,e){var n=this.$el;switch(t){case"align":n.css("text-align",e)}},e.prototype.onDrawRange=function(t){var e,n=this;t?(n._addFocusedClass(),e=document.createRange(),e.selectNodeContents(n.el.firstChild),a.setRange(e,window)):(n.selectMacro(!1),n._removeFocusedClass())},e.prototype._addFocusedClass=function(){var t=this,e=t.el.querySelector(".bulb__macro");$(e).addClass("bulb__focused")},e.prototype._removeFocusedClass=function(){var t=this,e=t.el.querySelector(".bulb__macro");$(e).removeClass("bulb__focused")},e.prototype.convertToNativeRange=function(){var t=this,e=document.createRange(),n=t.$el.get(0);return e.setStart(n,0),e.setStart(n,n.childNodes.length),e},e.prototype.parseNativeRange=function(t,e,n){var o=this;if(n||o._isMacroInNativeRange(t)||o._isNativeRangeInMacro(t)||o._isSelected())return new r.MacroRange({block:e})},e.prototype._isMacroInNativeRange=function(t){var e,n=this,o=n.el,r=window.Range;return e=o.ownerDocument.createRange(),e.selectNode(o),t.compareBoundaryPoints(r.START_TO_START,e)<1&&t.compareBoundaryPoints(r.END_TO_END,e)>-1},e.prototype._isNativeRangeInMacro=function(t){var e,n=this,o=n.el;return e=t.commonAncestorContainer,3===e.nodeType&&(e=e.parentNode),!(e!==o&&!$.contains(o,e))},e.prototype._isSelected=function(){return this.$el.find(".bulb__macro-body").hasClass("bulb__selected")},e.prototype.selectMacro=function(t){t?this.$el.find(".bulb__macro-body").addClass("bulb__selected"):this.$el.find(".bulb__macro-body").removeClass("bulb__selected")},e}(n);return delete c.prototype.constructor,c.prototype.className="bulb__block-view bulb__macro-view",n.extend(c.prototype)}.apply(e,o))&&(t.exports=r)},function(t,e,n){(function(o){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";var n=this,o=n.DEBUG,r=n.console,i=function(){};return o&&r.assert&&(i=r.assert.bind(r)),i}.apply(e,r))&&(t.exports=i)}).call(e,n(43))},function(t,e,n){var o;void 0!==(o=function(t){var e=n(20),o=n(8),r=n(1),i=n(13);return e.View.extend({className:"bulb__highlight-view",_baseRect:null,_focusIndex:-1,_list:[],initialize:function(){var t=this;r.bindAll(t,"_extractData","onHide","nextHighlight")},_extractData:function(t){var e=this,n=t.getClientRects(),s=[];r.each(n,function(t){t.width<2||s.push(o(i.render("common","high_light_item",{top:t.top-e._baseRect.top-1,left:t.left-e._baseRect.left-2,height:t.height-2,width:t.width})).appendTo(e.$el).get(0))}),e._list.push(o(s))},_reset:function(){this._list=[],this._focusIndex=-1,this.$el.empty()},showHighlight:function(t,e){var n=this;return t&&e?0===e.length?(n._reset(),void n.onHide()):(n.$el.empty(),n.$el.show(),n._list=[],n._baseRect=n.el.getBoundingClientRect(),r.each(e,n._extractData),n._focusIndex=0,n._list[n._focusIndex].addClass("bulb__focused"),void n._list[n._focusIndex].get(0).scrollIntoViewIfNeeded()):(n._reset(),void n.onHide())},nextHighlight:function(t){var e=this;0!==e._list.length&&(e.$el.show(),t=t||1,e._list[e._focusIndex].removeClass("bulb__focused"),e._focusIndex=(e._focusIndex+e._list.length+t)%e._list.length,e._list[e._focusIndex].addClass("bulb__focused"),e._list[e._focusIndex].get(0).scrollIntoViewIfNeeded())},preHighlight:function(){this.nextHighlight(-1)},onHide:function(){this.$el.hide()}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o;void 0!==(o=function(t){function e(t){var e=null;do{s.contains(t.classList,u)&&(s.contains(t.classList,"bulb__page-header")?e="header":s.contains(t.classList,"bulb__page-footer")&&(e="footer")),t=t.parentElement}while(t);return e}var o=n(20),r=n(13),i=n(8),s=n(1),a=n(101),l=n(264),c=i('<div class="bulb__collab-editing-view-wrapper"><div class="bulb__collab-session-view"></div></div>'),u="bulb__header-footer-view";return o.View.extend({className:u,name:"header-footer",_focus:!1,_isReadOnly:!1,$input:null,events:{"focus .bulb__header-footer-input":"_onFocus","blur .bulb__header-footer-input":"_onBlur","keydown .bulb__header-footer-input":"_onKeyDown","input .bulb__header-footer-input":"_onTextInput","paste .bulb__header-footer-input":"_onPaste"},initialize:function(t,e){t=t||{};var n=this;n.block=t,n._contentOnFocus=null,n._keyMonitor=new a({el:n.el}),n.isFooter=!0===t.isFooter,n._isReadOnly=!!e,s.bindAll(n,"_onLockedChange","_updateViewByModel","_onPaste","_onHighlight"),t.on("high-light",n._onHighlight),t.on("locked-change",n._onLockedChange),t.on("change",n._updateViewByModel),this.render()},render:function(){var t,e=this,n=e.block,o=e.$el,i="bulb__page-"+(n.isFooter?"footer":"header"),s=""+(n.isFooter?"":"");t=r.render("common",e.name,{readonly:e._isReadOnly}),o.html(t),o.addClass(i).attr("title",s),e.$input=o.find(".bulb__header-footer-input"),e._updateViewByModel(n.getContent(),n.getAlign()),e._updateLockState(e.isLocked())},_updateViewByModel:function(t,e){this._focus||void 0===t||this.setContent(t),void 0!==e&&this.setAlign(e)},_onHighlight:function(t,e,n){var o=this,r=o.block,i=r.getHighlight(t,e);i&&o._convertToData(i,n)},_convertToData:function(t,e){var n,o=this,r=o.$input.get(0).firstChild;s.each(t,function(t){n=document.createRange(),n.setStart(r,t.start),n.setEnd(r,t.end),e(n)})},_onPaste:function(t){var e,n,o=t.originalEvent;t.preventDefault(),o.clipboardData&&o.clipboardData.getData?(e=o.clipboardData.getData("text/plain"),n=e&&e.replace(/\r?\n/g," "),document.execCommand("insertHTML",!1,n)):window.clipboardData&&window.clipboardData.getData&&(e=window.clipboardData.getData("Text"),l(e))},_onLockedChange:function(t){var e=this;e._updateLockState(e.isLocked()),e._updateLockIndicator(e.block.isLocked(),t),e.trigger("locked-change")},isLocked:function(){var t=this,e=t.block,n=!1;return e&&(n=e.isLocked()),n},_updateLockIndicator:function(t,e){var n=this,o=c.clone(),r=o.find(".bulb__collab-session-view"),i=e&&e.lockColor,s=e&&e.nickname;t?(n.$el.addClass("bulb__collab-editing-view"),void 0!==s&&(r.css("background-color",i),r.text(s),n.$el.find(".bulb__collab-editing-view-wrapper").remove(),n.$el.prepend(o))):(n.$el.removeClass("bulb__collab-editing-view"),n.$el.find(".bulb__collab-editing-view-wrapper").remove())},_updateLockState:function(t){var e=this;t?e.$el.addClass("bulb__collab-locked"):e.$el.removeClass("bulb__collab-locked")},_onTextInput:function(){this.trigger("text-input",this.$input.text())},_onFocus:function(){var t=this;t._focus=!0,t._contentOnFocus=t.$input.text()||"",t.trigger("focus")},_onBlur:function(){var t=this,e=t.$input.text();t._focus=!1,e!==t._contentOnFocus&&t.trigger("text-change",e),t.trigger("blur"),t._contentOnFocus=null},_stopPropagation:function(t){t.stopPropagation()},_onKeyDown:function(t){var e=this,n=["mod+s","mod+shift+r","mod+f"],o=!1,r=e._keyMonitor;r.isEventMatchKey(t,"enter")?(t.stopPropagation(),t.preventDefault(),e.$el.blur()):r.isEventMatchKey(t,"tab")?(t.stopPropagation(),t.preventDefault(),document.execCommand("insertHTML",!1,"&emsp;")):r.isEventMatchKey(t,"mod+z")||r.isEventMatchKey(t,"mod+y")?(t.stopPropagation(),t.preventDefault()):(o=s.some(n,function(e){return r.isEventMatchKey(t,e)}),o?t.preventDefault():t.stopPropagation())},getAlign:function(){return this.$input.css("text-align")},setAlign:function(t){var e=this,n="left"===t||"right"===t?t:"center";e.$input.css("text-align",n)},setContent:function(t){this.$input.text(t)},getContent:function(){return this.$input.text()},checkChange:function(){var t=this,e=t.$input.text()||"";null!=t._contentOnFocus&&e!==t._contentOnFocus&&(t.trigger("text-change",e),t._contentOnFocus=e)}},{isHeaderView:function(t){return"header"===e(t)},isFooterView:function(t){return"footer"===e(t)}})}.call(e,n,e,t))&&(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(28),n(1)],void 0!==(r=function(t,e,n,o){"use strict";return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.stop=function(){this.trigger("progress-stop")},e.prototype.updateContentSetProgress=function(t){o.isNumber(t.percent)&&this.trigger("progress-update",t)},e.prototype.initialize=function(t){},e}(n)}.apply(e,o))&&(t.exports=r)},function(t,e){t.exports={"yne-popup-menu":"bulb__yne-popup-menu","yne-popup-item":"bulb__yne-popup-item","yne-popup-split":"bulb__yne-popup-split",hover:"bulb__hover",disabled:"bulb__disabled","yne-button-item":"bulb__yne-button-item","note-view-wrapper":"bulb__note-view-wrapper","link-view":"bulb__link-view","hover-menu":"bulb__hover-menu","hover-menu-before":"bulb__hover-menu-before","hover-menu-show-link":"bulb__hover-menu-show-link","hover-menu-body":"bulb__hover-menu-body","link-button":"bulb__link-button","link-split":"bulb__link-split","link-remove-button":"bulb__link-remove-button","link-modify-button":"bulb__link-modify-button","hover-menu-modify-link":"bulb__hover-menu-modify-link","link-label":"bulb__link-label","link-input":"bulb__link-input","link-confirm-button":"bulb__link-confirm-button","link-button-text":"bulb__link-button-text","progressbar-container":"bulb__progressbar-container",show:"bulb__show","cannot-edit":"bulb__cannot-edit","yne-attachment-container":"bulb__yne-attachment-container","attachment-icon":"bulb__attachment-icon","attachment-title":"bulb__attachment-title","attachment-title-name":"bulb__attachment-title-name","attachment-title-type":"bulb__attachment-title-type","attachment-size":"bulb__attachment-size","attachment-download":"bulb__attachment-download","attachment-mask":"bulb__attachment-mask",selected:"bulb__selected","color-picker-panel-inner":"bulb__color-picker-panel-inner","color-picker-panel-wrap":"bulb__color-picker-panel-wrap","color-picker-panel-wrap-preview":"bulb__color-picker-panel-wrap-preview","color-picker-panel-wrap-ribbon":"bulb__color-picker-panel-wrap-ribbon","color-picker-panel-wrap-alpha":"bulb__color-picker-panel-wrap-alpha","color-picker-panel":"bulb__color-picker-panel","color-picker-panel-open":"bulb__color-picker-panel-open","color-picker-panel-close":"bulb__color-picker-panel-close","color-picker-panel-preview":"bulb__color-picker-panel-preview","color-picker-panel-board":"bulb__color-picker-panel-board","color-picker-panel-board-hsv":"bulb__color-picker-panel-board-hsv","color-picker-panel-board-value":"bulb__color-picker-panel-board-value","color-picker-panel-board-saturation":"bulb__color-picker-panel-board-saturation","color-picker-panel-ribbon":"bulb__color-picker-panel-ribbon","color-picker-panel-alpha":"bulb__color-picker-panel-alpha","color-picker-panel-alpha-bg":"bulb__color-picker-panel-alpha-bg","color-picker-panel-params":"bulb__color-picker-panel-params","color-picker-panel-params-input":"bulb__color-picker-panel-params-input","color-picker-panel-params-hex":"bulb__color-picker-panel-params-hex","color-picker-panel-params-lable":"bulb__color-picker-panel-params-lable","color-picker-panel-params-lable-hex":"bulb__color-picker-panel-params-lable-hex","color-picker-panel-params-lable-number":"bulb__color-picker-panel-params-lable-number","color-picker-panel-params-lable-alpha":"bulb__color-picker-panel-params-lable-alpha","color-picker":"bulb__color-picker","color-picker-wrap":"bulb__color-picker-wrap","color-picker-slide-up-enter":"bulb__color-picker-slide-up-enter","color-picker-slide-up-appear":"bulb__color-picker-slide-up-appear","color-picker-slide-up-leave":"bulb__color-picker-slide-up-leave","color-picker-slide-up-enter-active":"bulb__color-picker-slide-up-enter-active","color-picker-placement-bottomLeft":"bulb__color-picker-placement-bottomLeft","color-picker-placement-bottomRight":"bulb__color-picker-placement-bottomRight","color-picker-slide-up-appear-active":"bulb__color-picker-slide-up-appear-active",rcColorPickerSlideUpIn:"bulb__rcColorPickerSlideUpIn","color-picker-placement-topLeft":"bulb__color-picker-placement-topLeft","color-picker-placement-topRight":"bulb__color-picker-placement-topRight",rcColorPickerSlideDownIn:"bulb__rcColorPickerSlideDownIn","color-picker-slide-up-leave-active":"bulb__color-picker-slide-up-leave-active",rcColorPickerSlideUpOut:"bulb__rcColorPickerSlideUpOut",rcColorPickerSlideDownOut:"bulb__rcColorPickerSlideDownOut","note-view":"bulb__note-view","drop-hint":"bulb__drop-hint",blink:"bulb__blink","hidden-editable-area":"bulb__hidden-editable-area","highlight-view":"bulb__highlight-view","high-light-item":"bulb__high-light-item",focused:"bulb__focused",highlight:"bulb__highlight","table-view":"bulb__table-view","search-bar":"bulb__search-bar","table-layout-inner":"bulb__table-layout-inner","page-break":"bulb__page-break",spanMark:"bulb__spanMark",topSpan:"bulb__topSpan",middleSpan:"bulb__middleSpan",bottomSpan:"bulb__bottomSpan","attachment-view":"bulb__attachment-view","attachment-container":"bulb__attachment-container","lock-view-wrapper":"bulb__lock-view-wrapper","block-view":"bulb__block-view","catalogue-view":"bulb__catalogue-view","para-text":"bulb__para-text","catalogue-first":"bulb__catalogue-first","catalogue-last":"bulb__catalogue-last","catalogue-focus":"bulb__catalogue-focus","catalogue-header":"bulb__catalogue-header","catalogue-refresh":"bulb__catalogue-refresh","catalogue-delete":"bulb__catalogue-delete","note-view-frame":"bulb__note-view-frame","has-handwrite":"bulb__has-handwrite","header-footer-view":"bulb__header-footer-view","header-footer-input":"bulb__header-footer-input","heading-view":"bulb__heading-view","hr-view":"bulb__hr-view","hr-container":"bulb__hr-container","read-only":"bulb__read-only","image-view":"bulb__image-view","image-container":"bulb__image-container","resize-handle":"bulb__resize-handle","menu-wrapper":"bulb__menu-wrapper","menu-wrapper-right":"bulb__menu-wrapper-right","menu-wrapper-left":"bulb__menu-wrapper-left","menu-wrapper-mini":"bulb__menu-wrapper-mini","image-title":"bulb__image-title","image-split":"bulb__image-split",locked:"bulb__locked","image-copy-hack":"bulb__image-copy-hack","image-title-input-wrapper":"bulb__image-title-input-wrapper","image-title-input":"bulb__image-title-input","image-title-placeholder":"bulb__image-title-placeholder","paragraph-view":"bulb__paragraph-view","list-item-view":"bulb__list-item-view","no-inline":"bulb__no-inline","li-box":"bulb__li-box","quote-view":"bulb__quote-view","default-cell-link-style":"bulb__default-cell-link-style","table-layout":"bulb__table-layout","hidden-input":"bulb__hidden-input","table-wrapper":"bulb__table-wrapper","cell-edit":"bulb__cell-edit","cell-edit-box":"bulb__cell-edit-box","selection-layer":"bulb__selection-layer","resource-wrap":"bulb__resource-wrap","cell-resize-layer":"bulb__cell-resize-layer","resize-up":"bulb__resize-up","resize-down":"bulb__resize-down","resize-right":"bulb__resize-right","resize-left":"bulb__resize-left","reisze-left":"bulb__reisze-left","row-resize-line":"bulb__row-resize-line","col-resize-line":"bulb__col-resize-line","todo-view":"bulb__todo-view","todo-mark":"bulb__todo-mark",checked:"bulb__checked","todo-inner":"bulb__todo-inner","todo-input":"bulb__todo-input","todo-content":"bulb__todo-content","handwrite-view":"bulb__handwrite-view","handwrite-container":"bulb__handwrite-container","handwrite-copy-hack":"bulb__handwrite-copy-hack","unknown-view":"bulb__unknown-view",macro:"bulb__macro","macro-hover-body":"bulb__macro-hover-body","macro-body":"bulb__macro-body","default-macro-body":"bulb__default-macro-body","default-macro-text":"bulb__default-macro-text","default-img":"bulb__default-img",menu:"bulb__menu","menu-item":"bulb__menu-item","macro-button":"bulb__macro-button","macro-delete-button":"bulb__macro-delete-button","collab-editing-view-wrapper":"bulb__collab-editing-view-wrapper","collab-editing-view":"bulb__collab-editing-view","collab-locked":"bulb__collab-locked","collab-session-view":"bulb__collab-session-view","filter-blur":"bulb__filter-blur","format-painter-active":"bulb__format-painter-active","yne-button-group":"bulb__yne-button-group","yne-last":"bulb__yne-last","yne-button":"bulb__yne-button","yne-arrow-down":"bulb__yne-arrow-down","yne-clear":"bulb__yne-clear","page-A4":"bulb__page-A4","page-B5":"bulb__page-B5","page-TEST":"bulb__page-TEST","page-header":"bulb__page-header","page-footer":"bulb__page-footer",share:"bulb__share",toolbar:"bulb__toolbar","toolbar-button":"bulb__toolbar-button","button-wrapper":"bulb__button-wrapper",active:"bulb__active",button:"bulb__button","button-undo":"bulb__button-undo","button-redo":"bulb__button-redo","button-remove-format":"bulb__button-remove-format","button-wrapper-hr":"bulb__button-wrapper-hr","button-hr":"bulb__button-hr","toolbar-combo-box":"bulb__toolbar-combo-box","combo-showmore-wrapper":"bulb__combo-showmore-wrapper","toolbar-combo-box-table":"bulb__toolbar-combo-box-table","combo-display-wrapper":"bulb__combo-display-wrapper","combo-box-font-family":"bulb__combo-box-font-family","combo-value-wrapper":"bulb__combo-value-wrapper","combo-box-font-size":"bulb__combo-box-font-size","combo-box-line-height":"bulb__combo-box-line-height","combo-box-align":"bulb__combo-box-align","combo-box-view-mode":"bulb__combo-box-view-mode","combo-expand-wrapper":"bulb__combo-expand-wrapper","combo-box-color":"bulb__combo-box-color","combo-box-back-color":"bulb__combo-box-back-color","combo-box-snap-screen":"bulb__combo-box-snap-screen","svg-common":"bulb__svg-common","svg--align_center":"bulb__svg--align_center","svg--align_justify":"bulb__svg--align_justify","svg--align_left":"bulb__svg--align_left","svg--align_right":"bulb__svg--align_right","svg--attachment":"bulb__svg--attachment","svg--attacthment_download":"bulb__svg--attacthment_download","svg--auto_wrap":"bulb__svg--auto_wrap","svg--bold":"bulb__svg--bold","svg--border_color":"bulb__svg--border_color","svg--catalogue":"bulb__svg--catalogue","svg--catalogue-refresh":"bulb__svg--catalogue-refresh","svg--catalogue_remove":"bulb__svg--catalogue_remove","svg--checked":"bulb__svg--checked","svg--clean_format":"bulb__svg--clean_format","svg--clean_format_active":"bulb__svg--clean_format_active","svg--combo_expand":"bulb__svg--combo_expand","svg--export":"bulb__svg--export","svg--fixed_top":"bulb__svg--fixed_top","svg--format_painter":"bulb__svg--format_painter","svg--hr":"bulb__svg--hr","svg--image":"bulb__svg--image","svg--indent":"bulb__svg--indent","svg--inline_height":"bulb__svg--inline_height","svg--italic":"bulb__svg--italic","svg--line_through":"bulb__svg--line_through","svg--link":"bulb__svg--link","svg--list_ol":"bulb__svg--list_ol","svg--list_ul":"bulb__svg--list_ul","svg--macro-error":"bulb__svg--macro-error","svg--more-macro":"bulb__svg--more-macro","svg--normal_mode":"bulb__svg--normal_mode","svg--note_background":"bulb__svg--note_background","svg--outdent":"bulb__svg--outdent","svg--page_mode":"bulb__svg--page_mode","svg--quote":"bulb__svg--quote","svg--read_mode":"bulb__svg--read_mode","svg--redo":"bulb__svg--redo","svg--redo_active":"bulb__svg--redo_active","svg--reference":"bulb__svg--reference","svg--resize_view":"bulb__svg--resize_view","svg--screenshot":"bulb__svg--screenshot","svg--screenshot_x":"bulb__svg--screenshot_x","svg--sync":"bulb__svg--sync","svg--table":"bulb__svg--table","svg--table_cell_align_bottom":"bulb__svg--table_cell_align_bottom","svg--table_cell_align_mid":"bulb__svg--table_cell_align_mid","svg--table_cell_align_top":"bulb__svg--table_cell_align_top","svg--table_cell_border_all":"bulb__svg--table_cell_border_all","svg--table_cell_border_left":"bulb__svg--table_cell_border_left","svg--table_cell_border_none":"bulb__svg--table_cell_border_none","svg--table_cell_border_out":"bulb__svg--table_cell_border_out","svg--table_cell_border_right":"bulb__svg--table_cell_border_right","svg--table_cell_border_top":"bulb__svg--table_cell_border_top","svg--table_cell_broder_bottom":"bulb__svg--table_cell_broder_bottom","svg--table_cell_merge":"bulb__svg--table_cell_merge","svg--table_hide_border":"bulb__svg--table_hide_border","svg--table_insert_delete":"bulb__svg--table_insert_delete","svg--text_background":"bulb__svg--text_background","svg--text_color":"bulb__svg--text_color","svg--todo":"bulb__svg--todo","svg--toggle_tab":"bulb__svg--toggle_tab","svg--type_audio_large":"bulb__svg--type_audio_large","svg--type_compress_large":"bulb__svg--type_compress_large","svg--type_csv_large":"bulb__svg--type_csv_large","svg--type_excel_large":"bulb__svg--type_excel_large","svg--type_flash_large":"bulb__svg--type_flash_large","svg--type_html_large":"bulb__svg--type_html_large","svg--type_image_large":"bulb__svg--type_image_large","svg--type_md_large":"bulb__svg--type_md_large","svg--type_music_large":"bulb__svg--type_music_large","svg--type_note_large":"bulb__svg--type_note_large","svg--type_other_large":"bulb__svg--type_other_large","svg--type_pdf_large":"bulb__svg--type_pdf_large","svg--type_ppt_large":"bulb__svg--type_ppt_large","svg--type_scan_large":"bulb__svg--type_scan_large","svg--type_table_large":"bulb__svg--type_table_large","svg--type_txt_large":"bulb__svg--type_txt_large","svg--type_video_large":"bulb__svg--type_video_large","svg--type_word_large":"bulb__svg--type_word_large","svg--underline":"bulb__svg--underline","svg--undo":"bulb__svg--undo","svg--undo_active":"bulb__svg--undo_active","border-transition":"bulb__border-transition","bg-transition":"bulb__bg-transition","toolbar-item":"bulb__toolbar-item","button-bold":"bulb__button-bold","button-italic":"bulb__button-italic","button-underline":"bulb__button-underline","button-strike":"bulb__button-strike","button-outdent":"bulb__button-outdent","button-indent":"bulb__button-indent","button-unordered-list":"bulb__button-unordered-list","button-ordered-list":"bulb__button-ordered-list","button-format-painter":"bulb__button-format-painter","button-img":"bulb__button-img","button-attachment":"bulb__button-attachment","button-catalogue":"bulb__button-catalogue","button-todo":"bulb__button-todo","button-quote":"bulb__button-quote","button-view-mode":"bulb__button-view-mode",normal:"bulb__normal",page:"bulb__page","button-table-wrap":"bulb__button-table-wrap","button-table-merge":"bulb__button-table-merge","button-macro-button":"bulb__button-macro-button","button-more-macro":"bulb__button-more-macro","button-text":"bulb__button-text","combo-value":"bulb__combo-value","combo-value-heading":"bulb__combo-value-heading","combo-value-font-family":"bulb__combo-value-font-family","combo-value-font-size":"bulb__combo-value-font-size","combo-value-align":"bulb__combo-value-align",justify:"bulb__justify",left:"bulb__left",center:"bulb__center",right:"bulb__right","combo-value-line-height":"bulb__combo-value-line-height","combo-value-link":"bulb__combo-value-link","combo-value-color":"bulb__combo-value-color","combo-value-buttom-color":"bulb__combo-value-buttom-color","combo-value-back-color":"bulb__combo-value-back-color","combo-value-set-background":"bulb__combo-value-set-background","combo-value-table":"bulb__combo-value-table","combo-value-showmore":"bulb__combo-value-showmore","combo-value-table-justify":"bulb__combo-value-table-justify",bottom:"bulb__bottom",middle:"bulb__middle",top:"bulb__top","combo-value-table-operate":"bulb__combo-value-table-operate","combo-expand":"bulb__combo-expand","combo-expand-gray":"bulb__combo-expand-gray","combo-link-wrapper":"bulb__combo-link-wrapper","combo-menu-wrapper":"bulb__combo-menu-wrapper","combo-menu-font-family":"bulb__combo-menu-font-family","combo-menu-font-size":"bulb__combo-menu-font-size","combo-menu-heading":"bulb__combo-menu-heading","combo-item":"bulb__combo-item","combo-menu-table-justify":"bulb__combo-menu-table-justify","combo-menu-table-operate":"bulb__combo-menu-table-operate","combo-menu-align":"bulb__combo-menu-align","combo-menu-view-mode":"bulb__combo-menu-view-mode","combo-menu-line-height":"bulb__combo-menu-line-height","combo-item-icon-align":"bulb__combo-item-icon-align","combo-item-icon-line-height":"bulb__combo-item-icon-line-height","combo-item-icon-view-mode":"bulb__combo-item-icon-view-mode","combo-item-icon-table-justify":"bulb__combo-item-icon-table-justify","combo-item-icon-table-operate":"bulb__combo-item-icon-table-operate","combo-menu-color":"bulb__combo-menu-color","combo-menu-back-color":"bulb__combo-menu-back-color","color-section-split":"bulb__color-section-split","color-section":"bulb__color-section","color-row-split":"bulb__color-row-split","color-label":"bulb__color-label","color-label-default":"bulb__color-label-default","color-label-other":"bulb__color-label-other","color-label-theme":"bulb__color-label-theme","color-label-standard":"bulb__color-label-standard","color-section-theme":"bulb__color-section-theme","color-section-standard":"bulb__color-section-standard","color-cell":"bulb__color-cell","back-color-cell-default":"bulb__back-color-cell-default","color-part-theme":"bulb__color-part-theme","color-img-other":"bulb__color-img-other","color-section-other":"bulb__color-section-other","combo-menu-set-background":"bulb__combo-menu-set-background","background-section-split":"bulb__background-section-split","background-section-top":"bulb__background-section-top","background-section-bottom":"bulb__background-section-bottom","background-label":"bulb__background-label","background-label-vip":"bulb__background-label-vip","background-row":"bulb__background-row","background-cell-check-mark":"bulb__background-cell-check-mark","background-cell":"bulb__background-cell","combo-menu-table":"bulb__combo-menu-table","combo-item-row":"bulb__combo-item-row","combo-menu-label-table":"bulb__combo-menu-label-table","wrapper-showmore":"bulb__wrapper-showmore","combo-menu-showmore":"bulb__combo-menu-showmore","wrapper-link":"bulb__wrapper-link","combo-menu-link":"bulb__combo-menu-link","toolbar-combo-more":"bulb__toolbar-combo-more","toolbar-split":"bulb__toolbar-split","menu-position-fix":"bulb__menu-position-fix","combo-box-set-background":"bulb__combo-box-set-background",_one_combo_btn:"bulb___one_combo_btn",_two_combo_btn:"bulb___two_combo_btn","combo-box-table-justify":"bulb__combo-box-table-justify","combo-box-table-operate":"bulb__combo-box-table-operate","combo-box-heading":"bulb__combo-box-heading","tooltipster-fading":"bulb__tooltipster-fading","tooltipster-rotating":"bulb__tooltipster-rotating","tooltipster-scaling":"bulb__tooltipster-scaling",editor:"bulb__editor"}},function(t,e){t.exports={toolbar:"bulb__toolbar","collab-editing-view":"bulb__collab-editing-view","note-view-wrapper":"bulb__note-view-wrapper","note-view":"bulb__note-view","collab-session-view":"bulb__collab-session-view","block-view":"bulb__block-view","hr-container":"bulb__hr-container",wrapper:"bulb__wrapper","highlight-view":"bulb__highlight-view","search-bar-high-light":"bulb__search-bar-high-light","catalogue-refresh":"bulb__catalogue-refresh","catalogue-delete":"bulb__catalogue-delete","page-break":"bulb__page-break","page-break-placeholder":"bulb__page-break-placeholder","header-footer-view":"bulb__header-footer-view","note-view-frame":"bulb__note-view-frame","page-A4":"bulb__page-A4","bulb-toolbar":"bulb__bulb-toolbar","ytable-toolbar-wrapper":"bulb__ytable-toolbar-wrapper"}},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./toolbar-button-template.jst":864,"./toolbar-combo-box-align.jst":865,"./toolbar-combo-box-back-color.jst":866,"./toolbar-combo-box-color.jst":867,"./toolbar-combo-box-font-family.jst":868,"./toolbar-combo-box-font-size.jst":869,"./toolbar-combo-box-heading.jst":870,"./toolbar-combo-box-insert-link.jst":871,"./toolbar-combo-box-line-height.jst":872,"./toolbar-combo-box-set-background.jst":873,"./toolbar-combo-box-show-more.jst":874,"./toolbar-combo-box-table.jst":875,"./toolbar-combo-box-template.jst":876,"./toolbar_view.jst":877};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=863},function(t,e){t.exports='<div class="bulb__button-wrapper bulb__button-wrapper-<%=name%>">\n    <div class="bulb__button bulb__button-<%=name%> bulb__svg-common" title="<%=label%>">\n    <% if (icon) {%>\n        <img src="<%=icon%>"></img>\n    <% } %>\n    </div>\n</div>'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common"></span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <ul class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    <% for (key in items) { %>\n        <li class="bulb__combo-item" data-value="<%=key%>">\n            <span class="bulb__combo-item-icon-<%=name%> bulb__<%=key%> bulb__svg-common">&nbsp;</span>\n            <span class="bulb__combo-item-span-<%=name%>"><%=items[key]%></span>\n        </li>\n    <% } %>\n    </ul>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__svg-common bulb__combo-value-<%=name%>">\n            <span class="bulb__combo-value-buttom-color"></span>\n        </span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <div class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n        <div class="bulb__color-section bulb__color-section-default bulb__combo-item" data-value="<%=defaultValue%>">\n            <div class="bulb__color-cell bulb__combo-item bulb__back-color-cell-default" data-value="<%=defaultValue%>" style="background-color:<%=defaultValue%>;"></div>\n            <div class="bulb__color-label bulb__color-label-default"></div>\n        </div>\n        <hr class="bulb__color-section-split">\n        <div class="bulb__color-section bulb__color-section-theme">\n            <div class="bulb__color-label bulb__color-label-theme"></div>\n            <div class="bulb__color-row">\n            <% for (key in items.theme) { %>\n                <div class="bulb__color-cell bulb__combo-item" data-value="<%=items.theme[key]%>" style="background-color:<%=items.theme[key]%>;"></div>\n            <% } %>\n            </div>\n            <div class="bulb__color-row-split"></div>\n            <div class="bulb__color-part-theme">\n            <% for (row in items.other) { %>\n                <div class="bulb__color-row">\n                <% for (key in items.other[row]) { %>\n                    <div class="bulb__color-cell bulb__combo-item" data-value="<%=items.other[row][key]%>" style="background-color:<%=items.other[row][key]%>;"></div>\n                <% } %>\n                </div>\n            <% } %>\n            </div>\n        </div>\n        <hr class="bulb__color-section-split">\n        <div class="bulb__color-section bulb__color-section-standard">\n            <div class="bulb__color-label bulb__color-label-standard"></div>\n            <div class="bulb__color-row">\n            <% for (key in items.standard) { %>\n                <div class="bulb__color-cell bulb__combo-item" data-value="<%=items.standard[key]%>" style="background-color:<%=items.standard[key]%>;"></div>\n            <% } %>\n            </div>\n        </div>\n        <hr class="bulb__color-section-split">\n        <div class="bulb__color-section bulb__color-section-other bulb__combo-item">\n            <div class="bulb__color-img-other"></div>\n            <div class="bulb__color-label bulb__color-label-other"></div>\n        <div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common">\n            <span class="bulb__combo-value-buttom-color"></span>\n        </span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <div class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n        <div class="bulb__color-section bulb__color-section-default bulb__combo-item" data-value="<%=defaultValue%>">\n            <div class="bulb__color-cell bulb__combo-item bulb__color-cell-default" data-value="<%=defaultValue%>" style="background-color:<%=defaultValue%>;"></div>\n            <div class="bulb__color-label bulb__color-label-default"></div>\n        </div>\n        <hr class="bulb__color-section-split">\n        <div class="bulb__color-section bulb__color-section-theme">\n            <div class="bulb__color-label bulb__color-label-theme"></div>\n            <div class="bulb__color-row">\n            <% for (key in items.theme) { %>\n                <div class="bulb__color-cell bulb__combo-item" data-value="<%=items.theme[key]%>" style="background-color:<%=items.theme[key]%>;"></div>\n            <% } %>\n            </div>\n            <div class="bulb__color-row-split"></div>\n            <div class="bulb__color-part-theme">\n            <% for (row in items.other) { %>\n                <div class="bulb__color-row">\n                <% for (key in items.other[row]) { %>\n                    <div class="bulb__color-cell bulb__combo-item" data-value="<%=items.other[row][key]%>" style="background-color:<%=items.other[row][key]%>;"></div>\n                <% } %>\n                </div>\n            <% } %>\n            </div>\n        </div>\n        <hr class="bulb__color-section-split">\n        <div class="bulb__color-section bulb__color-section-standard">\n            <div class="bulb__color-label bulb__color-label-standard"></div>\n            <div class="bulb__color-row">\n            <% for (key in items.standard) { %>\n                <div class="bulb__color-cell bulb__combo-item" data-value="<%=items.standard[key]%>" style="background-color:<%=items.standard[key]%>;"></div>\n            <% } %>\n            </div>\n        </div>\n        <hr class="bulb__color-section-split">\n        <div class="bulb__color-section bulb__color-section-other bulb__combo-item">\n            <div class="bulb__color-img-other"></div>\n            <div class="bulb__color-label bulb__color-label-other"></div>\n        <div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common"></span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <ul class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    <% for (font in items) { %>\n        <li class="bulb__combo-item" data-value="<%=items[font].singleValue%>">\n            <span style="font-family:<%=items[font].fullValue%>;"><%=items[font].name%></span>\n        </li>\n    <% } %>\n    </ul>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common"></span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <ul class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    <% for (key in items) { %>\n        <li class="bulb__combo-item" data-value="<%=key%>">\n            <span><%=items[key]%></span>\n        </li>\n    <% } %>\n    </ul>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%>"></span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <ul class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    <% for (key in items) { %>\n        <li class="bulb__combo-item" data-value="<%=key%>">\n            <span style="font-size: <%=items[key][\'font-size\']%>px"><%=items[key].name%></span>\n        </li>\n    <% } %>\n    </ul>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper bulb__combo-link-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper bulb__combo-value-wrapper-<%=name%>">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper bulb__wrapper-<%=name%>">\n    <div class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n        <span class="bulb__link-label"></span>\n        <input class="bulb__link-input" type="text" name="link" placeholder="" />\n        <div class="bulb__link-button">\n            <span class="bulb__link-button-text"></span>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common"></span>\n    </div>\n    <div class="bulb__combo-expand-wrapper">\n        <span class="bulb__combo-expand bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <ul class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    <% for (idx in items) { %>\n        <li class="bulb__combo-item" data-value="<%=items[idx].key%>">\n            <span class="bulb__combo-item-icon-<%=name%> bulb__line-height-<%=idx%>">&nbsp;</span>\n            <span class="bulb__combo-item-span-<%=name%>"><%=items[idx].value%></span>\n        </li>\n    <% } %>\n    </ul>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common">\n        </span>\n        <span class="bulb__combo-text bulb__combo-text-<%=name%>"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <div class="bulb__combo-menu bulb__combo-menu-<%=name%> bulb__svg-common">\n        <div class="bulb__background-section-top">\n            <% for (row in items.normalUser) { %>\n            <div class="bulb__background-row">\n                <% for (key in items.normalUser[row]) { %>\n                    <% if (items.normalUser[row][key] === \'NoBackground\') { %>\n                        <div class="bulb__background-cell bulb__combo-item" data-value="<%=items.normalUser[row][key]%>">\n                            <svg class="bulb__background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\n                        </div>\n                    <% } else { %>\n                        <div class="bulb__background-cell bulb__combo-item" data-value="<%=items.normalUser[row][key]%>" style="background-image:url(\'<%=items.normalUser[row][key]%>\');">\n                            <svg class="bulb__background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\n                        </div>\n                    <% } %>\n                <% } %>\n                </div>\n            <% } %>\n        </div>\n        <hr class="bulb__background-section-split">\n        <div class="bulb__background-section-bottom">\n            <div class="bulb__background-label bulb__background-label-vip"></div>\n            <% for (row in items.VIP) { %>\n                <div class="bulb__background-row">\n                <% for (key in items.VIP[row]) { %>\n                    <div class="bulb__background-cell bulb__combo-item" data-value="<%=items.VIP[row][key]%>" style="background-image:url(\'<%=items.VIP[row][key]%>\');">\n                        <svg class="bulb__background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\n                    </div>\n                <% } %>\n                </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__toolbar-more-split"></div>\n<div class="bulb__combo-display-wrapper bulb__combo-showmore-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper bulb__combo-value-wrapper-<%=name%>">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%>"></span>\n        <span class="bulb__combo-expand-gray bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper bulb__wrapper-<%=name%>">\n    <div class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper" title="<%=label%>">\n    <div class="bulb__combo-value-wrapper">\n        <span class="bulb__combo-value bulb__combo-value-<%=name%> bulb__svg-common"></span>\n    </div>\n</div>\n<div class="bulb__combo-menu-wrapper">\n    <div class="bulb__combo-menu bulb__combo-menu-<%=name%>">\n    <% for (var i=0; i<maxRows; i++) { %>\n        <div class="bulb__combo-item-row">\n        <% for (var j=0; j<maxCols; j++) { %>\n            <span class="bulb__combo-item" data-row="<%=i%>" data-col="<%=j%>"></span>\n        <% } %>\n        </div>\n    <% } %>\n    <div class="bulb__combo-menu-label-<%=name%>"></div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="bulb__combo-display-wrapper">\n    <div class="bulb__combo-value-wrapper"></div>\n    <div class="bulb__combo-expand-wrapper"></div>\n</div>\n<div class="bulb__combo-menu-wrapper"></div>\n'},function(t,e){t.exports='<div class="bulb__toolbar-container">\n    <% \n        _.each(items, function(conf, key){\n            if(conf.type === \'button\') {\n    %>\n                <button class="bulb__<%= key%>" action="<%= conf.action%>" name="<%= conf.name%>" type="button" data-yne-is-block="<%= !!conf.block%>"><%= conf.label%></button>\n    <%      \n            } else if(conf.type === \'select\') {\n    %>\n                <select class="bulb__<%= key%>" action="<%= conf.action%>" name="<%= conf.name%>" data-yne-is-block="<%= !!conf.block%>">\n    <%\n                    _.each(conf.options, function(value, key) {\n    %>\n                        <option value="<%= key%>"><%= value%></option>\n    <%                       \n                    });\n    %>\n                </select>\n    <%\n            }\n        });\n    %>\n\n</div>'},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";return{"content-change":"content-change","insert-link":"require-link","insert-attachment":"require-attachment","upload-image":"paste-image"}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(13),n(28),n(1),n(880)],void 0!==(r=function(t,e,n,o,r){"use strict";function s(t){var e={},n=t.style.display;return t.style.display="",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display=n,e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opened=!1,e}return i(e,t),e.prototype.initialize=function(t){this._options=r.extend({left:"-9999px",top:"-9999px",items:[]},t),r.bindAll(this,"_onDocumentMousedown","_onWinBehaviors","_onMenuItemMousedown","_onMenuItemClick")},e.prototype.updatePosition=function(){var t=document.documentElement.clientHeight,e=s(this._$el.get(0)),n=this._options.top;n+e.height>t&&(n-=e.height),this._$el.css({left:this._options.left+"px",top:n+"px"})},e.prototype.open=function(t){r.extend(this._options,t),this._render(),this.append(),this.updatePosition(),this.opened=!0,this.trigger("open")},e.prototype.close=function(){this.remove(),this.opened=!1,this.trigger("close")},e.prototype.append=function(){this._bindEvents(),this._$el.appendTo(document.body)},e.prototype.remove=function(){this._unbindEvents(),this._$el.remove()},e.prototype.destory=function(){this.remove(),this._$el=null},e.prototype._render=function(){var t=this._options.items;this._$el=$(n.render("sdk","contextmenu",{items:t})),this._$el.on("contextmenu",this._onContextMenu)},e.prototype._bindEvents=function(){this._$el.on("mousedown",this._onMenuItemMousedown).on("click",this._onMenuItemClick),$(window).on("wheel",this._onWinBehaviors).on("blur",this._onWinBehaviors),$(document).on("mousedown",this._onDocumentMousedown)},e.prototype._unbindEvents=function(){this._$el.off("mousedown",this._onMenuItemMousedown).off("click",this._onMenuItemClick),$(window).off("wheel",this._onWinBehaviors).off("blur",this._onWinBehaviors),$(document).off("mousedown",this._onDocumentMousedown)},e.prototype._onDocumentMousedown=function(t){var e=t.target;$.contains(this._$el.get(0),e)||this.close()},e.prototype._onWinBehaviors=function(t){this.opened&&this.close()},e.prototype._onMenuItemMousedown=function(t){t.preventDefault()},e.prototype._onMenuItemClick=function(t){var e=$(t.target).closest(".bulb__menu-item");if(e.hasClass("bulb__disabled"))return t.preventDefault(),void t.stopPropagation();e.get(0)&&(this.close(),this.trigger("item-click",parseInt(e.attr("data-index"),10)))},e.prototype._onContextMenu=function(t){t.preventDefault(),t.stopPropagation()},e}(o);e.default=a}.apply(e,o))&&(t.exports=r)},function(t,e){t.exports={contextmenu:"bulb__contextmenu",menu:"bulb__menu","menu-item":"bulb__menu-item",disabled:"bulb__disabled"}},function(t,e,n){var o,r;o=[n,e],void 0!==(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerEventMap={"pre-copy":"preCopy","pre-paste":"prePaste","pre-cut":"preCut"}}.apply(e,o))&&(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(8),n(1),n(137)],void 0!==(r=function(t,e,o,r,i){"use strict";function s(t){o('div[data-media-type="attachment"]',t).each(function(t,e){var s=o(e),a=s.attr("filelength"),l=s.attr("filename"),c=o("<div/>"),u=o("<div/>"),p=o("<div/>"),d=o("<div/>"),h=o("<div/>"),f=i.splitFileFullName(l),g=n(883)("./type_"+i.getFileType(l)+"_large.svg");s.css({display:"inline-block",position:"relative",outline:"none",width:"280px",height:"64px","border-radius":"4px","background-color":"#ffffff !important",border:"solid 1px #e0e1e5","vertical-align":"middle"}),c.css({margin:"15px 17px 15px 15px",float:"left","-webkit-print-color-adjust":"exact",width:"34px",height:"38px",background:"url("+g+") no-repeat"}),u.css({height:"18px","font-size":"12px","font-weight":500,"font-style":"normal","font-stretch":"normal","text-align":"justify",color:"#393939","margin-top":"16px",width:"166px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",cursor:"default","user-select":"none"}),p.css({"max-width":"115px",display:"inline-block","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",margin:0}),d.css({display:"inline-block","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",margin:0}),h.css({"font-size":"12px","font-weight":"normal","font-style":"normal","font-stretch":"normal","text-align":"justify",color:"#797979",cursor:"default",height:"14px","user-select":"none"}),s.empty(),p.text(r.escape(f.fileName)),d.text(r.escape(f.fileType)),h.text(r.escape(i.getSizeString(parseInt(a,10)))),u.append(p,[d]),s.append(c,[u,h])})}Object.defineProperty(e,"__esModule",{value:!0}),e.toRenderHtml=function(t){var e=o("<div/>");return e.html(t),s(e),e[0].innerHTML}}.apply(e,o))&&(t.exports=r)},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./type_audio_large.svg":884,"./type_compress_large.svg":885,"./type_csv_large.svg":886,"./type_excel_large.svg":887,"./type_flash_large.svg":888,"./type_html_large.svg":889,"./type_image_large.svg":890,"./type_md_large.svg":891,"./type_music_large.svg":892,"./type_note_large.svg":893,"./type_other_large.svg":894,"./type_pdf_large.svg":895,"./type_ppt_large.svg":896,"./type_scan_large.svg":897,"./type_table_large.svg":898,"./type_txt_large.svg":899,"./type_video_large.svg":900,"./type_word_large.svg":901};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=883},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzNHB4IiB2aWV3Qm94PSIwIDAgMzAgMzQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQxICgzNTMyNikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+6K+t6Z+z6YCf6K6wMzAqMzQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iaWNvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwNTEuMDAwMDAwLCAtNDQzLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0i6I+c5Y2V5paH5Lu28J+Msi1jb3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgwLjAwMDAwMCwgNDAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9Im11c2ljLWNvcHktMTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk3MS4wMDAwMDAsIDQyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg4OTY3Mzk0OCwwIDEuOTkxMTU1LDAgTDIyLDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IFoiIGlkPSJSZWN0YW5nbGUtMzc3IiBmaWxsPSIjQkNBNUZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDI2IEwxNiwyMy45NTAzMjU4IEMxOS4xNjc1OTQzLDIzLjYzNDMwNiAyMS45ODA3MjIzLDIxLjgzMDEwMTQgMjMuNjAxODA5MywxOS4xMDI2MzMgTDIxLjg4MjU1NzMsMTguMDgwNzg1MyBDMjAuNDQ5NTI5NywyMC40OTE4NDUgMTcuODU2MDc1NSwyMiAxNSwyMiBDMTIuMTUzNzUzMywyMiA5LjU2Nzk2OTU2LDIwLjUwMjI4NjIgOC4xMzE2MDM3NSwxOC4xMDQ1MTc4IEw2LjQxNTg5Mzc3LDE5LjEzMjMwMTQgQzguMDQwMTU1MjgsMjEuODQzNzI5NyAxMC44NDQzNzM0LDIzLjYzNTUxMDEgMTQsMjMuOTUwMzI3MiBMMTQsMjYgTDExLjk5NzAzMDEsMjYgQzExLjQ1MzAzNjMsMjYgMTEsMjYuNDQ3NzE1MyAxMSwyNyBDMTEsMjcuNTU2MTM1MiAxMS40NDYzODU2LDI4IDExLjk5NzAzMDEsMjggTDE4LjAwMjk2OTksMjggQzE4LjU0Njk2MzcsMjggMTksMjcuNTUyMjg0NyAxOSwyNyBDMTksMjYuNDQzODY0OCAxOC41NTM2MTQ0LDI2IDE4LjAwMjk2OTksMjYgTDE2LDI2IEwxNiwyNiBaIE0xMCwxMC45OTUwMjkxIEMxMCw4LjIzNjM1MDY5IDEyLjI0NDE5NTIsNiAxNSw2IEMxNy43NjE0MjM3LDYgMjAsOC4yMzM4MjIxMiAyMCwxMC45OTUwMjkxIEwyMCwxNS4wMDQ5NzA5IEMyMCwxNy43NjM2NDkzIDE3Ljc1NTgwNDgsMjAgMTUsMjAgQzEyLjIzODU3NjMsMjAgMTAsMTcuNzY2MTc3OSAxMCwxNS4wMDQ5NzA5IEwxMCwxMC45OTUwMjkxIFogTTEyLDEwLjk5NTAyOTEgTDEyLDE1LjAwNDk3MDkgQzEyLDE2LjY2MDEzMjcgMTMuMzQxNjY5OCwxOCAxNSwxOCBDMTYuNjUzOTY3OSwxOCAxOCwxNi42NTYzNDkxIDE4LDE1LjAwNDk3MDkgTDE4LDEwLjk5NTAyOTEgQzE4LDkuMzM5ODY3MjggMTYuNjU4MzMwMiw4IDE1LDggQzEzLjM0NjAzMjEsOCAxMiw5LjM0MzY1MDkgMTIsMTAuOTk1MDI5MSBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMSwxLjk5OTkyMDQgTDEsMS45OTk5MjA0IEwxLDMyLjAwMDA3OTYgQzEsMzIuNTU1MjQ0NCAxLjQ0MzQzODA0LDMzIDEuOTkxNjE3MDMsMzMgTDI4LjAwODM4MywzMyBDMjguNTUxODc2NiwzMyAyOSwzMi41NTE2MjI4IDI5LDMyLjAwMjk5NTMgTDI5LDggTDI5LjI5Mjg5MzIsOC43MDcxMDY3OCBMMjEuMjkyODkzMiwwLjcwNzEwNjc4MSBMMjIsMSBMMS45OTExNTUsMSBDMS40NDM3MDUxMiwxIDEsMS40NDU5MzYzIDEsMS45OTk5MjA0IEwxLDEuOTk5OTIwNCBaIE0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg4OTY3Mzk0OCwwIDEuOTkxMTU1LDAgTDIyLDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtMTM3Ni1Db3B5LTM1IiBmaWxsLW9wYWNpdHk9IjAuMSIgZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIyMyA3IDI5LjAyNDEwODkgNyAzMCA4LjAzNTg4ODY3IDMwIDE0Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDIzLjk5ODEwMTQsOC4wMDI4MzkwMyBDMjIuODk0NTgwNCw4LjAwMzM2MTAyIDIyLDcuMTE2NjU4NCAyMiw2LjAwNDczNzY4IEwyMiwwIFoiIGlkPSJSZWN0YW5nbGUtMzc4LUNvcHktMiIgZmlsbD0iI0RERDJGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT56aXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0icGF0aC0yIiBkPSJNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODkzNDgxNCwwIDEuOTkwNDI1ODIsMCBMMjEuOTkxOTQzNCwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBaIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8ZyBpZD0ibXVzaWMtY29weS0xMCIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMzc3Ij4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0Q0OTY1QSIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCIgeGxpbms6aHJlZj0iI3BhdGgtMiI+PC91c2U+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPHBhdGggZD0iTTEsMzIuMDAwMDc5NiBDMSwzMi41NTUyNDQ0IDEuNDQzNDM4MDQsMzMgMS45OTE2MTcwMywzMyBMMjguMDA4MzgzLDMzIEMyOC41NTE4NzY2LDMzIDI5LDMyLjU1MTYyMjggMjksMzIuMDAyOTk1MyBDMjksMzIuMDAyOTk1MyAyOS4wODg5ODYxLDguNTAyOTk1ODEgMjguOTg3MjA5Miw4LjQwMTExNzE0IEMyNi40MjQ5ODQ2LDUuODM2MzI5MTUgMjEuNzMyODQ5MSwxIDIxLjU5NTI3NTksMSBDMTUuMDYwODEwMSwxIDEuOTkxODc4NjYsMSAxLjk5MTg3ODY2LDEgQzEuNDQzOTQ2OTEsMSAxLDEuNDQ2MDE3MjEgMSwxLjk5OTkyMDQgTDEsMzIuMDAwMDc5NiBaIE0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg4OTk5NzI4OCwwIDEuOTkxODc4NjYsMCBMMjIuMDA3OTk1NiwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBMMCwxLjk5OTkyMDQgWiIgaWQ9IlNoYXBlIiBmaWxsLW9wYWNpdHk9IjAuMDUiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIzLDcgTDMwLDggTDMwLDE0IEwyMyw3IFoiIGlkPSJSZWN0YW5nbGUtMTM3Ni1Db3B5LTUiIGZpbGwtb3BhY2l0eT0iMC4xIiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMiwwIEwzMCw4IEwyMy45OTgxMDE0LDggQzIyLjg5NDU4MDQsOCAyMiw3LjExMzI5MzY1IDIyLDYuMDAxODk4NjUgTDIyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNzgiIGZpbGw9IiNFNkMxOUUiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTEzLDkgTDE1LDkgTDE1LDExIEwxMywxMSBMMTMsOSBaIE0xNSwxMSBMMTcsMTEgTDE3LDEzIEwxNSwxMyBMMTUsMTEgWiBNMTMsMTMgTDE1LDEzIEwxNSwxNSBMMTMsMTUgTDEzLDEzIFogTTE1LDE1IEwxNywxNSBMMTcsMTcgTDE1LDE3IEwxNSwxNSBaIE0xMywxNyBMMTUsMTcgTDE1LDE5IEwxMywxOSBMMTMsMTcgWiBNMTMsMjEgTDE1LDIxIEwxNSwyNSBMMTMsMjUgTDEzLDIxIFogTTE1LDE5IEwxNywxOSBMMTcsMjEgTDE1LDIxIEwxNSwxOSBaIE0xNSwyMyBMMTcsMjMgTDE3LDI1IEwxNSwyNSBMMTUsMjMgWiIgaWQ9IlJlY3RhbmdsZS00NDYtQ29weSIgZmlsbD0iI0ZGRkZGRiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzOSAoMzE2NjcpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmNzdiAzMCozNDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJpY29uIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAwNi4wMDAwMDAsIC00NDMuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSLoj5zljZXmlofku7bwn4yyLWNvcHktMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAuMDAwMDAwLCA0MDEuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0ibXVzaWMtY29weS01IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MjYuMDAwMDAwLCA0Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODk2NzM5NDgsMCAxLjk5MTE1NSwwIEwyMiwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBaIiBpZD0iUmVjdGFuZ2xlLTM3NyIgZmlsbD0iIzVCQ0I4QSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDEuOTk5OTIwNCBMMSwxLjk5OTkyMDQgTDEsMzIuMDAwMDc5NiBDMSwzMi41NTUyNDQ0IDEuNDQzNDM4MDQsMzMgMS45OTE2MTcwMywzMyBMMjguMDA4MzgzLDMzIEMyOC41NTE4NzY2LDMzIDI5LDMyLjU1MTYyMjggMjksMzIuMDAyOTk1MyBMMjksOCBMMjkuMjkyODkzMiw4LjcwNzEwNjc4IEwyMS4yOTI4OTMyLDAuNzA3MTA2NzgxIEwyMiwxIEwxLjk5MTE1NSwxIEMxLjQ0MzcwNTEyLDEgMSwxLjQ0NTkzNjMgMSwxLjk5OTkyMDQgTDEsMS45OTk5MjA0IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5NjczOTQ4LDAgMS45OTExNTUsMCBMMjIsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktMzUiIGZpbGwtb3BhY2l0eT0iMC4xIiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjIzIDcgMjkuMDI0MTA4OSA3IDMwIDguMDM1ODg4NjcgMzAgMTQiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjIsMCBMMzAsOCBMMjMuOTk4MTAxNCw4LjAwMjgzOTAzIEMyMi44OTQ1ODA0LDguMDAzMzYxMDIgMjIsNy4xMTY2NTg0IDIyLDYuMDA0NzM3NjggTDIyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNzgtQ29weS0yIiBmaWxsPSIjOUFFMkI4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9ImNzdiIgZm9udC1mYW1pbHk9IkFyaWFsLUJvbGRNVCwgQXJpYWwiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRzcGFuIHg9IjQiIHk9IjIxIj5jc3Y8L3RzcGFuPgogICAgICAgICAgICAgICAgICAgIDwvdGV4dD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5leGNlbDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxwYXRoIGQ9Ik0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg5MjA1ODI3MywwIDEuOTk2NDkxMjksMCBMMjIuMDU4OTYsMCBMMzAsNy45NjI0MDIzNCBMMzAsMzIuMDAwMTA3NSBDMzAsMzMuMTA0NjE3NiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJwYXRoLTIiIGZpbGw9IiM0RUM3ODEiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5OTk3Mjg4LDAgMS45OTE4Nzg2NiwwIEwyMi4wMDc5OTU2LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwzMCw4IEwzMCwxNCBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS01IiBmaWxsLW9wYWNpdHk9IjAuMSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0yMiwwIEwzMCw4IEwyMy45OTgxMDE0LDggQzIyLjg5NDU4MDQsOCAyMiw3LjExMzI5MzY1IDIyLDYuMDAxODk4NjUgTDIyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNzgiIGZpbGw9IiM5QUUyQjgiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMTcsMTAgTDE1LDEzIEwxMywxMCBMOSwxMCBMMTMsMTYgTDgsMjQgTDE1LDI0IEwxNSwyMiBMMTMsMjIgTDE1LDE5IEwxNywyNCBMMjEsMjQgTDE3LDE2IEwyMSwxMCBMMTcsMTAgTDE3LDEwIFoiIGlkPSJJbXBvcnRlZC1MYXllcnMtQ29weS03IiBmaWxsPSIjRkZGRkZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5mbGFzaDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJwYXRoLTIiIGQ9Ik0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg5MDIwMjE1MywwIDEuOTkyMzM3MTYsMCBMMjIuMDEzMDYxNSwwIEwzMCw3Ljk2MjQwMjM0IEwzMCwzMi4wMDAxMDc1IEMzMCwzMy4xMDQ2MTc2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBaIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8ZyBpZD0ibm8tY29weS0yIiBza2V0Y2g6dHlwZT0iTVNMYXllckdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0zNzciPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkE1RDVEIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5OTk3Mjg4LDAgMS45OTE4Nzg2NiwwIEwyMi4wMDc5OTU2LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjMsNyBMMzAsOCBMMzAsMTQgTDIzLDcgWiIgaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktNSIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDIzLjk5ODEwMTQsOCBDMjIuODk0NTgwNCw4IDIyLDcuMTEzMjkzNjUgMjIsNi4wMDE4OTg2NSBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OCIgZmlsbD0iI0ZGQTdBNyIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNOC4xOTAwNTE3NywyMi40NTA2MDU4IEw4LjE5MDA1MTc3LDI1IEMxMy4wOTA1MTYxLDI0LjY3NDIyNzUgMTUuMjA5MTA1LDIyLjYyNDE2NjEgMTYuMTA5OTk2MywxOC45MDg3MzY3IEwyMC4xMzc5NjIzLDE4LjkwODczNjcgTDIwLjEzNzk2MjMsMTYuMzY4NTIyMiBMMTYuNTQ5OTgxMywxNi4zNjg1MjIyIEMxNy4xODYzNjkyLDEyLjIwODQxMTIgMjEsMTEuNjE4Nzc1NyAyMSwxMS41NDgxMTM0IEwyMSw5IEMxOS44MzU0NTkzLDkuMDgxNTQ5ODcgMTQuNjEzMDY1MSwxMC42NjMwMTk3IDEzLjk2NTE0OTIsMTYuMzUyNzI0NiBDMTMuMzQyMjEwNiwyMS44MDg2NjczIDEwLjUxOTEzMzMsMjIuMzExNjI5NCA4LjE5MDA1MTc3LDIyLjQ1MDYwNTggWiIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5JRTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJwYXRoLTIiIGQ9Ik0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg5MDkzNzY5LDAgMS45OTM5ODMzNCwwIEwyMi4wMzEyNSwwIEwzMCw3Ljk2MjQwMjM0IEwzMCwzMi4wMDAxMDc1IEMzMCwzMy4xMDQ2MTc2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBaIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8ZyBpZD0ibm8tY29weS0zIiBza2V0Y2g6dHlwZT0iTVNMYXllckdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0zNzciPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjNjVBNkYzIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5OTk3Mjg4LDAgMS45OTE4Nzg2NiwwIEwyMi4wMDc5OTU2LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjMsNyBMMzAsOCBMMzAsMTQgTDIzLDcgWiIgaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktNSIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDIzLjk5ODEwMTQsOCBDMjIuODk0NTgwNCw4IDIyLDcuMTEzMjkzNjUgMjIsNi4wMDE4OTg2NSBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OCIgZmlsbD0iI0EzQ0JGQSIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjEuMDgxMjA3MSw5Ljc1NDgwODI3IEMyMC40MDk4MjgxLDkuMTMzNTc0MjUgMTkuNTU0Mjc2OSw5LjA3NTY2MDcxIDE4Ljc4MzYyNzgsOS4wNzE0Mjg1NyBDMTcuOTYyOTA4Myw5LjEwMzA1ODI3IDE3LjEzMjgyNzcsOS4yOTAxNjM1MyAxNi40MjM3ODcsOS41OTcxMDUyNiBDMTYuMDI2NDg5MSw5LjczNDA5MzA1IDE1LjYyODEwMjcsOS45MTM4NDc3NCAxNS4yMzYwMjk1LDEwLjEzNzAzNzYgQzE1LjE0MDY3OCwxMC4xODU4MTg2IDE1LjA1NTk5MzcsMTAuMjY1NTYxMSAxNC45Njg0NzkzLDEwLjMzNjYxNjUgQzE0Ljc3NjY4NzgsMTAuMzIyMTM4MiAxNC41ODI3MTk0LDEwLjMwOTg4NzIgMTQuMzgyMDAyMywxMC4zMDk4ODcyIEMxMy41MzI5ODIxLDEwLjMwOTg4NzIgMTIuNzI5MDI1MiwxMC40NjY2OTkyIDExLjk2OTY5NjQsMTAuNzc2OTgyMSBDMTEuMjEwNTg1MywxMS4wODkyNjk3IDEwLjU0NDQzMDksMTEuNTMwOTcxOCA5Ljk3MDc5ODA1LDEyLjEwNjk4ODcgQzkuMzk3ODE4MjYsMTIuNjgxNjY5MiA4Ljk0NzE4NDQ1LDEzLjM1NzQ3NTYgOC42MjA0MjA1MiwxNC4xMzQ2MzA2IEM4LjI5MzAwMzUsMTQuOTExNzg1NyA4LjEyODY0MTg5LDE1Ljc1NzU0NjEgOC4xMjg2NDE4OSwxNi42NzUwMzAxIEM4LjEyODY0MTg5LDE2LjgwNDQ0NDUgOC4xNTE5MzU1MywxNi45MTY0ODUgOC4xNTY5NDI1NywxNy4wNDI3ODEgQzcuNjU4MTk3NjIsMTcuODQzNzY5NyA3LjI4NjE1MjYxLDE4LjYxNzgwNjQgNy4wNDE4OTYwMywxOS4zNzI5MDk4IEM2LjY3OTY0NzQxLDIwLjQ5MzA5MTIgNi41MjIyNTIxMiwyMS4zOTIwODc0IDYuNTQ1NzYzNDUsMjIuMjAyODc2OSBDNi41Nzk3MjQyNiwyMy40MDAzNTA2IDYuODYyMjk1NiwyNC4yODkzMjMzIDcuNDEyNjM0ODUsMjQuOTIzNjk5MiBDNy45MTQ0Mjc1NywyNS40ODk5MTU0IDguNTc1NTc0ODQsMjUuNzc3MjU1NiA5LjM3NzM1NDY5LDI1Ljc3NzI1NTYgQzkuNTE3NTUxODgsMjUuNzc3MjU1NiA5LjY1MTg3MTIzLDI1Ljc2ODU2ODYgOS43NzY4Mjk1OSwyNS43NTQzMTMgQzEwLjQwNDY2OTEsMjUuNjg0NTk0IDEwLjg4ODgyODQsMjUuNTE0ODYyOCAxMS4zMDg3NjY4LDI1LjM1NDkzMjMgQzEyLjA3Nzg5MiwyNS4wMzM5NTc3IDEyLjQ2OTk2NTIsMjQuNzQ5NzM1OSAxMi41MTIxOTg1LDI0LjcxODEwNjIgTDEyLjAyNDEyMDgsMjMuNzM4Njk5MiBDMTIuMDIwNDE5OSwyMy43Mzk1OTAyIDExLjYyMjAzMzUsMjMuODg0NTk2OCAxMC45MjkxMDI0LDI0LjAyMDQ3MDkgQzEwLjQ3Mzg5NjksMjQuMTEyMDE4OCAxMC4xMzYwMzA0LDI0LjE0NTY1MzIgOS43MjgyODMwNSwyNC4xMTczNjQ3IEM5LjMyODM3Mjc2LDI0LjA5MjQxNzMgOC45NjU5MDY0NCwyMy45MzMzNzc4IDguODI0MTg1MzcsMjMuNzE3OTg0IEM4LjYyMzAzMjg5LDIzLjQxODYxNTYgOC41MzU5NTM5LDIyLjkxNDc2NzkgOC41NjQ0NzIyNywyMi4yMjc4MjQyIEM4LjU5NjkwOTE5LDIxLjY1NzU5ODcgOC43NDk3MzI4MywyMS4wMDgyOTg5IDkuMDE1NTQxNDcsMjAuMjY4Nzg3NiBDOS4yNTY1MzI1OSwyMC42NzY4NTUzIDkuNTMxMDQ5MTIsMjEuMDU5MDg0NiA5Ljg3MTA5MjYsMjEuMzkzMjAxMSBDMTEuMDMxODU1NiwyMi41MzU4Nzk3IDEyLjU2NTMxNjcsMjMuMTA2MzI4IDE0LjQ3MTQ3NTksMjMuMTA2MzI4IEMxNS44NTU4MTQzLDIzLjEwNjMyOCAxNy4wODAxNDUsMjIuNzY5OTg0IDE4LjE0NDkwMzQsMjIuMDkzOTU0OSBDMTkuMjA5MDA4NywyMS40MTgxNDg1IDE5LjkwNTIwNTMsMjAuMjk2NjMwNiAyMC4yMzI2MjIzLDE4Ljk3NjIwMjEgTDE2LjY4MTc1ODYsMTguOTc2MjAyMSBDMTYuNTAzNDY0MywxOS4zOTYwNzUyIDE2LjIxNjc1NjcsMTkuODQ0MjM2OCAxNS44MjI1MDY2LDIwLjA3ODM0MTIgQzE1LjQyNzgyMSwyMC4zMTAyMTggMTQuOTkyODYxNCwyMC40Mjg3MTggMTQuNTE1ODg2MiwyMC40Mjg3MTggQzEzLjcyNjUxNTEsMjAuNDI4NzE4IDEzLjEwNDk4ODgsMjAuMTc5NDY3MSAxMi42NTE3NDI2LDE5LjY3OTg1MTUgQzEyLjE5Njc1NDksMTkuMTg0NjkwOCAxMS45NTUzMjg0LDE4LjUxNjQ1NzcgMTEuOTI1MDY4NCwxNy42NzczNzk3IEwyMC40NTY4NTA3LDE3LjY3NzM3OTcgQzIwLjQ1Njg1MDcsMTYuNjk5OTc3NCAyMC4zMjUzNjE0LDE1LjMwNDcwNjggMjAuMDY1MjEyOSwxNC40NzMyMDIxIEMxOS44MDUwNjQ0LDEzLjY0MTQ3NDYgMTkuNDE3MTI3NSwxMi45MTEwOTU5IDE4LjkwNDIzMjIsMTIuMjgyMjg4NSBDMTguNTg2NjExNiwxMS44OTI3MDg2IDE4LjIwMzg5OTQsMTEuNTc4NDE2NCAxNy43ODk4Mzg4LDExLjI5OTMxNzcgQzE3Ljg3NzU3MDksMTEuMjcwMzYwOSAxNy45NzQ4ODE2LDExLjIzNjcyNjUgMTguMDQ4NDYzNCwxMS4yMTMzMzgzIEMxOC4yNTcwMTc2LDExLjEyMjAxMzIgMTguNTE0MTE4MywxMS4wNzMwMDk0IDE4Ljc2MTY0MDQsMTEuMDI1MTE5NCBMMTguODgyMjQ0OCwxMC45OTk5NDkyIEMxOS4wNTkwMTUxLDEwLjk3ODM0MyAxOS4yMzE0MzE1LDEwLjk2NDA4NzQgMTkuMzkzNjE2MiwxMC45NjQwODc0IEMxOS43NjU0NDM1LDEwLjk2NDA4NzQgMTkuOTMyMTk5OCwxMS4wMzkxNTIzIDE5Ljk4ODU4MzQsMTEuMDc2MTI3OCBDMjAuMjM2MTA1NSwxMS4yNTAzMTM5IDIwLjQxMzUyODksMTEuNTcxNTExMyAyMC40NTgzNzQ2LDExLjc4Mzc4NjcgQzIwLjU4MTM3MzcsMTIuNDUyMDE5NyAyMC41NTI2Mzc2LDEyLjg2OTg4ODIgMjAuNTUyMjAyMiwxMi44NzQzNDMgTDIxLjU5ODIzODYsMTMuMDcwMTM1MyBMMjEuNzAxNDI3MywxMi42NDEzNTI0IEMyMS43NDM2NjA2LDEyLjQxNTA0NDIgMjEuODA2NTc1MSwxMi4wNzIyNDA2IDIxLjc5MTExODYsMTEuNjA3MzczMSBDMjEuNzYzMDM1NiwxMS4xNjY1NjIgMjEuNzEzNDAwNiwxMC40Mjg4MzI3IDIxLjA4MTIwNzEsOS43NTQ4MDgyNyBMMjEuMDgxMjA3MSw5Ljc1NDgwODI3IFogTTExLjkyNTA2ODQsMTUuNDEwOTU1OCBDMTIuMDQ0NTg0MywxNC42NjU0MzA1IDEyLjMxOTc1NCwxNC4xMTgxNDc2IDEyLjc1MTQ0ODEsMTMuNjY2NjQ0NyBDMTMuMTgzMTQyMiwxMy4yMTgwMzc2IDEzLjcyNjUxNTEsMTIuOTkxNzI5MyAxNC4zODIwMDIzLDEyLjk5MTcyOTMgQzE1LjAwNzAxMTgsMTIuOTkxNzI5MyAxNS41MzI3NTEyLDEzLjIyOTE3NDggMTUuOTU1OTU1MSwxMy43MDEzOTI5IEMxNi4zODA0NjUyLDE0LjE3NjA2MTEgMTYuNjA3MzA2LDE0LjcxMTA5MyAxNi42MzY5MTI5LDE1LjQxMDk1NTggTDExLjkyNTA2ODQsMTUuNDEwOTU1OCBMMTEuOTI1MDY4NCwxNS40MTA5NTU4IFoiIGlkPSJJbXBvcnRlZC1MYXllcnMtQ29weS0zIiBmaWxsPSIjRkZGRkZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5waWM8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBpZD0icGF0aC0yIiBkPSJNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44OTIxOTE1NTgsMCAxLjk5Njc4OTU5LDAgTDIyLjA2MjI1NTksMCBMMzAsNy45NjI0MDIzNCBMMzAsMzIuMDAwMTA3NSBDMzAsMzMuMTA0NjE3NiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgWiI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9Im11c2ljLWNvcHktMiIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMzc3Ij4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlLW9wYWNpdHk9IjAuMDUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSIjNjdDQ0JBIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5OTk3Mjg4LDAgMS45OTE4Nzg2NiwwIEwyMi4wMDc5OTU2LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjMsNyBMMzAsOCBMMzAsMTUgTDIzLDcgWiIgaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktNDEiIGZpbGwtb3BhY2l0eT0iMC4xIiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMiwwIEwzMCw4LjAwNzYyOTM5IEwyMy45OTgxMDE0LDguMDA3NjI5MzkgQzIyLjg5NDU4MDQsOC4wMDc2MjkzOSAyMiw3LjEyMDA3NzQxIDIyLDYuMDA3NjIyNSBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OC1Db3B5LTE0IiBmaWxsPSIjQThFMEQ2IiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMC4wMjk5NjAzLDEzLjk3NDc5NTIgQzExLjE0NjAyMDYsMTMuOTc0Nzk1MiAxMi4wNTA1MDI1LDEzLjA3NTAyNDEgMTIuMDUwNTAyNSwxMS45NjUzMTMzIEMxMi4wNTA1MDI1LDEwLjg1NTE5MjggMTEuMTQ2MDIwNiw5Ljk1NTQyMTY5IDEwLjAyOTk2MDMsOS45NTU0MjE2OSBDOC45MTQxMDQ5MSw5Ljk1NTQyMTY5IDguMDA5NjIyOTgsMTAuODU1MTkyOCA4LjAwOTYyMjk4LDExLjk2NTMxMzMgQzguMDA5NjIyOTgsMTMuMDc1MDI0MSA4LjkxNDEwNDkxLDEzLjk3NDc5NTIgMTAuMDI5OTYwMywxMy45NzQ3OTUyIE0xMi42OTM4ODg0LDIxLjQ5NTI4NDMgTDEwLjkyNjg3OTQsMTkuMDM3MTI5NSBDMTAuMjgyMzE0MywxOC4xNDA3ODEgOS4yMzk4MDk3NSwxOC4xNDIwNTY2IDguNTk2MzQyNjUsMTkuMDM3MTI5NSBMNi4zMDkwNjk3LDIyLjIxODk5NjQgQzUuNjY0Mjg0OTMsMjMuMTE1MzQ0OSA2LjA2MTM0NTg1LDI0IDcuMTkzMjMzMDEsMjQgTDEyLjMyOTc2OTUsMjQgQzEyLjQ2ODc4NDcsMjQgMTIuNTk2ODE5MywyMy45ODkxNTcxIDEyLjcxMjk5NDcsMjMuOTY4MTA5IEMxMi44Mjg3MzEsMjMuOTg5MTU3MSAxMi45NTYzMjYzLDI0IDEzLjA5NDkwMjMsMjQgTDIyLjgwMTU5MjQsMjQgQzIzLjkyNjY3MTYsMjQgMjQuMzM2Njg5NywyMy4xMDUzNTI0IDIzLjY5ODI3MzcsMjIuMTk5NDM2NiBMMTkuMTAzOTYyNiwxNS42Nzg3OTkyIEMxOC40NjcwODM5LDE0Ljc3NDc5NjkgMTcuNDMwNTA4OSwxNC43NzI2NzA5IDE2Ljc5MjA5MywxNS42Nzg3OTkyIEwxMi42OTM4ODg0LDIxLjQ5NTI4NDMiIGlkPSJJbXBvcnRlZC1MYXllcnMiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzNHB4IiB2aWV3Qm94PSIwIDAgMzAgMzQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQwLjMgKDMzODM5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5tYXJrMzAqMzQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44OTAwODM2NzcsMCAxLjk5MjA3MiwwIEwyMi4wMTAxMzE4LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJpY29uIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtODc2LjAwMDAwMCwgLTQ0My4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IuiPnOWNleaWh+S7tvCfjLItY29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MC4wMDAwMDAsIDQwMS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJtdXNpYy1jb3B5LTExIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTYuMDAwMDAwLCA0Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICAgICAgICAgIDx1c2UgaWQ9IlJlY3RhbmdsZS0zNzciIGZpbGw9IiNGNzhBMDkiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0ZGRkZGRiIgcG9pbnRzPSIyMCAxMCAxNSAxNS40ODM0NTk1IDEwIDEwIDcgMTAgNyAyNCAxMCAyNCAxMCAxMy43NjAxOTI5IDEzLjc0MjczNjggMTggMTYuMjg5MDAxNSAxOCAyMCAxMy43NjAxOTI5IDIwIDI0IDIzIDI0IDIzIDEwIj48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEsMS45OTk5MjA0IEwxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEwyOSw4IEwyOS4yOTI0NDUzLDguNzA2NjU4NTkgTDIxLjMwMjU3NzEsMC43MDY2NTg1ODcgTDIyLjAxMDEzMTgsMSBMMS45OTIwNzIsMSBDMS40NDQwMTE1MiwxIDEsMS40NDYwMzg4MiAxLDEuOTk5OTIwNCBMMSwxLjk5OTkyMDQgWiBNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44OTAwODM2NzcsMCAxLjk5MjA3MiwwIEwyMi4wMTAxMzE4LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtMTM3Ni1Db3B5LTE4IiBmaWxsLW9wYWNpdHk9IjAuMSIgZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIzMCAxNCAyMiA3IDMwIDciPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjIsMCBMMzAsOCBMMjMuOTk4MTAxNCw4IEMyMi44OTQ1ODA0LDggMjIsNy4xMTMyOTM2NSAyMiw2LjAwMTg5ODY1IEwyMiwwIFoiIGlkPSJSZWN0YW5nbGUtMzc4IiBmaWxsPSIjRkZCRjgxIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5tdXNpYzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJwYXRoLTIiIGQ9Ik0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg5MjkxNzIyMiwwIDEuOTk4NDEzNjgsMCBMMjIuMDgwMjAwMiwwIEwzMCw3Ljk2MjQwMjM0IEwzMCwzMi4wMDAxMDc1IEMzMCwzMy4xMDQ2MTc2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBaIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8ZyBpZD0ibXVzaWMiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTM3NyI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMjhGNjYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDMyLjAwMDA3OTYgQzEsMzIuNTU1MjQ0NCAxLjQ0MzQzODA0LDMzIDEuOTkxNjE3MDMsMzMgTDI4LjAwODM4MywzMyBDMjguNTUxODc2NiwzMyAyOSwzMi41NTE2MjI4IDI5LDMyLjAwMjk5NTMgQzI5LDMyLjAwMjk5NTMgMjkuMDg4OTg2MSw4LjUwMjk5NTgxIDI4Ljk4NzIwOTIsOC40MDExMTcxNCBDMjYuNDI0OTg0Niw1LjgzNjMyOTE1IDIxLjczMjg0OTEsMSAyMS41OTUyNzU5LDEgQzE1LjA2MDgxMDEsMSAxLjk5MTg3ODY2LDEgMS45OTE4Nzg2NiwxIEMxLjQ0Mzk0NjkxLDEgMSwxLjQ0NjAxNzIxIDEsMS45OTk5MjA0IEwxLDMyLjAwMDA3OTYgWiBNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODk5OTcyODgsMCAxLjk5MTg3ODY2LDAgTDIyLjAwNzk5NTYsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwzMCw4IEwzMCwxNCBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS01IiBmaWxsLW9wYWNpdHk9IjAuMSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIsMCBMMzAsOCBMMjMuOTk4MTAxNCw4IEMyMi44OTQ1ODA0LDggMjIsNy4xMTMyOTM2NSAyMiw2LjAwMTg5ODY1IEwyMiwwIFoiIGlkPSJSZWN0YW5nbGUtMzc4IiBmaWxsPSIjRkRCMjkzIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik05Ljk4MjAxMDM2LDEwLjgzNjMzMTYgQzkuNDM5NjYxMDIsMTAuOTI2NzIzMiA5LDExLjQ0NjMxMTQgOSwxMS45OTc1NDQ2IEw5LDIwIEM3LjkxODE5NTY1LDIwLjI1ODQ5MTMgNywyMS4yMTE2MzA0IDcsMjIuMzg4NTU2NSBDNywyMy42MjA1IDguMDAzNjk1NjUsMjQuNjE5NzM0OCA5LjI0MjMzMDQzLDI0LjYxOTczNDggQzEwLjQyODE3ODMsMjQuNjE5NzM0OCAxMS4zODg3NTIyLDIzLjcwMTUzOTEgMTEuNDY5NzkxMywyMi41NDI0NTY1IEwxMS40ODM5MTc0LDIyLjQwNTY1NjUgQzExLjQ4NTQwNDMsMjIuMzgwMzc4MyAxMS40NjkwNDc4LDEzLjMxMTQzMDQgMTEuNDY5MDQ3OCwxMy4zMTE0MzA0IEwxOC43NzIyMzQ4LDEyLjEzMzc2MDkgTDE4Ljc3MjIzNDgsMTcuMjA5NDg3IEMxOC43NTU4NzgzLDE3LjIwOTQ4NyAxOC43NDE3NTIyLDE3LjIwNTAyNjEgMTguNzI1Mzk1NywxNy4yMDUwMjYxIEMxNy40ODY3NjA5LDE3LjIwNTAyNjEgMTYuNDgyMzIxNywxOC4yMDM1MTc0IDE2LjQ4MjMyMTcsMTkuNDM2MjA0MyBDMTYuNDgyMzIxNywyMC42Njg4OTEzIDE3LjQ4Njc2MDksMjEuNjY3MzgyNiAxOC43MjUzOTU3LDIxLjY2NzM4MjYgQzE5LjkyNDYyNjEsMjEuNjY3MzgyNiAyMC44OTU2MDg3LDIwLjcyOTExMyAyMSwyMCBMMjEsOS45OTU1Nzc1IEMyMSw5LjQ0NTczNTIzIDIwLjU1ODY4Miw5LjA3MzU1MyAyMC4wMTc5ODk2LDkuMTYzNjY4MzkgTDkuOTgyMDEwMzYsMTAuODM2MzMxNiBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzIiBmaWxsPSIjRkZGRkZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5ub3RlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODkwMTAzNDIzLDAgMS45OTIxMTYxOSwwIEwyMi4wMTA2MjAxLDAgTDMwLDcuOTYyNDAyMzQgTDMwLDMyLjAwMDEwNzUgQzMwLDMzLjEwNDYxNzYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IFoiPjwvcGF0aD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJuby1jb3B5IiBza2V0Y2g6dHlwZT0iTVNMYXllckdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0zNzciPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjNUM5REY0IiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5OTk3Mjg4LDAgMS45OTE4Nzg2NiwwIEwyMi4wMDc5OTU2LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjMsNyBMMzAsOCBMMzAsMTQgTDIzLDcgWiIgaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktNSIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDIzLjk5ODEwMTQsOCBDMjIuODk0NTgwNCw4IDIyLDcuMTEzMjkzNjUgMjIsNi4wMDE4OTg2NSBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OCIgZmlsbD0iIzlEQ0RGRiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIuMTMwOTg4LDE1LjQ2MDIwMzMgTDE3LjA2OTIyMzEsMTAuMzg5NDkxNyBDMTYuNjg2MDM0OSwxMC4wMDU1OTE4IDE2LjIwMTA3NjYsMTAuMDA1NTkxOCAxNS44MTc5OTAxLDEwLjM4OTQ5MTcgTDkuNDI3NjIyNTIsMTYuNzkyMjYyOCBDOS4xMzAxNDA3NywxNy4wNTIxMjcyIDguOTQxNDQ0MjEsMTcuNDM0Mjk4NyA4Ljk0MTQ0NDIxLDE3Ljg2MDY5NiBMOC41Mzk5NTU2OCwyMi45MTYzNjA4IEM4LjUzOTk1NTY4LDIzLjY5ODY5OTIgOC43NzEwNDc5NywyMy45MzA2MDQ4IDkuNTUxODYxMzEsMjMuOTMwNjA0OCBMMTQuNzQwNDA2NywyMy41Mjg1MDYzIEMxNC45MTQwNTYzLDIzLjUyODUwNjMgMTUuMDgwMDgwOCwyMy40OTY3ODU3IDE1LjIzNDIxMDEsMjMuNDM5MzQzMSBDMTUuMzk0MDMyOCwyMy4zOTYyMzU3IDE1LjU0NTUxODgsMjMuMzEyMzU5MiAxNS42NzEwNzkyLDIzLjE4NjY5NzEgTDIyLjEzMDk4OCwxNi43MTM5NzgxIEMyMi41MTQxNzYyLDE2LjMzMDA3ODIgMjIuNTE0MTc2MiwxNS44NDQwMDE2IDIyLjEzMDk4OCwxNS40NjAyMDMzIiBpZD0iRmlsbC0xIiBmaWxsPSIjRkZGRkZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOS41OTI1MzEzLDEyLjkxNzI3MzIgTDguNzc3MDQ2NCwyMy43MzI3NTgxIEw4LjcxOTcwNTQyLDIzLjY3Mzc5MDQgQzguODcxNDk2MzUsMjMuODU3NTA1MiA5LjEzMTk3MDgsMjMuOTI0NTA0NyA5LjU1MTg2MTMxLDIzLjkyNDUwNDcgTDE0Ljc0MDQwNjcsMjMuNTIyMjAyOCBDMTQuOTE0MDU2MywyMy41MjIyMDI4IDE1LjA4MDA4MDgsMjMuNDkwNjg1NiAxNS4yMzQwMDY4LDIzLjQzMzE0MTMgQzE1LjM5NDAzMjgsMjMuMzkwMDMzOSAxNS41NDU1MTg4LDIzLjMwNjI1OTEgMTUuNjcxMDc5MiwyMy4xODAyOTIgTDIyLjEzMDk4OCwxNi43MDc1NzMgQzIyLjMyMTcxNzksMTYuNTE2NTM4MSAyMi40MTc0ODk2LDE2LjMwMDI4OTQgMjIuNDE4NDA0NiwxNi4wODM5MzkgQzIyLjQxNzQ4OTYsMTUuODY3NDg3IDIyLjMyMTcxNzksMTUuNjUxMjM4MyAyMi4xMzA5ODgsMTUuNDYwMjAzMyBMMTkuNTkyNTMxMywxMi45MTcyNzMyIiBpZD0iRmlsbC0zIiBmaWxsPSIjRDlFQ0ZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT7vvJ88L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjAlIiB4Mj0iNTAlIiB5Mj0iMTAwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBzdG9wLW9wYWNpdHk9IjAuMSIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODkwMDgzNjc3LDAgMS45OTIwNzIsMCBMMjIuMDEwMTMxOCwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBaIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8ZyBpZD0ibXVzaWMtY29weS0xMSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMzc3Ij4KICAgICAgICAgICAgICAgIDx1c2Ugc3Ryb2tlLW9wYWNpdHk9IjAuMDUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSIjQjVCQkJFIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTEuOTkxODc4NjYsMCBMMjIuMDA3OTk1NiwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg4OTk5NzI4OCwwIDEuOTkxODc4NjYsMCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjMsNyBMMzAsOCBMMzAsMTQgTDIzLDcgWiIgaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktNSIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDIzLjk5ODEwMTQsOCBDMjIuODk0NTgwNCw4IDIyLDcuMTEzMjkzNjUgMjIsNi4wMDE4OTg2NSBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OCIgZmlsbD0iI0UzRTVFNSIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMTUuNTI2NzU5MiwyNSBMMTQuNDczMjQwOCwyNSBDMTQuMjEyNDIxNSwyNSAxNCwyNC44MDI2MzgxIDE0LDI0LjU1ODEyMDQgTDE0LDIzLjQ0MTg3OTYgQzE0LDIzLjE5NzUyNjggMTQuMjEyNDIxNSwyMyAxNC40NzMyNDA4LDIzIEwxNS41MjY3NTkyLDIzIEMxNS43ODc3NDM2LDIzIDE2LDIzLjE5NzUyNjggMTYsMjMuNDQxODc5NiBMMTYsMjQuNTU4MTIwNCBDMTYsMjQuODAyNjM4MSAxNS43ODc3NDM2LDI1IDE1LjUyNjc1OTIsMjUgTDE1LjUyNjc1OTIsMjUgWiBNMTAuMDAyMDQ4NSwxMy40NjUxMjY4IEMxMC4wNjAxODk0LDEyLjc1MTIxMTMgMTAuMTc4OTQ5OSwxMi4xMDEyOTU4IDEwLjM1ODEwNDksMTEuNjgzMDQyMyBDMTAuNTg4NDE0NywxMS4xNDUxMjY4IDEwLjk1Njg2NTQsMTAuNjYyNjQ3OSAxMS40NjQzNTg0LDEwLjIzODk4NTkgQzExLjk3MDk0OTksOS44MTUzMjM5NCAxMi41MzU0NTcsOS41MDI3NjA1NiAxMy4xNTcyMDM1LDkuMzAxMDcwNDIgQzEzLjc3OTg1MTMsOS4wOTkzODAyOCAxNC40MzU2MjYsOSAxNS4xMjcwMDYzLDkgQzE2LjUyNTMxNjEsOSAxNy42ODk5MzU5LDkuMzg0MjI1MzUgMTguNjE4Mzg2NiwxMC4xNTM1Nzc1IEMxOS41NDcwNjI2LDEwLjkyMjAyODIgMjAuMDEzNTQxNSwxMS45NDU1Nzc1IDIwLjAxMzU0MTUsMTMuMjI2MDI4MiBDMjAuMDEzNTQxNSwxMy44MDAyMjU0IDE5Ljg5MzY1NDIsMTQuMzIxMDE0MSAxOS42NTUyMzE2LDE0Ljc4ODM5NDQgQzE5LjQxNzAzNDQsMTUuMjU1Nzc0NiAxOC45MTA0NDI5LDE1LjgzNzYzMzggMTguMTM0NzgwOSwxNi41MzQ0MjI1IEMxNy4zNTkxMTksMTcuMjMyMzM4IDE2Ljg0MzczODcsMTcuNzI3NjYyIDE2LjU5MTU2OTcsMTguMDIzMDk4NiBDMTYuMzM3MTQ3MSwxOC4zMTY3MzI0IDE2LjE0NDQ3MTEsMTguNjY4NzMyNCAxNi4wMTQ0NDI5LDE5LjA3ODY0NzkgQzE1LjkyMjA0ODUsMTkuMzY3Nzc0NiAxNi4wMzM4MjMyLDIwLjk1NTAzNzkgMTYuMDE0NDQyOSwyMS4zODUwMDk4IEMxNS45OTk1Njk3LDIxLjcwMzIwNjkgMTUuNzEyMjQ1NywyMS45NTQ5MjUzIDE1LjM3MTA2MjYsMjEuOTU0OTI1MyBMMTQuNjQ0NTI3NCwyMS45NTQ5MjUzIEMxNC4yNzAyMTc2LDIxLjk1NDkyNTMgMTMuOTc5NTEzMywyMS42NTM4NTQ4IDEzLjk5ODg5MzYsMjEuMzAzODgzIEMxNC4wMjcyODgsMjAuNzk1MDM3OSAxMy45MjI0OTkyLDE5LjE0MjY0NzkgMTQuMDIxNjU0MiwxOC43OTc4NTkyIEMxNC4xNTk3OTUsMTguMzE2NzMyNCAxNC4zNjYyMTc1LDE3Ljg5NzEyNjggMTQuNjQ0NTI3NCwxNy41Mzc0NjQ4IEMxNC45MjA1ODM3LDE3LjE3ODkyOTYgMTUuNDE5MDYyNiwxNi42NTA3MDQyIDE2LjE0MDg2NTQsMTUuOTUyNzg4NyBDMTYuODYzMTE5LDE1LjI1NTc3NDYgMTcuMzI4NDcxMSwxNC43NDg5NTc3IDE3LjUzNjAyMDQsMTQuNDMzMDE0MSBDMTcuNzQyNDQyOSwxNC4xMTcyOTU4IDE3Ljg0NjMzMDIsMTMuNjQ1NDA4NSAxNy44NDYzMzAyLDEzLjAyMDI4MTcgQzE3Ljg0NjMzMDIsMTIuMzk0NzA0MiAxNy42MDc5MDc3LDExLjg0MTkxNTUgMTcuMTMyMTg5NCwxMS4zNjA1NjM0IEMxNi42NTUzNDQzLDEwLjg3ODMwOTkgMTUuOTY1MzE2MSwxMC42MzgzMDk5IDE1LjA1ODQ5OTIsMTAuNjM4MzA5OSBDMTMuMTg1NTk3OCwxMC42MzgzMDk5IDEyLjE3MDM4NjYsMTEuNjc3NjMzOCAxMi4wMTQyMTc1LDEzLjU4NTY5MDEgQzExLjk4OTIwMzUsMTMuODk4MjUzNSAxMS42OTI0MTQ3LDE0LjEyOTkxNTUgMTEuMzU4NDQyOSwxNC4xMjk5MTU1IEwxMC42NDY1NTU2LDE0LjEyOTkxNTUgQzEwLjI2NTcxMDUsMTQuMTI5OTE1NSA5Ljk3MjUyNzQsMTMuODIwNTA3IDEwLjAwMjA0ODUsMTMuNDY1MTI2OCBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktMTEiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5wZGY8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8cGF0aCBkPSJNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44OTIyODA0MTUsMCAxLjk5Njk4ODQ2LDAgTDIyLjA2NDQ1MzEsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJwYXRoLTIiIGZpbGw9IiNGQTVDNDciIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEMyOSwzMi4wMDI5OTUzIDI5LjA4ODk4NjEsOC41MDI5OTU4MSAyOC45ODcyMDkyLDguNDAxMTE3MTQgQzI2LjQyNDk4NDYsNS44MzYzMjkxNSAyMS43MzI4NDkxLDEgMjEuNTk1Mjc1OSwxIEMxNS4wNjA4MTAxLDEgMS45OTE4Nzg2NiwxIDEuOTkxODc4NjYsMSBDMS40NDM5NDY5MSwxIDEsMS40NDYwMTcyMSAxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5OTk3Mjg4LDAgMS45OTE4Nzg2NiwwIEwyMi4wMDc5OTU2LDAgTDMwLDggTDMwLDMyLjAwMjk5NTMgQzMwLDMzLjEwNTkxMDYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IEwwLDEuOTk5OTIwNCBaIiBpZD0iU2hhcGUiIGZpbGwtb3BhY2l0eT0iMC4wNSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwyOSw3IEwzMCw4IEwzMCwxNCBMMjMsNyBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS0xMyIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMjIsMCBMMzAsOCBMMjQsOCBDMjIuODk0NTgwNCw4LjAwMDUyMTU3IDIyLDcuMTE0MTMzNTQgMjIsNiBMMjIsMCBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OC1Db3B5LTMiIGZpbGw9IiNGRTlEOEYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNMjIuMzM3MDUzMSwxOC42NzQ2MzczIEMyMS45ODI2NzU1LDE4LjA1MTE2MzUgMjEuNDAwMjM5NCwxNy42NzAwNjg3IDIwLjY5NzI1NTEsMTcuNjAwMTc2MyBDMTkuOTIyMjQxLDE3LjUyNjIyMyAxOC44MzgzNzU2LDE3LjYwNTMwNiAxNy4zMTk5ODA4LDE3LjgzNzIxMTggQzE3LjEwODU5MzksMTcuNjQyNDk2NSAxNi45MDEyNjgsMTcuNDUxODQyMiAxNi43MDIyNzc5LDE3LjI3MTAxOTggQzE1LjY2MTE2MDEsMTYuMzI4ODYyNiAxNC43NDM3OTY1LDE0Ljk2Nzc3OSAxNC41MTkzNzE2LDE0LjYyNjg2NjkgQzE0LjgwNDkyNTYsMTEuOTM4MjU2NCAxNC42NzM0NzY3LDExLjExODk5ODYgMTQuNTA1MDUxMiwxMC42NzY1NjEgQzE0LjEwNDI5MjQsOS42MjY2Nzk4NSAxMy4zMjk0OTIxLDkgMTIuNDMyNDMzNyw5IEMxMS43NDI3MDExLDkgMTEuMDk4MDY3Myw5LjM4OTY0NDM5IDEwLjc0OTY3NDMsMTAuMDE4NDYxNiBDMTAuMzQ3NjMzMSwxMC43NDIxNzg1IDEwLjM5MDgwODIsMTEuNjUwNTY1MSAxMC44Njg1MTI2LDEyLjUwNzg2ODIgQzExLjEyMTM2NDcsMTIuOTYyMDYxNSAxMS40NTkwNzA4LDEzLjMzMTE4NyAxMS44ODY1NDY4LDEzLjc5ODIwNDYgQzEyLjE5MTU1MDksMTQuMTMxNjM1OSAxMi41NjE5NTg5LDE0LjUzNDc0NTggMTIuOTk5MDUzMSwxNS4wNzc4NTQxIEMxMi45NDAwNjE0LDE1LjU4MjcwMzMgMTIuODc2Nzk1LDE2LjA2ODUyOTcgMTIuODIxNDM2OCwxNi40OTUxNTA4IEMxMi42ODMxNDg0LDE3LjU1MTQ0NDEgMTIuNDk3MTk2MywxOC4zNjIxNTIzIDEyLjMwMTE5ODUsMTkuMjIwNTI0MiBMMTIuMjgyMzg5NiwxOS4zMDE5NTg0IEMxMi4xMjU5MzM0LDE5LjM3MDk5NTggMTEuOTY1NjI5OSwxOS40Mzg3NTA3IDExLjgwMjk3NTIsMTkuNTA3NTc0MyBDMTAuOTMzOTE2NSwxOS44NzQ3NzYyIDkuOTQ3OTQyOTgsMjAuMjkxNzc5MSA5LjE3Nzg0NDk2LDIxLjAxNzg0NzEgQzcuNzQ0NzMxNiwyMi4zNjYzMjAyIDcuOTU1MDQ5OCwyMy40OTU5MjU2IDguMTExNzE5NzYsMjMuOTE5MTI2OSBDOC4zNTkyMjgzOCwyNC41ODU5ODk1IDguOTY4MTY3OTcsMjUgOS43MDAwMDY5MiwyNSBDMTAuNDMzNzY5NSwyNSAxMS4xODEyMTE0LDI0LjU3NTUxNjMgMTEuNzUwNjA5NCwyMy44MzM0MTc5IEMxMi4yMDMzMDY1LDIzLjI0NDc4MzUgMTMuMDA0MTgyOCwyMi4wNDc4NTA2IDEzLjUwMTk3ODcsMjAuNDEyNTQxMSBDMTQuNDA2MDkwNSwyMC4wNDgzMzE1IDE1Ljg0MzkwNjEsMTkuNjI3MDUzOSAxNi41MjIwOTY4LDE5LjUwNzU3NDMgTDE2Ljg2MzY1MDEsMTkuNDQ5MjIzOSBMMTcuMDkxMDY3MywxOS42NjEwMzgyIEMxNy44MTE1NzgyLDIwLjMzMzAzMDUgMTguNTE4MTk2LDIwLjk5MTU1NzMgMTkuMDM4NDM0NCwyMS40MzQ4NSBDMTkuNDYxNjM1NiwyMS43OTQ3ODQ4IDE5Ljk5NzQ3NjgsMjEuOTkyOTE5OSAyMC41NDg5MjA5LDIxLjk5MjkxOTkgTDIwLjU0OTU2MjEsMjEuOTkyOTE5OSBDMjEuNDE2NDgzNSwyMS45OTI5MTk5IDIyLjE4MDgxMDYsMjEuNTAzODg3NCAyMi40OTY5MjkxLDIwLjc0Nzg5NiBDMjIuNzU4NTQ0NCwyMC4xMjAxNDc1IDIyLjY5NTkxOTIsMTkuMzA3NTE1NiAyMi4zMzcwNTMxLDE4LjY3NDYzNzMgTDIyLjMzNzA1MzEsMTguNjc0NjM3MyBMMjIuMzM3MDUzMSwxOC42NzQ2MzczIFogTTEwLjc5MTMzNjQsMjIuNjc4NzM2OCBDMTAuNTA4NTk5NSwyMy4wNDU0NzM3IDEwLjE3MzQ0MTYsMjMuMjY1NDczNyA5Ljg5NDcwNDc4LDIzLjI2NTQ3MzcgQzkuODQwMTc4NDgsMjMuMjY1NDczNyA5LjcwODM4ODk4LDIzLjI1NDk0NzQgOS42NzIxNzg0NSwyMy4xNTY4NDIxIEM5LjYwNzk2NzkyLDIyLjk4NTA1MjYgOS43MzQ3MDQ3NywyMi41MiAxMC4zNDU0NDE2LDIxLjk0NDYzMTYgQzEwLjczOTMzNjQsMjEuNTczNDczNyAxMS4yNDY3MDQ4LDIxLjI5NiAxMS43ODAxNzg1LDIxLjA1MDEwNTMgQzExLjQyODE3ODUsMjEuNzkxMzY4NCAxMS4wNDUyMzExLDIyLjM0ODIxMDUgMTAuNzkxMzM2NCwyMi42Nzg3MzY4IEwxMC43OTEzMzY0LDIyLjY3ODczNjggTDEwLjc5MTMzNjQsMjIuNjc4NzM2OCBaIE0xMy4zMzUxMjU4LDEyLjk2Mzc4OTUgQzEzLjI0OTAyMDYsMTIuODY5MDUyNiAxMy4xNjc3NTc0LDEyLjc4MDQyMTEgMTMuMDkwMDczMiwxMi42OTYgQzEyLjcyMTAyMDYsMTIuMjkyNDIxMSAxMi40NTM2NTIyLDEyLjAwMDYzMTYgMTIuMjkwMjgzNywxMS43MDY1MjYzIEMxMi4wODQxNzg1LDExLjMzNjIxMDUgMTIuMDQxODYyNywxMC45ODgyMTA1IDEyLjE3Mzg2MjcsMTAuNzQ5NDczNyBDMTIuMjYxMDIwNiwxMC41OTIgMTIuNDE5MTI1OCwxMC40OTQxMDUzIDEyLjU4NjA3MzIsMTAuNDk0MTA1MyBDMTIuODYyMjgzNywxMC40OTQxMDUzIDEzLjExOTMzNjQsMTAuNzUyNjMxNiAxMy4yOTA0OTQzLDExLjIwMjEwNTMgQzEzLjMyODE3ODUsMTEuMyAxMy40MTU1NDY5LDExLjY3NzQ3MzcgMTMuMzM1MTI1OCwxMi45NjM3ODk1IEwxMy4zMzUxMjU4LDEyLjk2Mzc4OTUgTDEzLjMzNTEyNTgsMTIuOTYzNzg5NSBaIE0xNC4wNzYzODksMTguNTAxODk0NyBMMTQuMTA3OTY3OSwxOC4zNjk0NzM3IEwxNC4wODQzODksMTguMzgxMjYzMiBDMTQuMTkzMjMxMSwxNy44NjI5NDc0IDE0LjI5NTk2NzksMTcuMzA2MTA1MyAxNC4zODE4NjI3LDE2LjY3MjIxMDUgQzE0LjcyOTIzMTEsMTcuMTEzMjYzMiAxNS4xNDk0NDE2LDE3LjYwNDQyMTEgMTUuNjA2NzA0OCwxOC4wNDg0MjExIEMxNS4xMzk1NDY5LDE4LjE2OTQ3MzcgMTQuNTkzMjMxMSwxOC4zMjk4OTQ3IDE0LjA3NjM4OSwxOC41MDE4OTQ3IEwxNC4wNzYzODksMTguNTAxODk0NyBMMTQuMDc2Mzg5LDE4LjUwMTg5NDcgWiBNMjEuMTgwMzg5LDE5Ljk3NjIxMDUgQzIxLjA5NzIzMTEsMjAuMTc0MzE1OCAyMC44NjE4NjI3LDIwLjMwMzU3ODkgMjAuNTgxMjMxMSwyMC4zMDM1Nzg5IEMyMC4zNjkyMzExLDIwLjMwMzU3ODkgMjAuMTYzOTY3OSwyMC4yMjc1Nzg5IDIwLjAwMzU0NjksMjAuMDkwNzM2OCBDMTkuNjcwNzA0OCwxOS44MDg0MjExIDE5LjI1ODkxNTMsMTkuNDMzMDUyNiAxOC44MTY1OTk1LDE5LjAyMzE1NzkgQzE5LjU2OTg2MjcsMTguOTQxMDUyNiAyMC4xNTAwNzMyLDE4LjkxMzY4NDIgMjAuNTkxMTI1OCwxOC45NTk3ODk1IEMyMC44MjI5MTUzLDE4Ljk4MTQ3MzcgMjAuOTkwMjgzNywxOS4wOTAxMDUzIDIxLjEwMzEyNTgsMTkuMjg5MDUyNiBDMjEuMjM5NTQ2OSwxOS41Mjg4NDIxIDIxLjI0NDgxLDE5LjgyMTg5NDcgMjEuMTgwMzg5LDE5Ljk3NjIxMDUgTDIxLjE4MDM4OSwxOS45NzYyMTA1IEwyMS4xODAzODksMTkuOTc2MjEwNSBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktMTAiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5wcHQgPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5NjczOTQ4LDAgMS45OTExNTUsMCBMMjIsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgWiI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9InBwdC0iIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTM3NyI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNFN0E3NEQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDMyLjAwMDA3OTYgQzEsMzIuNTU1MjQ0NCAxLjQ0MzQzODA0LDMzIDEuOTkxNjE3MDMsMzMgTDI4LjAwODM4MywzMyBDMjguNTUxODc2NiwzMyAyOSwzMi41NTE2MjI4IDI5LDMyLjAwMjk5NTMgQzI5LDMyLjAwMjk5NTMgMjkuMDg4OTg2MSw4LjUwMjk5NTgxIDI4Ljk4NzIwOTIsOC40MDExMTcxNCBDMjYuNDI0OTg0Niw1LjgzNjMyOTE1IDIxLjczMjg0OTEsMSAyMS41OTUyNzU5LDEgQzE1LjA2MDgxMDEsMSAxLjk5MTg3ODY2LDEgMS45OTE4Nzg2NiwxIEMxLjQ0Mzk0NjkxLDEgMSwxLjQ0NjAxNzIxIDEsMS45OTk5MjA0IEwxLDMyLjAwMDA3OTYgWiBNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODk5OTcyODgsMCAxLjk5MTg3ODY2LDAgTDIyLjAwNzk5NTYsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwyOSw3IEwzMCw4IEwzMCwxNCBMMjMsNyBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS0xMyIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDI0LDggQzIyLjg5NDU4MDQsOC4wMDA1MjE1NyAyMiw3LjExNDEzMzU0IDIyLDYgTDIyLDAgTDIyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNzgtQ29weS0zIiBmaWxsPSIjRjNDQTkxIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMSwxMCBMMTEsMjUgTDE0LDI1IEwxNCwyMCBMMTYuMDE3MjA2NiwyMC4wMjYzNzU0IEMxOC4xNTgwNDQ2LDIwLjAyNjM3NTQgMjAuMjI2ODM4MywxOS4yMDI1NjQgMjAuMjI2ODM4MywxNS4wNDUxNDIyIEMyMC4yMjY4MzgzLDExLjUzNzY3NzYgMTkuMTcxMjQ1NCw5Ljk5ODQ3MTk3IDE1LjQ3MjE4MzMsMTAuMDAwMDAxMSBMMTEsMTAgWiBNMTQsMTcgTDE0LDEzLjAwMjQxNDcgTDE1LjIyMjE2OTksMTMuMDAyNDE0NyBDMTYuODg3ODI1LDEyLjk1NDUwMyAxNi45OTczMjc1LDEzLjYyMDU0MjMgMTYuOTk3MzI3NSwxNC45MTU1MDYyIEMxNy4wNDExMjg1LDE2LjM1NjIyOTUgMTYuNTUwNjMzMiwxNi45OTk5OTk4IDE1LjIyMjE2OTksMTcgTDE0LDE3IFoiIGlkPSJJbXBvcnRlZC1MYXllcnMtQ29weS02IiBmaWxsPSIjRkZGRkZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzNHB4IiB2aWV3Qm94PSIwIDAgMzAgMzQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQxLjEgKDM1Mzc2KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT4zMCozNOaWh+aho+aJq+aPjzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg5MDA4MzY3NywwIDEuOTkyMDcyLDAgTDIyLjAxMDEzMTgsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Imljb24iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05MTYuMDAwMDAwLCAtNDQzLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0i6I+c5Y2V5paH5Lu28J+Msi1jb3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgwLjAwMDAwMCwgNDAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9Im11c2ljLWNvcHktMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgzNi4wMDAwMDAsIDQyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8L21hc2s+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBpZD0iUmVjdGFuZ2xlLTM3NyIgZmlsbD0iIzQzRDlBRCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTksMTEuOTk4NTAyMyBDOSwxMS40NDcwNDQ3IDkuNDU1NzYwOTYsMTEgMTAuMDAyNDczMywxMSBMMTkuOTk3NTI2NywxMSBDMjAuNTUxMTc3NCwxMSAyMSwxMS40NDc0ODk0IDIxLDExLjk5ODUwMjMgTDIxLDIzLjAwMTQ5NzcgQzIxLDIzLjU1Mjk1NTMgMjAuNTQ0MjM5LDI0IDE5Ljk5NzUyNjcsMjQgTDEwLjAwMjQ3MzMsMjQgQzkuNDQ4ODIyNTgsMjQgOSwyMy41NTI1MTA2IDksMjMuMDAxNDk3NyBMOSwxMS45OTg1MDIzIFoiIGlkPSJSZWN0YW5nbGUtODM3IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjUsMTQuNSBMMTcuNSwxNC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNDNEOUFEIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjUsMTcuNSBMMTcuNSwxNy41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNDNEOUFEIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjUsMjAuNSBMMTcuNSwyMC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNDNEOUFEIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS04MzkiIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMTAgOSAxMCA4IDYgOCA2IDEyIDcgMTIgNyA5Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS04MzkiIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyLjAwMDAwMCwgMTAuMDAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yMi4wMDAwMDAsIC0xMC4wMDAwMDApICIgcG9pbnRzPSIyNCA5IDI0IDggMjAgOCAyMCAxMiAyMSAxMiAyMSA5Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS04MzkiIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCAyNS4wMDAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTguMDAwMDAwLCAtMjUuMDAwMDAwKSAiIHBvaW50cz0iMTAgMjQgMTAgMjMgNiAyMyA2IDI3IDcgMjcgNyAyNCI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtODM5IiBmaWxsPSIjRkZGRkZGIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMi4wMDAwMDAsIDI1LjAwMDAwMCkgc2NhbGUoLTEsIC0xKSB0cmFuc2xhdGUoLTIyLjAwMDAwMCwgLTI1LjAwMDAwMCkgIiBwb2ludHM9IjI0IDI0IDI0IDIzIDIwIDIzIDIwIDI3IDIxIDI3IDIxIDI0Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEsMS45OTk5MjA0IEwxLDEuOTk5OTIwNCBMMSwzMi4wMDAwNzk2IEMxLDMyLjU1NTI0NDQgMS40NDM0MzgwNCwzMyAxLjk5MTYxNzAzLDMzIEwyOC4wMDgzODMsMzMgQzI4LjU1MTg3NjYsMzMgMjksMzIuNTUxNjIyOCAyOSwzMi4wMDI5OTUzIEwyOSw4IEwyOS4yOTI0NDUzLDguNzA2NjU4NTkgTDIxLjMwMjU3NzEsMC43MDY2NTg1ODcgTDIyLjAxMDEzMTgsMSBMMS45OTIwNzIsMSBDMS40NDQwMTE1MiwxIDEsMS40NDYwMzg4MiAxLDEuOTk5OTIwNCBMMSwxLjk5OTkyMDQgTDEsMS45OTk5MjA0IFogTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODkwMDgzNjc3LDAgMS45OTIwNzIsMCBMMjIuMDEwMTMxOCwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS0xMzc2LUNvcHktMTgiIGZpbGwtb3BhY2l0eT0iMC4xIiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjMwIDggMzAgMTQgMjIuNDk0Mzg0OCA3LjMzMDA3ODEyIDI5LjAxMzU0OTggNyI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMiwwIEwzMCw4IEwyMy45OTgxMDE0LDggQzIyLjg5NDU4MDQsOCAyMiw3LjExMzI5MzY1IDIyLDYuMDAxODk4NjUgTDIyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNzgiIGZpbGw9IiM4MEVGQ0UiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5mb3JtPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODkxNzYyMDgzLDAgMS45OTU4Mjg0LDAgTDIyLjA1MTYzNTcsMCBMMzAsNy45NjI0MDIzNCBMMzAsMzIuMDAwMTA3NSBDMzAsMzMuMTA0NjE3NiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgWiI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImZvcm0iIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTM3NyI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNFMTkyQjUiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDMyLjAwMDA3OTYgQzEsMzIuNTU1MjQ0NCAxLjQ0MzQzODA0LDMzIDEuOTkxNjE3MDMsMzMgTDI4LjAwODM4MywzMyBDMjguNTUxODc2NiwzMyAyOSwzMi41NTE2MjI4IDI5LDMyLjAwMjk5NTMgQzI5LDMyLjAwMjk5NTMgMjkuMDg4OTg2MSw4LjUwMjk5NTgxIDI4Ljk4NzIwOTIsOC40MDExMTcxNCBDMjYuNDI0OTg0Niw1LjgzNjMyOTE1IDIxLjczMjg0OTEsMSAyMS41OTUyNzU5LDEgQzE1LjA2MDgxMDEsMSAxLjk5MTg3ODY2LDEgMS45OTE4Nzg2NiwxIEMxLjQ0Mzk0NjkxLDEgMSwxLjQ0NjAxNzIxIDEsMS45OTk5MjA0IEwxLDMyLjAwMDA3OTYgWiBNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODk5OTcyODgsMCAxLjk5MTg3ODY2LDAgTDIyLjAwNzk5NTYsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwzMCw4IEwzMCwxNCBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS01IiBmaWxsLW9wYWNpdHk9IjAuMSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIsMCBMMzAsOCBMMjMuOTk4MTAxNCw4IEMyMi44OTQ1ODA0LDggMjIsNy4xMTMyOTM2NSAyMiw2LjAwMTg5ODY1IEwyMiwwIFoiIGlkPSJSZWN0YW5nbGUtMzc4IiBmaWxsPSIjRjNCREQ0IiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMywxNiBMOSwxNiBMOSwxMiBMMjEsMTIgTDIxLDE2IEwyMSwxNiBMMTUsMTYgTDE1LDEyIEwxMywxMiBMMTMsMTYgWiBNMTMsMTggTDksMTggTDksMjIgTDIxLDIyIEwyMSwxOCBMMjEsMTggTDE1LDE4IEwxNSwyMiBMMTMsMjIgTDEzLDE4IFogTTcsMTEuMDA2ODQ1NSBDNywxMC40NTA3ODAxIDcuNDQ0NjMwODYsMTAgOC4wMDA4NzE2NiwxMCBMMjEuOTk5MTI4MywxMCBDMjIuNTUxODk0NSwxMCAyMywxMC40NDk5NDg4IDIzLDExLjAwNjg0NTUgTDIzLDIyLjk5MzE1NDUgQzIzLDIzLjU0OTIxOTkgMjIuNTU1MzY5MSwyNCAyMS45OTkxMjgzLDI0IEw4LjAwMDg3MTY2LDI0IEM3LjQ0ODEwNTUsMjQgNywyMy41NTAwNTEyIDcsMjIuOTkzMTU0NSBMNywxMS4wMDY4NDU1IFoiIGlkPSJSZWN0YW5nbGUtNDMzLUNvcHkiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50ZXh0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg5NjczOTQ4LDAgMS45OTExNTUsMCBMMjIsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgWiI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9InRleHQiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTM3NyI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiM5QkIxQzUiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDMyLjAwMDA3OTYgQzEsMzIuNTU1MjQ0NCAxLjQ0MzQzODA0LDMzIDEuOTkxNjE3MDMsMzMgTDI4LjAwODM4MywzMyBDMjguNTUxODc2NiwzMyAyOSwzMi41NTE2MjI4IDI5LDMyLjAwMjk5NTMgQzI5LDMyLjAwMjk5NTMgMjkuMDg4OTg2MSw4LjUwMjk5NTgxIDI4Ljk4NzIwOTIsOC40MDExMTcxNCBDMjYuNDI0OTg0Niw1LjgzNjMyOTE1IDIxLjczMjg0OTEsMSAyMS41OTUyNzU5LDEgQzE1LjA2MDgxMDEsMSAxLjk5MTg3ODY2LDEgMS45OTE4Nzg2NiwxIEMxLjQ0Mzk0NjkxLDEgMSwxLjQ0NjAxNzIxIDEsMS45OTk5MjA0IEwxLDMyLjAwMDA3OTYgWiBNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODk5OTcyODgsMCAxLjk5MTg3ODY2LDAgTDIyLjAwNzk5NTYsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwyOSw3IEwzMCw4IEwzMCwxNCBMMjMsNyBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS0xMyIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDggTDI0LDggQzIyLjg5NDU4MDQsOC4wMDA1MjE1NyAyMiw3LjExNDEzMzU0IDIyLDYgTDIyLDAgTDIyLDAgWiIgaWQ9IlJlY3RhbmdsZS0zNzgtQ29weS0zIiBmaWxsPSIjRDNEQUUxIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik05LDEzLjY5MTQyODYgTDEwLjg0NjE1MzgsMTMuNjkxNDI4NiBDMTAuODQ2MTUzOCwxMy42OTE0Mjg2IDEwLjg2OTIzMDgsMTMuMTkyMzA3NyAxMS43NjkyMzA4LDEyLjg0NjE1MzggQzEyLjY2OTIzMDgsMTIuNSAxMy42MTUzODQ2LDEyLjk4MDY1OTMgMTMuNjE1Mzg0NiwxMi45ODA2NTkzIEwxMy42MTUzODQ2LDIwLjg5NDA2NTkgTDExLjcxNzE0MjksMjAuODk0MDY1OSBMMTEuNzE3MTQyOSwyMyBMMTguMzAzOTU2LDIzIEwxOC4zMDM5NTYsMjAuODk0MDY1OSBMMTYuMzg0NjE1NCwyMC44OTQwNjU5IEwxNi4zODQ2MTU0LDEyLjk4MDY1OTMgQzE2LjM4NDYxNTQsMTIuOTgwNjU5MyAxNy4xNTQwNjU5LDEyLjM4NDYxNTQgMTguMTc0MDY1OSwxMi44NDYxNTM4IEMxOS4xOTM0MDY2LDEzLjMwNzY5MjMgMTkuMTkzNDA2NiwxMy42OTE0Mjg2IDE5LjE5MzQwNjYsMTMuNjkxNDI4NiBMMjEsMTMuNjkxNDI4NiBMMjEsMTEgTDksMTEgTDksMTMuNjkxNDI4NiBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktOSIgZmlsbD0iI0ZGRkZGRiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5wbGF5PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODk0ODkxODE4LDAgMi4wMDI4MzI5NywwIEwyMi4xMjkwMjgzLDAgTDMwLDcuOTYyNDAyMzQgTDMwLDMyLjAwMDEwNzUgQzMwLDMzLjEwNDYxNzYgMjkuMTAyMTU5NiwzNCAyOC4wMDgzODMsMzQgTDEuOTkxNjE3MDMsMzQgQzAuODkxNjc3MzE2LDM0IDAsMzMuMTA4MDU4OSAwLDMyLjAwMDA3OTYgTDAsMS45OTk5MjA0IFoiPjwvcGF0aD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJwbGF5IiBza2V0Y2g6dHlwZT0iTVNMYXllckdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0zNzciPgogICAgICAgICAgICAgICAgPHVzZSBzdHJva2Utb3BhY2l0eT0iMC4wNSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9IiM5OTlBRUYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDMyLjAwMDA3OTYgQzEsMzIuNTU1MjQ0NCAxLjQ0MzQzODA0LDMzIDEuOTkxNjE3MDMsMzMgTDI4LjAwODM4MywzMyBDMjguNTUxODc2NiwzMyAyOSwzMi41NTE2MjI4IDI5LDMyLjAwMjk5NTMgQzI5LDMyLjAwMjk5NTMgMjkuMDg4OTg2MSw4LjUwMjk5NTgxIDI4Ljk4NzIwOTIsOC40MDExMTcxNCBDMjYuNDI0OTg0Niw1LjgzNjMyOTE1IDIxLjczMjg0OTEsMSAyMS41OTUyNzU5LDEgQzE1LjA2MDgxMDEsMSAxLjk5MTg3ODY2LDEgMS45OTE4Nzg2NiwxIEMxLjQ0Mzk0NjkxLDEgMSwxLjQ0NjAxNzIxIDEsMS45OTk5MjA0IEwxLDMyLjAwMDA3OTYgWiBNMCwxLjk5OTkyMDQgQzAsMC44OTUzOTQ4NjMgMC44ODk5OTcyODgsMCAxLjk5MTg3ODY2LDAgTDIyLjAwNzk5NTYsMCBMMzAsOCBMMzAsMzIuMDAyOTk1MyBDMzAsMzMuMTA1OTEwNiAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgTDAsMS45OTk5MjA0IFoiIGlkPSJTaGFwZSIgZmlsbC1vcGFjaXR5PSIwLjA1IiBmaWxsPSIjMDAwMDAwIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMyw3IEwzMCw4IEwzMCwxNSBMMjMsNyBaIiBpZD0iUmVjdGFuZ2xlLTEzNzYtQ29weS00MSIgZmlsbC1vcGFjaXR5PSIwLjEiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIyLDAgTDMwLDguMDA3NjI5MzkgTDIzLjk5ODEwMTQsOC4wMDc2MjkzOSBDMjIuODk0NTgwNCw4LjAwNzYyOTM5IDIyLDcuMTIwMDc3NDEgMjIsNi4wMDc2MjI1IEwyMiwwIFoiIGlkPSJSZWN0YW5nbGUtMzc4LUNvcHktMTQiIGZpbGw9IiNDMkMzRjgiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS00MzItQ29weSIgZmlsbD0iI0ZGRkZGRiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCIgcG9pbnRzPSIxMC45OTAyNzY2IDExLjE0MTgzNDcgMjAuODM0MjM5NyAxNy4yNjcyOTY5IDEwLjk5MDI3NjYgMjMuNDA0NDI5MyAiPjwvcG9seWdvbj4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzRweCIgdmlld0JveD0iMCAwIDMwIDM0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDcyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT53b3JkPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9InBhdGgtMiIgZD0iTTAsMS45OTk5MjA0IEMwLDAuODk1Mzk0ODYzIDAuODg4NjIyNDc2LDAgMi4wMDgyOTg0MSwwIEwyMS45NzM5OTksMCBMMzAsOC4wMjQ1MzYxMyBMMzAsMzIuMDA0ODc5OSBDMzAsMzMuMTA2NzU0MyAyOS4xMDIxNTk2LDM0IDI4LjAwODM4MywzNCBMMS45OTE2MTcwMywzNCBDMC44OTE2NzczMTYsMzQgMCwzMy4xMDgwNTg5IDAsMzIuMDAwMDc5NiBMMCwxLjk5OTkyMDQgWiI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9IndvcmQiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTM3Ny1Db3B5Ij4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iIzVCQkFFRiIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCIgeGxpbms6aHJlZj0iI3BhdGgtMiI+PC91c2U+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPHBhdGggZD0iTTEsMzIuMDAwMDc5NiBDMSwzMi41NTUyNDQ0IDEuNDQzNDM4MDQsMzMgMS45OTE2MTcwMywzMyBMMjguMDA4MzgzLDMzIEMyOC41NTE4NzY2LDMzIDI5LDMyLjU1MTYyMjggMjksMzIuMDAyOTk1MyBDMjksMzIuMDAyOTk1MyAyOS4wODg5ODYxLDguNTAyOTk1ODEgMjguOTg3MjA5Miw4LjQwMTExNzE0IEMyNi40MjQ5ODQ2LDUuODM2MzI5MTUgMjEuNzMyODQ5MSwxIDIxLjU5NTI3NTksMSBDMTUuMDYwODEwMSwxIDEuOTkxODc4NjYsMSAxLjk5MTg3ODY2LDEgQzEuNDQzOTQ2OTEsMSAxLDEuNDQ2MDE3MjEgMSwxLjk5OTkyMDQgTDEsMzIuMDAwMDc5NiBaIE0wLDEuOTk5OTIwNCBDMCwwLjg5NTM5NDg2MyAwLjg4OTk5NzI4OCwwIDEuOTkxODc4NjYsMCBMMjIuMDA3OTk1NiwwIEwzMCw4IEwzMCwzMi4wMDI5OTUzIEMzMCwzMy4xMDU5MTA2IDI5LjEwMjE1OTYsMzQgMjguMDA4MzgzLDM0IEwxLjk5MTYxNzAzLDM0IEMwLjg5MTY3NzMxNiwzNCAwLDMzLjEwODA1ODkgMCwzMi4wMDAwNzk2IEwwLDEuOTk5OTIwNCBMMCwxLjk5OTkyMDQgWiIgaWQ9IlNoYXBlIiBmaWxsLW9wYWNpdHk9IjAuMDUiIGZpbGw9IiMwMDAwMDAiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTIzLDcgTDI5LDcgTDMwLDggTDMwLDE0IEwyMyw3IEwyMyw3IFoiIGlkPSJSZWN0YW5nbGUtMTM3Ni1Db3B5LTEzIiBmaWxsLW9wYWNpdHk9IjAuMSIgZmlsbD0iIzAwMDAwMCIgc2tldGNoOnR5cGU9Ik1TU2hhcGVHcm91cCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIsMCBMMzAsOCBMMjQsOCBDMjIuODk0NTgwNCw4LjAwMDUyMTU3IDIyLDcuMTE0MTMzNTQgMjIsNiBMMjIsMCBMMjIsMCBaIiBpZD0iUmVjdGFuZ2xlLTM3OC1Db3B5LTMiIGZpbGw9IiM4QUQ1RkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE4LjY5MDM3NDgsMTEgQzE4LjYwMDUyOTEsMTEgMTguNTI2MDU4LDExLjA2MjY5OTggMTguNTI2MDU4LDExLjEzODYxMjIgTDE4LjUyNjA1OCwxMi44MDM4ODA2IEMxOC41MjYwNTgsMTIuODc5NzkzIDE4LjYwMDUyOTEsMTIuOTQyNDkyOCAxOC42OTAzNzQ4LDEyLjk0MjQ5MjggTDIwLjU1MTY3MDIsMTIuOTQyNDkyOCBDMjAuNjU0NDg4MiwxMi45NDI0OTI4IDIwLjczMjU2MjcsMTMuMDIxNzY4NSAyMC43MTMzNDQ0LDEzLjEwNzc3MDUgTDE5LjI4Mjc3OTgsMTkuNzE0MDcxOSBMMTguNzg2NDY2NCwxOS43MTQwNzE5IEwxNi43MzgyNzI4LDExLjExMjE4NyBDMTYuNzI0MDk5MiwxMS4wNDc1NjU0IDE2LjY1NjM1NDYsMTEgMTYuNTc2ODM4OCwxMSBMMTMuNjE5Mzc3OCwxMSBDMTMuNTQyNTA0NSwxMSAxMy40NzQ3NTk5LDExLjA0NTE2MzEgMTMuNDU5MTQ1LDExLjEwOTA2NCBMMTEuMTU4NDcwNSwxOS43MTQwNzE5IEwxMC43MTE2NDQzLDE5LjcxNDA3MTkgTDguOTI0MzM5NDcsMTEuMTE1NTUwMiBDOC45MTEzNjcxLDExLjA0ODUyNjMgOC44NDIxODExMSwxMSA4Ljc2MjY2NTI2LDExIEw2LjE2NDgyNzMyLDExIEM2LjA2MDgwODExLDExIDUuOTgyNDkzNDEsMTEuMDgwNDc2OCA2LjAwMzM5MzM0LDExLjE2NzQzOTcgTDkuMTYwMDA0MjYsMjMuODg5MDE0MSBDOS4xNzU2MTkxNiwyMy45NTM4NzYgOS4yNDMzNjM3NywyNCA5LjMyMTY3ODQ3LDI0IEwxMi4yODAxMDA0LDI0IEMxMi4zNTcyMTM5LDI0IDEyLjQyMzc1NzQsMjMuOTUzODc2IDEyLjQ0MDU3MzQsMjMuODg5OTc1MSBMMTQuODI0NjA3NCwxNC43MDA5NzAyIEMxNC44NjIzMjM0LDE0LjU1MzQ2OTUgMTUuMTEyNjQyMiwxNC41NTQ0MzA0IDE1LjE0NjI3NDIsMTQuNzAzMTMyMiBMMTcuMzMxMTU4MywyMy44ODc4MTMgQzE3LjM0Njc3MzIsMjMuOTUyNjc0OSAxNy40MTQ1MTc4LDI0IDE3LjQ5MjgzMjUsMjQgTDIwLjM3ODIyNDcsMjQgQzIwLjQ1NTMzODMsMjQgMjAuNTIyODQyNywyMy45NTM4NzYgMjAuNTM4Njk3OCwyMy44ODk5NzUxIEwyMy44MzYwODMsMTEuMTY4NDAwNiBDMjMuODU4MTg0MSwxMS4wODE2Nzc5IDIzLjc3OTg2OTQsMTEgMjMuNjc1ODUwMSwxMSBMMTguNjkwMzc0OCwxMSBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzIiBmaWxsPSIjRkZGRkZGIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e){t.exports={"note-view":"bulb__note-view","image-view":"bulb__image-view",focused:"bulb__focused","image-container":"bulb__image-container","read-only":"bulb__read-only"}},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./contextmenu.jst":904,"./modal.jst":905};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=903},function(t,e){t.exports='<div class="bulb__contextmenu">\n    <ul class="bulb__menu">\n        <% _.each(items, function(item, i) { %>\n            <% if (item.type === 0) { %>\n                <li class="bulb__menu-item<%= item.isDisabled ? \' bulb__disabled\' : \'\' %>" data-index="<%= item.index %>">\n                    <span class="bulb__menu-item-label"><%= item.label %></span>\n                    <span class="bulb__menu-item-shortcut"><%= item.key %></span>\n                </li>\n            <% } %>\n        <% }) %>\n    </ul>\n</div>\n'},function(t,e){t.exports='<div class="bulb__modal" v-show="visibleState">\n    <div class="bulb__modal-mask"></div>\n    <div class="bulb__modal-container">\n        <div class="bulb__modal-header">\n            <span class="bulb__modal-title"><%= title %></span>\n        </div>\n        <div class="bulb__modal-body"><%= content %></div>\n        <div class="bulb__modal-footer">\n            <button class="bulb__modal-button"></button>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";function o(t,e){var t=i.enc.Utf8.parse(t),n=i.enc.Utf8.parse(e);return i.AES.encrypt(n,t,{iv:s,mode:i.mode.CBC}).toString()}function r(t,e){var n=i.enc.Utf8.parse(t),t=i.enc.Utf8.parse(t);return i.AES.decrypt(e,t,{iv:n,mode:i.mode.CBC}).toString(i.enc.Utf8)}Object.defineProperty(e,"__esModule",{value:!0}),e.AESEnc=o,e.AESDec=r;var i=i||function(t,e){var n={},o=n.lib={},r=function(){},i=o.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,o=this.sigBytes;if(t=t.sigBytes,this.clamp(),o%4)for(var r=0;r<t;r++)e[o+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(o+r)%4*8;else if(65535<n.length)for(r=0;r<t;r+=4)e[o+r>>>2]=n[r>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],o=0;o<e;o+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},l=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],o=0;o<t;o++){var r=e[o>>>2]>>>24-o%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o+=2)n[o>>>3]|=parseInt(t.substr(o,2),16)<<24-o%8*4;return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],o=0;o<t;o++)n.push(String.fromCharCode(e[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o++)n[o>>>2]|=(255&t.charCodeAt(o))<<24-o%4*8;return new s.init(n,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},p=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,o=n.words,r=n.sigBytes,i=this.blockSize,a=r/(4*i),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*i,r=t.min(4*e,r),e){for(var l=0;l<e;l+=i)this._doProcessBlock(o,l);l=o.splice(0,e),n.sigBytes-=r}return new s.init(l,r)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});o.Hasher=p.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}});var d=n.algo={};return n}(Math);!function(){var t=i,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,o=this._map;t.clamp(),t=[];for(var r=0;r<n;r+=3)for(var i=(e[r>>>2]>>>24-r%4*8&255)<<16|(e[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;4>s&&r+.75*s<n;s++)t.push(o.charAt(i>>>6*(3-s)&63));if(e=o.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,o=this._map,r=o.charAt(64);r&&-1!=(r=t.indexOf(r))&&(n=r);for(var r=[],i=0,s=0;s<n;s++)if(s%4){var a=o.indexOf(t.charAt(s-1))<<s%4*2,l=o.indexOf(t.charAt(s))>>>6-s%4*2;r[i>>>2]|=(a|l)<<24-i%4*8,i++}return e.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,o,r,i,s){return((t=t+(e&n|~e&o)+r+s)<<i|t>>>32-i)+e}function n(t,e,n,o,r,i,s){return((t=t+(e&o|n&~o)+r+s)<<i|t>>>32-i)+e}function o(t,e,n,o,r,i,s){return((t=t+(e^n^o)+r+s)<<i|t>>>32-i)+e}function r(t,e,n,o,r,i,s){return((t=t+(n^(e|~o))+r+s)<<i|t>>>32-i)+e}for(var s=i,a=s.lib,l=a.WordArray,c=a.Hasher,a=s.algo,u=[],p=0;64>p;p++)u[p]=4294967296*t.abs(t.sin(p+1))|0;a=a.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,i){for(var s=0;16>s;s++){var a=i+s,l=t[a];t[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s=this._hash.words,a=t[i+0],l=t[i+1],c=t[i+2],p=t[i+3],d=t[i+4],h=t[i+5],f=t[i+6],g=t[i+7],m=t[i+8],_=t[i+9],b=t[i+10],y=t[i+11],v=t[i+12],w=t[i+13],I=t[i+14],C=t[i+15],M=s[0],T=s[1],k=s[2],S=s[3],M=e(M,T,k,S,a,7,u[0]),S=e(S,M,T,k,l,12,u[1]),k=e(k,S,M,T,c,17,u[2]),T=e(T,k,S,M,p,22,u[3]),M=e(M,T,k,S,d,7,u[4]),S=e(S,M,T,k,h,12,u[5]),k=e(k,S,M,T,f,17,u[6]),T=e(T,k,S,M,g,22,u[7]),M=e(M,T,k,S,m,7,u[8]),S=e(S,M,T,k,_,12,u[9]),k=e(k,S,M,T,b,17,u[10]),T=e(T,k,S,M,y,22,u[11]),M=e(M,T,k,S,v,7,u[12]),S=e(S,M,T,k,w,12,u[13]),k=e(k,S,M,T,I,17,u[14]),T=e(T,k,S,M,C,22,u[15]),M=n(M,T,k,S,l,5,u[16]),S=n(S,M,T,k,f,9,u[17]),k=n(k,S,M,T,y,14,u[18]),T=n(T,k,S,M,a,20,u[19]),M=n(M,T,k,S,h,5,u[20]),S=n(S,M,T,k,b,9,u[21]),k=n(k,S,M,T,C,14,u[22]),T=n(T,k,S,M,d,20,u[23]),M=n(M,T,k,S,_,5,u[24]),S=n(S,M,T,k,I,9,u[25]),k=n(k,S,M,T,p,14,u[26]),T=n(T,k,S,M,m,20,u[27]),M=n(M,T,k,S,w,5,u[28]),S=n(S,M,T,k,c,9,u[29]),k=n(k,S,M,T,g,14,u[30]),T=n(T,k,S,M,v,20,u[31]),M=o(M,T,k,S,h,4,u[32]),S=o(S,M,T,k,m,11,u[33]),k=o(k,S,M,T,y,16,u[34]),T=o(T,k,S,M,I,23,u[35]),M=o(M,T,k,S,l,4,u[36]),S=o(S,M,T,k,d,11,u[37]),k=o(k,S,M,T,g,16,u[38]),T=o(T,k,S,M,b,23,u[39]),M=o(M,T,k,S,w,4,u[40]),S=o(S,M,T,k,a,11,u[41]),k=o(k,S,M,T,p,16,u[42]),T=o(T,k,S,M,f,23,u[43]),M=o(M,T,k,S,_,4,u[44]),S=o(S,M,T,k,v,11,u[45]),k=o(k,S,M,T,C,16,u[46]),T=o(T,k,S,M,c,23,u[47]),M=r(M,T,k,S,a,6,u[48]),S=r(S,M,T,k,g,10,u[49]),k=r(k,S,M,T,I,15,u[50]),T=r(T,k,S,M,h,21,u[51]),M=r(M,T,k,S,v,6,u[52]),S=r(S,M,T,k,p,10,u[53]),k=r(k,S,M,T,b,15,u[54]),T=r(T,k,S,M,l,21,u[55]),M=r(M,T,k,S,m,6,u[56]),S=r(S,M,T,k,C,10,u[57]),k=r(k,S,M,T,f,15,u[58]),T=r(T,k,S,M,w,21,u[59]),M=r(M,T,k,S,d,6,u[60]),S=r(S,M,T,k,y,10,u[61]),k=r(k,S,M,T,c,15,u[62]),T=r(T,k,S,M,_,21,u[63]);s[0]=s[0]+M|0,s[1]=s[1]+T|0,s[2]=s[2]+k|0,s[3]=s[3]+S|0},_doFinalize:function(){var e=this._data,n=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var i=t.floor(o/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,o=0;4>o;o++)r=n[o],n[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=c._createHelper(a),s.HmacMD5=c._createHmacHelper(a)}(Math),function(){var t=i,e=t.lib,n=e.Base,o=e.WordArray,e=t.algo,r=e.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),s=i.words,a=n.keySize,n=n.iterations;s.length<a;){l&&r.update(l);var l=r.update(t).finalize(e);r.reset();for(var c=1;c<n;c++)l=r.finalize(l),r.reset();i.concat(l)}return i.sigBytes=4*a,i}});t.EvpKDF=function(t,e,n){return r.create(n).compute(t,e)}}(),i.lib.Cipher||function(t){var e=i,n=e.lib,o=n.Base,r=n.WordArray,s=n.BufferedBlockAlgorithm,a=e.enc.Base64,l=e.algo.EvpKDF,c=n.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,o){return("string"==typeof n?g:f).encrypt(t,e,n,o)},decrypt:function(e,n,o){return("string"==typeof n?g:f).decrypt(t,e,n,o)}}}});n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=e.mode={},p=function(t,e,n){var o=this._iv;o?this._iv=void 0:o=this._prevBlock;for(var r=0;r<n;r++)t[e+r]^=o[r]},d=(n.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();d.Encryptor=d.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize;p.call(this,t,e,o),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+o)}}),d.Decryptor=d.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize,r=t.slice(e,e+o);n.decryptBlock(t,e),p.call(this,t,e,o),this._prevBlock=r}}),u=u.CBC=d,d=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,n=n-t.sigBytes%n,o=n<<24|n<<16|n<<8|n,i=[],s=0;s<n;s+=4)i.push(o);n=r.create(i,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:d}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=n.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),u=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?r.create([1398893684,1701076831]).concat(t).concat(e):e).toString(a)},parse:function(t){t=a.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=r.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:n})}},f=n.SerializableCipher=o.extend({cfg:o.extend({format:u}),encrypt:function(t,e,n,o){o=this.cfg.extend(o);var r=t.createEncryptor(n,o);return e=r.finalize(e),r=r.cfg,h.create({ciphertext:e,key:n,iv:r.iv,algorithm:t,mode:r.mode,padding:r.padding,blockSize:t.blockSize,formatter:o.format})},decrypt:function(t,e,n,o){return o=this.cfg.extend(o),e=this._parse(e,o.format),t.createDecryptor(n,o).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,n,o){return o||(o=r.random(8)),t=l.create({keySize:e+n}).compute(t,o),n=r.create(t.words.slice(e),4*n),t.sigBytes=4*e,h.create({key:t,iv:n,salt:o})}},g=n.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:e}),encrypt:function(t,e,n,o){return o=this.cfg.extend(o),n=o.kdf.execute(n,t.keySize,t.ivSize),o.iv=n.iv,t=f.encrypt.call(this,t,e,n.key,o),t.mixIn(n),t},decrypt:function(t,e,n,o){return o=this.cfg.extend(o),e=this._parse(e,o.format),n=o.kdf.execute(n,t.keySize,t.ivSize,e.salt),o.iv=n.iv,f.decrypt.call(this,t,e,n.key,o)}})}(),function(){for(var t=i,e=t.lib.BlockCipher,n=t.algo,o=[],r=[],s=[],a=[],l=[],c=[],u=[],p=[],d=[],h=[],f=[],g=0;256>g;g++)f[g]=128>g?g<<1:g<<1^283;for(var m=0,_=0,g=0;256>g;g++){var b=_^_<<1^_<<2^_<<3^_<<4,b=b>>>8^255&b^99;o[m]=b,r[b]=m;var y=f[m],v=f[y],w=f[v],I=257*f[b]^16843008*b;s[m]=I<<24|I>>>8,a[m]=I<<16|I>>>16,l[m]=I<<8|I>>>24,c[m]=I,I=16843009*w^65537*v^257*y^16843008*m,u[b]=I<<24|I>>>8,p[b]=I<<16|I>>>16,d[b]=I<<8|I>>>24,h[b]=I,m?(m=y^f[f[f[w^y]]],_^=f[f[_]]):m=_=1}var C=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],i=0;i<t;i++)if(i<n)r[i]=e[i];else{var s=r[i-1];i%n?6<n&&4==i%n&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=s<<8|s>>>24,s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=C[i/n|0]<<24),r[i]=r[i-n]^s}for(e=this._invKeySchedule=[],n=0;n<t;n++)i=t-n,s=n%4?r[i]:r[i-4],e[n]=4>n||4>=i?s:u[o[s>>>24]]^p[o[s>>>16&255]]^d[o[s>>>8&255]]^h[o[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,l,c,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,p,d,h,r),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,o,r,i,s,a){for(var l=this._nRounds,c=t[e]^n[0],u=t[e+1]^n[1],p=t[e+2]^n[2],d=t[e+3]^n[3],h=4,f=1;f<l;f++)var g=o[c>>>24]^r[u>>>16&255]^i[p>>>8&255]^s[255&d]^n[h++],m=o[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^s[255&c]^n[h++],_=o[p>>>24]^r[d>>>16&255]^i[c>>>8&255]^s[255&u]^n[h++],d=o[d>>>24]^r[c>>>16&255]^i[u>>>8&255]^s[255&p]^n[h++],c=g,u=m,p=_;g=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[p>>>8&255]<<8|a[255&d])^n[h++],m=(a[u>>>24]<<24|a[p>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^n[h++],_=(a[p>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^n[h++],d=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&p])^n[h++],t[e]=g,t[e+1]=m,t[e+2]=_,t[e+3]=d},keySize:8});t.AES=e._createHelper(n)}();var s=i.enc.Utf8.parse("16-Bytes--String")},function(t,e,n){!function(){var e=n(908),o=n(275).utf8,r=n(909),i=n(275).bin,s=function(t,n){t.constructor==String?t=n&&"binary"===n.encoding?i.stringToBytes(t):o.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var a=e.bytesToWords(t),l=8*t.length,c=1732584193,u=-271733879,p=-1732584194,d=271733878,h=0;h<a.length;h++)a[h]=16711935&(a[h]<<8|a[h]>>>24)|4278255360&(a[h]<<24|a[h]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;for(var f=s._ff,g=s._gg,m=s._hh,_=s._ii,h=0;h<a.length;h+=16){var b=c,y=u,v=p,w=d;c=f(c,u,p,d,a[h+0],7,-680876936),d=f(d,c,u,p,a[h+1],12,-389564586),p=f(p,d,c,u,a[h+2],17,606105819),u=f(u,p,d,c,a[h+3],22,-1044525330),c=f(c,u,p,d,a[h+4],7,-176418897),d=f(d,c,u,p,a[h+5],12,1200080426),p=f(p,d,c,u,a[h+6],17,-1473231341),u=f(u,p,d,c,a[h+7],22,-45705983),c=f(c,u,p,d,a[h+8],7,1770035416),d=f(d,c,u,p,a[h+9],12,-1958414417),p=f(p,d,c,u,a[h+10],17,-42063),u=f(u,p,d,c,a[h+11],22,-1990404162),c=f(c,u,p,d,a[h+12],7,1804603682),d=f(d,c,u,p,a[h+13],12,-40341101),p=f(p,d,c,u,a[h+14],17,-1502002290),u=f(u,p,d,c,a[h+15],22,1236535329),c=g(c,u,p,d,a[h+1],5,-165796510),d=g(d,c,u,p,a[h+6],9,-1069501632),p=g(p,d,c,u,a[h+11],14,643717713),u=g(u,p,d,c,a[h+0],20,-373897302),c=g(c,u,p,d,a[h+5],5,-701558691),d=g(d,c,u,p,a[h+10],9,38016083),p=g(p,d,c,u,a[h+15],14,-660478335),u=g(u,p,d,c,a[h+4],20,-405537848),c=g(c,u,p,d,a[h+9],5,568446438),d=g(d,c,u,p,a[h+14],9,-1019803690),p=g(p,d,c,u,a[h+3],14,-187363961),u=g(u,p,d,c,a[h+8],20,1163531501),c=g(c,u,p,d,a[h+13],5,-1444681467),d=g(d,c,u,p,a[h+2],9,-51403784),p=g(p,d,c,u,a[h+7],14,1735328473),u=g(u,p,d,c,a[h+12],20,-1926607734),c=m(c,u,p,d,a[h+5],4,-378558),d=m(d,c,u,p,a[h+8],11,-2022574463),p=m(p,d,c,u,a[h+11],16,1839030562),u=m(u,p,d,c,a[h+14],23,-35309556),c=m(c,u,p,d,a[h+1],4,-1530992060),d=m(d,c,u,p,a[h+4],11,1272893353),p=m(p,d,c,u,a[h+7],16,-155497632),u=m(u,p,d,c,a[h+10],23,-1094730640),c=m(c,u,p,d,a[h+13],4,681279174),d=m(d,c,u,p,a[h+0],11,-358537222),p=m(p,d,c,u,a[h+3],16,-722521979),u=m(u,p,d,c,a[h+6],23,76029189),c=m(c,u,p,d,a[h+9],4,-640364487),d=m(d,c,u,p,a[h+12],11,-421815835),p=m(p,d,c,u,a[h+15],16,530742520),u=m(u,p,d,c,a[h+2],23,-995338651),c=_(c,u,p,d,a[h+0],6,-198630844),d=_(d,c,u,p,a[h+7],10,1126891415),p=_(p,d,c,u,a[h+14],15,-1416354905),u=_(u,p,d,c,a[h+5],21,-57434055),c=_(c,u,p,d,a[h+12],6,1700485571),d=_(d,c,u,p,a[h+3],10,-1894986606),p=_(p,d,c,u,a[h+10],15,-1051523),u=_(u,p,d,c,a[h+1],21,-2054922799),c=_(c,u,p,d,a[h+8],6,1873313359),d=_(d,c,u,p,a[h+15],10,-30611744),p=_(p,d,c,u,a[h+6],15,-1560198380),u=_(u,p,d,c,a[h+13],21,1309151649),c=_(c,u,p,d,a[h+4],6,-145523070),d=_(d,c,u,p,a[h+11],10,-1120210379),p=_(p,d,c,u,a[h+2],15,718787259),u=_(u,p,d,c,a[h+9],21,-343485551),c=c+b>>>0,u=u+y>>>0,p=p+v>>>0,d=d+w>>>0}return e.endian([c,u,p,d])};s._ff=function(t,e,n,o,r,i,s){var a=t+(e&n|~e&o)+(r>>>0)+s;return(a<<i|a>>>32-i)+e},s._gg=function(t,e,n,o,r,i,s){var a=t+(e&o|n&~o)+(r>>>0)+s;return(a<<i|a>>>32-i)+e},s._hh=function(t,e,n,o,r,i,s){var a=t+(e^n^o)+(r>>>0)+s;return(a<<i|a>>>32-i)+e},s._ii=function(t,e,n,o,r,i,s){var a=t+(n^(e|~o))+(r>>>0)+s;return(a<<i|a>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var o=e.wordsToBytes(s(t,n));return n&&n.asBytes?o:n&&n.asString?i.bytesToString(o):e.bytesToHex(o)}}()},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,o=0;n<t.length;n++,o+=8)e[o>>>5]|=t[n]<<24-o%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],o=0;o<t.length;o+=3)for(var r=t[o]<<16|t[o+1]<<8|t[o+2],i=0;i<4;i++)8*o+6*i<=8*t.length?n.push(e.charAt(r>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],o=0,r=0;o<t.length;r=++o%4)0!=r&&n.push((e.indexOf(t.charAt(o-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(o))>>>6-2*r);return n}};t.exports=n}()},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function o(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||o(t)||!!t._isBuffer)}}])});